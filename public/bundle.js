(()=>{var hse=Object.create;var vy=Object.defineProperty;var ose=Object.getOwnPropertyDescriptor;var use=Object.getOwnPropertyNames;var lse=Object.getPrototypeOf,fse=Object.prototype.hasOwnProperty;var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var dse=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of use(t))!fse.call(e,s)&&s!==i&&vy(e,s,{get:()=>t[s],enumerable:!(r=ose(t,s))||r.enumerable});return e};var vse=(e,t,i)=>(i=e!=null?hse(lse(e)):{},dse(t||!e||!e.__esModule?vy(i,"default",{value:e,enumerable:!0}):i,e));var cy=(e,t,i)=>new Promise((r,s)=>{var n=o=>{try{h(i.next(o))}catch(u){s(u)}},a=o=>{try{h(i.throw(o))}catch(u){s(u)}},h=o=>o.done?r(o.value):Promise.resolve(o.value).then(n,a);h((i=i.apply(e,t)).next())});var Si=l((_ke,py)=>{py.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}});var sd=l((wke,my)=>{var cse={DEFAULT:0,LINEAR:0,NEAREST:1};my.exports=cse});var Jt=l((Cke,gy)=>{var pse={VERSION:"3.60.0-dev",BlendModes:Si(),ScaleModes:sd(),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};gy.exports=pse});var ae=l((Rke,xy)=>{var mse=function(e){if(typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0};xy.exports=mse});var ze=l((qke,Ey)=>{var yy=ae(),Ty=function(){var e,t,i,r,s,n,a=arguments[0]||{},h=1,o=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},h=2),o===h&&(a=this,--h);h<o;h++)if((e=arguments[h])!=null)for(t in e)i=a[t],r=e[t],a!==r&&(u&&r&&(yy(r)||(s=Array.isArray(r)))?(s?(s=!1,n=i&&Array.isArray(i)?i:[]):n=i&&yy(i)?i:{},a[t]=Ty(u,n,r)):r!==void 0&&(a[t]=r));return a};Ey.exports=Ty});var Fa=l((Ake,Sy)=>{var gse={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};Sy.exports=gse});var _i=l((Pke,_y)=>{var xse=function(e){return e.y+e.height-e.height*e.originY};_y.exports=xse});var Ys=l((Mke,wy)=>{var yse=function(e){return e.x-e.width*e.originX+e.width*.5};wy.exports=yse});var Xs=l((bke,Cy)=>{var Tse=function(e,t){var i=e.width*e.originX;return e.x=t+i-e.width*.5,e};Cy.exports=Tse});var Xi=l((Lke,Ry)=>{var Ese=function(e,t){return e.y=t+e.height*e.originY,e};Ry.exports=Ese});var nd=l((Oke,qy)=>{var Sse=_i(),_se=Ys(),wse=Xs(),Cse=Xi(),Rse=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),wse(e,_se(t)+i),Cse(e,Sse(t)+r),e};qy.exports=Rse});var wi=l((Fke,Ay)=>{var qse=function(e){return e.x-e.width*e.originX};Ay.exports=qse});var Vi=l((Dke,Py)=>{var Ase=function(e,t){return e.x=t+e.width*e.originX,e};Py.exports=Ase});var ad=l((Ike,My)=>{var Pse=_i(),Mse=wi(),bse=Vi(),Lse=Xi(),Ose=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),bse(e,Mse(t)-i),Lse(e,Pse(t)+r),e};My.exports=Ose});var Ci=l((Nke,by)=>{var Fse=function(e){return e.x+e.width-e.width*e.originX};by.exports=Fse});var Wi=l((Gke,Ly)=>{var Dse=function(e,t){return e.x=t-e.width+e.width*e.originX,e};Ly.exports=Dse});var hd=l((Bke,Oy)=>{var Ise=_i(),Nse=Ci(),Gse=Wi(),Bse=Xi(),Use=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Gse(e,Nse(t)+i),Bse(e,Ise(t)+r),e};Oy.exports=Use});var Hi=l((Uke,Fy)=>{var kse=function(e,t){return e.y=t-e.height+e.height*e.originY,e};Fy.exports=kse});var od=l((kke,Dy)=>{var zse=_i(),Yse=wi(),Xse=Hi(),Vse=Wi(),Wse=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Vse(e,Yse(t)-i),Xse(e,zse(t)+r),e};Dy.exports=Wse});var Vs=l((zke,Iy)=>{var Hse=function(e){return e.y-e.height*e.originY+e.height*.5};Iy.exports=Hse});var Ws=l((Yke,Ny)=>{var Kse=function(e,t){var i=e.height*e.originY;return e.y=t+i-e.height*.5,e};Ny.exports=Kse});var ud=l((Xke,Gy)=>{var Zse=Vs(),Jse=wi(),Qse=Ws(),$se=Wi(),jse=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),$se(e,Jse(t)-i),Qse(e,Zse(t)+r),e};Gy.exports=jse});var Ri=l((Vke,By)=>{var ene=function(e){return e.y-e.height*e.originY};By.exports=ene});var ld=l((Wke,Uy)=>{var tne=wi(),ine=Ri(),rne=Wi(),sne=Xi(),nne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),rne(e,tne(t)-i),sne(e,ine(t)-r),e};Uy.exports=nne});var fd=l((Hke,ky)=>{var ane=_i(),hne=Ci(),one=Hi(),une=Vi(),lne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),une(e,hne(t)+i),one(e,ane(t)+r),e};ky.exports=lne});var dd=l((Kke,zy)=>{var fne=Vs(),dne=Ci(),vne=Ws(),cne=Vi(),pne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),cne(e,dne(t)+i),vne(e,fne(t)+r),e};zy.exports=pne});var vd=l((Zke,Yy)=>{var mne=Ci(),gne=Ri(),xne=Vi(),yne=Xi(),Tne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),xne(e,mne(t)+i),yne(e,gne(t)-r),e};Yy.exports=Tne});var cd=l((Jke,Xy)=>{var Ene=Ys(),Sne=Ri(),_ne=Hi(),wne=Xs(),Cne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),wne(e,Ene(t)+i),_ne(e,Sne(t)-r),e};Xy.exports=Cne});var pd=l((Qke,Vy)=>{var Rne=wi(),qne=Ri(),Ane=Hi(),Pne=Vi(),Mne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Pne(e,Rne(t)-i),Ane(e,qne(t)-r),e};Vy.exports=Mne});var md=l(($ke,Wy)=>{var bne=Ci(),Lne=Ri(),One=Hi(),Fne=Wi(),Dne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Fne(e,bne(t)+i),One(e,Lne(t)-r),e};Wy.exports=Dne});var gd=l((jke,Hy)=>{var li=Fa(),Qt=[];Qt[li.BOTTOM_CENTER]=nd();Qt[li.BOTTOM_LEFT]=ad();Qt[li.BOTTOM_RIGHT]=hd();Qt[li.LEFT_BOTTOM]=od();Qt[li.LEFT_CENTER]=ud();Qt[li.LEFT_TOP]=ld();Qt[li.RIGHT_BOTTOM]=fd();Qt[li.RIGHT_CENTER]=dd();Qt[li.RIGHT_TOP]=vd();Qt[li.TOP_CENTER]=cd();Qt[li.TOP_LEFT]=pd();Qt[li.TOP_RIGHT]=md();var Ine=function(e,t,i,r,s){return Qt[i](e,t,r,s)};Hy.exports=Ine});var Zy=l((eze,Ky)=>{var Nne=gd(),Gne=function(e,t,i,r){for(var s=e[0],n=1;n<e.length;n++){var a=e[n];Nne(a,s,t,i,r),s=a}return e};Ky.exports=Gne});var qi=l((tze,Jy)=>{var Bne=function(e,t,i,r,s,n){r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=1);var a,h=0,o=e.length;if(n===1)for(a=s;a<o;a++)e[a][t]+=i+h*r,h++;else for(a=s;a>=0;a--)e[a][t]+=i+h*r,h++;return e};Jy.exports=Bne});var $y=l((ize,Qy)=>{var Une=qi(),kne=function(e,t,i,r,s){return Une(e,"angle",t,i,r,s)};Qy.exports=kne});var eT=l((rze,jy)=>{var zne=function(e,t,i){for(var r=0;r<e.length;r++){var s=e[r];t.call(i,s)}return e};jy.exports=zne});var iT=l((sze,tT)=>{var Yne=function(e,t,i){i===void 0&&(i=0);for(var r=i;r<e.length;r++){var s=e[r],n=!0;for(var a in t)s[a]!==t[a]&&(n=!1);if(n)return s}return null};tT.exports=Yne});var sT=l((nze,rT)=>{var Xne=function(e,t,i){i===void 0&&(i=0);for(var r=i;r<e.length;r++){var s=e[r],n=!0;for(var a in t)s[a]!==t[a]&&(n=!1);if(n)return s}return null};rT.exports=Xne});var xd=l((aze,nT)=>{var Vne=_i(),Wne=Ys(),Hne=Hi(),Kne=Xs(),Zne=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Kne(e,Wne(t)+i),Hne(e,Vne(t)+r),e};nT.exports=Zne});var yd=l((hze,aT)=>{var Jne=_i(),Qne=wi(),$ne=Hi(),jne=Vi(),eae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),jne(e,Qne(t)-i),$ne(e,Jne(t)+r),e};aT.exports=eae});var Td=l((oze,hT)=>{var tae=_i(),iae=Ci(),rae=Hi(),sae=Wi(),nae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),sae(e,iae(t)+i),rae(e,tae(t)+r),e};hT.exports=nae});var Ed=l((uze,oT)=>{var aae=Xs(),hae=Ws(),oae=function(e,t,i){return aae(e,t),hae(e,i)};oT.exports=oae});var Sd=l((lze,uT)=>{var uae=Ed(),lae=Ys(),fae=Vs(),dae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),uae(e,lae(t)+i,fae(t)+r),e};uT.exports=dae});var _d=l((fze,lT)=>{var vae=Vs(),cae=wi(),pae=Ws(),mae=Vi(),gae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),mae(e,cae(t)-i),pae(e,vae(t)+r),e};lT.exports=gae});var wd=l((dze,fT)=>{var xae=Vs(),yae=Ci(),Tae=Ws(),Eae=Wi(),Sae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Eae(e,yae(t)+i),Tae(e,xae(t)+r),e};fT.exports=Sae});var Cd=l((vze,dT)=>{var _ae=Ys(),wae=Ri(),Cae=Xs(),Rae=Xi(),qae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Cae(e,_ae(t)+i),Rae(e,wae(t)-r),e};dT.exports=qae});var Rd=l((cze,vT)=>{var Aae=wi(),Pae=Ri(),Mae=Vi(),bae=Xi(),Lae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Mae(e,Aae(t)-i),bae(e,Pae(t)-r),e};vT.exports=Lae});var qd=l((pze,cT)=>{var Oae=Ci(),Fae=Ri(),Dae=Wi(),Iae=Xi(),Nae=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=0),Dae(e,Oae(t)+i),Iae(e,Fae(t)-r),e};cT.exports=Nae});var Ad=l((mze,pT)=>{var ft=Fa(),at=[];at[ft.BOTTOM_CENTER]=xd();at[ft.BOTTOM_LEFT]=yd();at[ft.BOTTOM_RIGHT]=Td();at[ft.CENTER]=Sd();at[ft.LEFT_CENTER]=_d();at[ft.RIGHT_CENTER]=wd();at[ft.TOP_CENTER]=Cd();at[ft.TOP_LEFT]=Rd();at[ft.TOP_RIGHT]=qd();at[ft.LEFT_BOTTOM]=at[ft.BOTTOM_LEFT];at[ft.LEFT_TOP]=at[ft.TOP_LEFT];at[ft.RIGHT_BOTTOM]=at[ft.BOTTOM_RIGHT];at[ft.RIGHT_TOP]=at[ft.TOP_RIGHT];var Gae=function(e,t,i,r,s){return at[i](e,t,r,s)};pT.exports=Gae});var z=l((gze,mT)=>{var Bae=function(e,t,i){var r=typeof e;return!e||r==="number"||r==="string"?i:e.hasOwnProperty(t)&&e[t]!==void 0?e[t]:i};mT.exports=Bae});var B=l((xze,gT)=>{var Uae=function(){};gT.exports=Uae});var C=l((yze,yT)=>{function kae(e){return!!e.get&&typeof e.get=="function"||!!e.set&&typeof e.set=="function"}function zae(e,t,i){var r=i?e[t]:Object.getOwnPropertyDescriptor(e,t);return!i&&r.value&&typeof r.value=="object"&&(r=r.value),r&&kae(r)?(typeof r.enumerable=="undefined"&&(r.enumerable=!0),typeof r.configurable=="undefined"&&(r.configurable=!0),r):!1}function Yae(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return i?(i.value&&typeof i.value=="object"&&(i=i.value),i.configurable===!1):!1}function Pd(e,t,i,r){for(var s in t)if(!!t.hasOwnProperty(s)){var n=zae(t,s,i);if(n!==!1){var a=r||e;if(Yae(a.prototype,s)){if(Da.ignoreFinals)continue;throw new Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(e.prototype,s,n)}else e.prototype[s]=t[s]}}function xT(e,t){if(!!t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)Pd(e,t[i].prototype||t[i])}}function Da(e){e||(e={});var t,i;if(e.initialize){if(typeof e.initialize!="function")throw new Error("initialize must be a function");t=e.initialize,delete e.initialize}else if(e.Extends){var r=e.Extends;t=function(){r.apply(this,arguments)}}else t=function(){};e.Extends?(t.prototype=Object.create(e.Extends.prototype),t.prototype.constructor=t,i=e.Extends,delete e.Extends):t.prototype.constructor=t;var s=null;return e.Mixins&&(s=e.Mixins,delete e.Mixins),xT(t,s),Pd(t,e,!0,i),t}Da.extend=Pd;Da.mixin=xT;Da.ignoreFinals=!1;yT.exports=Da});var kr=l((Tze,TT)=>{var Xae=function(e,t,i){if(e.radius>0&&t>=e.left&&t<=e.right&&i>=e.top&&i<=e.bottom){var r=(e.x-t)*(e.x-t),s=(e.y-i)*(e.y-i);return r+s<=e.radius*e.radius}else return!1};TT.exports=Xae});var Ki=l((Eze,ET)=>{var Vae={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};ET.exports=Vae});var $=l((Sze,ST)=>{var Wae=C(),Hae=Ki(),Kae=new Wae({initialize:function(t,i){t===void 0&&(t=0),i===void 0&&(i=t),this.type=Hae.POINT,this.x=t,this.y=i},setTo:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x=e,this.y=t,this}});ST.exports=Kae});var co=l((_ze,_T)=>{var Zae=$(),Jae=function(e,t,i){return i===void 0&&(i=new Zae),i.x=e.x+e.radius*Math.cos(t),i.y=e.y+e.radius*Math.sin(t),i};_T.exports=Jae});var Le=l((wze,wT)=>{var Qae=function(e,t,i){return Math.max(t,Math.min(i,e))};wT.exports=Qae});var Tn=l((Cze,CT)=>{var $ae=Le(),jae=function(e,t,i){return e=$ae(e,0,1),(i-t)*e+t};CT.exports=jae});var Oe=l((Rze,RT)=>{var ehe={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};RT.exports=ehe});var Md=l((qze,qT)=>{var the=co(),ihe=Tn(),rhe=Oe(),she=$(),nhe=function(e,t,i){i===void 0&&(i=new she);var r=ihe(t,0,rhe.PI2);return the(e,r,i)};qT.exports=nhe});var bd=l((Aze,AT)=>{var ahe=function(e){return 2*(Math.PI*e.radius)};AT.exports=ahe});var Ld=l((Pze,PT)=>{var hhe=bd(),ohe=co(),uhe=Tn(),lhe=Oe(),fhe=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=hhe(e)/i);for(var s=0;s<t;s++){var n=uhe(s/t,0,lhe.PI2);r.push(ohe(e,n))}return r};PT.exports=fhe});var po=l((Mze,MT)=>{var dhe=$(),vhe=function(e,t){t===void 0&&(t=new dhe);var i=2*Math.PI*Math.random(),r=Math.random()+Math.random(),s=r>1?2-r:r,n=s*Math.cos(i),a=s*Math.sin(i);return t.x=e.x+n*e.radius,t.y=e.y+a*e.radius,t};MT.exports=vhe});var zr=l((bze,bT)=>{var che=C(),phe=kr(),mhe=Md(),ghe=Ld(),xhe=Ki(),yhe=po(),The=new che({initialize:function(t,i,r){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),this.type=xhe.CIRCLE,this.x=t,this.y=i,this._radius=r,this._diameter=r*2},contains:function(e,t){return phe(this,e,t)},getPoint:function(e,t){return mhe(this,e,t)},getPoints:function(e,t,i){return ghe(this,e,t,i)},getRandomPoint:function(e){return yhe(this,e)},setTo:function(e,t,i){return this.x=e,this.y=t,this._radius=i,this._diameter=i*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(e){this._radius=e,this._diameter=e*2}},diameter:{get:function(){return this._diameter},set:function(e){this._diameter=e,this._radius=e*.5}},left:{get:function(){return this.x-this._radius},set:function(e){this.x=e+this._radius}},right:{get:function(){return this.x+this._radius},set:function(e){this.x=e-this._radius}},top:{get:function(){return this.y-this._radius},set:function(e){this.y=e+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(e){this.y=e-this._radius}}});bT.exports=The});var OT=l((Lze,LT)=>{var mr=Le(),En=2,Ehe={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(e,t,i,r){return e===void 0&&(e=1),t===void 0?this.alpha=e:(this._alphaTL=mr(e,0,1),this._alphaTR=mr(t,0,1),this._alphaBL=mr(i,0,1),this._alphaBR=mr(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(e){var t=mr(e,0,1);this._alpha=t,this._alphaTL=t,this._alphaTR=t,this._alphaBL=t,this._alphaBR=t,t===0?this.renderFlags&=~En:this.renderFlags|=En}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(e){var t=mr(e,0,1);this._alphaTL=t,t!==0&&(this.renderFlags|=En)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(e){var t=mr(e,0,1);this._alphaTR=t,t!==0&&(this.renderFlags|=En)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(e){var t=mr(e,0,1);this._alphaBL=t,t!==0&&(this.renderFlags|=En)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(e){var t=mr(e,0,1);this._alphaBR=t,t!==0&&(this.renderFlags|=En)}}};LT.exports=Ehe});var Od=l((Oze,DT)=>{var She=Le(),FT=2,_he={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(e){return e===void 0&&(e=1),this.alpha=e,this},alpha:{get:function(){return this._alpha},set:function(e){var t=She(e,0,1);this._alpha=t,t===0?this.renderFlags&=~FT:this.renderFlags|=FT}}};DT.exports=_he});var Fd=l((Fze,NT)=>{var IT=Si(),whe={_blendMode:IT.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(e){typeof e=="string"&&(e=IT[e]),e|=0,e>=-1&&(this._blendMode=e)}},setBlendMode:function(e){return this.blendMode=e,this}};NT.exports=whe});var BT=l((Dze,GT)=>{var Che={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this}};GT.exports=Che});var kT=l((Ize,UT)=>{var Rhe={texture:null,frame:null,isCropped:!1,setCrop:function(e,t,i,r){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,t,i,r,this.flipX,this.flipY);else{var s=e;this.frame.setCropUVs(this._crop,s.x,s.y,s.width,s.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};UT.exports=Rhe});var Dd=l((Nze,zT)=>{var qhe={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};zT.exports=qhe});var XT=l((Gze,YT)=>{var Ahe={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,t){return this.flipX=e,this.flipY=t,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};YT.exports=Ahe});var Yr=l((Bze,VT)=>{var Phe=function(e,t,i){return e.width<=0||e.height<=0?!1:e.x<=t&&e.x+e.width>=t&&e.y<=i&&e.y+e.height>=i};VT.exports=Phe});var Ia=l((Uze,WT)=>{var Mhe=function(e){return 2*(e.width+e.height)};WT.exports=Mhe});var mo=l((kze,HT)=>{var bhe=Ia(),Lhe=$(),Ohe=function(e,t,i){if(i===void 0&&(i=new Lhe),t<=0||t>=1)return i.x=e.x,i.y=e.y,i;var r=bhe(e)*t;return t>.5?(r-=e.width+e.height,r<=e.width?(i.x=e.right-r,i.y=e.bottom):(i.x=e.x,i.y=e.bottom-(r-e.width))):r<=e.width?(i.x=e.x+r,i.y=e.y):(i.x=e.right,i.y=e.y+(r-e.width)),i};HT.exports=Ohe});var Id=l((zze,KT)=>{var Fhe=mo(),Dhe=Ia(),Ihe=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=Dhe(e)/i);for(var s=0;s<t;s++){var n=s/t;r.push(Fhe(e,n))}return r};KT.exports=Ihe});var Nd=l((Yze,ZT)=>{var Nhe=$(),Ghe=function(e,t,i){return i===void 0&&(i=new Nhe),i.x=e.x1+(e.x2-e.x1)*t,i.y=e.y1+(e.y2-e.y1)*t,i};ZT.exports=Ghe});var gr=l((Xze,JT)=>{var Bhe=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};JT.exports=Bhe});var go=l((Vze,QT)=>{var Uhe=gr(),khe=$(),zhe=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=Uhe(e)/i);for(var s=e.x1,n=e.y1,a=e.x2,h=e.y2,o=0;o<t;o++){var u=o/t,f=s+(a-s)*u,d=n+(h-n)*u;r.push(new khe(f,d))}return r};QT.exports=zhe});var xo=l((Wze,$T)=>{var Yhe=$(),Xhe=function(e,t){t===void 0&&(t=new Yhe);var i=Math.random();return t.x=e.x1+i*(e.x2-e.x1),t.y=e.y1+i*(e.y2-e.y1),t};$T.exports=Xhe});var yo=l((Hze,jT)=>{var Vhe=function(e,t,i){return i===void 0&&(i=1e-4),Math.abs(e-t)<i};jT.exports=Vhe});var xe=l((Kze,tE)=>{var Whe=C(),eE=yo(),kt=new Whe({initialize:function(t,i){this.x=0,this.y=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0):(i===void 0&&(i=t),this.x=t||0,this.y=i||0)},clone:function(){return new kt(this.x,this.y)},copy:function(e){return this.x=e.x||0,this.y=e.y||0,this},setFromObject:function(e){return this.x=e.x||0,this.y=e.y||0,this},set:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setTo:function(e,t){return this.set(e,t)},setToPolar:function(e,t){return t==null&&(t=1),this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this},equals:function(e){return this.x===e.x&&this.y===e.y},fuzzyEquals:function(e,t){return eE(this.x,e.x,t)&&eE(this.y,e.y,t)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},setAngle:function(e){return this.setToPolar(e,this.length())},add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},scale:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},length:function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},setLength:function(e){return this.normalize().scale(e)},lengthSq:function(){var e=this.x,t=this.y;return e*e+t*t},normalize:function(){var e=this.x,t=this.y,i=e*e+t*t;return i>0&&(i=1/Math.sqrt(i),this.x=e*i,this.y=t*i),this},normalizeRightHand:function(){var e=this.x;return this.x=this.y*-1,this.y=e,this},normalizeLeftHand:function(){var e=this.x;return this.x=this.y,this.y=e*-1,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this},transformMat3:function(e){var t=this.x,i=this.y,r=e.val;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this},transformMat4:function(e){var t=this.x,i=this.y,r=e.val;return this.x=r[0]*t+r[4]*i+r[12],this.y=r[1]*t+r[5]*i+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(e){var t=this.length();return t&&t>e&&this.scale(e/t),this},reflect:function(e){return e=e.clone().normalize(),this.subtract(e.scale(2*this.dot(e)))},mirror:function(e){return this.reflect(e).negate()},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t*this.x-i*this.y,i*this.x+t*this.y)}});kt.ZERO=new kt;kt.RIGHT=new kt(1,0);kt.LEFT=new kt(-1,0);kt.UP=new kt(0,-1);kt.DOWN=new kt(0,1);kt.ONE=new kt(1,1);tE.exports=kt});var Ai=l((Zze,rE)=>{var Hhe=C(),Khe=Nd(),Zhe=go(),Jhe=Ki(),Qhe=xo(),iE=xe(),$he=new Hhe({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),this.type=Jhe.LINE,this.x1=t,this.y1=i,this.x2=r,this.y2=s},getPoint:function(e,t){return Khe(this,e,t)},getPoints:function(e,t,i){return Zhe(this,e,t,i)},getRandomPoint:function(e){return Qhe(this,e)},setTo:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),this.x1=e,this.y1=t,this.x2=i,this.y2=r,this},getPointA:function(e){return e===void 0&&(e=new iE),e.set(this.x1,this.y1),e},getPointB:function(e){return e===void 0&&(e=new iE),e.set(this.x2,this.y2),e},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(e){this.x1<=this.x2?this.x1=e:this.x2=e}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(e){this.x1>this.x2?this.x1=e:this.x2=e}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(e){this.y1<=this.y2?this.y1=e:this.y2=e}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(e){this.y1>this.y2?this.y1=e:this.y2=e}}});rE.exports=$he});var To=l((Jze,sE)=>{var jhe=$(),eoe=function(e,t){return t===void 0&&(t=new jhe),t.x=e.x+Math.random()*e.width,t.y=e.y+Math.random()*e.height,t};sE.exports=eoe});var Ae=l((Qze,nE)=>{var toe=C(),ioe=Yr(),roe=mo(),soe=Id(),noe=Ki(),Eo=Ai(),aoe=To(),hoe=new toe({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),this.type=noe.RECTANGLE,this.x=t,this.y=i,this.width=r,this.height=s},contains:function(e,t){return ioe(this,e,t)},getPoint:function(e,t){return roe(this,e,t)},getPoints:function(e,t,i){return soe(this,e,t,i)},getRandomPoint:function(e){return aoe(this,e)},setTo:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setSize:function(e,t){return t===void 0&&(t=e),this.width=e,this.height=t,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(e){return e===void 0&&(e=new Eo),e.setTo(this.x,this.y,this.right,this.y),e},getLineB:function(e){return e===void 0&&(e=new Eo),e.setTo(this.right,this.y,this.right,this.bottom),e},getLineC:function(e){return e===void 0&&(e=new Eo),e.setTo(this.right,this.bottom,this.x,this.bottom),e},getLineD:function(e){return e===void 0&&(e=new Eo),e.setTo(this.x,this.bottom,this.x,this.y),e},left:{get:function(){return this.x},set:function(e){e>=this.right?this.width=0:this.width=this.right-e,this.x=e}},right:{get:function(){return this.x+this.width},set:function(e){e<=this.x?this.width=0:this.width=e-this.x}},top:{get:function(){return this.y},set:function(e){e>=this.bottom?this.height=0:this.height=this.bottom-e,this.y=e}},bottom:{get:function(){return this.y+this.height},set:function(e){e<=this.y?this.height=0:this.height=e-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}});nE.exports=hoe});var Gd=l(($ze,aE)=>{var ooe=function(e,t,i,r){var s=Math.cos(r),n=Math.sin(r),a=e.x-t,h=e.y-i;return e.x=a*s-h*n+t,e.y=a*n+h*s+i,e};aE.exports=ooe});var oE=l((jze,hE)=>{var uoe=Ae(),loe=Gd(),xr=xe(),foe={prepareBoundsOutput:function(e,t){if(t===void 0&&(t=!1),this.rotation!==0&&loe(e,this.x,this.y,this.rotation),t&&this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix();i.transformPoint(e.x,e.y,e)}return e},getCenter:function(e){return e===void 0&&(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,e},getTopLeft:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getTopCenter:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getTopRight:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getLeftCenter:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,t)},getRightCenter:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,t)},getBottomLeft:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBottomCenter:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBottomRight:function(e,t){return e||(e=new xr),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBounds:function(e){e===void 0&&(e=new uoe);var t,i,r,s,n,a,h,o;if(this.parentContainer){var u=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(e),u.transformPoint(e.x,e.y,e),t=e.x,i=e.y,this.getTopRight(e),u.transformPoint(e.x,e.y,e),r=e.x,s=e.y,this.getBottomLeft(e),u.transformPoint(e.x,e.y,e),n=e.x,a=e.y,this.getBottomRight(e),u.transformPoint(e.x,e.y,e),h=e.x,o=e.y}else this.getTopLeft(e),t=e.x,i=e.y,this.getTopRight(e),r=e.x,s=e.y,this.getBottomLeft(e),n=e.x,a=e.y,this.getBottomRight(e),h=e.x,o=e.y;return e.x=Math.min(t,r,n,h),e.y=Math.min(i,s,a,o),e.width=Math.max(t,r,n,h)-e.x,e.height=Math.max(i,s,a,o)-e.y,e}};hE.exports=foe});var lE=l((eYe,uE)=>{uE.exports="blur"});var dE=l((tYe,fE)=>{fE.exports="boot"});var cE=l((iYe,vE)=>{vE.exports="contextlost"});var mE=l((rYe,pE)=>{pE.exports="contextrestored"});var xE=l((sYe,gE)=>{gE.exports="destroy"});var TE=l((nYe,yE)=>{yE.exports="focus"});var SE=l((aYe,EE)=>{EE.exports="hidden"});var wE=l((hYe,_E)=>{_E.exports="pause"});var RE=l((oYe,CE)=>{CE.exports="postrender"});var AE=l((uYe,qE)=>{qE.exports="poststep"});var ME=l((lYe,PE)=>{PE.exports="prerender"});var LE=l((fYe,bE)=>{bE.exports="prestep"});var FE=l((dYe,OE)=>{OE.exports="ready"});var IE=l((vYe,DE)=>{DE.exports="resume"});var GE=l((cYe,NE)=>{NE.exports="step"});var UE=l((pYe,BE)=>{BE.exports="visible"});var Ye=l((mYe,kE)=>{kE.exports={BLUR:lE(),BOOT:dE(),CONTEXT_LOST:cE(),CONTEXT_RESTORED:mE(),DESTROY:xE(),FOCUS:TE(),HIDDEN:SE(),PAUSE:wE(),POST_RENDER:RE(),POST_STEP:AE(),PRE_RENDER:ME(),PRE_STEP:LE(),READY:FE(),RESUME:IE(),STEP:GE(),VISIBLE:UE()}});var YE=l((gYe,zE)=>{zE.exports="postrender"});var VE=l((xYe,XE)=>{XE.exports="prerender"});var HE=l((yYe,WE)=>{WE.exports="render"});var ZE=l((TYe,KE)=>{KE.exports="resize"});var Hs=l((EYe,JE)=>{JE.exports={POST_RENDER:YE(),PRE_RENDER:VE(),RENDER:HE(),RESIZE:ZE()}});var Bd=l((SYe,jE)=>{var doe=C(),QE=Ye(),$E=Hs(),voe=new doe({initialize:function(t,i){var r=t.sys.renderer;this.renderer=r,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.scene=t,this.createMask(),t.sys.game.events.on(QE.CONTEXT_RESTORED,this.createMask,this),r&&r.on($E.RESIZE,this.createMask,this)},createMask:function(){var e=this.renderer;if(!(!e||!e.gl)){this.mainTexture&&this.clearMask();var t=e.width,i=e.height,r=(t&t-1)===0&&(i&i-1)===0,s=e.gl,n=r?s.REPEAT:s.CLAMP_TO_EDGE,a=s.LINEAR;this.mainTexture=e.createTexture2D(0,a,a,n,n,s.RGBA,null,t,i),this.maskTexture=e.createTexture2D(0,a,a,n,n,s.RGBA,null,t,i),this.mainFramebuffer=e.createFramebuffer(t,i,this.mainTexture,!0),this.maskFramebuffer=e.createFramebuffer(t,i,this.maskTexture,!0)}},clearMask:function(){var e=this.renderer;!e||!e.gl||!this.mainTexture||(e.deleteTexture(this.mainTexture),e.deleteTexture(this.maskTexture),e.deleteFramebuffer(this.mainFramebuffer),e.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(e){this.bitmapMask=e},preRenderWebGL:function(e,t,i){e.pipelines.BITMAPMASK_PIPELINE.beginMask(this,t,i)},postRenderWebGL:function(e,t){e.pipelines.BITMAPMASK_PIPELINE.endMask(this,t)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.scene.sys.game.events.off(QE.CONTEXT_RESTORED,this.createMask,this),this.renderer&&this.renderer.off($E.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});jE.exports=voe});var Ud=l((_Ye,eS)=>{var coe=C(),poe=new coe({initialize:function(t,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(e){return this.geometryMask=e,this},setInvertAlpha:function(e){return e===void 0&&(e=!0),this.invertAlpha=e,this},preRenderWebGL:function(e,t,i){var r=e.gl;e.flush(),e.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),e.maskCount=0),e.currentCameraMask.mask!==this&&(e.currentMask.mask=this),e.maskStack.push({mask:this,camera:i}),this.applyStencil(e,i,!0),e.maskCount++},applyStencil:function(e,t,i){var r=e.gl,s=this.geometryMask,n=e.maskCount;r.colorMask(!1,!1,!1,!1),i?(r.stencilFunc(r.EQUAL,n,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,n+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),s.renderWebGL(e,s,t),e.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),i?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,n+1,255):r.stencilFunc(r.EQUAL,n+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,n,255):r.stencilFunc(r.EQUAL,n,255)},postRenderWebGL:function(e){var t=e.gl;e.maskStack.pop(),e.maskCount--,e.flush();var i=e.currentMask;if(e.maskStack.length===0)i.mask=null,t.disable(t.STENCIL_TEST);else{var r=e.maskStack[e.maskStack.length-1];r.mask.applyStencil(e,r.camera,!1),e.currentCameraMask.mask!==r.mask?(i.mask=r.mask,i.camera=r.camera):i.mask=null}},preRenderCanvas:function(e,t,i){var r=this.geometryMask;e.currentContext.save(),r.renderCanvas(e,r,i,null,null,!0),e.currentContext.clip()},postRenderCanvas:function(e){e.currentContext.restore()},destroy:function(){this.geometryMask=null}});eS.exports=poe});var kd=l((wYe,tS)=>{var moe=Bd(),goe=Ud(),xoe={mask:null,setMask:function(e){return this.mask=e,this},clearMask:function(e){return e===void 0&&(e=!1),e&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(e){return e===void 0&&(this.texture||this.shader)&&(e=this),new moe(this.scene,e)},createGeometryMask:function(e){return e===void 0&&this.type==="Graphics"&&(e=this),new goe(this.scene,e)}};tS.exports=xoe});var rS=l((CYe,iS)=>{var yoe={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,t){return e===void 0&&(e=.5),t===void 0&&(t=e),this.originX=e,this.originY=t,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.displayOriginX=e,this.displayOriginY=t,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};iS.exports=yoe});var yr=l((RYe,sS)=>{var Toe=Oe(),Eoe=function(e){return e*Toe.DEG_TO_RAD};sS.exports=Eoe});var Sn=l((qYe,nS)=>{var Soe=function(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i};nS.exports=Soe});var he=l((AYe,aS)=>{var _oe=function(e,t,i){if(!e||typeof e=="number")return i;if(e.hasOwnProperty(t))return e[t];if(t.indexOf(".")!==-1){for(var r=t.split("."),s=e,n=i,a=0;a<r.length;a++)if(s.hasOwnProperty(r[a]))n=s[r[a]],s=s[r[a]];else{n=i;break}return n}else return i};aS.exports=_oe});var _n=l((PYe,hS)=>{var woe={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};hS.exports=woe});var fS=l((MYe,lS)=>{var oS=yr(),uS=Sn(),So=he(),Na=_n(),zd=xe(),Coe={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:Na.PLAYING_FORWARD,setPath:function(e,t){t===void 0&&(t=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=e,t&&this.startFollow(t),this},setRotateToPath:function(e,t){return t===void 0&&(t=0),this.rotateToPath=e,this.pathRotationOffset=t,this},isFollowing:function(){var e=this.pathTween;return e&&e.isPlaying()},startFollow:function(e,t){e===void 0&&(e={}),t===void 0&&(t=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),typeof e=="number"&&(e={duration:e}),e.from=So(e,"from",0),e.to=So(e,"to",1);var r=uS(e,"positionOnPath",!1);this.rotateToPath=uS(e,"rotateToPath",!1),this.pathRotationOffset=So(e,"rotationOffset",0);var s=So(e,"startAt",t);if(s&&(e.onStart=function(a){var h=a.data[0];h.progress=s,h.elapsed=h.duration*s;var o=h.ease(h.progress);h.current=h.start+(h.end-h.start)*o,h.target[h.key]=h.current}),this.pathOffset||(this.pathOffset=new zd(this.x,this.y)),this.pathVector||(this.pathVector=new zd),this.pathDelta||(this.pathDelta=new zd),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(e),this.path.getStartPoint(this.pathOffset),r&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=Na.PLAYING_FORWARD,this.rotateToPath){var n=this.path.getPoint(.1);this.rotation=Math.atan2(n.y-this.y,n.x-this.x)+oS(this.pathRotationOffset)}return this.pathConfig=e,this},pauseFollow:function(){var e=this.pathTween;return e&&e.isPlaying()&&e.pause(),this},resumeFollow:function(){var e=this.pathTween;return e&&e.isPaused()&&e.resume(),this},stopFollow:function(){var e=this.pathTween;return e&&e.isPlaying()&&e.stop(),this},pathUpdate:function(){var e=this.pathTween;if(e){var t=e.data[0],i=this.pathDelta,r=this.pathVector;if(i.copy(r).negate(),t.state===Na.COMPLETE){this.path.getPoint(1,r),i.add(r),r.add(this.pathOffset),this.setPosition(r.x,r.y);return}else if(t.state!==Na.PLAYING_FORWARD&&t.state!==Na.PLAYING_BACKWARD)return;this.path.getPoint(e.getValue(),r),i.add(r),r.add(this.pathOffset);var s=this.x,n=this.y;this.setPosition(r.x,r.y);var a=this.x-s,h=this.y-n;if(a===0&&h===0)return;if(t.state!==this._prevDirection){this._prevDirection=t.state;return}this.rotateToPath&&(this.rotation=Math.atan2(h,a)+oS(this.pathRotationOffset))}}};lS.exports=Coe});var _o=l((bYe,vS)=>{var dS=function(e){var t,i,r;if(typeof e!="object"||e===null)return e;t=Array.isArray(e)?[]:{};for(r in e)i=e[r],t[r]=dS(i);return t};vS.exports=dS});var Ks=l((LYe,cS)=>{var Roe={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};cS.exports=Roe});var Zs=l((OYe,pS)=>{var qoe=function(e,t){if(!(t>=e.length)){for(var i=e.length-1,r=e[t],s=t;s<i;s++)e[s]=e[s+1];return e.length=i,r}};pS.exports=qoe});var Yd=l((FYe,gS)=>{var mS=_o(),Aoe=Ks(),Poe=Zs(),Moe={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(e){e===void 0&&(e=Aoe.MULTI_PIPELINE);var t=this.scene.sys.renderer;if(!t)return!1;var i=t.pipelines;if(this.postPipelines=[],this.pipelineData={},i){var r=i.get(e);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(e,t,i){var r=this.scene.sys.renderer;if(!r)return this;var s=r.pipelines;if(s){var n=s.get(e);n&&(this.pipeline=n),t&&(this.pipelineData=i?mS(t):t)}return this},setPostPipeline:function(e,t,i){var r=this.scene.sys.renderer;if(!r)return this;var s=r.pipelines;if(s){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var a=s.getPostPipeline(e[n],this);a&&this.postPipelines.push(a)}t&&(this.pipelineData=i?mS(t):t)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(e,t){var i=this.pipelineData;return t===void 0?delete i[e]:i[e]=t,this},getPostPipeline:function(e){for(var t=this.postPipelines,i=[],r=0;r<t.length;r++){var s=t[r];(typeof e=="string"&&s.name===e||s instanceof e)&&i.push(s)}return i.length===1?i[0]:i},resetPipeline:function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),this.pipeline=this.defaultPipeline,e&&(this.postPipelines=[],this.hasPostPipeline=!1),t&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(e){e===void 0&&(e=!1);for(var t=this.postPipelines,i=0;i<t.length;i++)t[i].destroy();this.postPipelines=[],this.hasPostPipeline=!1,e&&(this.pipelineData={})},removePostPipeline:function(e){for(var t=this.postPipelines,i=t.length-1;i>=0;i--){var r=t[i];(typeof e=="string"&&r.name===e||typeof e!="string"&&r instanceof e)&&(r.destroy(),Poe(t,i))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};gS.exports=Moe});var Xd=l((DYe,xS)=>{var boe={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,t){return t===void 0&&(t=e),this.scrollFactorX=e,this.scrollFactorY=t,this}};xS.exports=boe});var TS=l((IYe,yS)=>{var Loe={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){return e===void 0&&(e=this.frame),this.width=e.realWidth,this.height=e.realHeight,this},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this}};yS.exports=Loe});var _S=l((NYe,SS)=>{var ES=8,Ooe={texture:null,frame:null,isCropped:!1,setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!0),this.frame=this.texture.get(e),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~ES:this.renderFlags|=ES,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};SS.exports=Ooe});var RS=l((GYe,CS)=>{var wS=8,Foe={texture:null,frame:null,isCropped:!1,setCrop:function(e,t,i,r){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,t,i,r,this.flipX,this.flipY);else{var s=e;this.frame.setCropUVs(this._crop,s.x,s.y,s.width,s.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!0),this.frame=this.texture.get(e),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~wS:this.renderFlags|=wS,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};CS.exports=Foe});var AS=l((BYe,qS)=>{var Doe={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,t,i,r){return e===void 0&&(e=16777215),t===void 0&&(t=e,i=e,r=e),this.tintTopLeft=e,this.tintTopRight=t,this.tintBottomLeft=i,this.tintBottomRight=r,this.tintFill=!1,this},setTintFill:function(e,t,i,r){return this.setTint(e,t,i,r),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};qS.exports=Doe});var wo=l((UYe,PS)=>{var Ioe=function(e){var t={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(t.textureKey=e.texture.key,t.frameKey=e.frame.name),t};PS.exports=Ioe});var xt=l((kYe,MS)=>{var Noe=C(),Goe=Oe(),Boe=xe(),Uoe=new Noe({initialize:function(t,i,r,s,n,a){t===void 0&&(t=1),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=1),n===void 0&&(n=0),a===void 0&&(a=0),this.matrix=new Float32Array([t,i,r,s,n,a,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(e){this.matrix[0]=e}},b:{get:function(){return this.matrix[1]},set:function(e){this.matrix[1]=e}},c:{get:function(){return this.matrix[2]},set:function(e){this.matrix[2]=e}},d:{get:function(){return this.matrix[3]},set:function(e){this.matrix[3]=e}},e:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},f:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},tx:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},ty:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var e=this.matrix,t=e[0],i=e[1],r=e[2],s=e[3];return t||i?i>0?Math.acos(t/this.scaleX):-Math.acos(t/this.scaleX):r||s?Goe.TAU-(s>0?Math.acos(-r/this.scaleY):-Math.acos(r/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var e=this.matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,this},translate:function(e,t){var i=this.matrix;return i[4]=i[0]*e+i[2]*t+i[4],i[5]=i[1]*e+i[3]*t+i[5],this},scale:function(e,t){var i=this.matrix;return i[0]*=e,i[1]*=e,i[2]*=t,i[3]*=t,this},rotate:function(e){var t=Math.sin(e),i=Math.cos(e),r=this.matrix,s=r[0],n=r[1],a=r[2],h=r[3];return r[0]=s*i+a*t,r[1]=n*i+h*t,r[2]=s*-t+a*i,r[3]=n*-t+h*i,this},multiply:function(e,t){var i=this.matrix,r=e.matrix,s=i[0],n=i[1],a=i[2],h=i[3],o=i[4],u=i[5],f=r[0],d=r[1],v=r[2],c=r[3],p=r[4],m=r[5],x=t===void 0?this:t;return x.a=f*s+d*a,x.b=f*n+d*h,x.c=v*s+c*a,x.d=v*n+c*h,x.e=p*s+m*a+o,x.f=p*n+m*h+u,x},multiplyWithOffset:function(e,t,i){var r=this.matrix,s=e.matrix,n=r[0],a=r[1],h=r[2],o=r[3],u=r[4],f=r[5],d=t*n+i*h+u,v=t*a+i*o+f,c=s[0],p=s[1],m=s[2],x=s[3],g=s[4],y=s[5];return r[0]=c*n+p*h,r[1]=c*a+p*o,r[2]=m*n+x*h,r[3]=m*a+x*o,r[4]=g*n+y*h+d,r[5]=g*a+y*o+v,this},transform:function(e,t,i,r,s,n){var a=this.matrix,h=a[0],o=a[1],u=a[2],f=a[3],d=a[4],v=a[5];return a[0]=e*h+t*u,a[1]=e*o+t*f,a[2]=i*h+r*u,a[3]=i*o+r*f,a[4]=s*h+n*u+d,a[5]=s*o+n*f+v,this},transformPoint:function(e,t,i){i===void 0&&(i={x:0,y:0});var r=this.matrix,s=r[0],n=r[1],a=r[2],h=r[3],o=r[4],u=r[5];return i.x=e*s+t*a+o,i.y=e*n+t*h+u,i},invert:function(){var e=this.matrix,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=t*s-i*r;return e[0]=s/h,e[1]=-i/h,e[2]=-r/h,e[3]=t/h,e[4]=(r*a-s*n)/h,e[5]=-(t*a-i*n)/h,this},copyFrom:function(e){var t=this.matrix;return t[0]=e.a,t[1]=e.b,t[2]=e.c,t[3]=e.d,t[4]=e.e,t[5]=e.f,this},copyFromArray:function(e){var t=this.matrix;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this},copyToContext:function(e){var t=this.matrix;return e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e},setToContext:function(e){var t=this.matrix;return e.setTransform(t[0],t[1],t[2],t[3],t[4],t[5]),e},copyToArray:function(e){var t=this.matrix;return e===void 0?e=[t[0],t[1],t[2],t[3],t[4],t[5]]:(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]),e},setTransform:function(e,t,i,r,s,n){var a=this.matrix;return a[0]=e,a[1]=t,a[2]=i,a[3]=r,a[4]=s,a[5]=n,this},decomposeMatrix:function(){var e=this.decomposedMatrix,t=this.matrix,i=t[0],r=t[1],s=t[2],n=t[3],a=i*n-r*s;if(e.translateX=t[4],e.translateY=t[5],i||r){var h=Math.sqrt(i*i+r*r);e.rotation=r>0?Math.acos(i/h):-Math.acos(i/h),e.scaleX=h,e.scaleY=a/h}else if(s||n){var o=Math.sqrt(s*s+n*n);e.rotation=Math.PI*.5-(n>0?Math.acos(-s/o):-Math.acos(s/o)),e.scaleX=a/o,e.scaleY=o}else e.rotation=0,e.scaleX=0,e.scaleY=0;return e},applyITRS:function(e,t,i,r,s){var n=this.matrix,a=Math.sin(i),h=Math.cos(i);return n[4]=e,n[5]=t,n[0]=h*r,n[1]=a*r,n[2]=-a*s,n[3]=h*s,this},applyInverse:function(e,t,i){i===void 0&&(i=new Boe);var r=this.matrix,s=r[0],n=r[1],a=r[2],h=r[3],o=r[4],u=r[5],f=1/(s*h+a*-n);return i.x=h*f*e+-a*f*t+(u*a-o*h)*f,i.y=s*f*t+-n*f*e+(-u*s+o*n)*f,i},getX:function(e,t){return e*this.a+t*this.c+this.e},getY:function(e,t){return e*this.b+t*this.d+this.f},getXRound:function(e,t,i){var r=this.getX(e,t);return i&&(r=Math.round(r)),r},getYRound:function(e,t,i){var r=this.getY(e,t);return i&&(r=Math.round(r)),r},getCSSMatrix:function(){var e=this.matrix;return"matrix("+e[0]+","+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});MS.exports=Uoe});var Co=l((zYe,bS)=>{var koe=xe(),zoe=function(e,t,i,r,s,n,a,h){h===void 0&&(h=new koe);var o=Math.sin(s),u=Math.cos(s),f=u*n,d=o*n,v=-o*a,c=u*a,p=1/(f*c+v*-d);return h.x=c*p*e+-v*p*t+(r*v-i*c)*p,h.y=f*p*t+-d*p*e+(-r*f+i*d)*p,h};bS.exports=zoe});var Xr=l((YYe,LS)=>{var Yoe=function(e,t,i){var r=i-t;return t+((e-t)%r+r)%r};LS.exports=Yoe});var Vd=l((XYe,OS)=>{var Xoe=Xr(),Voe=function(e){return Xoe(e,-Math.PI,Math.PI)};OS.exports=Voe});var Wd=l((VYe,FS)=>{var Woe=Xr(),Hoe=function(e){return Woe(e,-180,180)};FS.exports=Hoe});var Kd=l((WYe,NS)=>{var DS=Oe(),Hd=xt(),Koe=Co(),Zoe=Vd(),IS=Wd(),Joe=xe(),wn=4,Qoe={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(e){this._scaleX=e,this._scaleY=e,e===0?this.renderFlags&=~wn:this.renderFlags|=wn}},scaleX:{get:function(){return this._scaleX},set:function(e){this._scaleX=e,e===0?this.renderFlags&=~wn:this.renderFlags|=wn}},scaleY:{get:function(){return this._scaleY},set:function(e){this._scaleY=e,e===0?this.renderFlags&=~wn:this.renderFlags|=wn}},angle:{get:function(){return IS(this._rotation*DS.RAD_TO_DEG)},set:function(e){this.rotation=IS(e)*DS.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=Zoe(e)}},setPosition:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=e),i===void 0&&(i=0),r===void 0&&(r=0),this.x=e,this.y=t,this.z=i,this.w=r,this},copyPosition:function(e){return e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.z!==void 0&&(this.z=e.z),e.w!==void 0&&(this.w=e.w),this},setRandomPosition:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.scene.sys.scale.width),r===void 0&&(r=this.scene.sys.scale.height),this.x=e+Math.random()*i,this.y=t+Math.random()*r,this},setRotation:function(e){return e===void 0&&(e=0),this.rotation=e,this},setAngle:function(e){return e===void 0&&(e=0),this.angle=e,this},setScale:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=e),this.scaleX=e,this.scaleY=t,this},setX:function(e){return e===void 0&&(e=0),this.x=e,this},setY:function(e){return e===void 0&&(e=0),this.y=e,this},setZ:function(e){return e===void 0&&(e=0),this.z=e,this},setW:function(e){return e===void 0&&(e=0),this.w=e,this},getLocalTransformMatrix:function(e){return e===void 0&&(e=new Hd),e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(e,t){e===void 0&&(e=new Hd),t===void 0&&(t=new Hd);var i=this.parentContainer;if(!i)return this.getLocalTransformMatrix(e);for(e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);i;)t.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY),t.multiply(e,e),i=i.parentContainer;return e},getLocalPoint:function(e,t,i,r){i||(i=new Joe),r||(r=this.scene.sys.cameras.main);var s=r.scrollX,n=r.scrollY,a=e+s*this.scrollFactorX-s,h=t+n*this.scrollFactorY-n;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(a,h,i):Koe(a,h,this.x,this.y,this.rotation,this.scaleX,this.scaleY,i),this._originComponent&&(i.x+=this._displayOriginX,i.y+=this._displayOriginY),i},getParentRotation:function(){for(var e=0,t=this.parentContainer;t;)e+=t.rotation,t=t.parentContainer;return e}};NS.exports=Qoe});var Zd=l((HYe,BS)=>{var GS=1,$oe={_visible:!0,visible:{get:function(){return this._visible},set:function(e){e?(this._visible=!0,this.renderFlags|=GS):(this._visible=!1,this.renderFlags&=~GS)}},setVisible:function(e){return this.visible=e,this}};BS.exports=$oe});var ye=l((KYe,US)=>{US.exports={Alpha:OT(),AlphaSingle:Od(),BlendMode:Fd(),ComputedSize:BT(),Crop:kT(),Depth:Dd(),Flip:XT(),GetBounds:oE(),Mask:kd(),Origin:rS(),PathFollower:fS(),Pipeline:Yd(),ScrollFactor:Xd(),Size:TS(),Texture:_S(),TextureCrop:RS(),Tint:AS(),ToJSON:wo(),Transform:Kd(),TransformMatrix:xt(),Visible:Zd()}});var zS=l((ZYe,kS)=>{kS.exports="changedata"});var XS=l((JYe,YS)=>{YS.exports="changedata-"});var WS=l((QYe,VS)=>{VS.exports="destroy"});var KS=l(($Ye,HS)=>{HS.exports="removedata"});var JS=l((jYe,ZS)=>{ZS.exports="setdata"});var Jd=l((e3e,QS)=>{QS.exports={CHANGE_DATA:zS(),CHANGE_DATA_KEY:XS(),DESTROY:WS(),REMOVE_DATA:KS(),SET_DATA:JS()}});var Js=l((t3e,$S)=>{var joe=C(),Tr=Jd(),eue=new joe({initialize:function(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(Tr.DESTROY,this.destroy,this)},get:function(e){var t=this.list;if(Array.isArray(e)){for(var i=[],r=0;r<e.length;r++)i.push(t[e[r]]);return i}else return t[e]},getAll:function(){var e={};for(var t in this.list)this.list.hasOwnProperty(t)&&(e[t]=this.list[t]);return e},query:function(e){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(e)&&(t[i]=this.list[i]);return t},set:function(e,t){if(this._frozen)return this;if(typeof e=="string")return this.setValue(e,t);for(var i in e)this.setValue(i,e[i]);return this},inc:function(e,t){if(this._frozen)return this;t===void 0&&(t=1);var i=this.get(e);return i===void 0&&(i=0),this.set(e,i+t),this},toggle:function(e){return this._frozen?this:(this.set(e,!this.get(e)),this)},setValue:function(e,t){if(this._frozen)return this;if(this.has(e))this.values[e]=t;else{var i=this,r=this.list,s=this.events,n=this.parent;Object.defineProperty(this.values,e,{enumerable:!0,configurable:!0,get:function(){return r[e]},set:function(a){if(!i._frozen){var h=r[e];r[e]=a,s.emit(Tr.CHANGE_DATA,n,e,a,h),s.emit(Tr.CHANGE_DATA_KEY+e,n,a,h)}}}),r[e]=t,s.emit(Tr.SET_DATA,n,e,t)}return this},each:function(e,t){for(var i=[this.parent,null,void 0],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var s in this.list)i[1]=s,i[2]=this.list[s],e.apply(t,i);return this},merge:function(e,t){t===void 0&&(t=!0);for(var i in e)e.hasOwnProperty(i)&&(t||!t&&!this.has(i))&&this.setValue(i,e[i]);return this},remove:function(e){if(this._frozen)return this;if(Array.isArray(e))for(var t=0;t<e.length;t++)this.removeValue(e[t]);else return this.removeValue(e);return this},removeValue:function(e){if(this.has(e)){var t=this.list[e];delete this.list[e],delete this.values[e],this.events.emit(Tr.REMOVE_DATA,this.parent,e,t)}return this},pop:function(e){var t=void 0;return!this._frozen&&this.has(e)&&(t=this.list[e],delete this.list[e],delete this.values[e],this.events.emit(Tr.REMOVE_DATA,this.parent,e,t)),t},has:function(e){return this.list.hasOwnProperty(e)},setFreeze:function(e){return this._frozen=e,this},reset:function(){for(var e in this.list)delete this.list[e],delete this.values[e];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(Tr.CHANGE_DATA),this.events.off(Tr.SET_DATA),this.events.off(Tr.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(e){this._frozen=!!e}},count:{get:function(){var e=0;for(var t in this.list)this.list[t]!==void 0&&e++;return e}}});$S.exports=eue});var ue=l((i3e,Qd)=>{"use strict";var tue=Object.prototype.hasOwnProperty,Mt="~";function Ga(){}Object.create&&(Ga.prototype=Object.create(null),new Ga().__proto__||(Mt=!1));function iue(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function jS(e,t,i,r,s){if(typeof i!="function")throw new TypeError("The listener must be a function");var n=new iue(i,r||e,s),a=Mt?Mt+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],n]:e._events[a].push(n):(e._events[a]=n,e._eventsCount++),e}function Ro(e,t){--e._eventsCount===0?e._events=new Ga:delete e._events[t]}function yt(){this._events=new Ga,this._eventsCount=0}yt.prototype.eventNames=function(){var t=[],i,r;if(this._eventsCount===0)return t;for(r in i=this._events)tue.call(i,r)&&t.push(Mt?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(i)):t};yt.prototype.listeners=function(t){var i=Mt?Mt+t:t,r=this._events[i];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,n=r.length,a=new Array(n);s<n;s++)a[s]=r[s].fn;return a};yt.prototype.listenerCount=function(t){var i=Mt?Mt+t:t,r=this._events[i];return r?r.fn?1:r.length:0};yt.prototype.emit=function(t,i,r,s,n,a){var h=Mt?Mt+t:t;if(!this._events[h])return!1;var o=this._events[h],u=arguments.length,f,d;if(o.fn){switch(o.once&&this.removeListener(t,o.fn,void 0,!0),u){case 1:return o.fn.call(o.context),!0;case 2:return o.fn.call(o.context,i),!0;case 3:return o.fn.call(o.context,i,r),!0;case 4:return o.fn.call(o.context,i,r,s),!0;case 5:return o.fn.call(o.context,i,r,s,n),!0;case 6:return o.fn.call(o.context,i,r,s,n,a),!0}for(d=1,f=new Array(u-1);d<u;d++)f[d-1]=arguments[d];o.fn.apply(o.context,f)}else{var v=o.length,c;for(d=0;d<v;d++)switch(o[d].once&&this.removeListener(t,o[d].fn,void 0,!0),u){case 1:o[d].fn.call(o[d].context);break;case 2:o[d].fn.call(o[d].context,i);break;case 3:o[d].fn.call(o[d].context,i,r);break;case 4:o[d].fn.call(o[d].context,i,r,s);break;default:if(!f)for(c=1,f=new Array(u-1);c<u;c++)f[c-1]=arguments[c];o[d].fn.apply(o[d].context,f)}}return!0};yt.prototype.on=function(t,i,r){return jS(this,t,i,r,!1)};yt.prototype.once=function(t,i,r){return jS(this,t,i,r,!0)};yt.prototype.removeListener=function(t,i,r,s){var n=Mt?Mt+t:t;if(!this._events[n])return this;if(!i)return Ro(this,n),this;var a=this._events[n];if(a.fn)a.fn===i&&(!s||a.once)&&(!r||a.context===r)&&Ro(this,n);else{for(var h=0,o=[],u=a.length;h<u;h++)(a[h].fn!==i||s&&!a[h].once||r&&a[h].context!==r)&&o.push(a[h]);o.length?this._events[n]=o.length===1?o[0]:o:Ro(this,n)}return this};yt.prototype.removeAllListeners=function(t){var i;return t?(i=Mt?Mt+t:t,this._events[i]&&Ro(this,i)):(this._events=new Ga,this._eventsCount=0),this};yt.prototype.off=yt.prototype.removeListener;yt.prototype.addListener=yt.prototype.on;yt.prefixed=Mt;yt.EventEmitter=yt;typeof Qd!="undefined"&&(Qd.exports=yt)});var t_=l((r3e,e_)=>{e_.exports="addedtoscene"});var r_=l((s3e,i_)=>{i_.exports="destroy"});var n_=l((n3e,s_)=>{s_.exports="removedfromscene"});var h_=l((a3e,a_)=>{a_.exports="complete"});var u_=l((h3e,o_)=>{o_.exports="created"});var f_=l((o3e,l_)=>{l_.exports="error"});var v_=l((u3e,d_)=>{d_.exports="loop"});var p_=l((l3e,c_)=>{c_.exports="play"});var g_=l((f3e,m_)=>{m_.exports="seeked"});var y_=l((d3e,x_)=>{x_.exports="seeking"});var E_=l((v3e,T_)=>{T_.exports="stop"});var __=l((c3e,S_)=>{S_.exports="timeout"});var C_=l((p3e,w_)=>{w_.exports="unlocked"});var Vr=l((m3e,R_)=>{R_.exports={ADDED_TO_SCENE:t_(),DESTROY:r_(),REMOVED_FROM_SCENE:n_(),VIDEO_COMPLETE:h_(),VIDEO_CREATED:u_(),VIDEO_ERROR:f_(),VIDEO_LOOP:v_(),VIDEO_PLAY:p_(),VIDEO_SEEKED:g_(),VIDEO_SEEKING:y_(),VIDEO_STOP:E_(),VIDEO_TIMEOUT:__(),VIDEO_UNLOCKED:C_()}});var A_=l((g3e,q_)=>{q_.exports="addedtoscene"});var M_=l((x3e,P_)=>{P_.exports="boot"});var L_=l((y3e,b_)=>{b_.exports="create"});var F_=l((T3e,O_)=>{O_.exports="destroy"});var I_=l((E3e,D_)=>{D_.exports="pause"});var G_=l((S3e,N_)=>{N_.exports="postupdate"});var U_=l((_3e,B_)=>{B_.exports="prerender"});var z_=l((w3e,k_)=>{k_.exports="preupdate"});var X_=l((C3e,Y_)=>{Y_.exports="ready"});var W_=l((R3e,V_)=>{V_.exports="removedfromscene"});var K_=l((q3e,H_)=>{H_.exports="render"});var J_=l((A3e,Z_)=>{Z_.exports="resume"});var $_=l((P3e,Q_)=>{Q_.exports="shutdown"});var ew=l((M3e,j_)=>{j_.exports="sleep"});var iw=l((b3e,tw)=>{tw.exports="start"});var sw=l((L3e,rw)=>{rw.exports="transitioncomplete"});var aw=l((O3e,nw)=>{nw.exports="transitioninit"});var ow=l((F3e,hw)=>{hw.exports="transitionout"});var lw=l((D3e,uw)=>{uw.exports="transitionstart"});var dw=l((I3e,fw)=>{fw.exports="transitionwake"});var cw=l((N3e,vw)=>{vw.exports="update"});var mw=l((G3e,pw)=>{pw.exports="wake"});var Ne=l((B3e,gw)=>{gw.exports={ADDED_TO_SCENE:A_(),BOOT:M_(),CREATE:L_(),DESTROY:F_(),PAUSE:I_(),POST_UPDATE:G_(),PRE_RENDER:U_(),PRE_UPDATE:z_(),READY:X_(),REMOVED_FROM_SCENE:W_(),RENDER:K_(),RESUME:J_(),SHUTDOWN:$_(),SLEEP:ew(),START:iw(),TRANSITION_COMPLETE:sw(),TRANSITION_INIT:aw(),TRANSITION_OUT:ow(),TRANSITION_START:lw(),TRANSITION_WAKE:dw(),UPDATE:cw(),WAKE:mw()}});var Fe=l((U3e,Tw)=>{var rue=C(),sue=wo(),Ba=Js(),xw=ue(),Ua=Vr(),yw=Ne(),$d=new rue({Extends:xw,initialize:function(t,i){xw.call(this),this.scene=t,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(Ua.ADDED_TO_SCENE,this.addedToScene,this),this.on(Ua.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},setState:function(e){return this.state=e,this},setDataEnabled:function(){return this.data||(this.data=new Ba(this)),this},setData:function(e,t){return this.data||(this.data=new Ba(this)),this.data.set(e,t),this},incData:function(e,t){return this.data||(this.data=new Ba(this)),this.data.inc(e,t),this},toggleData:function(e){return this.data||(this.data=new Ba(this)),this.data.toggle(e),this},getData:function(e){return this.data||(this.data=new Ba(this)),this.data.get(e)},setInteractive:function(e,t,i){return this.scene.sys.input.enable(this,e,t,i),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return sue(this)},willRender:function(e){return!($d.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&e.id)},getIndexList:function(){for(var e=this,t=this.parentContainer,i=[];t&&(i.unshift(t.getIndex(e)),e=t,t.parentContainer);)t=t.parentContainer;return this.displayList?i.unshift(this.displayList.getIndex(e)):i.unshift(this.scene.sys.displayList.getIndex(e)),i},addToDisplayList:function(e){return e===void 0&&(e=this.scene.sys.displayList),this.displayList&&this.displayList!==e&&this.removeFromDisplayList(),e.exists(this)||(this.displayList=e,e.add(this,!0),e.queueDepthSort(),this.emit(Ua.ADDED_TO_SCENE,this,this.scene),e.events.emit(yw.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var e=this.displayList||this.scene.sys.displayList;return e.exists(this)&&(e.remove(this,!0),e.queueDepthSort(),this.displayList=null,this.emit(Ua.REMOVED_FROM_SCENE,this,this.scene),e.events.emit(yw.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(e){!this.scene||this.ignoreDestroy||(e===void 0&&(e=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(Ua.DESTROY,this,e),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});$d.RENDER_MASK=15;Tw.exports=$d});var ka=l((k3e,Sw)=>{var nue=Si(),aue=zr(),hue=kr(),oue=C(),Cn=ye(),Ew=Fe(),uue=Ae(),lue=Yr(),fue=new oue({Extends:Ew,Mixins:[Cn.Depth,Cn.GetBounds,Cn.Origin,Cn.Transform,Cn.ScrollFactor,Cn.Visible],initialize:function(t,i,r,s,n){s===void 0&&(s=1),n===void 0&&(n=s),Ew.call(this,t,"Zone"),this.setPosition(i,r),this.width=s,this.height=n,this.blendMode=nue.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t,i){i===void 0&&(i=!0),this.width=e,this.height=t,this.updateDisplayOrigin();var r=this.input;return i&&r&&!r.customHitArea&&(r.hitArea.width=e,r.hitArea.height=t),this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this},setCircleDropZone:function(e){return this.setDropZone(new aue(0,0,e),hue)},setRectangleDropZone:function(e,t){return this.setDropZone(new uue(0,0,e,t),lue)},setDropZone:function(e,t){return this.input||this.setInteractive(e,t,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(e,t,i){i.addToRenderList(t)},renderWebGL:function(e,t,i){i.addToRenderList(t)}});Sw.exports=fue});var Cw=l((z3e,ww)=>{var due=Ad(),vue=Fa(),Qs=z(),_w=B(),cue=ka(),Pi=new cue({sys:{queueDepthSort:_w,events:{once:_w}}},0,0,1,1),pue=function(e,t){t===void 0&&(t={});var i=t.hasOwnProperty("width"),r=t.hasOwnProperty("height"),s=Qs(t,"width",-1),n=Qs(t,"height",-1),a=Qs(t,"cellWidth",1),h=Qs(t,"cellHeight",a),o=Qs(t,"position",vue.TOP_LEFT),u=Qs(t,"x",0),f=Qs(t,"y",0),d=0,v=0,c=s*a,p=n*h;Pi.setPosition(u,f),Pi.setSize(a,h);for(var m=0;m<e.length;m++)if(due(e[m],Pi,o),i&&s===-1)Pi.x+=a;else if(r&&n===-1)Pi.y+=h;else if(r&&!i){if(v+=h,Pi.y+=h,v===p&&(v=0,d+=a,Pi.y=f,Pi.x+=a,d===c))break}else if(d+=a,Pi.x+=a,d===c&&(d=0,v+=h,Pi.x=u,Pi.y+=h,v===p))break;return e};ww.exports=pue});var qw=l((Y3e,Rw)=>{var mue=qi(),gue=function(e,t,i,r,s){return mue(e,"alpha",t,i,r,s)};Rw.exports=gue});var Pw=l((X3e,Aw)=>{var xue=qi(),yue=function(e,t,i,r,s){return xue(e,"x",t,i,r,s)};Aw.exports=yue});var Lw=l((V3e,bw)=>{var Mw=qi(),Tue=function(e,t,i,r,s,n,a){return i==null&&(i=t),Mw(e,"x",t,r,n,a),Mw(e,"y",i,s,n,a)};bw.exports=Tue});var Fw=l((W3e,Ow)=>{var Eue=qi(),Sue=function(e,t,i,r,s){return Eue(e,"y",t,i,r,s)};Ow.exports=Sue});var Iw=l((H3e,Dw)=>{var _ue=function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=6.28);for(var s=i,n=(r-i)/e.length,a=0;a<e.length;a++)e[a].x=t.x+t.radius*Math.cos(s),e[a].y=t.y+t.radius*Math.sin(s),s+=n;return e};Dw.exports=_ue});var Gw=l((K3e,Nw)=>{var wue=function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=6.28);for(var s=i,n=(r-i)/e.length,a=t.width/2,h=t.height/2,o=0;o<e.length;o++)e[o].x=t.x+a*Math.cos(s),e[o].y=t.y+h*Math.sin(s),s+=n;return e};Nw.exports=wue});var Uw=l((Z3e,Bw)=>{var Cue=go(),Rue=function(e,t){for(var i=Cue(t,e.length),r=0;r<e.length;r++){var s=e[r],n=i[r];s.x=n.x,s.y=n.y}return e};Bw.exports=Rue});var jd=l((J3e,zw)=>{var kw=Ia(),que=$(),Aue=function(e,t,i,r){if(r===void 0&&(r=[]),!t&&!i)return r;t?i=Math.round(kw(e)/t):t=kw(e)/i;for(var s=e.x,n=e.y,a=0,h=0;h<i;h++)switch(r.push(new que(s,n)),a){case 0:s+=t,s>=e.right&&(a=1,n+=s-e.right,s=e.right);break;case 1:n+=t,n>=e.bottom&&(a=2,s-=n-e.bottom,n=e.bottom);break;case 2:s-=t,s<=e.left&&(a=3,n-=e.left-s,s=e.left);break;case 3:n-=t,n<=e.top&&(a=0,n=e.top);break}return r};zw.exports=Aue});var qo=l((Q3e,Yw)=>{var Pue=function(e,t){t===void 0&&(t=1);for(var i=null,r=0;r<t;r++)i=e.shift(),e.push(i);return i};Yw.exports=Pue});var Ao=l(($3e,Xw)=>{var Mue=function(e,t){t===void 0&&(t=1);for(var i=null,r=0;r<t;r++)i=e.pop(),e.unshift(i);return i};Xw.exports=Mue});var Ww=l((j3e,Vw)=>{var bue=jd(),Lue=qo(),Oue=Ao(),Fue=function(e,t,i){i===void 0&&(i=0);var r=bue(t,!1,e.length);i>0?Lue(r,i):i<0&&Oue(r,Math.abs(i));for(var s=0;s<e.length;s++)e[s].x=r[s].x,e[s].y=r[s].y;return e};Vw.exports=Fue});var ev=l((eXe,Hw)=>{var Due=function(e,t,i){t===void 0&&(t=1),i===void 0&&(i=[]);var r=Math.round(e.x1),s=Math.round(e.y1),n=Math.round(e.x2),a=Math.round(e.y2),h=Math.abs(n-r),o=Math.abs(a-s),u=r<n?1:-1,f=s<a?1:-1,d=h-o;i.push({x:r,y:s});for(var v=1;!(r===n&&s===a);){var c=d<<1;c>-o&&(d-=o,r+=u),c<h&&(d+=h,s+=f),v%t===0&&i.push({x:r,y:s}),v++}return i};Hw.exports=Due});var Zw=l((tXe,Kw)=>{var tv=ev(),Iue=function(e,t,i){var r=tv({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},i),s=tv({x1:t.x2,y1:t.y2,x2:t.x3,y2:t.y3},i),n=tv({x1:t.x3,y1:t.y3,x2:t.x1,y2:t.y1},i);r.pop(),s.pop(),n.pop(),r=r.concat(s,n);for(var a=r.length/e.length,h=0,o=0;o<e.length;o++){var u=e[o],f=r[Math.floor(h)];u.x=f.x,u.y=f.y,h+=a}return e};Kw.exports=Iue});var Qw=l((iXe,Jw)=>{var Nue=function(e,t,i){for(var r=0;r<e.length;r++){var s=e[r];s.anims&&s.anims.play(t,i)}return e};Jw.exports=Nue});var dt=l((rXe,$w)=>{var Gue=function(e,t,i,r,s,n){r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=1);var a,h=0,o=e.length;if(n===1)for(a=s;a<o;a++)e[a][t]=i+h*r,h++;else for(a=s;a>=0;a--)e[a][t]=i+h*r,h++;return e};$w.exports=Gue});var e1=l((sXe,jw)=>{var Bue=po(),Uue=function(e,t){for(var i=0;i<e.length;i++)Bue(t,e[i]);return e};jw.exports=Uue});var Po=l((nXe,t1)=>{var kue=$(),zue=function(e,t){t===void 0&&(t=new kue);var i=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return t.x=e.x+r*Math.cos(i)*e.width/2,t.y=e.y+r*Math.sin(i)*e.height/2,t};t1.exports=zue});var r1=l((aXe,i1)=>{var Yue=Po(),Xue=function(e,t){for(var i=0;i<e.length;i++)Yue(t,e[i]);return e};i1.exports=Xue});var n1=l((hXe,s1)=>{var Vue=xo(),Wue=function(e,t){for(var i=0;i<e.length;i++)Vue(t,e[i]);return e};s1.exports=Wue});var h1=l((oXe,a1)=>{var Hue=To(),Kue=function(e,t){for(var i=0;i<e.length;i++)Hue(t,e[i]);return e};a1.exports=Kue});var Mo=l((uXe,o1)=>{var Zue=$(),Jue=function(e,t){t===void 0&&(t=new Zue);var i=e.x2-e.x1,r=e.y2-e.y1,s=e.x3-e.x1,n=e.y3-e.y1,a=Math.random(),h=Math.random();return a+h>=1&&(a=1-a,h=1-h),t.x=e.x1+(i*a+s*h),t.y=e.y1+(r*a+n*h),t};o1.exports=Jue});var l1=l((lXe,u1)=>{var Que=Mo(),$ue=function(e,t){for(var i=0;i<e.length;i++)Que(t,e[i]);return e};u1.exports=$ue});var d1=l((fXe,f1)=>{var jue=qi(),ele=function(e,t,i,r,s){return jue(e,"rotation",t,i,r,s)};f1.exports=ele});var bo=l((dXe,v1)=>{var tle=function(e,t,i,r,s){var n=r+Math.atan2(e.y-i,e.x-t);return e.x=t+s*Math.cos(n),e.y=i+s*Math.sin(n),e};v1.exports=tle});var Wr=l((vXe,c1)=>{var ile=function(e,t,i,r){var s=e-i,n=t-r;return Math.sqrt(s*s+n*n)};c1.exports=ile});var m1=l((cXe,p1)=>{var rle=bo(),sle=Wr(),nle=function(e,t,i){for(var r=t.x,s=t.y,n=0;n<e.length;n++){var a=e[n];rle(a,r,s,i,Math.max(1,sle(a.x,a.y,r,s)))}return e};p1.exports=nle});var x1=l((pXe,g1)=>{var ale=bo(),hle=function(e,t,i,r){var s=t.x,n=t.y;if(r===0)return e;for(var a=0;a<e.length;a++)ale(e[a],s,n,i,r);return e};g1.exports=hle});var T1=l((mXe,y1)=>{var ole=qi(),ule=function(e,t,i,r,s){return ole(e,"scaleX",t,i,r,s)};y1.exports=ule});var _1=l((gXe,S1)=>{var E1=qi(),lle=function(e,t,i,r,s,n,a){return i==null&&(i=t),E1(e,"scaleX",t,r,n,a),E1(e,"scaleY",i,s,n,a)};S1.exports=lle});var C1=l((xXe,w1)=>{var fle=qi(),dle=function(e,t,i,r,s){return fle(e,"scaleY",t,i,r,s)};w1.exports=dle});var q1=l((yXe,R1)=>{var vle=dt(),cle=function(e,t,i,r,s){return vle(e,"alpha",t,i,r,s)};R1.exports=cle});var P1=l((TXe,A1)=>{var ple=dt(),mle=function(e,t,i,r){return ple(e,"blendMode",t,0,i,r)};A1.exports=mle});var b1=l((EXe,M1)=>{var gle=dt(),xle=function(e,t,i,r,s){return gle(e,"depth",t,i,r,s)};M1.exports=xle});var O1=l((SXe,L1)=>{var yle=function(e,t,i){for(var r=0;r<e.length;r++)e[r].setInteractive(t,i);return e};L1.exports=yle});var I1=l((_Xe,D1)=>{var F1=dt(),Tle=function(e,t,i,r,s,n,a){return i==null&&(i=t),F1(e,"originX",t,r,n,a),F1(e,"originY",i,s,n,a),e.forEach(function(h){h.updateDisplayOrigin()}),e};D1.exports=Tle});var G1=l((wXe,N1)=>{var Ele=dt(),Sle=function(e,t,i,r,s){return Ele(e,"rotation",t,i,r,s)};N1.exports=Sle});var k1=l((CXe,U1)=>{var B1=dt(),_le=function(e,t,i,r,s,n,a){return i==null&&(i=t),B1(e,"scaleX",t,r,n,a),B1(e,"scaleY",i,s,n,a)};U1.exports=_le});var Y1=l((RXe,z1)=>{var wle=dt(),Cle=function(e,t,i,r,s){return wle(e,"scaleX",t,i,r,s)};z1.exports=Cle});var V1=l((qXe,X1)=>{var Rle=dt(),qle=function(e,t,i,r,s){return Rle(e,"scaleY",t,i,r,s)};X1.exports=qle});var K1=l((AXe,H1)=>{var W1=dt(),Ale=function(e,t,i,r,s,n,a){return i==null&&(i=t),W1(e,"scrollFactorX",t,r,n,a),W1(e,"scrollFactorY",i,s,n,a)};H1.exports=Ale});var J1=l((PXe,Z1)=>{var Ple=dt(),Mle=function(e,t,i,r,s){return Ple(e,"scrollFactorX",t,i,r,s)};Z1.exports=Mle});var $1=l((MXe,Q1)=>{var ble=dt(),Lle=function(e,t,i,r,s){return ble(e,"scrollFactorY",t,i,r,s)};Q1.exports=Lle});var eC=l((bXe,j1)=>{var Ole=function(e,t,i,r,s){for(var n=0;n<e.length;n++)e[n].setTint(t,i,r,s);return e};j1.exports=Ole});var iC=l((LXe,tC)=>{var Fle=dt(),Dle=function(e,t,i,r){return Fle(e,"visible",t,0,i,r)};tC.exports=Dle});var sC=l((OXe,rC)=>{var Ile=dt(),Nle=function(e,t,i,r,s){return Ile(e,"x",t,i,r,s)};rC.exports=Nle});var hC=l((FXe,aC)=>{var nC=dt(),Gle=function(e,t,i,r,s,n,a){return i==null&&(i=t),nC(e,"x",t,r,n,a),nC(e,"y",i,s,n,a)};aC.exports=Gle});var uC=l((DXe,oC)=>{var Ble=dt(),Ule=function(e,t,i,r,s){return Ble(e,"y",t,i,r,s)};oC.exports=Ule});var fC=l((IXe,lC)=>{var kle=xe(),zle=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=new kle);var n,a;if(e.length>1){var h,o,u,f;if(r===0){var d=e.length-1;for(n=e[d].x,a=e[d].y,h=d-1;h>=0;h--)f=e[h],o=f.x,u=f.y,f.x=n,f.y=a,n=o,a=u;e[d].x=t,e[d].y=i}else{for(n=e[0].x,a=e[0].y,h=1;h<e.length;h++)f=e[h],o=f.x,u=f.y,f.x=n,f.y=a,n=o,a=u;e[0].x=t,e[0].y=i}}else n=e[0].x,a=e[0].y,e[0].x=t,e[0].y=i;return s.x=n,s.y=a,s};lC.exports=zle});var Lo=l((NXe,dC)=>{var Yle=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[i],e[i]=r}return e};dC.exports=Yle});var cC=l((GXe,vC)=>{var Xle=Lo(),Vle=function(e){return Xle(e)};vC.exports=Vle});var Oo=l((BXe,pC)=>{var Wle=function(e,t,i){return e=Math.max(0,Math.min(1,(e-t)/(i-t))),e*e*e*(e*(e*6-15)+10)};pC.exports=Wle});var xC=l((UXe,gC)=>{var mC=Oo(),Hle=function(e,t,i,r,s){s===void 0&&(s=!1);var n=Math.abs(r-i)/e.length,a;if(s)for(a=0;a<e.length;a++)e[a][t]+=mC(a*n,i,r);else for(a=0;a<e.length;a++)e[a][t]=mC(a*n,i,r);return e};gC.exports=Hle});var Fo=l((kXe,yC)=>{var Kle=function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))};yC.exports=Kle});var SC=l((zXe,EC)=>{var TC=Fo(),Zle=function(e,t,i,r,s){s===void 0&&(s=!1);var n=Math.abs(r-i)/e.length,a;if(s)for(a=0;a<e.length;a++)e[a][t]+=TC(a*n,i,r);else for(a=0;a<e.length;a++)e[a][t]=TC(a*n,i,r);return e};EC.exports=Zle});var wC=l((YXe,_C)=>{var Jle=function(e,t,i,r,s){s===void 0&&(s=!1);var n=Math.abs(r-i)/e.length,a;if(s)for(a=0;a<e.length;a++)e[a][t]+=a*n+i;else for(a=0;a<e.length;a++)e[a][t]=a*n+i;return e};_C.exports=Jle});var RC=l((XXe,CC)=>{var Qle=function(e){for(var t=0;t<e.length;t++)e[t].visible=!e[t].visible;return e};CC.exports=Qle});var PC=l((VXe,AC)=>{var qC=Xr(),$le=function(e,t,i){i===void 0&&(i=0);for(var r=0;r<e.length;r++){var s=e[r];s.x=qC(s.x,t.left-i,t.right+i),s.y=qC(s.y,t.top-i,t.bottom+i)}return e};AC.exports=$le});var iv=l((WXe,MC)=>{MC.exports={AlignTo:Zy(),Angle:$y(),Call:eT(),GetFirst:iT(),GetLast:sT(),GridAlign:Cw(),IncAlpha:qw(),IncX:Pw(),IncXY:Lw(),IncY:Fw(),PlaceOnCircle:Iw(),PlaceOnEllipse:Gw(),PlaceOnLine:Uw(),PlaceOnRectangle:Ww(),PlaceOnTriangle:Zw(),PlayAnimation:Qw(),PropertyValueInc:qi(),PropertyValueSet:dt(),RandomCircle:e1(),RandomEllipse:r1(),RandomLine:n1(),RandomRectangle:h1(),RandomTriangle:l1(),Rotate:d1(),RotateAround:m1(),RotateAroundDistance:x1(),ScaleX:T1(),ScaleXY:_1(),ScaleY:C1(),SetAlpha:q1(),SetBlendMode:P1(),SetDepth:b1(),SetHitArea:O1(),SetOrigin:I1(),SetRotation:G1(),SetScale:k1(),SetScaleX:Y1(),SetScaleY:V1(),SetScrollFactor:K1(),SetScrollFactorX:J1(),SetScrollFactorY:$1(),SetTint:eC(),SetVisible:iC(),SetX:sC(),SetXY:hC(),SetY:uC(),ShiftPosition:fC(),Shuffle:cC(),SmootherStep:xC(),SmoothStep:SC(),Spread:wC(),ToggleVisible:RC(),WrapInRectangle:PC()}});var Rn=l((HXe,bC)=>{var jle=C(),efe=new jle({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i][0],t[i][1])},set:function(e,t){return this.has(e)||this.size++,this.entries[e]=t,this},get:function(e){if(this.has(e))return this.entries[e]},getArray:function(){var e=[],t=this.entries;for(var i in t)e.push(t[i]);return e},has:function(e){return this.entries.hasOwnProperty(e)},delete:function(e){return this.has(e)&&(delete this.entries[e],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(e){delete this.entries[e]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var e=[],t=this.entries;for(var i in t)e.push(t[i]);return e},dump:function(){var e=this.entries;console.group("Map");for(var t in e)console.log(t,e[t]);console.groupEnd()},each:function(e){var t=this.entries;for(var i in t)if(e(i,t[i])===!1)break;return this},contains:function(e){var t=this.entries;for(var i in t)if(t[i]===e)return!0;return!1},merge:function(e,t){t===void 0&&(t=!1);var i=this.entries,r=e.entries;for(var s in r)i.hasOwnProperty(s)&&t?i[s]=r[s]:this.set(s,r[s]);return this}});bC.exports=efe});var OC=l((KXe,LC)=>{LC.exports="add"});var DC=l((ZXe,FC)=>{FC.exports="remove"});var rv=l((JXe,IC)=>{IC.exports={ADD:OC(),REMOVE:DC()}});var sv=l((QXe,GC)=>{var tfe=C(),ife=Rn(),rfe=ue(),NC=rv(),sfe=new tfe({initialize:function(){this.entries=new ife,this.events=new rfe},add:function(e,t){return this.entries.set(e,t),this.events.emit(NC.ADD,this,e,t),this},has:function(e){return this.entries.has(e)},exists:function(e){return this.entries.has(e)},get:function(e){return this.entries.get(e)},remove:function(e){var t=this.get(e);return t&&(this.entries.delete(e),this.events.emit(NC.REMOVE,this,e,t.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});GC.exports=sfe});var nv=l(($Xe,BC)=>{var $t=sv(),nfe=C(),afe=Ye(),hfe=new nfe({initialize:function(t){this.game=t,this.binary=new $t,this.bitmapFont=new $t,this.json=new $t,this.physics=new $t,this.shader=new $t,this.audio=new $t,this.video=new $t,this.text=new $t,this.html=new $t,this.obj=new $t,this.tilemap=new $t,this.xml=new $t,this.custom={},this.game.events.once(afe.DESTROY,this.destroy,this)},addCustom:function(e){return this.custom.hasOwnProperty(e)||(this.custom[e]=new $t),this.custom[e]},destroy:function(){for(var e=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],t=0;t<e.length;t++)this[e[t]].destroy(),this[e[t]]=null;for(var i in this.custom)this.custom[i].destroy();this.custom=null,this.game=null}});BC.exports=hfe});var kC=l((jXe,UC)=>{UC.exports={BaseCache:sv(),CacheManager:nv(),Events:rv()}});var YC=l((eVe,zC)=>{var ofe=C(),jt=he(),ufe=new ofe({initialize:function(t){this.camera=jt(t,"camera",null),this.left=jt(t,"left",null),this.right=jt(t,"right",null),this.up=jt(t,"up",null),this.down=jt(t,"down",null),this.zoomIn=jt(t,"zoomIn",null),this.zoomOut=jt(t,"zoomOut",null),this.zoomSpeed=jt(t,"zoomSpeed",.01),this.minZoom=jt(t,"minZoom",.001),this.maxZoom=jt(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var i=jt(t,"speed",null);typeof i=="number"?(this.speedX=i,this.speedY=i):(this.speedX=jt(t,"speed.x",0),this.speedY=jt(t,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(e){return this.camera=e,this},update:function(e){if(!!this.active){e===void 0&&(e=1);var t=this.camera;this.up&&this.up.isDown?t.scrollY-=this.speedY*e|0:this.down&&this.down.isDown&&(t.scrollY+=this.speedY*e|0),this.left&&this.left.isDown?t.scrollX-=this.speedX*e|0:this.right&&this.right.isDown&&(t.scrollX+=this.speedX*e|0),this.zoomIn&&this.zoomIn.isDown?(t.zoom-=this.zoomSpeed,t.zoom<this.minZoom&&(t.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(t.zoom+=this.zoomSpeed,t.zoom>this.maxZoom&&(t.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});zC.exports=ufe});var VC=l((tVe,XC)=>{var lfe=C(),Je=he(),ffe=new lfe({initialize:function(t){this.camera=Je(t,"camera",null),this.left=Je(t,"left",null),this.right=Je(t,"right",null),this.up=Je(t,"up",null),this.down=Je(t,"down",null),this.zoomIn=Je(t,"zoomIn",null),this.zoomOut=Je(t,"zoomOut",null),this.zoomSpeed=Je(t,"zoomSpeed",.01),this.minZoom=Je(t,"minZoom",.001),this.maxZoom=Je(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var i=Je(t,"acceleration",null);typeof i=="number"?(this.accelX=i,this.accelY=i):(this.accelX=Je(t,"acceleration.x",0),this.accelY=Je(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=Je(t,"drag",null);typeof r=="number"?(this.dragX=r,this.dragY=r):(this.dragX=Je(t,"drag.x",0),this.dragY=Je(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var s=Je(t,"maxSpeed",null);typeof s=="number"?(this.maxSpeedX=s,this.maxSpeedY=s):(this.maxSpeedX=Je(t,"maxSpeed.x",0),this.maxSpeedY=Je(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(e){return this.camera=e,this},update:function(e){if(!!this.active){e===void 0&&(e=1);var t=this.camera;this._speedX>0?(this._speedX-=this.dragX*e,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*e,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*e,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*e,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(t.scrollX-=this._speedX*e|0),this._speedY!==0&&(t.scrollY-=this._speedY*e|0),this._zoom!==0&&(t.zoom+=this._zoom,t.zoom<this.minZoom?t.zoom=this.minZoom:t.zoom>this.maxZoom&&(t.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});XC.exports=ffe});var HC=l((iVe,WC)=>{WC.exports={FixedKeyControl:YC(),SmoothedKeyControl:VC()}});var ZC=l((rVe,KC)=>{KC.exports="cameradestroy"});var QC=l((sVe,JC)=>{JC.exports="camerafadeincomplete"});var jC=l((nVe,$C)=>{$C.exports="camerafadeinstart"});var tR=l((aVe,eR)=>{eR.exports="camerafadeoutcomplete"});var rR=l((hVe,iR)=>{iR.exports="camerafadeoutstart"});var nR=l((oVe,sR)=>{sR.exports="cameraflashcomplete"});var hR=l((uVe,aR)=>{aR.exports="cameraflashstart"});var uR=l((lVe,oR)=>{oR.exports="followupdate"});var fR=l((fVe,lR)=>{lR.exports="camerapancomplete"});var vR=l((dVe,dR)=>{dR.exports="camerapanstart"});var pR=l((vVe,cR)=>{cR.exports="postrender"});var gR=l((cVe,mR)=>{mR.exports="prerender"});var yR=l((pVe,xR)=>{xR.exports="camerarotatecomplete"});var ER=l((mVe,TR)=>{TR.exports="camerarotatestart"});var _R=l((gVe,SR)=>{SR.exports="camerashakecomplete"});var CR=l((xVe,wR)=>{wR.exports="camerashakestart"});var qR=l((yVe,RR)=>{RR.exports="camerazoomcomplete"});var PR=l((TVe,AR)=>{AR.exports="camerazoomstart"});var fi=l((EVe,MR)=>{MR.exports={DESTROY:ZC(),FADE_IN_COMPLETE:QC(),FADE_IN_START:jC(),FADE_OUT_COMPLETE:tR(),FADE_OUT_START:rR(),FLASH_COMPLETE:nR(),FLASH_START:hR(),FOLLOW_UPDATE:uR(),PAN_COMPLETE:fR(),PAN_START:vR(),POST_RENDER:pR(),PRE_RENDER:gR(),ROTATE_COMPLETE:yR(),ROTATE_START:ER(),SHAKE_COMPLETE:_R(),SHAKE_START:CR(),ZOOM_COMPLETE:qR(),ZOOM_START:PR()}});var qn=l((SVe,bR)=>{var dfe=function(e,t,i){return e<<16|t<<8|i};bR.exports=dfe});var av=l((_Ve,LR)=>{var vfe=function(e,t,i,r){return r<<24|e<<16|t<<8|i};LR.exports=vfe});var Do=l((wVe,FR)=>{var OR=qn();function hv(e,t,i,r){var s=(e+t*6)%6,n=Math.min(s,4-s,1);return Math.round(255*(r-r*i*Math.max(0,n)))}var cfe=function(e,t,i,r){t===void 0&&(t=1),i===void 0&&(i=1);var s=hv(5,e,t,i),n=hv(3,e,t,i),a=hv(1,e,t,i);return r?r.setTo?r.setTo(s,n,a,r.alpha,!1):(r.r=s,r.g=n,r.b=a,r.color=OR(s,n,a),r):{r:s,g:n,b:a,color:OR(s,n,a)}};FR.exports=cfe});var ov=l((CVe,DR)=>{var pfe=function(e,t,i,r){r===void 0&&(r={h:0,s:0,v:0}),e/=255,t/=255,i/=255;var s=Math.min(e,t,i),n=Math.max(e,t,i),a=n-s,h=0,o=n===0?0:a/n,u=n;return n!==s&&(n===e?h=(t-i)/a+(t<i?6:0):n===t?h=(i-e)/a+2:n===i&&(h=(e-t)/a+4),h/=6),r.hasOwnProperty("_h")?(r._h=h,r._s=o,r._v=u):(r.h=h,r.s=o,r.v=u),r};DR.exports=pfe});var di=l((RVe,GR)=>{var mfe=C(),gfe=qn(),xfe=av(),Io=Do(),IR=ov(),NR=new mfe({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,i,r,s)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(e,t,i,r,s){return r===void 0&&(r=255),s===void 0&&(s=!0),this._locked=!0,this.red=e,this.green=t,this.blue=i,this.alpha=r,this._locked=!1,this.update(s)},setGLTo:function(e,t,i,r){return r===void 0&&(r=1),this._locked=!0,this.redGL=e,this.greenGL=t,this.blueGL=i,this.alphaGL=r,this._locked=!1,this.update(!0)},setFromRGB:function(e){return this._locked=!0,this.red=e.r,this.green=e.g,this.blue=e.b,e.hasOwnProperty("a")&&(this.alpha=e.a),this._locked=!1,this.update(!0)},setFromHSV:function(e,t,i){return Io(e,t,i,this)},update:function(e){if(e===void 0&&(e=!1),this._locked)return this;var t=this.r,i=this.g,r=this.b,s=this.a;return this._color=gfe(t,i,r),this._color32=xfe(t,i,r,s),this._rgba="rgba("+t+","+i+","+r+","+s/255+")",e&&IR(t,i,r,this),this},updateHSV:function(){var e=this.r,t=this.g,i=this.b;return IR(e,t,i,this),this},clone:function(){return new NR(this.r,this.g,this.b,this.a)},gray:function(e){return this.setTo(e,e,e)},random:function(e,t){e===void 0&&(e=0),t===void 0&&(t=255);var i=Math.floor(e+Math.random()*(t-e)),r=Math.floor(e+Math.random()*(t-e)),s=Math.floor(e+Math.random()*(t-e));return this.setTo(i,r,s)},randomGray:function(e,t){e===void 0&&(e=0),t===void 0&&(t=255);var i=Math.floor(e+Math.random()*(t-e));return this.setTo(i,i,i)},saturate:function(e){return this.s+=e/100,this},desaturate:function(e){return this.s-=e/100,this},lighten:function(e){return this.v+=e/100,this},darken:function(e){return this.v-=e/100,this},brighten:function(e){var t=this.r,i=this.g,r=this.b;return t=Math.max(0,Math.min(255,t-Math.round(255*-(e/100)))),i=Math.max(0,Math.min(255,i-Math.round(255*-(e/100)))),r=Math.max(0,Math.min(255,r-Math.round(255*-(e/100)))),this.setTo(t,i,r)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(e){this.gl[0]=Math.min(Math.abs(e),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(e){this.gl[1]=Math.min(Math.abs(e),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(e){this.gl[2]=Math.min(Math.abs(e),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(e){this.gl[3]=Math.min(Math.abs(e),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(e){e=Math.floor(Math.abs(e)),this.r=Math.min(e,255),this.gl[0]=e/255,this.update(!0)}},green:{get:function(){return this.g},set:function(e){e=Math.floor(Math.abs(e)),this.g=Math.min(e,255),this.gl[1]=e/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(e){e=Math.floor(Math.abs(e)),this.b=Math.min(e,255),this.gl[2]=e/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(e){e=Math.floor(Math.abs(e)),this.a=Math.min(e,255),this.gl[3]=e/255,this.update()}},h:{get:function(){return this._h},set:function(e){this._h=e,Io(e,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(e){this._s=e,Io(this._h,e,this._v,this)}},v:{get:function(){return this._v},set:function(e){this._v=e,Io(this._h,this._s,e,this)}}});GR.exports=NR});var uv=l((qVe,BR)=>{var yfe=di(),Tfe=function(e){var t=new yfe;e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,h,o,u){return h+h+o+o+u+u});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(i){var r=parseInt(i[1],16),s=parseInt(i[2],16),n=parseInt(i[3],16);t.setTo(r,s,n)}return t};BR.exports=Tfe});var lv=l((AVe,UR)=>{var Efe=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};UR.exports=Efe});var No=l((PVe,kR)=>{var Sfe=di(),_fe=lv(),wfe=function(e){var t=_fe(e);return new Sfe(t.r,t.g,t.b,t.a)};kR.exports=wfe});var fv=l((MVe,zR)=>{var Cfe=di(),Rfe=function(e){return new Cfe(e.r,e.g,e.b,e.a)};zR.exports=Rfe});var dv=l((bVe,YR)=>{var qfe=di(),Afe=function(e){var t=new qfe,i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase());if(i){var r=parseInt(i[1],10),s=parseInt(i[2],10),n=parseInt(i[3],10),a=i[4]!==void 0?parseFloat(i[4]):1;t.setTo(r,s,n,a*255)}return t};YR.exports=Afe});var Go=l((LVe,XR)=>{var Pfe=uv(),Mfe=No(),bfe=fv(),Lfe=dv(),Ofe=function(e){var t=typeof e;switch(t){case"string":return e.substr(0,3).toLowerCase()==="rgb"?Lfe(e):Pfe(e);case"number":return Mfe(e);case"object":return bfe(e)}};XR.exports=Ofe});var za=l((OVe,KR)=>{var Ffe=C(),VR=ye(),Dfe=yr(),WR=ue(),Ife=fi(),vv=Ae(),Nfe=xt(),HR=Go(),cv=xe(),Gfe=new Ffe({Extends:WR,Mixins:[VR.Alpha,VR.Visible],initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),WR.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new vv,this.dirty=!0,this._x=t,this._y=i,this._width=r,this._height=s,this._bounds=new vv,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new Nfe,this.transparent=!0,this.backgroundColor=HR("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new cv(r/2,s/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(e){this.renderList.push(e)},setOrigin:function(e,t){return e===void 0&&(e=.5),t===void 0&&(t=e),this.originX=e,this.originY=t,this},getScroll:function(e,t,i){i===void 0&&(i=new cv);var r=this.width*.5,s=this.height*.5;return i.x=e-r,i.y=t-s,this.useBounds&&(i.x=this.clampX(i.x),i.y=this.clampY(i.y)),i},centerOnX:function(e){var t=this.width*.5;return this.midPoint.x=e,this.scrollX=e-t,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(e){var t=this.height*.5;return this.midPoint.y=e,this.scrollY=e-t,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(e,t){return this.centerOnX(e),this.centerOnY(t),this},centerToBounds:function(){if(this.useBounds){var e=this._bounds,t=this.width*.5,i=this.height*.5;this.midPoint.set(e.centerX,e.centerY),this.scrollX=e.centerX-t,this.scrollY=e.centerY-i}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(e){if(this.disableCull)return e;var t=this.matrix.matrix,i=t[0],r=t[1],s=t[2],n=t[3],a=i*n-r*s;if(!a)return e;var h=t[4],o=t[5],u=this.scrollX,f=this.scrollY,d=this.width,v=this.height,c=this.y,p=c+v,m=this.x,x=m+d,g=this.culledObjects,y=e.length;a=1/a,g.length=0;for(var T=0;T<y;++T){var S=e[T];if(!S.hasOwnProperty("width")||S.parentContainer){g.push(S);continue}var E=S.width,_=S.height,w=S.x-u*S.scrollFactorX-E*S.originX,R=S.y-f*S.scrollFactorY-_*S.originY,q=w*i+R*s+h,A=w*r+R*n+o,P=(w+E)*i+(R+_)*s+h,L=(w+E)*r+(R+_)*n+o;P>m&&q<x&&L>c&&A<p&&g.push(S)}return g},getWorldPoint:function(e,t,i){i===void 0&&(i=new cv);var r=this.matrix.matrix,s=r[0],n=r[1],a=r[2],h=r[3],o=r[4],u=r[5],f=s*h-n*a;if(!f)return i.x=e,i.y=t,i;f=1/f;var d=h*f,v=-n*f,c=-a*f,p=s*f,m=(a*u-h*o)*f,x=(n*o-s*u)*f,g=Math.cos(this.rotation),y=Math.sin(this.rotation),T=this.zoomX,S=this.zoomY,E=this.scrollX,_=this.scrollY,w=e+(E*g-_*y)*T,R=t+(E*y+_*g)*S;return i.x=w*d+R*c+m,i.y=w*v+R*p+x,i},ignore:function(e){var t=this.id;Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?this.ignore(r):r.isParent?this.ignore(r.getChildren()):r.cameraFilter|=t}return this},preRender:function(){this.renderList.length=0;var e=this.width,t=this.height,i=e*.5,r=t*.5,s=this.zoomX,n=this.zoomY,a=this.matrix,h=e*this.originX,o=t*this.originY,u=this.scrollX,f=this.scrollY;this.useBounds&&(u=this.clampX(u),f=this.clampY(f)),this.roundPixels&&(h=Math.round(h),o=Math.round(o)),this.scrollX=u,this.scrollY=f;var d=u+i,v=f+r;this.midPoint.set(d,v);var c=e/s,p=t/n;this.worldView.setTo(d-c/2,v-p/2,c,p),a.applyITRS(this.x+h,this.y+o,this.rotation,s,n),a.translate(-h,-o)},clampX:function(e){var t=this._bounds,i=this.displayWidth,r=t.x+(i-this.width)/2,s=Math.max(r,r+t.width-i);return e<r?e=r:e>s&&(e=s),e},clampY:function(e){var t=this._bounds,i=this.displayHeight,r=t.y+(i-this.height)/2,s=Math.max(r,r+t.height-i);return e<r?e=r:e>s&&(e=s),e},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(e){return e===void 0&&(e=0),this.rotation=Dfe(e),this},setBackgroundColor:function(e){return e===void 0&&(e="rgba(0,0,0,0)"),this.backgroundColor=HR(e),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(e,t,i,r,s){return s===void 0&&(s=!1),this._bounds.setTo(e,t,i,r),this.dirty=!0,this.useBounds=!0,s?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(e){e===void 0&&(e=new vv);var t=this._bounds;return e.setTo(t.x,t.y,t.width,t.height),e},setName:function(e){return e===void 0&&(e=""),this.name=e,this},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setRotation:function(e){return e===void 0&&(e=0),this.rotation=e,this},setRoundPixels:function(e){return this.roundPixels=e,this},setScene:function(e){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=e;var t=e.sys;return this.sceneManager=t.game.scene,this.scaleManager=t.scale,this.cameraManager=t.cameras,this.updateSystem(),this},setScroll:function(e,t){return t===void 0&&(t=e),this.scrollX=e,this.scrollY=t,this},setSize:function(e,t){return t===void 0&&(t=e),this.width=e,this.height=t,this},setViewport:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setZoom:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=e),e===0&&(e=.001),t===0&&(t=.001),this.zoomX=e,this.zoomY=t,this},setMask:function(e,t){return t===void 0&&(t=!0),this.mask=e,this._maskCamera=t?this.cameraManager.default:this,this},clearMask:function(e){return e===void 0&&(e=!1),e&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var e={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(e.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),e},update:function(){},updateSystem:function(){if(!!this.scaleManager){var e=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,t=this.sceneManager;e&&!this._customViewport?t.customViewports++:!e&&this._customViewport&&t.customViewports--,this.dirty=!0,this._customViewport=e}},destroy:function(){this.emit(Ife.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(e){this._x=e,this.updateSystem()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.updateSystem()}},width:{get:function(){return this._width},set:function(e){this._width=e,this.updateSystem()}},height:{get:function(){return this._height},set:function(e){this._height=e,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(e){this._scrollX=e,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(e){this._scrollY=e,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(e){this._zoomX=e,this._zoomY=e,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(e){this._zoomX=e,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(e){this._zoomY=e,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=e,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});KR.exports=Gfe});var Bo=l((FVe,ZR)=>{var Bfe=function(e,t,i){return e.x=t-e.width/2,e.y=i-e.height/2,e};ZR.exports=Bfe});var QR=l((DVe,JR)=>{var Ufe=Le(),kfe=C(),Uo=fi(),zfe=new kfe({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n,a,h){if(e===void 0&&(e=!0),t===void 0&&(t=1e3),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=!1),a===void 0&&(a=null),h===void 0&&(h=this.camera.scene),!n&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=t,this.direction=e,this.progress=0,this.red=i,this.green=r,this.blue=s,this.alpha=e?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h;var o=e?Uo.FADE_OUT_START:Uo.FADE_IN_START;return this.camera.emit(o,this.camera,this,t,i,r,s),this.camera},update:function(e,t){!this.isRunning||(this._elapsed+=t,this.progress=Ufe(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(e){if(!this.isRunning&&!this.isComplete)return!1;var t=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(t.x,t.y,t.width,t.height),!0},postRenderWebGL:function(e,t){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera,r=this.red/255,s=this.green/255,n=this.blue/255;return e.drawFillRect(i.x,i.y,i.width,i.height,t(n,s,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var e=this.direction?Uo.FADE_OUT_COMPLETE:Uo.FADE_IN_COMPLETE;this.camera.emit(e,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});JR.exports=zfe});var eq=l((IVe,jR)=>{var Yfe=Le(),Xfe=C(),$R=fi(),Vfe=new Xfe({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n,a){return e===void 0&&(e=250),t===void 0&&(t=255),i===void 0&&(i=255),r===void 0&&(r=255),s===void 0&&(s=!1),n===void 0&&(n=null),a===void 0&&(a=this.camera.scene),!s&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=e,this.progress=0,this.red=t,this.green=i,this.blue=r,this.alpha=1,this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.camera.emit($R.FLASH_START,this.camera,this,e,t,i,r),this.camera)},update:function(e,t){!this.isRunning||(this._elapsed+=t,this.progress=Yfe(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(e){if(!this.isRunning)return!1;var t=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(t.x,t.y,t.width,t.height),!0},postRenderWebGL:function(e,t){if(!this.isRunning)return!1;var i=this.camera,r=this.red/255,s=this.green/255,n=this.blue/255;return e.drawFillRect(i.x,i.y,i.width,i.height,t(n,s,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit($R.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});jR.exports=Vfe});var iq=l((NVe,tq)=>{var Wfe=function(e,t){return t===void 0&&(t=1.70158),e*e*((t+1)*e-t)};tq.exports=Wfe});var sq=l((GVe,rq)=>{var Hfe=function(e,t){return t===void 0&&(t=1.70158),--e*e*((t+1)*e+t)+1};rq.exports=Hfe});var aq=l((BVe,nq)=>{var Kfe=function(e,t){t===void 0&&(t=1.70158);var i=t*1.525;return(e*=2)<1?.5*(e*e*((i+1)*e-i)):.5*((e-=2)*e*((i+1)*e+i)+2)};nq.exports=Kfe});var pv=l((UVe,hq)=>{hq.exports={In:iq(),Out:sq(),InOut:aq()}});var uq=l((kVe,oq)=>{var Zfe=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};oq.exports=Zfe});var fq=l((zVe,lq)=>{var Jfe=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};lq.exports=Jfe});var vq=l((YVe,dq)=>{var Qfe=function(e){var t=!1;return e<.5?(e=1-e*2,t=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,t?(1-e)*.5:e*.5+.5};dq.exports=Qfe});var mv=l((XVe,cq)=>{cq.exports={In:uq(),Out:fq(),InOut:vq()}});var mq=l((VVe,pq)=>{var $fe=function(e){return 1-Math.sqrt(1-e*e)};pq.exports=$fe});var xq=l((WVe,gq)=>{var jfe=function(e){return Math.sqrt(1- --e*e)};gq.exports=jfe});var Tq=l((HVe,yq)=>{var ede=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};yq.exports=ede});var gv=l((KVe,Eq)=>{Eq.exports={In:mq(),Out:xq(),InOut:Tq()}});var _q=l((ZVe,Sq)=>{var tde=function(e){return e*e*e};Sq.exports=tde});var Cq=l((JVe,wq)=>{var ide=function(e){return--e*e*e+1};wq.exports=ide});var qq=l((QVe,Rq)=>{var rde=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};Rq.exports=rde});var xv=l(($Ve,Aq)=>{Aq.exports={In:_q(),Out:Cq(),InOut:qq()}});var Mq=l((jVe,Pq)=>{var sde=function(e,t,i){if(t===void 0&&(t=.1),i===void 0&&(i=.1),e===0)return 0;if(e===1)return 1;var r=i/4;return t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i))};Pq.exports=sde});var Lq=l((eWe,bq)=>{var nde=function(e,t,i){if(t===void 0&&(t=.1),i===void 0&&(i=.1),e===0)return 0;if(e===1)return 1;var r=i/4;return t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*e)*Math.sin((e-r)*(2*Math.PI)/i)+1};bq.exports=nde});var Fq=l((tWe,Oq)=>{var ade=function(e,t,i){if(t===void 0&&(t=.1),i===void 0&&(i=.1),e===0)return 0;if(e===1)return 1;var r=i/4;return t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),(e*=2)<1?-.5*(t*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i)):t*Math.pow(2,-10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i)*.5+1};Oq.exports=ade});var yv=l((iWe,Dq)=>{Dq.exports={In:Mq(),Out:Lq(),InOut:Fq()}});var Nq=l((rWe,Iq)=>{var hde=function(e){return Math.pow(2,10*(e-1))-.001};Iq.exports=hde});var Bq=l((sWe,Gq)=>{var ode=function(e){return 1-Math.pow(2,-10*e)};Gq.exports=ode});var kq=l((nWe,Uq)=>{var ude=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};Uq.exports=ude});var Tv=l((aWe,zq)=>{zq.exports={In:Nq(),Out:Bq(),InOut:kq()}});var Xq=l((hWe,Yq)=>{var lde=function(e){return e};Yq.exports=lde});var Ev=l((oWe,Vq)=>{Vq.exports=Xq()});var Hq=l((uWe,Wq)=>{var fde=function(e){return e*e};Wq.exports=fde});var Zq=l((lWe,Kq)=>{var dde=function(e){return e*(2-e)};Kq.exports=dde});var Qq=l((fWe,Jq)=>{var vde=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};Jq.exports=vde});var Sv=l((dWe,$q)=>{$q.exports={In:Hq(),Out:Zq(),InOut:Qq()}});var eA=l((vWe,jq)=>{var cde=function(e){return e*e*e*e};jq.exports=cde});var iA=l((cWe,tA)=>{var pde=function(e){return 1- --e*e*e*e};tA.exports=pde});var sA=l((pWe,rA)=>{var mde=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};rA.exports=mde});var _v=l((mWe,nA)=>{nA.exports={In:eA(),Out:iA(),InOut:sA()}});var hA=l((gWe,aA)=>{var gde=function(e){return e*e*e*e*e};aA.exports=gde});var uA=l((xWe,oA)=>{var xde=function(e){return--e*e*e*e*e+1};oA.exports=xde});var fA=l((yWe,lA)=>{var yde=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};lA.exports=yde});var wv=l((TWe,dA)=>{dA.exports={In:hA(),Out:uA(),InOut:fA()}});var cA=l((EWe,vA)=>{var Tde=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};vA.exports=Tde});var mA=l((SWe,pA)=>{var Ede=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};pA.exports=Ede});var xA=l((_We,gA)=>{var Sde=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};gA.exports=Sde});var Cv=l((wWe,yA)=>{yA.exports={In:cA(),Out:mA(),InOut:xA()}});var EA=l((CWe,TA)=>{var _de=function(e,t){return t===void 0&&(t=1),e<=0?0:e>=1?1:((t*e|0)+1)*(1/t)};TA.exports=_de});var Rv=l((RWe,SA)=>{SA.exports=EA()});var Ha=l((qWe,wA)=>{var ko=pv(),zo=mv(),Yo=gv(),Ya=xv(),Xo=yv(),Vo=Tv(),_A=Ev(),Xa=Sv(),Va=_v(),Wa=wv(),Wo=Cv(),wde=Rv();wA.exports={Power0:_A,Power1:Xa.Out,Power2:Ya.Out,Power3:Va.Out,Power4:Wa.Out,Linear:_A,Quad:Xa.Out,Cubic:Ya.Out,Quart:Va.Out,Quint:Wa.Out,Sine:Wo.Out,Expo:Vo.Out,Circ:Yo.Out,Elastic:Xo.Out,Back:ko.Out,Bounce:zo.Out,Stepped:wde,"Quad.easeIn":Xa.In,"Cubic.easeIn":Ya.In,"Quart.easeIn":Va.In,"Quint.easeIn":Wa.In,"Sine.easeIn":Wo.In,"Expo.easeIn":Vo.In,"Circ.easeIn":Yo.In,"Elastic.easeIn":Xo.In,"Back.easeIn":ko.In,"Bounce.easeIn":zo.In,"Quad.easeOut":Xa.Out,"Cubic.easeOut":Ya.Out,"Quart.easeOut":Va.Out,"Quint.easeOut":Wa.Out,"Sine.easeOut":Wo.Out,"Expo.easeOut":Vo.Out,"Circ.easeOut":Yo.Out,"Elastic.easeOut":Xo.Out,"Back.easeOut":ko.Out,"Bounce.easeOut":zo.Out,"Quad.easeInOut":Xa.InOut,"Cubic.easeInOut":Ya.InOut,"Quart.easeInOut":Va.InOut,"Quint.easeInOut":Wa.InOut,"Sine.easeInOut":Wo.InOut,"Expo.easeInOut":Vo.InOut,"Circ.easeInOut":Yo.InOut,"Elastic.easeInOut":Xo.InOut,"Back.easeInOut":ko.InOut,"Bounce.easeInOut":zo.InOut}});var qA=l((AWe,RA)=>{var Cde=Le(),Rde=C(),qv=Ha(),CA=fi(),Av=xe(),qde=new Rde({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new Av,this.current=new Av,this.destination=new Av,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n,a){i===void 0&&(i=1e3),r===void 0&&(r=qv.Linear),s===void 0&&(s=!1),n===void 0&&(n=null),a===void 0&&(a=this.camera.scene);var h=this.camera;return!s&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(h.scrollX,h.scrollY),this.destination.set(e,t),h.getScroll(e,t,this.current),typeof r=="string"&&qv.hasOwnProperty(r)?this.ease=qv[r]:typeof r=="function"&&(this.ease=r),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.camera.emit(CA.PAN_START,this.camera,this,i,e,t)),h},update:function(e,t){if(!!this.isRunning){this._elapsed+=t;var i=Cde(this._elapsed/this.duration,0,1);this.progress=i;var r=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);r.getScroll(this.destination.x,this.destination.y,this.current);var n=this.source.x+(this.current.x-this.source.x)*s,a=this.source.y+(this.current.y-this.source.y)*s;r.setScroll(n,a),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,n,a)}else r.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,r.scrollX,r.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(CA.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});RA.exports=qde});var MA=l((PWe,PA)=>{var Ade=Le(),Pde=C(),AA=fi(),Mde=xe(),bde=new Pde({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new Mde,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s){return e===void 0&&(e=100),t===void 0&&(t=.05),i===void 0&&(i=!1),r===void 0&&(r=null),s===void 0&&(s=this.camera.scene),!i&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=e,this.progress=0,typeof t=="number"?this.intensity.set(t):this.intensity.set(t.x,t.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=r,this._onUpdateScope=s,this.camera.emit(AA.SHAKE_START,this.camera,this,e,t),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(e,t){if(!!this.isRunning)if(this._elapsed+=t,this.progress=Ade(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var i=this.intensity,r=this.camera.width,s=this.camera.height,n=this.camera.zoom;this._offsetX=(Math.random()*i.x*r*2-i.x*r)*n,this._offsetY=(Math.random()*i.y*s*2-i.y*s)*n,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(AA.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});PA.exports=bde});var OA=l((MWe,LA)=>{var Lde=Le(),Ode=C(),bA=fi(),Pv=Ha(),Fde=new Ode({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(e,t,i,r,s,n,a){i===void 0&&(i=1e3),r===void 0&&(r=Pv.Linear),s===void 0&&(s=!1),n===void 0&&(n=null),a===void 0&&(a=this.camera.scene),t===void 0&&(t=!1),this.shortestPath=t;var h=e;e<0?(h=-1*e,this.clockwise=!1):this.clockwise=!0;var o=360*Math.PI/180;h=h-Math.floor(h/o)*o;var u=this.camera;if(!s&&this.isRunning)return u;if(this.isRunning=!0,this.duration=i,this.progress=0,this.source=u.rotation,this.destination=h,typeof r=="string"&&Pv.hasOwnProperty(r)?this.ease=Pv[r]:typeof r=="function"&&(this.ease=r),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.shortestPath){var f=0,d=0;this.destination>this.source?f=Math.abs(this.destination-this.source):f=Math.abs(this.destination+o)-this.source,this.source>this.destination?d=Math.abs(this.source-this.destination):d=Math.abs(this.source+o)-this.destination,f<d?this.clockwise=!0:f>d&&(this.clockwise=!1)}return this.camera.emit(bA.ROTATE_START,this.camera,this,i,h),u},update:function(e,t){if(!!this.isRunning){this._elapsed+=t;var i=Lde(this._elapsed/this.duration,0,1);this.progress=i;var r=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);this.current=r.rotation;var n=0,a=360*Math.PI/180,h=this.destination,o=this.current;this.clockwise===!1&&(h=this.current,o=this.destination),h>=o?n=Math.abs(h-o):n=Math.abs(h+a)-o;var u=0;this.clockwise?u=r.rotation+n*s:u=r.rotation-n*s,r.rotation=u,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,u)}else r.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,i,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(bA.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});LA.exports=Fde});var IA=l((bWe,DA)=>{var Dde=Le(),Ide=C(),Mv=Ha(),FA=fi(),Nde=new Ide({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,s,n){t===void 0&&(t=1e3),i===void 0&&(i=Mv.Linear),r===void 0&&(r=!1),s===void 0&&(s=null),n===void 0&&(n=this.camera.scene);var a=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.source=a.zoom,this.destination=e,typeof i=="string"&&Mv.hasOwnProperty(i)?this.ease=Mv[i]:typeof i=="function"&&(this.ease=i),this._elapsed=0,this._onUpdate=s,this._onUpdateScope=n,this.camera.emit(FA.ZOOM_START,this.camera,this,t,e)),a},update:function(e,t){!this.isRunning||(this._elapsed+=t,this.progress=Dde(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(FA.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});DA.exports=Nde});var bv=l((LWe,NA)=>{NA.exports={Fade:QR(),Flash:eq(),Pan:qA(),Shake:MA(),RotateTo:OA(),Zoom:IA()}});var Ka=l((OWe,GA)=>{var Gde=function(e,t,i){return(t-e)*i+e};GA.exports=Gde});var Fv=l((FWe,zA)=>{var Lv=za(),BA=Bo(),UA=Le(),Bde=C(),Ov=ye(),An=bv(),Ude=fi(),Pn=Ka(),kde=Ae(),kA=xe(),zde=new Bde({Extends:Lv,Mixins:[Ov.Flip,Ov.Tint,Ov.Pipeline],initialize:function(t,i,r,s){Lv.call(this,t,i,r,s),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new An.Fade(this),this.flashEffect=new An.Flash(this),this.shakeEffect=new An.Shake(this),this.panEffect=new An.Pan(this),this.rotateToEffect=new An.RotateTo(this),this.zoomEffect=new An.Zoom(this),this.lerp=new kA(1,1),this.followOffset=new kA,this.deadzone=null,this._follow=null},setDeadzone:function(e,t){if(e===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=e,this.deadzone.height=t):this.deadzone=new kde(0,0,e,t),this._follow){var i=this.width/2,r=this.height/2,s=this._follow.x-this.followOffset.x,n=this._follow.y-this.followOffset.y;this.midPoint.set(s,n),this.scrollX=s-i,this.scrollY=n-r}BA(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(e,t,i,r,s,n){return this.fadeEffect.start(!1,e,t,i,r,!0,s,n)},fadeOut:function(e,t,i,r,s,n){return this.fadeEffect.start(!0,e,t,i,r,!0,s,n)},fadeFrom:function(e,t,i,r,s,n,a){return this.fadeEffect.start(!1,e,t,i,r,s,n,a)},fade:function(e,t,i,r,s,n,a){return this.fadeEffect.start(!0,e,t,i,r,s,n,a)},flash:function(e,t,i,r,s,n,a){return this.flashEffect.start(e,t,i,r,s,n,a)},shake:function(e,t,i,r,s){return this.shakeEffect.start(e,t,i,r,s)},pan:function(e,t,i,r,s,n,a){return this.panEffect.start(e,t,i,r,s,n,a)},rotateTo:function(e,t,i,r,s,n,a){return this.rotateToEffect.start(e,t,i,r,s,n,a)},zoomTo:function(e,t,i,r,s,n){return this.zoomEffect.start(e,t,i,r,s,n)},preRender:function(){this.renderList.length=0;var e=this.width,t=this.height,i=e*.5,r=t*.5,s=this.zoom,n=this.matrix,a=e*this.originX,h=t*this.originY,o=this._follow,u=this.deadzone,f=this.scrollX,d=this.scrollY;u&&BA(u,this.midPoint.x,this.midPoint.y);var v=!1;if(o&&!this.panEffect.isRunning){var c=o.x-this.followOffset.x,p=o.y-this.followOffset.y;u?(c<u.x?f=Pn(f,f-(u.x-c),this.lerp.x):c>u.right&&(f=Pn(f,f+(c-u.right),this.lerp.x)),p<u.y?d=Pn(d,d-(u.y-p),this.lerp.y):p>u.bottom&&(d=Pn(d,d+(p-u.bottom),this.lerp.y))):(f=Pn(f,c-a,this.lerp.x),d=Pn(d,p-h,this.lerp.y)),v=!0}this.useBounds&&(f=this.clampX(f),d=this.clampY(d)),this.roundPixels&&(a=Math.round(a),h=Math.round(h),f=Math.round(f),d=Math.round(d)),this.scrollX=f,this.scrollY=d;var m=f+i,x=d+r;this.midPoint.set(m,x);var g=e/s,y=t/s,T=m-g/2,S=x-y/2;this.roundPixels&&(T=Math.round(T),S=Math.round(S)),this.worldView.setTo(T,S,g,y),n.applyITRS(this.x+a,this.y+h,this.rotation,s,s),n.translate(-a,-h),this.shakeEffect.preRender(),v&&this.emit(Ude.FOLLOW_UPDATE,this,o)},setLerp:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=e),this.lerp.set(e,t),this},setFollowOffset:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),this.followOffset.set(e,t),this},startFollow:function(e,t,i,r,s,n){t===void 0&&(t=!1),i===void 0&&(i=1),r===void 0&&(r=i),s===void 0&&(s=0),n===void 0&&(n=s),this._follow=e,this.roundPixels=t,i=UA(i,0,1),r=UA(r,0,1),this.lerp.set(i,r),this.followOffset.set(s,n);var a=this.width/2,h=this.height/2,o=e.x-s,u=e.y-n;return this.midPoint.set(o,u),this.scrollX=o-a,this.scrollY=u-h,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(e,t){this.visible&&(this.rotateToEffect.update(e,t),this.panEffect.update(e,t),this.zoomEffect.update(e,t),this.shakeEffect.update(e,t),this.flashEffect.update(e,t),this.fadeEffect.update(e,t))},destroy:function(){this.resetFX(),Lv.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});zA.exports=zde});var vt=l((DWe,YA)=>{var Hr={},Zi={},vi={};vi.register=function(e,t,i,r){r===void 0&&(r=!1),Hr[e]={plugin:t,mapping:i,custom:r}};vi.registerCustom=function(e,t,i,r){Zi[e]={plugin:t,mapping:i,data:r}};vi.hasCore=function(e){return Hr.hasOwnProperty(e)};vi.hasCustom=function(e){return Zi.hasOwnProperty(e)};vi.getCore=function(e){return Hr[e]};vi.getCustom=function(e){return Zi[e]};vi.getCustomClass=function(e){return Zi.hasOwnProperty(e)?Zi[e].plugin:null};vi.remove=function(e){Hr.hasOwnProperty(e)&&delete Hr[e]};vi.removeCustom=function(e){Zi.hasOwnProperty(e)&&delete Zi[e]};vi.destroyCorePlugins=function(){for(var e in Hr)Hr.hasOwnProperty(e)&&delete Hr[e]};vi.destroyCustomPlugins=function(){for(var e in Zi)Zi.hasOwnProperty(e)&&delete Zi[e]};YA.exports=vi});var VA=l((IWe,XA)=>{XA.exports="enterfullscreen"});var HA=l((NWe,WA)=>{WA.exports="fullscreenfailed"});var ZA=l((GWe,KA)=>{KA.exports="fullscreenunsupported"});var QA=l((BWe,JA)=>{JA.exports="leavefullscreen"});var jA=l((UWe,$A)=>{$A.exports="orientationchange"});var tP=l((kWe,eP)=>{eP.exports="resize"});var Mn=l((zWe,iP)=>{iP.exports={ENTER_FULLSCREEN:VA(),FULLSCREEN_FAILED:HA(),FULLSCREEN_UNSUPPORTED:ZA(),LEAVE_FULLSCREEN:QA(),ORIENTATION_CHANGE:jA(),RESIZE:tP()}});var aP=l((YWe,nP)=>{var rP=Fv(),Yde=C(),ct=z(),Xde=vt(),Vde=Yr(),Wde=Mn(),Kr=Ne(),sP=new Yde({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(Kr.BOOT,this.boot,this),t.sys.events.on(Kr.START,this.start,this)},boot:function(){var e=this.systems;e.settings.cameras?this.fromJSON(e.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new rP(0,0,e.scale.width,e.scale.height).setScene(this.scene),e.game.scale.on(Wde.RESIZE,this.onResize,this),this.systems.events.once(Kr.DESTROY,this.destroy,this)},start:function(){if(!this.main){var e=this.systems;e.settings.cameras?this.fromJSON(e.settings.cameras):this.add(),this.main=this.cameras[0]}var t=this.systems.events;t.on(Kr.UPDATE,this.update,this),t.once(Kr.SHUTDOWN,this.shutdown,this)},add:function(e,t,i,r,s,n){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.scene.sys.scale.width),r===void 0&&(r=this.scene.sys.scale.height),s===void 0&&(s=!1),n===void 0&&(n="");var a=new rP(e,t,i,r);return a.setName(n),a.setScene(this.scene),a.setRoundPixels(this.roundPixels),a.id=this.getNextID(),this.cameras.push(a),s&&(this.main=a),a},addExisting:function(e,t){t===void 0&&(t=!1);var i=this.cameras.indexOf(e);return i===-1?(e.id=this.getNextID(),e.setRoundPixels(this.roundPixels),this.cameras.push(e),t&&(this.main=e),e):null},getNextID:function(){for(var e=this.cameras,t=1,i=0;i<32;i++){for(var r=!1,s=0;s<e.length;s++){var n=e[s];if(n&&n.id===t){r=!0;continue}}if(r)t=t<<1;else return t}return 0},getTotal:function(e){e===void 0&&(e=!1);for(var t=0,i=this.cameras,r=0;r<i.length;r++){var s=i[r];(!e||e&&s.visible)&&t++}return t},fromJSON:function(e){Array.isArray(e)||(e=[e]);for(var t=this.scene.sys.scale.width,i=this.scene.sys.scale.height,r=0;r<e.length;r++){var s=e[r],n=ct(s,"x",0),a=ct(s,"y",0),h=ct(s,"width",t),o=ct(s,"height",i),u=this.add(n,a,h,o);u.name=ct(s,"name",""),u.zoom=ct(s,"zoom",1),u.rotation=ct(s,"rotation",0),u.scrollX=ct(s,"scrollX",0),u.scrollY=ct(s,"scrollY",0),u.roundPixels=ct(s,"roundPixels",!1),u.visible=ct(s,"visible",!0);var f=ct(s,"backgroundColor",!1);f&&u.setBackgroundColor(f);var d=ct(s,"bounds",null);if(d){var v=ct(d,"x",0),c=ct(d,"y",0),p=ct(d,"width",t),m=ct(d,"height",i);u.setBounds(v,c,p,m)}}return this},getCamera:function(e){for(var t=this.cameras,i=0;i<t.length;i++)if(t[i].name===e)return t[i];return null},getCamerasBelowPointer:function(e){for(var t=this.cameras,i=e.x,r=e.y,s=[],n=0;n<t.length;n++){var a=t[n];a.visible&&a.inputEnabled&&Vde(a,i,r)&&s.unshift(a)}return s},remove:function(e,t){t===void 0&&(t=!0),Array.isArray(e)||(e=[e]);for(var i=0,r=this.cameras,s=0;s<e.length;s++){var n=r.indexOf(e[s]);n!==-1&&(t?r[n].destroy():r[n].renderList=[],r.splice(n,1),i++)}return!this.main&&r[0]&&(this.main=r[0]),i},render:function(e,t){for(var i=this.scene,r=this.cameras,s=0;s<this.cameras.length;s++){var n=r[s];if(n.visible&&n.alpha>0){n.preRender();var a=this.getVisibleChildren(t.getChildren(),n);e.render(i,a,n)}}},getVisibleChildren:function(e,t){for(var i=[],r=0;r<e.length;r++){var s=e[r];s.willRender(t)&&i.push(s)}return i},resetAll:function(){for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(e,t){for(var i=0;i<this.cameras.length;i++)this.cameras[i].update(e,t)},onResize:function(e,t,i,r,s){for(var n=0;n<this.cameras.length;n++){var a=this.cameras[n];a._x===0&&a._y===0&&a._width===r&&a._height===s&&a.setSize(t.width,t.height)}},resize:function(e,t){for(var i=0;i<this.cameras.length;i++)this.cameras[i].setSize(e,t)},shutdown:function(){this.main=void 0;for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();this.cameras=[];var t=this.systems.events;t.off(Kr.UPDATE,this.update,this),t.off(Kr.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(Kr.START,this.start,this),this.scene=null,this.systems=null}});Xde.register("CameraManager",sP,"cameras");nP.exports=sP});var oP=l((XWe,hP)=>{hP.exports={Camera:Fv(),BaseCamera:za(),CameraManager:aP(),Effects:bv(),Events:fi()}});var lP=l((VWe,uP)=>{uP.exports={Controls:HC(),Scene2D:oP()}});var bn=l((WWe,fP)=>{var re={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function Hde(){if(typeof importScripts=="function")return re;var e=navigator.userAgent;/Windows/.test(e)?re.windows=!0:/Mac OS/.test(e)&&!/like Mac OS/.test(e)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(re.iOS=!0,re.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),re.iOSVersion=parseInt(RegExp.$1,10)):re.macOS=!0:/Android/.test(e)?re.android=!0:/Linux/.test(e)?re.linux=!0:/iP[ao]d|iPhone/i.test(e)?(re.iOS=!0,navigator.appVersion.match(/OS (\d+)/),re.iOSVersion=parseInt(RegExp.$1,10),re.iPhone=e.toLowerCase().indexOf("iphone")!==-1,re.iPad=e.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)?re.kindle=!0:/CrOS/.test(e)&&(re.chromeOS=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(re.android=!1,re.iOS=!1,re.macOS=!1,re.windows=!0,re.windowsPhone=!0);var t=/Silk/.test(e);return(re.windows||re.macOS||re.linux&&!t||re.chromeOS)&&(re.desktop=!0),(re.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e))&&(re.desktop=!1),navigator.standalone&&(re.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(re.cordova=!0),window.ejecta!==void 0&&(re.ejecta=!0)),typeof process!="undefined"&&process.versions&&process.versions.node&&(re.node=!0),re.node&&typeof process.versions=="object"&&(re.nodeWebkit=!!process.versions["node-webkit"],re.electron=!!process.versions.electron),/Crosswalk/.test(e)&&(re.crosswalk=!0),re.pixelRatio=window.devicePixelRatio||1,re}fP.exports=Hde()});var Za=l((HWe,dP)=>{var Dv=bn(),Tt={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function Kde(){var e=navigator.userAgent;return/Edge\/\d+/.test(e)?Tt.edge=!0:/Chrome\/(\d+)/.test(e)&&!Dv.windowsPhone?(Tt.chrome=!0,Tt.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(e)?(Tt.firefox=!0,Tt.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(e)&&Dv.iOS?Tt.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(e)?(Tt.ie=!0,Tt.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(e)?Tt.opera=!0:/Safari/.test(e)&&!Dv.windowsPhone?Tt.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)&&(Tt.ie=!0,Tt.trident=!0,Tt.tridentVersion=parseInt(RegExp.$1,10),Tt.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(e)&&(Tt.silk=!0),Tt}dP.exports=Kde()});var Ho=l((KWe,vP)=>{var Ji="",Zde=function(){var e=function(s){for(var n=["i","webkitI","msI","mozI","oI"],a=0;a<n.length;a++){var h=n[a]+"mageSmoothingEnabled";if(h in s)return h}return null},t=function(s){return Ji===""&&(Ji=e(s)),Ji&&(s[Ji]=!0),s},i=function(s){return Ji===""&&(Ji=e(s)),Ji&&(s[Ji]=!1),s},r=function(s){return Ji!==null?s[Ji]:null};return{disable:i,enable:t,getPrefix:e,isEnabled:r}};vP.exports=Zde()});var bt=l((ZWe,cP)=>{var $s=Jt(),Jde=Ho(),js=[],Iv=!1,Qde=function(){var e=function(u,f,d,v,c){f===void 0&&(f=1),d===void 0&&(d=1),v===void 0&&(v=$s.CANVAS),c===void 0&&(c=!1);var p,m=r(v);return m===null?(m={parent:u,canvas:document.createElement("canvas"),type:v},v===$s.CANVAS&&js.push(m),p=m.canvas):(m.parent=u,p=m.canvas),c&&(m.parent=p),p.width=f,p.height=d,Iv&&v===$s.CANVAS&&Jde.disable(p.getContext("2d")),p},t=function(u,f,d){return e(u,f,d,$s.CANVAS)},i=function(u,f,d){return e(u,f,d,$s.WEBGL)},r=function(u){if(u===void 0&&(u=$s.CANVAS),u===$s.WEBGL)return null;for(var f=0;f<js.length;f++){var d=js[f];if(!d.parent&&d.type===u)return d}return null},s=function(u){var f=u instanceof HTMLCanvasElement;js.forEach(function(d){(f&&d.canvas===u||!f&&d.parent===u)&&(d.parent=null,d.canvas.width=1,d.canvas.height=1)})},n=function(){var u=0;return js.forEach(function(f){f.parent&&u++}),u},a=function(){return js.length-n()},h=function(){Iv=!0},o=function(){Iv=!1};return{create2D:t,create:e,createWebGL:i,disableSmoothing:h,enableSmoothing:o,first:r,free:a,pool:js,remove:s,total:n}};cP.exports=Qde()});var Zo=l((JWe,pP)=>{var $de=bn(),en=Za(),Ko=bt(),Qe={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function jde(){var e=new ArrayBuffer(4),t=new Uint8Array(e),i=new Uint32Array(e);return t[0]=161,t[1]=178,t[2]=195,t[3]=212,i[0]===3569595041?!0:i[0]===2712847316?!1:null}function eve(){if(typeof importScripts=="function")return Qe;Qe.canvas=!!window.CanvasRenderingContext2D;try{Qe.localStorage=!!localStorage.getItem}catch(i){Qe.localStorage=!1}Qe.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,Qe.fileSystem=!!window.requestFileSystem;var e=!1,t=function(){if(window.WebGLRenderingContext)try{var i=Ko.createWebGL(this),r=i.getContext("webgl")||i.getContext("experimental-webgl"),s=Ko.create2D(this),n=s.getContext("2d"),a=n.createImageData(1,1);return e=a.data instanceof Uint8ClampedArray,Ko.remove(i),Ko.remove(s),!!r}catch(h){return!1}return!1};return Qe.webGL=t(),Qe.worker=!!window.Worker,Qe.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,Qe.getUserMedia=Qe.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,en.firefox&&en.firefoxVersion<21&&(Qe.getUserMedia=!1),!$de.iOS&&(en.ie||en.firefox||en.chrome)&&(Qe.canvasBitBltShift=!0),(en.safari||en.mobileSafari)&&(Qe.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(Qe.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(Qe.littleEndian=jde()),Qe.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&Qe.littleEndian!==null&&e,Qe}pP.exports=eve()});var xP=l((QWe,gP)=>{var mP=Za(),Zr={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function tve(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(Zr.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(Zr.mspointer=!0),navigator.getGamepads&&(Zr.gamepads=!0),"onwheel"in window||mP.ie&&"WheelEvent"in window?Zr.wheelEvent="wheel":"onmousewheel"in window?Zr.wheelEvent="mousewheel":mP.firefox&&"MouseScrollEvent"in window&&(Zr.wheelEvent="DOMMouseScroll")),Zr}gP.exports=tve()});var TP=l(($We,yP)=>{var Nv=Za(),ci={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function ive(){if(typeof importScripts=="function")return ci;ci.audioData=!!window.Audio,ci.webAudio=!!(window.AudioContext||window.webkitAudioContext);var e=document.createElement("audio"),t=!!e.canPlayType;try{if(t&&(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(ci.ogg=!0),(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,""))&&(ci.opus=!0),e.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(ci.mp3=!0),e.canPlayType("audio/wav").replace(/^no$/,"")&&(ci.wav=!0),(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,""))&&(ci.m4a=!0),e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(ci.webm=!0),e.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(Nv.edge)ci.dolby=!0;else if(Nv.safari&&Nv.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var i=parseInt(RegExp.$1,10),r=parseInt(RegExp.$2,10);(i===10&&r>=11||i>10)&&(ci.dolby=!0)}}}catch(s){}return ci}yP.exports=ive()});var SP=l((jWe,EP)=>{var Jr={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function rve(){if(typeof importScripts=="function")return Jr;var e=document.createElement("video"),t=!!e.canPlayType;try{t&&(e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(Jr.ogg=!0),e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(Jr.h264=!0,Jr.mp4=!0),e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(Jr.webm=!0),e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(Jr.vp9=!0),e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(Jr.hls=!0))}catch(i){}return Jr}EP.exports=rve()});var wP=l((e5e,_P)=>{var Qr={available:!1,cancel:"",keyboard:!1,request:""};function sve(){if(typeof importScripts=="function")return Qr;var e,t="Fullscreen",i="FullScreen",r=["request"+t,"request"+i,"webkitRequest"+t,"webkitRequest"+i,"msRequest"+t,"msRequest"+i,"mozRequest"+i,"mozRequest"+t];for(e=0;e<r.length;e++)if(document.documentElement[r[e]]){Qr.available=!0,Qr.request=r[e];break}var s=["cancel"+i,"exit"+t,"webkitCancel"+i,"webkitExit"+t,"msCancel"+i,"msExit"+t,"mozCancel"+i,"mozExit"+t];if(Qr.available){for(e=0;e<s.length;e++)if(document[s[e]]){Qr.cancel=s[e];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(Qr.keyboard=!0),Object.defineProperty(Qr,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),Qr}_P.exports=sve()});var Bv=l((t5e,CP)=>{var Gv=bt(),Jo={supportInverseAlpha:!1,supportNewBlendModes:!1};function nve(){var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",t="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;return i.onload=function(){var r=new Image;r.onload=function(){var s=Gv.create(r,6,1),n=s.getContext("2d");if(n.globalCompositeOperation="multiply",n.drawImage(i,0,0),n.drawImage(r,2,0),!n.getImageData(2,0,1,1))return!1;var a=n.getImageData(2,0,1,1).data;Gv.remove(r),Jo.supportNewBlendModes=a[0]===255&&a[1]===0&&a[2]===0},r.src=e+"/wCKxvRF"+t},i.src=e+"AP804Oa6"+t,!1}function ave(){var e=Gv.create(this,2,1),t=e.getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var i=t.getImageData(0,0,1,1);if(i===null)return!1;t.putImageData(i,1,0);var r=t.getImageData(1,0,1,1);return r.data[0]===i.data[0]&&r.data[1]===i.data[1]&&r.data[2]===i.data[2]&&r.data[3]===i.data[3]}function hve(){return typeof importScripts!="function"&&document!==void 0&&(Jo.supportNewBlendModes=nve(),Jo.supportInverseAlpha=ave()),Jo}CP.exports=hve()});var Uv=l((i5e,RP)=>{RP.exports={os:bn(),browser:Za(),features:Zo(),input:xP(),audio:TP(),video:SP(),fullscreen:wP(),canvasFeatures:Bv()}});var kv=l((r5e,qP)=>{var ove=function(e,t,i,r){return Math.atan2(r-t,i-e)};qP.exports=ove});var PP=l((s5e,AP)=>{var uve=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)};AP.exports=uve});var bP=l((n5e,MP)=>{var lve=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)};MP.exports=lve});var OP=l((a5e,LP)=>{var fve=function(e,t,i,r){return Math.atan2(i-e,r-t)};LP.exports=fve});var DP=l((h5e,FP)=>{var Ja=Oe(),dve=function(e){return e>Math.PI&&(e-=Ja.PI2),Math.abs(((e+Ja.TAU)%Ja.PI2-Ja.PI2)%Ja.PI2)};FP.exports=dve});var zv=l((o5e,IP)=>{var vve=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};IP.exports=vve});var Qa=l((u5e,NP)=>{var cve=function(e,t){return Math.random()*(t-e)+e};NP.exports=cve});var BP=l((l5e,GP)=>{var pve=Qa(),mve=function(){return pve(-Math.PI,Math.PI)};GP.exports=mve});var kP=l((f5e,UP)=>{var gve=Qa(),xve=function(){return gve(-180,180)};UP.exports=xve});var YP=l((d5e,zP)=>{var yve=zv(),Tve=function(e){return yve(e+Math.PI)};zP.exports=Tve});var VP=l((v5e,XP)=>{var Yv=Oe(),Eve=function(e,t,i){return i===void 0&&(i=.05),e===t||(Math.abs(t-e)<=i||Math.abs(t-e)>=Yv.PI2-i?e=t:(Math.abs(t-e)>Math.PI&&(t<e?t+=Yv.PI2:t-=Yv.PI2),t>e?e+=i:t<e&&(e-=i))),e};XP.exports=Eve});var HP=l((c5e,WP)=>{var Sve=function(e,t){var i=t-e;if(i===0)return 0;var r=Math.floor((i- -180)/360);return i-r*360};WP.exports=Sve});var ZP=l((p5e,KP)=>{KP.exports={Between:kv(),BetweenPoints:PP(),BetweenPointsY:bP(),BetweenY:OP(),CounterClockwise:DP(),Normalize:zv(),Random:BP(),RandomDegrees:kP(),Reverse:YP(),RotateTo:VP(),ShortestBetween:HP(),Wrap:Vd(),WrapDegrees:Wd()}});var Xv=l((m5e,JP)=>{var _ve=function(e,t){var i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)};JP.exports=_ve});var $P=l((g5e,QP)=>{var wve=function(e,t){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r};QP.exports=wve});var eM=l((x5e,jP)=>{var Cve=function(e,t,i,r){return Math.max(Math.abs(e-i),Math.abs(t-r))};jP.exports=Cve});var iM=l((y5e,tM)=>{var Rve=function(e,t,i,r,s){return s===void 0&&(s=2),Math.sqrt(Math.pow(i-e,s)+Math.pow(r-t,s))};tM.exports=Rve});var sM=l((T5e,rM)=>{var qve=function(e,t,i,r){return Math.abs(e-i)+Math.abs(t-r)};rM.exports=qve});var aM=l((E5e,nM)=>{var Ave=function(e,t,i,r){var s=e-i,n=t-r;return s*s+n*n};nM.exports=Ave});var oM=l((S5e,hM)=>{hM.exports={Between:Wr(),BetweenPoints:Xv(),BetweenPointsSquared:$P(),Chebyshev:eM(),Power:iM(),Snake:sM(),Squared:aM()}});var lM=l((_5e,uM)=>{uM.exports={Back:pv(),Bounce:mv(),Circular:gv(),Cubic:xv(),Elastic:yv(),Expo:Tv(),Linear:Ev(),Quadratic:Sv(),Quartic:_v(),Quintic:wv(),Sine:Cv(),Stepped:Rv()}});var dM=l((w5e,fM)=>{var Pve=function(e,t){return t===void 0&&(t=1e-4),Math.ceil(e-t)};fM.exports=Pve});var cM=l((C5e,vM)=>{var Mve=function(e,t){return t===void 0&&(t=1e-4),Math.floor(e+t)};vM.exports=Mve});var mM=l((R5e,pM)=>{var bve=function(e,t,i){return i===void 0&&(i=1e-4),e>t-i};pM.exports=bve});var xM=l((q5e,gM)=>{var Lve=function(e,t,i){return i===void 0&&(i=1e-4),e<t+i};gM.exports=Lve});var TM=l((A5e,yM)=>{yM.exports={Ceil:dM(),Equal:yo(),Floor:cM(),GreaterThan:mM(),LessThan:xM()}});var Vv=l((P5e,EM)=>{var Ove=function(e){if(e===0)return 1;for(var t=e;--e;)t*=e;return t};EM.exports=Ove});var Hv=l((M5e,SM)=>{var Wv=Vv(),Fve=function(e,t){return Wv(e)/Wv(t)/Wv(e-t)};SM.exports=Fve});var wM=l((b5e,_M)=>{var Dve=Hv(),Ive=function(e,t){for(var i=0,r=e.length-1,s=0;s<=r;s++)i+=Math.pow(1-t,r-s)*Math.pow(t,s)*e[s]*Dve(r,s);return i};_M.exports=Ive});var Kv=l((L5e,CM)=>{var Nve=function(e,t,i,r,s){var n=(r-t)*.5,a=(s-i)*.5,h=e*e,o=e*h;return(2*i-2*r+n+a)*o+(-3*i+3*r-2*n-a)*h+n*e+i};CM.exports=Nve});var qM=l((O5e,RM)=>{var Qo=Kv(),Gve=function(e,t){var i=e.length-1,r=i*t,s=Math.floor(r);return e[0]===e[i]?(t<0&&(s=Math.floor(r=i*(1+t))),Qo(r-s,e[(s-1+i)%i],e[s],e[(s+1)%i],e[(s+2)%i])):t<0?e[0]-(Qo(-r,e[0],e[0],e[1],e[1])-e[0]):t>1?e[i]-(Qo(r-i,e[i],e[i],e[i-1],e[i-1])-e[i]):Qo(r-s,e[s?s-1:0],e[s],e[i<s+1?i:s+1],e[i<s+2?i:s+2])};RM.exports=Gve});var PM=l((F5e,AM)=>{function Bve(e,t){var i=1-e;return i*i*i*t}function Uve(e,t){var i=1-e;return 3*i*i*e*t}function kve(e,t){return 3*(1-e)*e*e*t}function zve(e,t){return e*e*e*t}var Yve=function(e,t,i,r,s){return Bve(e,t)+Uve(e,i)+kve(e,r)+zve(e,s)};AM.exports=Yve});var bM=l((D5e,MM)=>{var Zv=Ka(),Xve=function(e,t){var i=e.length-1,r=i*t,s=Math.floor(r);return t<0?Zv(e[0],e[1],r):t>1?Zv(e[i],e[i-1],i-r):Zv(e[s],e[s+1>i?i:s+1],r-s)};MM.exports=Xve});var OM=l((I5e,LM)=>{function Vve(e,t){var i=1-e;return i*i*t}function Wve(e,t){return 2*(1-e)*e*t}function Hve(e,t){return e*e*t}var Kve=function(e,t,i,r){return Vve(e,t)+Wve(e,i)+Hve(e,r)};LM.exports=Kve});var Jv=l((N5e,FM)=>{var Zve=Fo(),Jve=function(e,t,i){return t+(i-t)*Zve(e,0,1)};FM.exports=Jve});var IM=l((G5e,DM)=>{var Qve=Oo(),$ve=function(e,t,i){return t+(i-t)*Qve(e,0,1)};DM.exports=$ve});var GM=l((B5e,NM)=>{NM.exports={Bezier:wM(),CatmullRom:qM(),CubicBezier:PM(),Linear:bM(),QuadraticBezier:OM(),SmoothStep:Jv(),SmootherStep:IM()}});var Qv=l((U5e,BM)=>{var jve=function(e){var t=Math.log(e)/.6931471805599453;return 1<<Math.ceil(t)};BM.exports=jve});var $a=l((k5e,UM)=>{var ece=function(e,t){return e>0&&(e&e-1)===0&&t>0&&(t&t-1)===0};UM.exports=ece});var zM=l((z5e,kM)=>{var tce=function(e){return e>0&&(e&e-1)===0};kM.exports=tce});var XM=l((Y5e,YM)=>{YM.exports={GetNext:Qv(),IsSize:$a(),IsValue:zM()}});var WM=l((X5e,VM)=>{var ice=function(e,t,i,r){return i===void 0&&(i=0),t===0?e:(e-=i,e=t*Math.ceil(e/t),r?(i+e)/t:i+e)};VM.exports=ice});var ja=l((V5e,HM)=>{var rce=function(e,t,i,r){return i===void 0&&(i=0),t===0?e:(e-=i,e=t*Math.floor(e/t),r?(i+e)/t:i+e)};HM.exports=rce});var ZM=l((W5e,KM)=>{var sce=function(e,t,i,r){return i===void 0&&(i=0),t===0?e:(e-=i,e=t*Math.round(e/t),r?(i+e)/t:i+e)};KM.exports=sce});var QM=l((H5e,JM)=>{JM.exports={Ceil:WM(),Floor:ja(),To:ZM()}});var jM=l((K5e,$M)=>{var nce=C(),ace=new nce({initialize:function(t){t===void 0&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var e=2091639*this.s0+this.c*23283064365386963e-26;return this.c=e|0,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2},hash:function(e){var t,i=this.n;e=e.toString();for(var r=0;r<e.length;r++)i+=e.charCodeAt(r),t=.02519603282416938*i,i=t>>>0,t-=i,t*=i,i=t>>>0,t-=i,i+=t*4294967296;return this.n=i,(i>>>0)*23283064365386963e-26},init:function(e){typeof e=="string"?this.state(e):this.sow(e)},sow:function(e){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!e)for(var t=0;t<e.length&&e[t]!=null;t++){var i=e[t];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},between:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},realInRange:function(e,t){return this.frac()*(t-e)+e},normal:function(){return 1-2*this.frac()},uuid:function(){var e="",t="";for(t=e="";e++<36;t+=~e%5|e*3&4?(e^15?8^this.frac()*(e^20?16:4):4).toString(16):"-");return t},pick:function(e){return e[this.integerInRange(0,e.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]},timestamp:function(e,t){return this.realInRange(e||9466848e5,t||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(e){return typeof e=="string"&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(e){for(var t=e.length-1,i=t;i>0;i--){var r=Math.floor(this.frac()*(i+1)),s=e[r];e[r]=e[i],e[i]=s}return e}});$M.exports=ace});var tb=l((Z5e,eb)=>{var hce=function(e){for(var t=0,i=0;i<e.length;i++)t+=+e[i];return t/e.length};eb.exports=hce});var $o=l((J5e,ib)=>{var oce=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};ib.exports=oce});var sb=l((Q5e,rb)=>{var uce=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=10);var r=Math.pow(i,-t);return Math.ceil(e*r)/r};rb.exports=uce});var ab=l(($5e,nb)=>{var lce=function(e,t){return Math.abs(e-t)};nb.exports=lce});var pi=l((j5e,hb)=>{var fce=C(),ht=new fce({initialize:function(t,i,r){this.x=0,this.y=0,this.z=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clone:function(){return new ht(this.x,this.y,this.z)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},crossVectors:function(e,t){var i=e.x,r=e.y,s=e.z,n=t.x,a=t.y,h=t.z;return this.x=r*h-s*a,this.y=s*n-i*h,this.z=i*a-r*n,this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z||0,this},set:function(e,t,i){return typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):(this.x=e||0,this.y=t||0,this.z=i||0),this},setFromMatrixPosition:function(e){return this.fromArray(e.val,12)},setFromMatrixColumn:function(e,t){return this.fromArray(e.val,t*4)},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z||0,this},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addScale:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t||0,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z||0,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z||1,this},scale:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0;return Math.sqrt(t*t+i*i+r*r)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0;return t*t+i*i+r*r},length:function(){var e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)},lengthSq:function(){var e=this.x,t=this.y,i=this.z;return e*e+t*t+i*i},normalize:function(){var e=this.x,t=this.y,i=this.z,r=e*e+t*t+i*i;return r>0&&(r=1/Math.sqrt(r),this.x=e*r,this.y=t*r,this.z=i*r),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function(e){var t=this.x,i=this.y,r=this.z,s=e.x,n=e.y,a=e.z;return this.x=i*a-r*n,this.y=r*s-t*a,this.z=t*n-i*s,this},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y,s=this.z;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this.z=s+t*(e.z-s),this},applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z,s=e.val;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,s=e.val,n=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*n,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*n,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*n,this},transformMat3:function(e){var t=this.x,i=this.y,r=this.z,s=e.val;return this.x=t*s[0]+i*s[3]+r*s[6],this.y=t*s[1]+i*s[4]+r*s[7],this.z=t*s[2]+i*s[5]+r*s[8],this},transformMat4:function(e){var t=this.x,i=this.y,r=this.z,s=e.val;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12],this.y=s[1]*t+s[5]*i+s[9]*r+s[13],this.z=s[2]*t+s[6]*i+s[10]*r+s[14],this},transformCoordinates:function(e){var t=this.x,i=this.y,r=this.z,s=e.val,n=t*s[0]+i*s[4]+r*s[8]+s[12],a=t*s[1]+i*s[5]+r*s[9]+s[13],h=t*s[2]+i*s[6]+r*s[10]+s[14],o=t*s[3]+i*s[7]+r*s[11]+s[15];return this.x=n/o,this.y=a/o,this.z=h/o,this},transformQuat:function(e){var t=this.x,i=this.y,r=this.z,s=e.x,n=e.y,a=e.z,h=e.w,o=h*t+n*r-a*i,u=h*i+a*t-s*r,f=h*r+s*i-n*t,d=-s*t-n*i-a*r;return this.x=o*h+d*-s+u*-a-f*-n,this.y=u*h+d*-n+f*-s-o*-a,this.z=f*h+d*-a+o*-n-u*-s,this},project:function(e){var t=this.x,i=this.y,r=this.z,s=e.val,n=s[0],a=s[1],h=s[2],o=s[3],u=s[4],f=s[5],d=s[6],v=s[7],c=s[8],p=s[9],m=s[10],x=s[11],g=s[12],y=s[13],T=s[14],S=s[15],E=1/(t*o+i*v+r*x+S);return this.x=(t*n+i*u+r*c+g)*E,this.y=(t*a+i*f+r*p+y)*E,this.z=(t*h+i*d+r*m+T)*E,this},projectViewMatrix:function(e,t){return this.applyMatrix4(e).applyMatrix4(t)},unprojectViewMatrix:function(e,t){return this.applyMatrix4(e).applyMatrix4(t)},unproject:function(e,t){var i=e.x,r=e.y,s=e.z,n=e.w,a=this.x-i,h=n-this.y-1-r,o=this.z;return this.x=2*a/s-1,this.y=2*h/n-1,this.z=2*o-1,this.project(t)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});ht.ZERO=new ht;ht.RIGHT=new ht(1,0,0);ht.LEFT=new ht(-1,0,0);ht.UP=new ht(0,-1,0);ht.DOWN=new ht(0,1,0);ht.FORWARD=new ht(0,0,1);ht.BACK=new ht(0,0,-1);ht.ONE=new ht(1,1,1);hb.exports=ht});var Er=l((e4e,ob)=>{var dce=C(),$v=pi(),jo=1e-6,tu=new dce({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new tu(this)},set:function(e){return this.copy(e)},setValues:function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m){var x=this.val;return x[0]=e,x[1]=t,x[2]=i,x[3]=r,x[4]=s,x[5]=n,x[6]=a,x[7]=h,x[8]=o,x[9]=u,x[10]=f,x[11]=d,x[12]=v,x[13]=c,x[14]=p,x[15]=m,this},copy:function(e){var t=e.val;return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},fromArray:function(e){return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(e,t,i){var r=Ln.fromQuat(i),s=r.val,n=t.x,a=t.y,h=t.z;return this.setValues(s[0]*n,s[1]*n,s[2]*n,0,s[4]*a,s[5]*a,s[6]*a,0,s[8]*h,s[9]*h,s[10]*h,0,e.x,e.y,e.z,1)},xyz:function(e,t,i){this.identity();var r=this.val;return r[12]=e,r[13]=t,r[14]=i,this},scaling:function(e,t,i){this.zero();var r=this.val;return r[0]=e,r[5]=t,r[10]=i,r[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var e=this.val,t=e[1],i=e[2],r=e[3],s=e[6],n=e[7],a=e[11];return e[1]=e[4],e[2]=e[8],e[3]=e[12],e[4]=t,e[6]=e[9],e[7]=e[13],e[8]=i,e[9]=s,e[11]=e[14],e[12]=r,e[13]=n,e[14]=a,this},getInverse:function(e){return this.copy(e),this.invert()},invert:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8],f=e[9],d=e[10],v=e[11],c=e[12],p=e[13],m=e[14],x=e[15],g=t*a-i*n,y=t*h-r*n,T=t*o-s*n,S=i*h-r*a,E=i*o-s*a,_=r*o-s*h,w=u*p-f*c,R=u*m-d*c,q=u*x-v*c,A=f*m-d*p,P=f*x-v*p,L=d*x-v*m,b=g*L-y*P+T*A+S*q-E*R+_*w;return b?(b=1/b,this.setValues((a*L-h*P+o*A)*b,(r*P-i*L-s*A)*b,(p*_-m*E+x*S)*b,(d*E-f*_-v*S)*b,(h*q-n*L-o*R)*b,(t*L-r*q+s*R)*b,(m*T-c*_-x*y)*b,(u*_-d*T+v*y)*b,(n*P-a*q+o*w)*b,(i*q-t*P-s*w)*b,(c*E-p*T+x*g)*b,(f*T-u*E-v*g)*b,(a*R-n*A-h*w)*b,(t*A-i*R+r*w)*b,(p*y-c*S-m*g)*b,(u*S-f*y+d*g)*b)):this},adjoint:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8],f=e[9],d=e[10],v=e[11],c=e[12],p=e[13],m=e[14],x=e[15];return this.setValues(a*(d*x-v*m)-f*(h*x-o*m)+p*(h*v-o*d),-(i*(d*x-v*m)-f*(r*x-s*m)+p*(r*v-s*d)),i*(h*x-o*m)-a*(r*x-s*m)+p*(r*o-s*h),-(i*(h*v-o*d)-a*(r*v-s*d)+f*(r*o-s*h)),-(n*(d*x-v*m)-u*(h*x-o*m)+c*(h*v-o*d)),t*(d*x-v*m)-u*(r*x-s*m)+c*(r*v-s*d),-(t*(h*x-o*m)-n*(r*x-s*m)+c*(r*o-s*h)),t*(h*v-o*d)-n*(r*v-s*d)+u*(r*o-s*h),n*(f*x-v*p)-u*(a*x-o*p)+c*(a*v-o*f),-(t*(f*x-v*p)-u*(i*x-s*p)+c*(i*v-s*f)),t*(a*x-o*p)-n*(i*x-s*p)+c*(i*o-s*a),-(t*(a*v-o*f)-n*(i*v-s*f)+u*(i*o-s*a)),-(n*(f*m-d*p)-u*(a*m-h*p)+c*(a*d-h*f)),t*(f*m-d*p)-u*(i*m-r*p)+c*(i*d-r*f),-(t*(a*m-h*p)-n*(i*m-r*p)+c*(i*h-r*a)),t*(a*d-h*f)-n*(i*d-r*f)+u*(i*h-r*a))},determinant:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8],f=e[9],d=e[10],v=e[11],c=e[12],p=e[13],m=e[14],x=e[15],g=t*a-i*n,y=t*h-r*n,T=t*o-s*n,S=i*h-r*a,E=i*o-s*a,_=r*o-s*h,w=u*p-f*c,R=u*m-d*c,q=u*x-v*c,A=f*m-d*p,P=f*x-v*p,L=d*x-v*m;return g*L-y*P+T*A+S*q-E*R+_*w},multiply:function(e){var t=this.val,i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],h=t[5],o=t[6],u=t[7],f=t[8],d=t[9],v=t[10],c=t[11],p=t[12],m=t[13],x=t[14],g=t[15],y=e.val,T=y[0],S=y[1],E=y[2],_=y[3];return t[0]=T*i+S*a+E*f+_*p,t[1]=T*r+S*h+E*d+_*m,t[2]=T*s+S*o+E*v+_*x,t[3]=T*n+S*u+E*c+_*g,T=y[4],S=y[5],E=y[6],_=y[7],t[4]=T*i+S*a+E*f+_*p,t[5]=T*r+S*h+E*d+_*m,t[6]=T*s+S*o+E*v+_*x,t[7]=T*n+S*u+E*c+_*g,T=y[8],S=y[9],E=y[10],_=y[11],t[8]=T*i+S*a+E*f+_*p,t[9]=T*r+S*h+E*d+_*m,t[10]=T*s+S*o+E*v+_*x,t[11]=T*n+S*u+E*c+_*g,T=y[12],S=y[13],E=y[14],_=y[15],t[12]=T*i+S*a+E*f+_*p,t[13]=T*r+S*h+E*d+_*m,t[14]=T*s+S*o+E*v+_*x,t[15]=T*n+S*u+E*c+_*g,this},multiplyLocal:function(e){var t=this.val,i=e.val;return this.setValues(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]+t[3]*i[12],t[0]*i[1]+t[1]*i[5]+t[2]*i[9]+t[3]*i[13],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]+t[3]*i[14],t[0]*i[3]+t[1]*i[7]+t[2]*i[11]+t[3]*i[15],t[4]*i[0]+t[5]*i[4]+t[6]*i[8]+t[7]*i[12],t[4]*i[1]+t[5]*i[5]+t[6]*i[9]+t[7]*i[13],t[4]*i[2]+t[5]*i[6]+t[6]*i[10]+t[7]*i[14],t[4]*i[3]+t[5]*i[7]+t[6]*i[11]+t[7]*i[15],t[8]*i[0]+t[9]*i[4]+t[10]*i[8]+t[11]*i[12],t[8]*i[1]+t[9]*i[5]+t[10]*i[9]+t[11]*i[13],t[8]*i[2]+t[9]*i[6]+t[10]*i[10]+t[11]*i[14],t[8]*i[3]+t[9]*i[7]+t[10]*i[11]+t[11]*i[15],t[12]*i[0]+t[13]*i[4]+t[14]*i[8]+t[15]*i[12],t[12]*i[1]+t[13]*i[5]+t[14]*i[9]+t[15]*i[13],t[12]*i[2]+t[13]*i[6]+t[14]*i[10]+t[15]*i[14],t[12]*i[3]+t[13]*i[7]+t[14]*i[11]+t[15]*i[15])},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.val,r=t.val,s=i[0],n=i[4],a=i[8],h=i[12],o=i[1],u=i[5],f=i[9],d=i[13],v=i[2],c=i[6],p=i[10],m=i[14],x=i[3],g=i[7],y=i[11],T=i[15],S=r[0],E=r[4],_=r[8],w=r[12],R=r[1],q=r[5],A=r[9],P=r[13],L=r[2],b=r[6],G=r[10],M=r[14],D=r[3],I=r[7],F=r[11],O=r[15];return this.setValues(s*S+n*R+a*L+h*D,o*S+u*R+f*L+d*D,v*S+c*R+p*L+m*D,x*S+g*R+y*L+T*D,s*E+n*q+a*b+h*I,o*E+u*q+f*b+d*I,v*E+c*q+p*b+m*I,x*E+g*q+y*b+T*I,s*_+n*A+a*G+h*F,o*_+u*A+f*G+d*F,v*_+c*A+p*G+m*F,x*_+g*A+y*G+T*F,s*w+n*P+a*M+h*O,o*w+u*P+f*M+d*O,v*w+c*P+p*M+m*O,x*w+g*P+y*M+T*O)},translate:function(e){return this.translateXYZ(e.x,e.y,e.z)},translateXYZ:function(e,t,i){var r=this.val;return r[12]=r[0]*e+r[4]*t+r[8]*i+r[12],r[13]=r[1]*e+r[5]*t+r[9]*i+r[13],r[14]=r[2]*e+r[6]*t+r[10]*i+r[14],r[15]=r[3]*e+r[7]*t+r[11]*i+r[15],this},scale:function(e){return this.scaleXYZ(e.x,e.y,e.z)},scaleXYZ:function(e,t,i){var r=this.val;return r[0]=r[0]*e,r[1]=r[1]*e,r[2]=r[2]*e,r[3]=r[3]*e,r[4]=r[4]*t,r[5]=r[5]*t,r[6]=r[6]*t,r[7]=r[7]*t,r[8]=r[8]*i,r[9]=r[9]*i,r[10]=r[10]*i,r[11]=r[11]*i,this},makeRotationAxis:function(e,t){var i=Math.cos(t),r=Math.sin(t),s=1-i,n=e.x,a=e.y,h=e.z,o=s*n,u=s*a;return this.setValues(o*n+i,o*a-r*h,o*h+r*a,0,o*a+r*h,u*a+i,u*h-r*n,0,o*h-r*a,u*h+r*n,s*h*h+i,0,0,0,0,1)},rotate:function(e,t){var i=this.val,r=t.x,s=t.y,n=t.z,a=Math.sqrt(r*r+s*s+n*n);if(Math.abs(a)<jo)return this;a=1/a,r*=a,s*=a,n*=a;var h=Math.sin(e),o=Math.cos(e),u=1-o,f=i[0],d=i[1],v=i[2],c=i[3],p=i[4],m=i[5],x=i[6],g=i[7],y=i[8],T=i[9],S=i[10],E=i[11],_=i[12],w=i[13],R=i[14],q=i[15],A=r*r*u+o,P=s*r*u+n*h,L=n*r*u-s*h,b=r*s*u-n*h,G=s*s*u+o,M=n*s*u+r*h,D=r*n*u+s*h,I=s*n*u-r*h,F=n*n*u+o;return this.setValues(f*A+p*P+y*L,d*A+m*P+T*L,v*A+x*P+S*L,c*A+g*P+E*L,f*b+p*G+y*M,d*b+m*G+T*M,v*b+x*G+S*M,c*b+g*G+E*M,f*D+p*I+y*F,d*D+m*I+T*F,v*D+x*I+S*F,c*D+g*I+E*F,_,w,R,q)},rotateX:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),s=t[4],n=t[5],a=t[6],h=t[7],o=t[8],u=t[9],f=t[10],d=t[11];return t[4]=s*r+o*i,t[5]=n*r+u*i,t[6]=a*r+f*i,t[7]=h*r+d*i,t[8]=o*r-s*i,t[9]=u*r-n*i,t[10]=f*r-a*i,t[11]=d*r-h*i,this},rotateY:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),s=t[0],n=t[1],a=t[2],h=t[3],o=t[8],u=t[9],f=t[10],d=t[11];return t[0]=s*r-o*i,t[1]=n*r-u*i,t[2]=a*r-f*i,t[3]=h*r-d*i,t[8]=s*i+o*r,t[9]=n*i+u*r,t[10]=a*i+f*r,t[11]=h*i+d*r,this},rotateZ:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),s=t[0],n=t[1],a=t[2],h=t[3],o=t[4],u=t[5],f=t[6],d=t[7];return t[0]=s*r+o*i,t[1]=n*r+u*i,t[2]=a*r+f*i,t[3]=h*r+d*i,t[4]=o*r-s*i,t[5]=u*r-n*i,t[6]=f*r-a*i,t[7]=d*r-h*i,this},fromRotationTranslation:function(e,t){var i=e.x,r=e.y,s=e.z,n=e.w,a=i+i,h=r+r,o=s+s,u=i*a,f=i*h,d=i*o,v=r*h,c=r*o,p=s*o,m=n*a,x=n*h,g=n*o;return this.setValues(1-(v+p),f+g,d-x,0,f-g,1-(u+p),c+m,0,d+x,c-m,1-(u+v),0,t.x,t.y,t.z,1)},fromQuat:function(e){var t=e.x,i=e.y,r=e.z,s=e.w,n=t+t,a=i+i,h=r+r,o=t*n,u=t*a,f=t*h,d=i*a,v=i*h,c=r*h,p=s*n,m=s*a,x=s*h;return this.setValues(1-(d+c),u+x,f-m,0,u-x,1-(o+c),v+p,0,f+m,v-p,1-(o+d),0,0,0,0,1)},frustum:function(e,t,i,r,s,n){var a=1/(t-e),h=1/(r-i),o=1/(s-n);return this.setValues(s*2*a,0,0,0,0,s*2*h,0,0,(t+e)*a,(r+i)*h,(n+s)*o,-1,0,0,n*s*2*o,0)},perspective:function(e,t,i,r){var s=1/Math.tan(e/2),n=1/(i-r);return this.setValues(s/t,0,0,0,0,s,0,0,0,0,(r+i)*n,-1,0,0,2*r*i*n,0)},perspectiveLH:function(e,t,i,r){return this.setValues(2*i/e,0,0,0,0,2*i/t,0,0,0,0,-r/(i-r),1,0,0,i*r/(i-r),0)},ortho:function(e,t,i,r,s,n){var a=e-t,h=i-r,o=s-n;return a=a===0?a:1/a,h=h===0?h:1/h,o=o===0?o:1/o,this.setValues(-2*a,0,0,0,0,-2*h,0,0,0,0,2*o,0,(e+t)*a,(r+i)*h,(n+s)*o,1)},lookAtRH:function(e,t,i){var r=this.val;return ei.subVectors(e,t),ei.getLengthSquared()===0&&(ei.z=1),ei.normalize(),$r.crossVectors(i,ei),$r.getLengthSquared()===0&&(Math.abs(i.z)===1?ei.x+=1e-4:ei.z+=1e-4,ei.normalize(),$r.crossVectors(i,ei)),$r.normalize(),eu.crossVectors(ei,$r),r[0]=$r.x,r[1]=$r.y,r[2]=$r.z,r[4]=eu.x,r[5]=eu.y,r[6]=eu.z,r[8]=ei.x,r[9]=ei.y,r[10]=ei.z,this},lookAt:function(e,t,i){var r=e.x,s=e.y,n=e.z,a=i.x,h=i.y,o=i.z,u=t.x,f=t.y,d=t.z;if(Math.abs(r-u)<jo&&Math.abs(s-f)<jo&&Math.abs(n-d)<jo)return this.identity();var v=r-u,c=s-f,p=n-d,m=1/Math.sqrt(v*v+c*c+p*p);v*=m,c*=m,p*=m;var x=h*p-o*c,g=o*v-a*p,y=a*c-h*v;m=Math.sqrt(x*x+g*g+y*y),m?(m=1/m,x*=m,g*=m,y*=m):(x=0,g=0,y=0);var T=c*y-p*g,S=p*x-v*y,E=v*g-c*x;return m=Math.sqrt(T*T+S*S+E*E),m?(m=1/m,T*=m,S*=m,E*=m):(T=0,S=0,E=0),this.setValues(x,T,v,0,g,S,c,0,y,E,p,0,-(x*r+g*s+y*n),-(T*r+S*s+E*n),-(v*r+c*s+p*n),1)},yawPitchRoll:function(e,t,i){this.zero(),Ln.zero(),eh.zero();var r=this.val,s=Ln.val,n=eh.val,a=Math.sin(i),h=Math.cos(i);return r[10]=1,r[15]=1,r[0]=h,r[1]=a,r[4]=-a,r[5]=h,a=Math.sin(t),h=Math.cos(t),s[0]=1,s[15]=1,s[5]=h,s[10]=h,s[9]=-a,s[6]=a,a=Math.sin(e),h=Math.cos(e),n[5]=1,n[15]=1,n[0]=h,n[2]=-a,n[8]=a,n[10]=h,this.multiplyLocal(Ln),this.multiplyLocal(eh),this},setWorldMatrix:function(e,t,i,r,s){return this.yawPitchRoll(e.y,e.x,e.z),Ln.scaling(i.x,i.y,i.z),eh.xyz(t.x,t.y,t.z),this.multiplyLocal(Ln),this.multiplyLocal(eh),r&&this.multiplyLocal(r),s&&this.multiplyLocal(s),this},multiplyToMat4:function(e,t){var i=this.val,r=e.val,s=i[0],n=i[1],a=i[2],h=i[3],o=i[4],u=i[5],f=i[6],d=i[7],v=i[8],c=i[9],p=i[10],m=i[11],x=i[12],g=i[13],y=i[14],T=i[15],S=r[0],E=r[1],_=r[2],w=r[3],R=r[4],q=r[5],A=r[6],P=r[7],L=r[8],b=r[9],G=r[10],M=r[11],D=r[12],I=r[13],F=r[14],O=r[15];return t.setValues(S*s+E*o+_*v+w*x,E*n+E*u+_*c+w*g,_*a+E*f+_*p+w*y,w*h+E*d+_*m+w*T,R*s+q*o+A*v+P*x,R*n+q*u+A*c+P*g,R*a+q*f+A*p+P*y,R*h+q*d+A*m+P*T,L*s+b*o+G*v+M*x,L*n+b*u+G*c+M*g,L*a+b*f+G*p+M*y,L*h+b*d+G*m+M*T,D*s+I*o+F*v+O*x,D*n+I*u+F*c+O*g,D*a+I*f+F*p+O*y,D*h+I*d+F*m+O*T)},fromRotationXYTranslation:function(e,t,i){var r=t.x,s=t.y,n=t.z,a=Math.sin(e.x),h=Math.cos(e.x),o=Math.sin(e.y),u=Math.cos(e.y),f=r,d=s,v=n,c=-a,p=0-c*o,m=0-h*o,x=c*u,g=h*u;return i||(f=u*r+o*n,d=p*r+h*s+x*n,v=m*r+a*s+g*n),this.setValues(u,p,m,0,0,h,a,0,o,x,g,0,f,d,v,1)},getMaxScaleOnAxis:function(){var e=this.val,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}}),Ln=new tu,eh=new tu,$r=new $v,eu=new $v,ei=new $v;ob.exports=tu});var fb=l((t4e,lb)=>{var On=Le(),vce=C(),cce=Er(),pce=B(),ub=new cce,jv=new vce({initialize:function e(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=e.DefaultOrder),this._x=t,this._y=i,this._z=r,this._order=s,this.onChangeCallback=pce},x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback(this)}},set:function(e,t,i,r){return r===void 0&&(r=this._order),this._x=e,this._y=t,this._z=i,this._order=r,this.onChangeCallback(this),this},copy:function(e){return this.set(e.x,e.y,e.z,e.order)},setFromQuaternion:function(e,t,i){return t===void 0&&(t=this._order),i===void 0&&(i=!1),ub.fromQuat(e),this.setFromRotationMatrix(ub,t,i)},setFromRotationMatrix:function(e,t,i){t===void 0&&(t=this._order),i===void 0&&(i=!1);var r=e.val,s=r[0],n=r[4],a=r[8],h=r[1],o=r[5],u=r[9],f=r[2],d=r[6],v=r[10],c=0,p=0,m=0,x=.99999;switch(t){case"XYZ":{p=Math.asin(On(a,-1,1)),Math.abs(a)<x?(c=Math.atan2(-u,v),m=Math.atan2(-n,s)):c=Math.atan2(d,o);break}case"YXZ":{c=Math.asin(-On(u,-1,1)),Math.abs(u)<x?(p=Math.atan2(a,v),m=Math.atan2(h,o)):p=Math.atan2(-f,s);break}case"ZXY":{c=Math.asin(On(d,-1,1)),Math.abs(d)<x?(p=Math.atan2(-f,v),m=Math.atan2(-n,o)):m=Math.atan2(h,s);break}case"ZYX":{p=Math.asin(-On(f,-1,1)),Math.abs(f)<x?(c=Math.atan2(d,v),m=Math.atan2(h,s)):m=Math.atan2(-n,o);break}case"YZX":{m=Math.asin(On(h,-1,1)),Math.abs(h)<x?(c=Math.atan2(-u,o),p=Math.atan2(-f,s)):p=Math.atan2(a,v);break}case"XZY":{m=Math.asin(-On(n,-1,1)),Math.abs(n)<x?(c=Math.atan2(d,o),p=Math.atan2(a,s)):c=Math.atan2(-u,v);break}}return this._x=c,this._y=p,this._z=m,this._order=t,i&&this.onChangeCallback(this),this}});jv.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"];jv.DefaultOrder="XYZ";lb.exports=jv});var vb=l((i4e,db)=>{var mce=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=10);var r=Math.pow(i,-t);return Math.floor(e*r)/r};db.exports=mce});var pb=l((r4e,cb)=>{var gce=function(e,t){return e/t/1e3};cb.exports=gce});var gb=l((s4e,mb)=>{var xce=function(e){return e==parseFloat(e)?!(e%2):void 0};mb.exports=xce});var yb=l((n4e,xb)=>{var yce=function(e){return e===parseFloat(e)?!(e%2):void 0};xb.exports=yce});var Eb=l((a4e,Tb)=>{var Tce=function(e,t,i){return Math.min(e+t,i)};Tb.exports=Tce});var _b=l((h4e,Sb)=>{var Ece=function(e){var t=e.length;if(t===0)return 0;e.sort(function(r,s){return r-s});var i=Math.floor(t/2);return t%2===0?(e[i]+e[i-1])/2:e[i]};Sb.exports=Ece});var Cb=l((o4e,wb)=>{var Sce=function(e,t,i){return Math.max(e-t,i)};wb.exports=Sce});var qb=l((u4e,Rb)=>{var _ce=function(e,t,i,r){i===void 0&&(i=t+1);var s=(e-t)/(i-t);return s>1?r!==void 0?(s=(r-e)/(r-i),s<0&&(s=0)):s=1:s<0&&(s=0),s};Rb.exports=_ce});var Pb=l((l4e,Ab)=>{var wce=Oe(),Cce=function(e){return e*wce.RAD_TO_DEG};Ab.exports=Cce});var bb=l((f4e,Mb)=>{var Rce=function(e,t){t===void 0&&(t=1);var i=Math.random()*2*Math.PI;return e.x=Math.cos(i)*t,e.y=Math.sin(i)*t,e};Mb.exports=Rce});var Ob=l((d4e,Lb)=>{var qce=function(e,t){t===void 0&&(t=1);var i=Math.random()*2*Math.PI,r=Math.random()*2-1,s=Math.sqrt(1-r*r)*t;return e.x=Math.cos(i)*s,e.y=Math.sin(i)*s,e.z=r*t,e};Lb.exports=qce});var Db=l((v4e,Fb)=>{var Ace=function(e,t){return t===void 0&&(t=1),e.x=(Math.random()*2-1)*t,e.y=(Math.random()*2-1)*t,e.z=(Math.random()*2-1)*t,e.w=(Math.random()*2-1)*t,e};Fb.exports=Ace});var Nb=l((c4e,Ib)=>{var Pce=function(e,t){var i=e.x,r=e.y;return e.x=i*Math.cos(t)-r*Math.sin(t),e.y=i*Math.sin(t)+r*Math.cos(t),e};Ib.exports=Pce});var Bb=l((p4e,Gb)=>{var Mce=function(e,t,i,r,s){return e.x=t+s*Math.cos(r),e.y=i+s*Math.sin(r),e};Gb.exports=Mce});var ec=l((m4e,Ub)=>{var bce=function(e){return e>0?Math.ceil(e):Math.floor(e)};Ub.exports=bce});var zb=l((g4e,kb)=>{var Lce=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=10);var r=Math.pow(i,-t);return Math.round(e*r)/r};kb.exports=Lce});var Xb=l((x4e,Yb)=>{var Oce=function(e,t,i,r){t===void 0&&(t=1),i===void 0&&(i=1),r===void 0&&(r=1),r*=Math.PI/e;for(var s=[],n=[],a=0;a<e;a++)i-=t*r,t+=i*r,s[a]=i,n[a]=t;return{sin:n,cos:s,length:e}};Yb.exports=Oce});var Wb=l((y4e,Vb)=>{var Fce=xe(),Dce=function(e,t,i,r){r===void 0&&(r=new Fce);var s=0,n=0,a=t*i;return e>0&&e<=a&&(e>t-1?(n=Math.floor(e/t),s=e-n*t):s=e),r.set(s,n)};Vb.exports=Dce});var Kb=l((T4e,Hb)=>{var Ice=function(e,t,i){return Math.abs(e-t)<=i};Hb.exports=Ice});var th=l((E4e,Zb)=>{var Nce=C(),Et=new Nce({initialize:function(t,i,r,s){this.x=0,this.y=0,this.z=0,this.w=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=r||0,this.w=s||0)},clone:function(){return new Et(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z||0,this.w=e.w||0,this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w},set:function(e,t,i,r){return typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w=e.w||0):(this.x=e||0,this.y=t||0,this.z=i||0,this.w=r||0),this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z||0,this.w+=e.w||0,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z||0,this.w-=e.w||0,this},scale:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},length:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return Math.sqrt(e*e+t*t+i*i+r*r)},lengthSq:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return e*e+t*t+i*i+r*r},normalize:function(){var e=this.x,t=this.y,i=this.z,r=this.w,s=e*e+t*t+i*i+r*r;return s>0&&(s=1/Math.sqrt(s),this.x=e*s,this.y=t*s,this.z=i*s,this.w=r*s),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y,s=this.z,n=this.w;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this.z=s+t*(e.z-s),this.w=n+t*(e.w-n),this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z||1,this.w*=e.w||1,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z||1,this.w/=e.w||1,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0,s=e.w-this.w||0;return Math.sqrt(t*t+i*i+r*r+s*s)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0,s=e.w-this.w||0;return t*t+i*i+r*r+s*s},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(e){var t=this.x,i=this.y,r=this.z,s=this.w,n=e.val;return this.x=n[0]*t+n[4]*i+n[8]*r+n[12]*s,this.y=n[1]*t+n[5]*i+n[9]*r+n[13]*s,this.z=n[2]*t+n[6]*i+n[10]*r+n[14]*s,this.w=n[3]*t+n[7]*i+n[11]*r+n[15]*s,this},transformQuat:function(e){var t=this.x,i=this.y,r=this.z,s=e.x,n=e.y,a=e.z,h=e.w,o=h*t+n*r-a*i,u=h*i+a*t-s*r,f=h*r+s*i-n*t,d=-s*t-n*i-a*r;return this.x=o*h+d*-s+u*-a-f*-n,this.y=u*h+d*-n+f*-s-o*-a,this.z=f*h+d*-a+o*-n-u*-s,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});Et.prototype.sub=Et.prototype.subtract;Et.prototype.mul=Et.prototype.multiply;Et.prototype.div=Et.prototype.divide;Et.prototype.dist=Et.prototype.distance;Et.prototype.distSq=Et.prototype.distanceSq;Et.prototype.len=Et.prototype.length;Et.prototype.lenSq=Et.prototype.lengthSq;Zb.exports=Et});var tc=l((S4e,Qb)=>{var Gce=C(),Jb=new Gce({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new Jb(this)},set:function(e){return this.copy(e)},copy:function(e){var t=this.val,i=e.val;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this},fromMat4:function(e){var t=e.val,i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[4],i[4]=t[5],i[5]=t[6],i[6]=t[8],i[7]=t[9],i[8]=t[10],this},fromArray:function(e){var t=this.val;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},identity:function(){var e=this.val;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this},transpose:function(){var e=this.val,t=e[1],i=e[2],r=e[5];return e[1]=e[3],e[2]=e[6],e[3]=t,e[5]=e[7],e[6]=i,e[7]=r,this},invert:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8],f=u*n-a*o,d=-u*s+a*h,v=o*s-n*h,c=t*f+i*d+r*v;return c?(c=1/c,e[0]=f*c,e[1]=(-u*i+r*o)*c,e[2]=(a*i-r*n)*c,e[3]=d*c,e[4]=(u*t-r*h)*c,e[5]=(-a*t+r*s)*c,e[6]=v*c,e[7]=(-o*t+i*h)*c,e[8]=(n*t-i*s)*c,this):null},adjoint:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8];return e[0]=n*u-a*o,e[1]=r*o-i*u,e[2]=i*a-r*n,e[3]=a*h-s*u,e[4]=t*u-r*h,e[5]=r*s-t*a,e[6]=s*o-n*h,e[7]=i*h-t*o,e[8]=t*n-i*s,this},determinant:function(){var e=this.val,t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],a=e[5],h=e[6],o=e[7],u=e[8];return t*(u*n-a*o)+i*(-u*s+a*h)+r*(o*s-n*h)},multiply:function(e){var t=this.val,i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],h=t[5],o=t[6],u=t[7],f=t[8],d=e.val,v=d[0],c=d[1],p=d[2],m=d[3],x=d[4],g=d[5],y=d[6],T=d[7],S=d[8];return t[0]=v*i+c*n+p*o,t[1]=v*r+c*a+p*u,t[2]=v*s+c*h+p*f,t[3]=m*i+x*n+g*o,t[4]=m*r+x*a+g*u,t[5]=m*s+x*h+g*f,t[6]=y*i+T*n+S*o,t[7]=y*r+T*a+S*u,t[8]=y*s+T*h+S*f,this},translate:function(e){var t=this.val,i=e.x,r=e.y;return t[6]=i*t[0]+r*t[3]+t[6],t[7]=i*t[1]+r*t[4]+t[7],t[8]=i*t[2]+r*t[5]+t[8],this},rotate:function(e){var t=this.val,i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],h=t[5],o=Math.sin(e),u=Math.cos(e);return t[0]=u*i+o*n,t[1]=u*r+o*a,t[2]=u*s+o*h,t[3]=u*n-o*i,t[4]=u*a-o*r,t[5]=u*h-o*s,this},scale:function(e){var t=this.val,i=e.x,r=e.y;return t[0]=i*t[0],t[1]=i*t[1],t[2]=i*t[2],t[3]=r*t[3],t[4]=r*t[4],t[5]=r*t[5],this},fromQuat:function(e){var t=e.x,i=e.y,r=e.z,s=e.w,n=t+t,a=i+i,h=r+r,o=t*n,u=t*a,f=t*h,d=i*a,v=i*h,c=r*h,p=s*n,m=s*a,x=s*h,g=this.val;return g[0]=1-(d+c),g[3]=u+x,g[6]=f-m,g[1]=u-x,g[4]=1-(o+c),g[7]=v+p,g[2]=f+m,g[5]=v-p,g[8]=1-(o+d),this},normalFromMat4:function(e){var t=e.val,i=this.val,r=t[0],s=t[1],n=t[2],a=t[3],h=t[4],o=t[5],u=t[6],f=t[7],d=t[8],v=t[9],c=t[10],p=t[11],m=t[12],x=t[13],g=t[14],y=t[15],T=r*o-s*h,S=r*u-n*h,E=r*f-a*h,_=s*u-n*o,w=s*f-a*o,R=n*f-a*u,q=d*x-v*m,A=d*g-c*m,P=d*y-p*m,L=v*g-c*x,b=v*y-p*x,G=c*y-p*g,M=T*G-S*b+E*L+_*P-w*A+R*q;return M?(M=1/M,i[0]=(o*G-u*b+f*L)*M,i[1]=(u*P-h*G-f*A)*M,i[2]=(h*b-o*P+f*q)*M,i[3]=(n*b-s*G-a*L)*M,i[4]=(r*G-n*P+a*A)*M,i[5]=(s*P-r*b-a*q)*M,i[6]=(x*R-g*w+y*_)*M,i[7]=(g*E-m*R-y*S)*M,i[8]=(m*w-x*E+y*T)*M,this):null}});Qb.exports=Jb});var rc=l((_4e,tL)=>{var Bce=C(),Uce=tc(),kce=B(),ic=pi(),$b=1e-6,jb=new Int8Array([1,2,0]),Fn=new Float32Array([0,0,0]),zce=new ic(1,0,0),Yce=new ic(0,1,0),jr=new ic,eL=new Uce,Xce=new Bce({initialize:function(t,i,r,s){this.onChangeCallback=kce,this.set(t,i,r,s)},x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback(this)}},copy:function(e){return this.set(e)},set:function(e,t,i,r,s){return s===void 0&&(s=!0),typeof e=="object"?(this._x=e.x||0,this._y=e.y||0,this._z=e.z||0,this._w=e.w||0):(this._x=e||0,this._y=t||0,this._z=i||0,this._w=r||0),s&&this.onChangeCallback(this),this},add:function(e){return this._x+=e.x,this._y+=e.y,this._z+=e.z,this._w+=e.w,this.onChangeCallback(this),this},subtract:function(e){return this._x-=e.x,this._y-=e.y,this._z-=e.z,this._w-=e.w,this.onChangeCallback(this),this},scale:function(e){return this._x*=e,this._y*=e,this._z*=e,this._w*=e,this.onChangeCallback(this),this},length:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return Math.sqrt(e*e+t*t+i*i+r*r)},lengthSq:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return e*e+t*t+i*i+r*r},normalize:function(){var e=this.x,t=this.y,i=this.z,r=this.w,s=e*e+t*t+i*i+r*r;return s>0&&(s=1/Math.sqrt(s),this._x=e*s,this._y=t*s,this._z=i*s,this._w=r*s),this.onChangeCallback(this),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function(e,t){t===void 0&&(t=0);var i=this.x,r=this.y,s=this.z,n=this.w;return this.set(i+t*(e.x-i),r+t*(e.y-r),s+t*(e.z-s),n+t*(e.w-n))},rotationTo:function(e,t){var i=e.x*t.x+e.y*t.y+e.z*t.z;return i<-.999999?(jr.copy(zce).cross(e).length()<$b&&jr.copy(Yce).cross(e),jr.normalize(),this.setAxisAngle(jr,Math.PI)):i>.999999?this.set(0,0,0,1):(jr.copy(e).cross(t),this._x=jr.x,this._y=jr.y,this._z=jr.z,this._w=1+i,this.normalize())},setAxes:function(e,t,i){var r=eL.val;return r[0]=t.x,r[3]=t.y,r[6]=t.z,r[1]=i.x,r[4]=i.y,r[7]=i.z,r[2]=-e.x,r[5]=-e.y,r[8]=-e.z,this.fromMat3(eL).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(e,t){t=t*.5;var i=Math.sin(t);return this.set(i*e.x,i*e.y,i*e.z,Math.cos(t))},multiply:function(e){var t=this.x,i=this.y,r=this.z,s=this.w,n=e.x,a=e.y,h=e.z,o=e.w;return this.set(t*o+s*n+i*h-r*a,i*o+s*a+r*n-t*h,r*o+s*h+t*a-i*n,s*o-t*n-i*a-r*h)},slerp:function(e,t){var i=this.x,r=this.y,s=this.z,n=this.w,a=e.x,h=e.y,o=e.z,u=e.w,f=i*a+r*h+s*o+n*u;f<0&&(f=-f,a=-a,h=-h,o=-o,u=-u);var d=1-t,v=t;if(1-f>$b){var c=Math.acos(f),p=Math.sin(c);d=Math.sin((1-t)*c)/p,v=Math.sin(t*c)/p}return this.set(d*i+v*a,d*r+v*h,d*s+v*o,d*n+v*u)},invert:function(){var e=this.x,t=this.y,i=this.z,r=this.w,s=e*e+t*t+i*i+r*r,n=s?1/s:0;return this.set(-e*n,-t*n,-i*n,r*n)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,s=this.w,n=Math.sin(e),a=Math.cos(e);return this.set(t*a+s*n,i*a+r*n,r*a-i*n,s*a-t*n)},rotateY:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,s=this.w,n=Math.sin(e),a=Math.cos(e);return this.set(t*a-r*n,i*a+s*n,r*a+t*n,s*a-i*n)},rotateZ:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,s=this.w,n=Math.sin(e),a=Math.cos(e);return this.set(t*a+i*n,i*a-t*n,r*a+s*n,s*a-r*n)},calculateW:function(){var e=this.x,t=this.y,i=this.z;return this.w=-Math.sqrt(1-e*e-t*t-i*i),this},setFromEuler:function(e,t){var i=e.x/2,r=e.y/2,s=e.z/2,n=Math.cos(i),a=Math.cos(r),h=Math.cos(s),o=Math.sin(i),u=Math.sin(r),f=Math.sin(s);switch(e.order){case"XYZ":{this.set(o*a*h+n*u*f,n*u*h-o*a*f,n*a*f+o*u*h,n*a*h-o*u*f,t);break}case"YXZ":{this.set(o*a*h+n*u*f,n*u*h-o*a*f,n*a*f-o*u*h,n*a*h+o*u*f,t);break}case"ZXY":{this.set(o*a*h-n*u*f,n*u*h+o*a*f,n*a*f+o*u*h,n*a*h-o*u*f,t);break}case"ZYX":{this.set(o*a*h-n*u*f,n*u*h+o*a*f,n*a*f-o*u*h,n*a*h+o*u*f,t);break}case"YZX":{this.set(o*a*h+n*u*f,n*u*h+o*a*f,n*a*f-o*u*h,n*a*h-o*u*f,t);break}case"XZY":{this.set(o*a*h-n*u*f,n*u*h-o*a*f,n*a*f+o*u*h,n*a*h+o*u*f,t);break}}return this},setFromRotationMatrix:function(e){var t=e.val,i=t[0],r=t[4],s=t[8],n=t[1],a=t[5],h=t[9],o=t[2],u=t[6],f=t[10],d=i+a+f,v;return d>0?(v=.5/Math.sqrt(d+1),this.set((u-h)*v,(s-o)*v,(n-r)*v,.25/v)):i>a&&i>f?(v=2*Math.sqrt(1+i-a-f),this.set(.25*v,(r+n)/v,(s+o)/v,(u-h)/v)):a>f?(v=2*Math.sqrt(1+a-i-f),this.set((r+n)/v,.25*v,(h+u)/v,(s-o)/v)):(v=2*Math.sqrt(1+f-i-a),this.set((s+o)/v,(h+u)/v,.25*v,(n-r)/v)),this},fromMat3:function(e){var t=e.val,i=t[0]+t[4]+t[8],r;if(i>0)r=Math.sqrt(i+1),this.w=.5*r,r=.5/r,this._x=(t[7]-t[5])*r,this._y=(t[2]-t[6])*r,this._z=(t[3]-t[1])*r;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[s*3+s]&&(s=2);var n=jb[s],a=jb[n];r=Math.sqrt(t[s*3+s]-t[n*3+n]-t[a*3+a]+1),Fn[s]=.5*r,r=.5/r,Fn[n]=(t[n*3+s]+t[s*3+n])*r,Fn[a]=(t[a*3+s]+t[s*3+a])*r,this._x=Fn[0],this._y=Fn[1],this._z=Fn[2],this._w=(t[a*3+n]-t[n*3+a])*r}return this.onChangeCallback(this),this}});tL.exports=Xce});var nL=l((w4e,sL)=>{var Vce=pi(),Wce=Er(),Hce=rc(),iL=new Wce,rL=new Hce,Kce=new Vce,Zce=function(e,t,i){return rL.setAxisAngle(t,i),iL.fromRotationTranslation(rL,Kce.set(0,0,0)),e.transformMat4(iL)};sL.exports=Zce});var iu=l((C4e,aL)=>{var Jce=Oe(),Qce=ze(),sc={Angle:ZP(),Distance:oM(),Easing:lM(),Fuzzy:TM(),Interpolation:GM(),Pow2:XM(),Snap:QM(),RandomDataGenerator:jM(),Average:tb(),Bernstein:Hv(),Between:$o(),CatmullRom:Kv(),CeilTo:sb(),Clamp:Le(),DegToRad:yr(),Difference:ab(),Euler:fb(),Factorial:Vv(),FloatBetween:Qa(),FloorTo:vb(),FromPercent:Tn(),GetSpeed:pb(),IsEven:gb(),IsEvenStrict:yb(),Linear:Ka(),MaxAdd:Eb(),Median:_b(),MinSub:Cb(),Percent:qb(),RadToDeg:Pb(),RandomXY:bb(),RandomXYZ:Ob(),RandomXYZW:Db(),Rotate:Nb(),RotateAround:Gd(),RotateAroundDistance:bo(),RotateTo:Bb(),RoundAwayFromZero:ec(),RoundTo:zb(),SinCosTableGenerator:Xb(),SmootherStep:Oo(),SmoothStep:Fo(),ToXY:Wb(),TransformXY:Co(),Within:Kb(),Wrap:Xr(),Vector2:xe(),Vector3:pi(),Vector4:th(),Matrix3:tc(),Matrix4:Er(),Quaternion:rc(),RotateVec3:nL()};sc=Qce(!1,sc,Jce);aL.exports=sc});var ru=l((R4e,hL)=>{var nc={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};nc.DefaultScene.push("CameraManager3D");nc.Global.push("facebook");hL.exports=nc});var hc=l((q4e,vL)=>{var $ce=C(),ac=Jt(),oL=Uv(),uL=z(),N=he(),jce=ae(),lL=iu(),fL=B(),epe=ru(),dL=Go(),tpe=new $ce({initialize:function(t){t===void 0&&(t={});var i=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],r="#ffffff";this.width=N(t,"width",1024),this.height=N(t,"height",768),this.zoom=N(t,"zoom",1),this.parent=N(t,"parent",void 0),this.scaleMode=N(t,"scaleMode",0),this.expandParent=N(t,"expandParent",!0),this.autoRound=N(t,"autoRound",!1),this.autoCenter=N(t,"autoCenter",0),this.resizeInterval=N(t,"resizeInterval",500),this.fullscreenTarget=N(t,"fullscreenTarget",null),this.minWidth=N(t,"minWidth",0),this.maxWidth=N(t,"maxWidth",0),this.minHeight=N(t,"minHeight",0),this.maxHeight=N(t,"maxHeight",0);var s=N(t,"scale",null);s&&(this.width=N(s,"width",this.width),this.height=N(s,"height",this.height),this.zoom=N(s,"zoom",this.zoom),this.parent=N(s,"parent",this.parent),this.scaleMode=N(s,"mode",this.scaleMode),this.expandParent=N(s,"expandParent",this.expandParent),this.autoRound=N(s,"autoRound",this.autoRound),this.autoCenter=N(s,"autoCenter",this.autoCenter),this.resizeInterval=N(s,"resizeInterval",this.resizeInterval),this.fullscreenTarget=N(s,"fullscreenTarget",this.fullscreenTarget),this.minWidth=N(s,"min.width",this.minWidth),this.maxWidth=N(s,"max.width",this.maxWidth),this.minHeight=N(s,"min.height",this.minHeight),this.maxHeight=N(s,"max.height",this.maxHeight)),this.renderType=N(t,"type",ac.AUTO),this.canvas=N(t,"canvas",null),this.context=N(t,"context",null),this.canvasStyle=N(t,"canvasStyle",null),this.customEnvironment=N(t,"customEnvironment",!1),this.sceneConfig=N(t,"scene",null),this.seed=N(t,"seed",[(Date.now()*Math.random()).toString()]),lL.RND=new lL.RandomDataGenerator(this.seed),this.gameTitle=N(t,"title",""),this.gameURL=N(t,"url","https://phaser.io"),this.gameVersion=N(t,"version",""),this.autoFocus=N(t,"autoFocus",!0),this.domCreateContainer=N(t,"dom.createContainer",!1),this.domPointerEvents=N(t,"dom.pointerEvents","none"),this.inputKeyboard=N(t,"input.keyboard",!0),this.inputKeyboardEventTarget=N(t,"input.keyboard.target",window),this.inputKeyboardCapture=N(t,"input.keyboard.capture",[]),this.inputMouse=N(t,"input.mouse",!0),this.inputMouseEventTarget=N(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=N(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=N(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=N(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=N(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=N(t,"input.touch",oL.input.touch),this.inputTouchEventTarget=N(t,"input.touch.target",null),this.inputTouchCapture=N(t,"input.touch.capture",!0),this.inputActivePointers=N(t,"input.activePointers",1),this.inputSmoothFactor=N(t,"input.smoothFactor",0),this.inputWindowEvents=N(t,"input.windowEvents",!0),this.inputGamepad=N(t,"input.gamepad",!1),this.inputGamepadEventTarget=N(t,"input.gamepad.target",window),this.disableContextMenu=N(t,"disableContextMenu",!1),this.audio=N(t,"audio",{}),this.hideBanner=N(t,"banner",null)===!1,this.hidePhaser=N(t,"banner.hidePhaser",!1),this.bannerTextColor=N(t,"banner.text",r),this.bannerBackgroundColor=N(t,"banner.background",i),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=N(t,"fps",null);var n=N(t,"render",t);this.pipeline=N(n,"pipeline",null),this.antialias=N(n,"antialias",!0),this.antialiasGL=N(n,"antialiasGL",!0),this.mipmapFilter=N(n,"mipmapFilter","LINEAR"),this.desynchronized=N(n,"desynchronized",!1),this.roundPixels=N(n,"roundPixels",!1),this.pixelArt=N(n,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=N(n,"transparent",!1),this.clearBeforeRender=N(n,"clearBeforeRender",!0),this.preserveDrawingBuffer=N(n,"preserveDrawingBuffer",!1),this.premultipliedAlpha=N(n,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=N(n,"failIfMajorPerformanceCaveat",!1),this.powerPreference=N(n,"powerPreference","default"),this.batchSize=N(n,"batchSize",4096),this.maxTextures=N(n,"maxTextures",-1),this.maxLights=N(n,"maxLights",10);var a=N(t,"backgroundColor",0);this.backgroundColor=dL(a),this.transparent&&(this.backgroundColor=dL(0),this.backgroundColor.alpha=0),this.preBoot=N(t,"callbacks.preBoot",fL),this.postBoot=N(t,"callbacks.postBoot",fL),this.physics=N(t,"physics",{}),this.defaultPhysicsSystem=N(this.physics,"default",!1),this.loaderBaseURL=N(t,"loader.baseURL",""),this.loaderPath=N(t,"loader.path","");var h=oL.os.android?6:32;this.loaderMaxParallelDownloads=N(t,"loader.maxParallelDownloads",h),this.loaderCrossOrigin=N(t,"loader.crossOrigin",void 0),this.loaderResponseType=N(t,"loader.responseType",""),this.loaderAsync=N(t,"loader.async",!0),this.loaderUser=N(t,"loader.user",""),this.loaderPassword=N(t,"loader.password",""),this.loaderTimeout=N(t,"loader.timeout",0),this.loaderWithCredentials=N(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var o=N(t,"plugins",null),u=epe.DefaultScene;o&&(Array.isArray(o)?this.defaultPlugins=o:jce(o)&&(this.installGlobalPlugins=uL(o,"global",[]),this.installScenePlugins=uL(o,"scene",[]),Array.isArray(o.default)?u=o.default:Array.isArray(o.defaultMerge)&&(u=u.concat(o.defaultMerge)))),this.defaultPlugins=u;var f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=N(t,"images.default",f+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=N(t,"images.missing",f+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=N(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=ac.WEBGL:window.FORCE_CANVAS&&(this.renderType=ac.CANVAS))}});vL.exports=tpe});var oc=l((A4e,cL)=>{var ipe={setCrisp:function(e){var t=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return t.forEach(function(i){e.style["image-rendering"]=i}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};cL.exports=ipe});var lc=l((P4e,pL)=>{var uc=bt(),rpe=di(),es=z(),spe=function(e,t){var i=es(t,"callback"),r=es(t,"type","image/png"),s=es(t,"encoder",.92),n=Math.abs(Math.round(es(t,"x",0))),a=Math.abs(Math.round(es(t,"y",0))),h=es(t,"width",e.width),o=es(t,"height",e.height),u=es(t,"getPixel",!1);if(u){var f=e.getContext("2d"),d=f.getImageData(n,a,1,1),v=d.data;i.call(null,new rpe(v[0],v[1],v[2],v[3]/255))}else if(n!==0||a!==0||h!==e.width||o!==e.height){var c=uc.createWebGL(this,h,o),p=c.getContext("2d");p.drawImage(e,n,a,h,o,0,0,h,o);var m=new Image;m.onerror=function(){i.call(null),uc.remove(c)},m.onload=function(){i.call(null,m),uc.remove(c)},m.src=c.toDataURL(r,s)}else{var x=new Image;x.onerror=function(){i.call(null)},x.onload=function(){i.call(null,x)},x.src=e.toDataURL(r,s)}};pL.exports=spe});var fc=l((M4e,mL)=>{var me=Si(),npe=Bv(),ape=function(){var e=[],t=npe.supportNewBlendModes,i="source-over";return e[me.NORMAL]=i,e[me.ADD]="lighter",e[me.MULTIPLY]=t?"multiply":i,e[me.SCREEN]=t?"screen":i,e[me.OVERLAY]=t?"overlay":i,e[me.DARKEN]=t?"darken":i,e[me.LIGHTEN]=t?"lighten":i,e[me.COLOR_DODGE]=t?"color-dodge":i,e[me.COLOR_BURN]=t?"color-burn":i,e[me.HARD_LIGHT]=t?"hard-light":i,e[me.SOFT_LIGHT]=t?"soft-light":i,e[me.DIFFERENCE]=t?"difference":i,e[me.EXCLUSION]=t?"exclusion":i,e[me.HUE]=t?"hue":i,e[me.SATURATION]=t?"saturation":i,e[me.COLOR]=t?"color":i,e[me.LUMINOSITY]=t?"luminosity":i,e[me.ERASE]="destination-out",e[me.SOURCE_IN]="source-in",e[me.SOURCE_OUT]="source-out",e[me.SOURCE_ATOP]="source-atop",e[me.DESTINATION_OVER]="destination-over",e[me.DESTINATION_IN]="destination-in",e[me.DESTINATION_OUT]="destination-out",e[me.DESTINATION_ATOP]="destination-atop",e[me.LIGHTER]="lighter",e[me.COPY]="copy",e[me.XOR]="xor",e};mL.exports=ape});var xL=l((b4e,gL)=>{gL.exports="addtexture"});var TL=l((L4e,yL)=>{yL.exports="onerror"});var SL=l((O4e,EL)=>{EL.exports="onload"});var wL=l((F4e,_L)=>{_L.exports="ready"});var RL=l((D4e,CL)=>{CL.exports="removetexture"});var Dn=l((I4e,qL)=>{qL.exports={ADD:xL(),ERROR:TL(),LOAD:SL(),READY:wL(),REMOVE:RL()}});var vc=l((N4e,bL)=>{var AL=fi(),PL=lc(),hpe=C(),ope=Jt(),ML=ue(),su=Hs(),upe=fc(),lpe=Mn(),fpe=Dn(),dc=xt(),dpe=new hpe({Extends:ML,initialize:function(t){ML.call(this);var i=t.config;this.config={clearBeforeRender:i.clearBeforeRender,backgroundColor:i.backgroundColor,antialias:i.antialias,roundPixels:i.roundPixels},this.game=t,this.type=ope.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var r={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=i.context?i.context:this.gameCanvas.getContext("2d",r),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=upe(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new dc,this._tempMatrix2=new dc,this._tempMatrix3=new dc,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(fpe.READY,this.boot,this)},boot:function(){var e=this.game,t=e.scale.baseSize;this.width=t.width,this.height=t.height,this.isBooted=!0,e.scale.on(lpe.RESIZE,this.onResize,this),this.resize(t.width,t.height)},onResize:function(e,t){(t.width!==this.width||t.height!==this.height)&&this.resize(t.width,t.height)},resize:function(e,t){this.width=e,this.height=t,this.emit(su.RESIZE,e,t)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(e){return this.currentContext.globalCompositeOperation=e,this},setContext:function(e){return this.currentContext=e||this.gameContext,this},setAlpha:function(e){return this.currentContext.globalAlpha=e,this},preRender:function(){var e=this.gameContext,t=this.config,i=this.width,r=this.height;e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),t.clearBeforeRender&&(e.clearRect(0,0,i,r),t.transparent||(e.fillStyle=t.backgroundColor.rgba,e.fillRect(0,0,i,r))),e.save(),this.drawCount=0,this.emit(su.PRE_RENDER)},render:function(e,t,i){var r=t.length;this.emit(su.RENDER,e,i);var s=i.x,n=i.y,a=i.width,h=i.height,o=i.renderToTexture?i.context:e.sys.context;o.save(),this.game.scene.customViewports&&(o.beginPath(),o.rect(s,n,a,h),o.clip()),this.currentContext=o;var u=i.mask;u&&u.preRenderCanvas(this,null,i._maskCamera),i.transparent||(o.fillStyle=i.backgroundColor.rgba,o.fillRect(s,n,a,h)),o.globalAlpha=i.alpha,o.globalCompositeOperation="source-over",this.drawCount+=r,i.renderToTexture&&i.emit(AL.PRE_RENDER,i),i.matrix.copyToContext(o);for(var f=0;f<r;f++){var d=t[f];d.mask&&d.mask.preRenderCanvas(this,d,i),d.renderCanvas(this,d,i),d.mask&&d.mask.postRenderCanvas(this,d,i)}o.setTransform(1,0,0,1,0,0),o.globalCompositeOperation="source-over",o.globalAlpha=1,i.flashEffect.postRenderCanvas(o),i.fadeEffect.postRenderCanvas(o),i.dirty=!1,u&&u.postRenderCanvas(this),o.restore(),i.renderToTexture&&(i.emit(AL.POST_RENDER,i),i.renderToGame&&e.sys.context.drawImage(i.canvas,s,n))},postRender:function(){var e=this.gameContext;e.restore(),this.emit(su.POST_RENDER);var t=this.snapshotState;t.callback&&(PL(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(e,t,i,r,s,n,a,h,o){i===void 0&&(i=!1),this.snapshotArea(r,s,n,a,t,h,o);var u=this.snapshotState;return u.getPixel=i,PL(e,u),u.callback=null,this},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,e,t,i)},snapshotArea:function(e,t,i,r,s,n,a){var h=this.snapshotState;return h.callback=s,h.type=n,h.encoder=a,h.getPixel=!1,h.x=e,h.y=t,h.width=Math.min(i,this.gameCanvas.width),h.height=Math.min(r,this.gameCanvas.height),this},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i),this.snapshotState.getPixel=!0,this},batchSprite:function(e,t,i,r){var s=i.alpha*e.alpha;if(s!==0){var n=this.currentContext,a=this._tempMatrix1,h=this._tempMatrix2,o=t.canvasData,u=o.x,f=o.y,d=t.cutWidth,v=t.cutHeight,c=t.customPivot,p=t.source.resolution,m=e.displayOriginX,x=e.displayOriginY,g=-m+t.x,y=-x+t.y;if(e.isCropped){var T=e._crop;(T.flipX!==e.flipX||T.flipY!==e.flipY)&&t.updateCropUVs(T,e.flipX,e.flipY),d=T.cw,v=T.ch,u=T.cx,f=T.cy,g=-m+T.x,y=-x+T.y,e.flipX&&(g>=0?g=-(g+d):g<0&&(g=Math.abs(g)-d)),e.flipY&&(y>=0?y=-(y+v):y<0&&(y=Math.abs(y)-v))}var S=1,E=1;e.flipX&&(c||(g+=-t.realWidth+m*2),S=-1),e.flipY&&(c||(y+=-t.realHeight+x*2),E=-1),h.applyITRS(e.x,e.y,e.rotation,e.scaleX*S,e.scaleY*E),a.copyFrom(i.matrix),r?(a.multiplyWithOffset(r,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y):(h.e-=i.scrollX*e.scrollFactorX,h.f-=i.scrollY*e.scrollFactorY),a.multiply(h),n.save(),a.setToContext(n),n.globalCompositeOperation=this.blendModes[e.blendMode],n.globalAlpha=s,n.imageSmoothingEnabled=!(!this.antialias||t.source.scaleMode),e.mask&&e.mask.preRenderCanvas(this,e,i),n.drawImage(t.source.image,u,f,d,v,g,y,d/p,v/p),e.mask&&e.mask.postRenderCanvas(this,e,i),n.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});bL.exports=dpe});var tn=l((G4e,OL)=>{var LL=Zs(),vpe=function(e,t,i,r){r===void 0&&(r=e);var s;if(!Array.isArray(t))return s=e.indexOf(t),s!==-1?(LL(e,s),i&&i.call(r,t),t):null;for(var n=t.length-1,a=[];n>=0;){var h=t[n];s=e.indexOf(h),s!==-1&&(LL(e,s),a.push(h),i&&i.call(r,h)),n--}return a};OL.exports=vpe});var DL=l((B4e,FL)=>{FL.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)});var NL=l((U4e,IL)=>{IL.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)});var In=l((k4e,GL)=>{var cpe={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};GL.exports=cpe});var UL=l((z4e,BL)=>{BL.exports="pipelineafterflush"});var zL=l((Y4e,kL)=>{kL.exports="pipelinebeforeflush"});var XL=l((X4e,YL)=>{YL.exports="pipelinebind"});var WL=l((V4e,VL)=>{VL.exports="pipelineboot"});var KL=l((W4e,HL)=>{HL.exports="pipelinedestroy"});var JL=l((H4e,ZL)=>{ZL.exports="pipelinerebind"});var $L=l((K4e,QL)=>{QL.exports="pipelineresize"});var cc=l((Z4e,jL)=>{jL.exports={AFTER_FLUSH:UL(),BEFORE_FLUSH:zL(),BIND:XL(),BOOT:WL(),DESTROY:KL(),REBIND:JL(),RESIZE:$L()}});var ih=l((J4e,eO)=>{var ppe=C(),pc=Hs(),mpe=new ppe({initialize:function(t,i,r,s,n,a,h){s===void 0&&(s=1),n===void 0&&(n=0),a===void 0&&(a=!0),h===void 0&&(h=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=s,this.minFilter=n,this.autoClear=a,this.autoResize=!1,this.resize(i,r),h&&this.setAutoResize(!0)},setAutoResize:function(e){return e&&!this.autoResize?(this.renderer.on(pc.RESIZE,this.resize,this),this.autoResize=!0):!e&&this.autoResize&&(this.renderer.off(pc.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(e,t){var i=e*this.scale,r=t*this.scale;if(i!==this.width||r!==this.height){var s=this.renderer;s.deleteFramebuffer(this.framebuffer),s.deleteTexture(this.texture),e*=this.scale,t*=this.scale,e=Math.round(e),t=Math.round(t),e<=0&&(e=1),t<=0&&(t=1),this.texture=s.createTextureFromSource(null,e,t,this.minFilter),this.framebuffer=s.createFramebuffer(e,t,this.texture,!1),this.width=e,this.height=t}return this},bind:function(e,t,i){if(e===void 0&&(e=!1),e&&this.renderer.flush(),t&&i&&this.resize(t,i),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),e&&this.adjustViewport(),this.autoClear){var r=this.renderer.gl;r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)}},adjustViewport:function(){var e=this.renderer.gl;e.viewport(0,0,this.width,this.height),e.disable(e.SCISSOR_TEST)},clear:function(){var e=this.renderer,t=e.gl;e.pushFramebuffer(this.framebuffer),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e.popFramebuffer(),e.resetScissor()},unbind:function(e){e===void 0&&(e=!1);var t=this.renderer;return e&&t.flush(),t.popFramebuffer()},destroy:function(){var e=this.renderer;e.deleteFramebuffer(this.framebuffer),e.deleteTexture(this.texture),e.off(pc.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});eO.exports=mpe});var Te=l((Q4e,tO)=>{function gpe(e){for(var t="",i=0;i<e;++i)i>0&&(t+=`
else `),i<e-1&&(t+="if(test == "+i+".0){}");return t}tO.exports={getTintFromFloats:function(e,t,i,r){var s=(e*255|0)&255,n=(t*255|0)&255,a=(i*255|0)&255,h=(r*255|0)&255;return(h<<24|s<<16|n<<8|a)>>>0},getTintAppendFloatAlpha:function(e,t){var i=(t*255|0)&255;return(i<<24|e)>>>0},getTintAppendFloatAlphaAndSwap:function(e,t){var i=(e>>16|0)&255,r=(e>>8|0)&255,s=(e|0)&255,n=(t*255|0)&255;return(n<<24|s<<16|r<<8|i)>>>0},getFloatsFromUintRGB:function(e){var t=(e>>16|0)&255,i=(e>>8|0)&255,r=(e|0)&255;return[t/255,i/255,r/255]},checkShaderMax:function(e,t){(!t||t===-1)&&(t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS));for(var i=e.createShader(e.FRAGMENT_SHADER),r=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var s=r.replace(/%forloop%/gi,gpe(t));if(e.shaderSource(i,s),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))t=t/2|0;else break}return t},parseFragmentShaderMaxTextures:function(e,t){if(!e)return"";for(var i="",r=0;r<t;r++)r>0&&(i+=`
	else `),r<t-1&&(i+="if (outTexId < "+r+".5)"),i+=`
	{`,i+=`
		texture = texture2D(uMainSampler[`+r+"], outTexCoord);",i+=`
	}`;return e=e.replace(/%count%/gi,t.toString()),e.replace(/%forloop%/gi,i)}}});var mc=l(($4e,rO)=>{var xpe=C(),iO=z(),ype=In(),Tpe=new xpe({initialize:function(t,i,r,s,n){this.pipeline=t,this.name=i,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(r,s),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(n),this.createUniforms()},createAttributes:function(e){var t=0,i=0,r=[];this.vertexComponentCount=0;for(var s=0;s<e.length;s++){var n=e[s],a=n.name,h=iO(n,"size",1),o=iO(n,"type",ype.FLOAT),u=o.enum,f=o.size,d=!!n.normalized;r.push({name:a,size:h,type:u,normalized:d,offset:i,enabled:!1,location:-1}),f===4?t+=h:t++,i+=h*f}this.vertexSize=i,this.vertexComponentCount=t,this.attributes=r},bind:function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),t&&this.pipeline.flush(),this.renderer.setProgram(this.program),e&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(e){e===void 0&&(e=!1);for(var t=this.gl,i=this.vertexSize,r=this.attributes,s=this.program,n=0;n<r.length;n++){var a=r[n],h=a.size,o=a.type,u=a.offset,f=a.enabled,d=a.location,v=!!a.normalized;if(e){var c=t.getAttribLocation(s,a.name);c>=0?(t.enableVertexAttribArray(c),t.vertexAttribPointer(c,h,o,v,i,u),a.enabled=!0,a.location=c):c!==-1&&t.disableVertexAttribArray(c)}else f?t.vertexAttribPointer(d,h,o,v,i,u):!f&&d>-1&&(t.disableVertexAttribArray(d),a.location=-1)}return this},createUniforms:function(){var e=this.gl,t=this.program,i=this.uniforms,r,s,n,a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(r=0;r<a;r++){var h=e.getActiveUniform(t,r);if(h){s=h.name,n=e.getUniformLocation(t,s),n!==null&&(i[s]={name:s,location:n,value1:null,value2:null,value3:null,value4:null});var o=s.indexOf("[");o>0&&(s=s.substr(0,o),i.hasOwnProperty(s)||(n=e.getUniformLocation(t,s),n!==null&&(i[s]={name:s,location:n,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(e){return this.uniforms.hasOwnProperty(e)},resetUniform:function(e){var t=this.uniforms[e];return t&&(t.value1=null,t.value2=null,t.value3=null,t.value4=null),this},setUniform1:function(e,t,i,r){var s=this.uniforms[t];return s?((r||s.value1!==i)&&(s.value1=i,this.renderer.setProgram(this.program),e.call(this.gl,s.location,i),this.pipeline.currentShader=this),this):this},setUniform2:function(e,t,i,r,s){var n=this.uniforms[t];return n?((s||n.value1!==i||n.value2!==r)&&(n.value1=i,n.value2=r,this.renderer.setProgram(this.program),e.call(this.gl,n.location,i,r),this.pipeline.currentShader=this),this):this},setUniform3:function(e,t,i,r,s,n){var a=this.uniforms[t];return a?((n||a.value1!==i||a.value2!==r||a.value3!==s)&&(a.value1=i,a.value2=r,a.value3=s,this.renderer.setProgram(this.program),e.call(this.gl,a.location,i,r,s),this.pipeline.currentShader=this),this):this},setUniform4:function(e,t,i,r,s,n,a){var h=this.uniforms[t];return h?((a||h.value1!==i||h.value2!==r||h.value3!==s||h.value4!==n)&&(h.value1=i,h.value2=r,h.value3=s,h.value4=n,this.renderer.setProgram(this.program),e.call(this.gl,h.location,i,r,s,n),this.pipeline.currentShader=this),this):this},set1f:function(e,t){return this.setUniform1(this.gl.uniform1f,e,t)},set2f:function(e,t,i){return this.setUniform2(this.gl.uniform2f,e,t,i)},set3f:function(e,t,i,r){return this.setUniform3(this.gl.uniform3f,e,t,i,r)},set4f:function(e,t,i,r,s){return this.setUniform4(this.gl.uniform4f,e,t,i,r,s)},set1fv:function(e,t){return this.setUniform1(this.gl.uniform1fv,e,t,!0)},set2fv:function(e,t){return this.setUniform1(this.gl.uniform2fv,e,t,!0)},set3fv:function(e,t){return this.setUniform1(this.gl.uniform3fv,e,t,!0)},set4fv:function(e,t){return this.setUniform1(this.gl.uniform4fv,e,t,!0)},set1iv:function(e,t){return this.setUniform1(this.gl.uniform1iv,e,t,!0)},set2iv:function(e,t){return this.setUniform1(this.gl.uniform2iv,e,t,!0)},set3iv:function(e,t){return this.setUniform1(this.gl.uniform3iv,e,t,!0)},set4iv:function(e,t){return this.setUniform1(this.gl.uniform4iv,e,t,!0)},set1i:function(e,t){return this.setUniform1(this.gl.uniform1i,e,t)},set2i:function(e,t,i){return this.setUniform2(this.gl.uniform2i,e,t,i)},set3i:function(e,t,i,r){return this.setUniform3(this.gl.uniform3i,e,t,i,r)},set4i:function(e,t,i,r,s){return this.setUniform4(this.gl.uniform4i,e,t,i,r,s)},setMatrix2fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix2fv,e,t,i,!0)},setMatrix3fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix3fv,e,t,i,!0)},setMatrix4fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix4fv,e,t,i,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});rO.exports=Tpe});var Qi=l((j4e,oO)=>{var Epe=C(),sO=_o(),nO=ue(),rn=cc(),pt=z(),Spe=Er(),ts=Hs(),aO=ih(),gc=Te(),hO=mc(),_pe=new Epe({Extends:nO,initialize:function(t){nO.call(this);var i=t.game,r=i.renderer,s=r.gl;this.name=pt(t,"name","WebGLPipeline"),this.game=i,this.renderer=r,this.manager,this.gl=s,this.view=i.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=pt(t,"topology",s.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=pt(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function(){var e,t=this.gl,i=this.config,r=this.renderer;this.isPostFX||(this.projectionMatrix=new Spe().identity());var s=this.renderTargets,n=pt(i,"renderTarget",!1);typeof n=="boolean"&&n&&(n=1);var a=r.width,h=r.height;if(typeof n=="number")for(e=0;e<n;e++)s.push(new aO(r,a,h,1,0,!0));else if(Array.isArray(n))for(e=0;e<n.length;e++){var o=pt(n[e],"scale",1),u=pt(n[e],"minFilter",0),f=pt(n[e],"autoClear",1);s.push(new aO(r,a,h,o,u,f))}s.length&&(this.currentRenderTarget=s[0]),this.setShadersFromConfig(i);var d=this.shaders,v=0;for(e=0;e<d.length;e++)d[e].vertexSize>v&&(v=d[e].vertexSize);var c=pt(i,"batchSize",r.config.batchSize);this.vertexCapacity=c*6;var p=new ArrayBuffer(this.vertexCapacity*v);this.vertexData=p,this.bytes=new Uint8Array(p),this.vertexViewF32=new Float32Array(p),this.vertexViewU32=new Uint32Array(p);var m=pt(i,"vertices",null);for(m?(this.vertexViewF32.set(m),this.vertexBuffer=r.createVertexBuffer(p,t.STATIC_DRAW)):this.vertexBuffer=r.createVertexBuffer(p.byteLength,t.DYNAMIC_DRAW),this.setVertexBuffer(),e=d.length-1;e>=0;e--)d[e].rebind();this.hasBooted=!0,r.on(ts.RESIZE,this.resize,this),r.on(ts.PRE_RENDER,this.onPreRender,this),r.on(ts.RENDER,this.onRender,this),r.on(ts.POST_RENDER,this.onPostRender,this),this.emit(rn.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(e,t){var i=this.renderer;if(e!==this.currentShader||i.currentProgram!==this.currentShader.program){this.flush(),i.resetTextures();var r=this.setVertexBuffer();r&&!t&&(t=!0),e.bind(t,!1),this.currentShader=e}return this},getShaderByName:function(e){for(var t=this.shaders,i=0;i<t.length;i++)if(t[i].name===e)return t[i]},setShadersFromConfig:function(e){var t,i=this.shaders,r=this.renderer;for(t=0;t<i.length;t++)i[t].destroy();var s="vertShader",n="fragShader",a="attributes",h=pt(e,s,null),o=gc.parseFragmentShaderMaxTextures(pt(e,n,null),r.maxTextures),u=pt(e,a,null),f=pt(e,"shaders",[]),d=f.length;if(d===0)h&&o&&(this.shaders=[new hO(this,"default",h,o,sO(u))]);else{var v=[];for(t=0;t<d;t++){var c=f[t],p=pt(c,"name","default"),m=pt(c,s,h),x=gc.parseFragmentShaderMaxTextures(pt(c,n,o),r.maxTextures),g=pt(c,a,u);m&&x&&v.push(new hO(this,p,m,x,sO(g)))}this.shaders=v}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(e,t){return t===void 0&&(t=e.frame),this.currentUnit=this.renderer.setTextureSource(t.source),this.currentUnit},shouldFlush:function(e){return e===void 0&&(e=0),this.vertexCount+e>this.vertexCapacity},resize:function(e,t){(e!==this.width||t!==this.height)&&this.flush(),this.width=e,this.height=t;for(var i=this.renderTargets,r=0;r<i.length;r++)i[r].resize(e,t);return this.setProjectionMatrix(e,t),this.emit(rn.RESIZE,e,t,this),this.onResize(e,t),this},setProjectionMatrix:function(e,t){var i=this.projectionMatrix;if(!i)return this;this.projectionWidth=e,this.projectionHeight=t,i.ortho(0,e,t,0,-1e3,1e3);for(var r=this.shaders,s="uProjectionMatrix",n=0;n<r.length;n++){var a=r[n];a.hasUniform(s)&&(a.resetUniform(s),a.setMatrix4fv(s,!1,i.val,a))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var e=this.renderer.projectionWidth,t=this.renderer.projectionHeight;(this.projectionWidth!==e||this.projectionHeight!==t)&&this.setProjectionMatrix(e,t)}},bind:function(e){if(e===void 0&&(e=this.currentShader),this.glReset)return this.rebind(e);var t=this.setVertexBuffer();return e.bind(t),this.currentShader=e,this.emit(rn.BIND,this,e),this.onActive(e),this},rebind:function(e){this.setVertexBuffer();for(var t=this.shaders,i=t.length-1;i>=0;i--){var r=t[i].rebind();(!e||r===e)&&(this.currentShader=r)}return this.emit(rn.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var e=this.gl,t=this.vertexBuffer;return e.getParameter(e.ARRAY_BUFFER_BINDING)!==t?(e.bindBuffer(e.ARRAY_BUFFER,t),!0):!1},preBatch:function(e){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(e),this},postBatch:function(e){return this.onDraw(this.currentRenderTarget),this.onPostBatch(e),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(e){if(e===void 0&&(e=!1),this.vertexCount>0){this.emit(rn.BEFORE_FLUSH,this,e),this.onBeforeFlush(e);var t=this.gl,i=this.vertexCount,r=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),i===this.vertexCapacity?t.bufferData(t.ARRAY_BUFFER,this.vertexData,t.DYNAMIC_DRAW):t.bufferSubData(t.ARRAY_BUFFER,0,this.bytes.subarray(0,i*r)),t.drawArrays(this.topology,0,i)),this.vertexCount=0,this.emit(rn.AFTER_FLUSH,this,e),this.onAfterFlush(e)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(e,t,i,r,s,n,a){var h=this.vertexViewF32,o=this.vertexViewU32,u=this.vertexCount*this.currentShader.vertexComponentCount-1;h[++u]=e,h[++u]=t,h[++u]=i,h[++u]=r,h[++u]=s,h[++u]=n,o[++u]=a,this.vertexCount++},batchQuad:function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m,x,g,y,T){T===void 0&&(T=this.currentUnit);var S=!1;return this.shouldFlush(6)&&(this.flush(),S=!0,T=this.setTexture2D(y)),this.batchVert(t,i,u,f,T,g,c),this.batchVert(r,s,u,v,T,g,m),this.batchVert(n,a,d,v,T,g,x),this.batchVert(t,i,u,f,T,g,c),this.batchVert(n,a,d,v,T,g,x),this.batchVert(h,o,d,f,T,g,p),this.onBatch(e),S},batchTri:function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m,x){x===void 0&&(x=this.currentUnit);var g=!1;return this.shouldFlush(3)&&(this.flush(),g=!0,x=this.setTexture2D(m)),this.batchVert(t,i,h,o,x,p,d),this.batchVert(r,s,h,f,x,p,v),this.batchVert(n,a,u,f,x,p,c),this.onBatch(e),g},drawFillRect:function(e,t,i,r,s,n,a,h){a===void 0&&(a=this.renderer.whiteTexture.glTexture),h===void 0&&(h=!0),e=Math.floor(e),t=Math.floor(t);var o=Math.floor(e+i),u=Math.floor(t+r),f=this.setTexture2D(a),d=gc.getTintAppendFloatAlphaAndSwap(s,n),v=0,c=0,p=1,m=1;h&&(c=1,m=0),this.batchQuad(null,e,t,e,u,o,u,o,t,v,c,p,m,d,d,d,d,0,a,f)},setTexture2D:function(e){return e===void 0&&(e=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(e),this.currentUnit},bindTexture:function(e,t){t===void 0&&(t=0);var i=this.gl;return i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,e),this},bindRenderTarget:function(e,t){return this.bindTexture(e.texture,t)},setTime:function(e){return this.set1f(e,this.game.loop.getDuration()),this},set1f:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1f(e,t),this},set2f:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.set2f(e,t,i),this},set3f:function(e,t,i,r,s){return s===void 0&&(s=this.currentShader),s.set3f(e,t,i,r),this},set4f:function(e,t,i,r,s,n){return n===void 0&&(n=this.currentShader),n.set4f(e,t,i,r,s),this},set1fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1fv(e,t),this},set2fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set2fv(e,t),this},set3fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set3fv(e,t),this},set4fv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set4fv(e,t),this},set1iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1iv(e,t),this},set2iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set2iv(e,t),this},set3iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set3iv(e,t),this},set4iv:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set4iv(e,t),this},set1i:function(e,t,i){return i===void 0&&(i=this.currentShader),i.set1i(e,t),this},set2i:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.set2i(e,t,i),this},set3i:function(e,t,i,r,s){return s===void 0&&(s=this.currentShader),s.set3i(e,t,i,r),this},set4i:function(e,t,i,r,s,n){return n===void 0&&(n=this.currentShader),n.set4i(e,t,i,r,s),this},setMatrix2fv:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.setMatrix2fv(e,t,i),this},setMatrix3fv:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.setMatrix3fv(e,t,i),this},setMatrix4fv:function(e,t,i,r){return r===void 0&&(r=this.currentShader),r.setMatrix4fv(e,t,i),this},destroy:function(){this.emit(rn.DESTROY,this);var e,t=this.shaders;for(e=0;e<t.length;e++)t[e].destroy();var i=this.renderTargets;for(e=0;e<i.length;e++)i[e].destroy();this.gl.deleteBuffer(this.vertexBuffer);var r=this.renderer;return r.off(ts.RESIZE,this.resize,this),r.off(ts.PRE_RENDER,this.onPreRender,this),r.off(ts.RENDER,this.onRender,this),r.off(ts.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});oO.exports=_pe});var xc=l((eHe,uO)=>{var wpe=C(),rh=z(),Cpe=DL(),Rpe=NL(),qpe=In(),nu=Qi(),Ape=new wpe({Extends:nu,initialize:function(t){t.fragShader=rh(t,"fragShader",Cpe),t.vertShader=rh(t,"vertShader",Rpe),t.batchSize=rh(t,"batchSize",1),t.vertices=rh(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=rh(t,"attributes",[{name:"inPosition",size:2,type:qpe.FLOAT}]),nu.call(this,t)},boot:function(){nu.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(e,t){nu.prototype.resize.call(this,e,t),this.set2f("uResolution",e,t)},beginMask:function(e,t,i){var r=this.gl;if(e.bitmapMask&&r){var s=this.renderer;s.flush(),s.pushFramebuffer(e.mainFramebuffer),r.disable(r.STENCIL_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),s.currentCameraMask.mask!==e&&(s.currentMask.mask=e,s.currentMask.camera=i)}},endMask:function(e,t){var i=this.gl,r=this.renderer,s=e.bitmapMask;if(s&&i){r.flush(),r.pushFramebuffer(e.maskFramebuffer),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),r.setBlendMode(0,!0),s.renderWebGL(r,s,t),r.flush(),r.popFramebuffer(),r.popFramebuffer();var n=r.getCurrentStencilMask();n?(i.enable(i.STENCIL_TEST),n.mask.applyStencil(r,n.camera,!0)):r.currentMask.mask=null,r.pipelines.set(this),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,e.maskTexture),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.mainTexture),this.set1i("uInvertMaskAlpha",e.invertAlpha),i.drawArrays(this.topology,0,3),r.resetTextures()}}});uO.exports=Ape});var $i=l((tHe,cO)=>{"use strict";function Sc(e,t,i){i=i||2;var r=t&&t.length,s=r?t[0]*i:e.length,n=fO(e,0,s,i,!0),a=[];if(!n||n.next===n.prev)return a;var h,o,u,f,d,v,c;if(r&&(n=Ope(e,t,n,i)),e.length>80*i){h=u=e[0],o=f=e[1];for(var p=i;p<s;p+=i)d=e[p],v=e[p+1],d<h&&(h=d),v<o&&(o=v),d>u&&(u=d),v>f&&(f=v);c=Math.max(u-h,f-o),c=c!==0?1/c:0}return sh(n,a,i,h,o,c),a}function fO(e,t,i,r,s){var n,a;if(s===Ec(e,t,i,r)>0)for(n=t;n<i;n+=r)a=lO(n,e[n],e[n+1],a);else for(n=i-r;n>=t;n-=r)a=lO(n,e[n],e[n+1],a);return a&&ou(a,a.next)&&(ah(a),a=a.next),a}function is(e,t){if(!e)return e;t||(t=e);var i=e,r;do if(r=!1,!i.steiner&&(ou(i,i.next)||Pe(i.prev,i,i.next)===0)){if(ah(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function sh(e,t,i,r,s,n,a){if(!!e){!a&&n&&Gpe(e,r,s,n);for(var h=e,o,u;e.prev!==e.next;){if(o=e.prev,u=e.next,n?Mpe(e,r,s,n):Ppe(e)){t.push(o.i/i),t.push(e.i/i),t.push(u.i/i),ah(e),e=u.next,h=u.next;continue}if(e=u,e===h){a?a===1?(e=bpe(is(e),t,i),sh(e,t,i,r,s,n,2)):a===2&&Lpe(e,t,i,r,s,n):sh(is(e),t,i,r,s,n,1);break}}}}function Ppe(e){var t=e.prev,i=e,r=e.next;if(Pe(t,i,r)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(Nn(t.x,t.y,i.x,i.y,r.x,r.y,s.x,s.y)&&Pe(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function Mpe(e,t,i,r){var s=e.prev,n=e,a=e.next;if(Pe(s,n,a)>=0)return!1;for(var h=s.x<n.x?s.x<a.x?s.x:a.x:n.x<a.x?n.x:a.x,o=s.y<n.y?s.y<a.y?s.y:a.y:n.y<a.y?n.y:a.y,u=s.x>n.x?s.x>a.x?s.x:a.x:n.x>a.x?n.x:a.x,f=s.y>n.y?s.y>a.y?s.y:a.y:n.y>a.y?n.y:a.y,d=yc(h,o,t,i,r),v=yc(u,f,t,i,r),c=e.prevZ,p=e.nextZ;c&&c.z>=d&&p&&p.z<=v;){if(c!==e.prev&&c!==e.next&&Nn(s.x,s.y,n.x,n.y,a.x,a.y,c.x,c.y)&&Pe(c.prev,c,c.next)>=0||(c=c.prevZ,p!==e.prev&&p!==e.next&&Nn(s.x,s.y,n.x,n.y,a.x,a.y,p.x,p.y)&&Pe(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;c&&c.z>=d;){if(c!==e.prev&&c!==e.next&&Nn(s.x,s.y,n.x,n.y,a.x,a.y,c.x,c.y)&&Pe(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;p&&p.z<=v;){if(p!==e.prev&&p!==e.next&&Nn(s.x,s.y,n.x,n.y,a.x,a.y,p.x,p.y)&&Pe(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function bpe(e,t,i){var r=e;do{var s=r.prev,n=r.next.next;!ou(s,n)&&dO(s,r,r.next,n)&&nh(s,n)&&nh(n,s)&&(t.push(s.i/i),t.push(r.i/i),t.push(n.i/i),ah(r),ah(r.next),r=e=n),r=r.next}while(r!==e);return is(r)}function Lpe(e,t,i,r,s,n){var a=e;do{for(var h=a.next.next;h!==a.prev;){if(a.i!==h.i&&kpe(a,h)){var o=vO(a,h);a=is(a,a.next),o=is(o,o.next),sh(a,t,i,r,s,n),sh(o,t,i,r,s,n);return}h=h.next}a=a.next}while(a!==e)}function Ope(e,t,i,r){var s=[],n,a,h,o,u;for(n=0,a=t.length;n<a;n++)h=t[n]*r,o=n<a-1?t[n+1]*r:e.length,u=fO(e,h,o,r,!1),u===u.next&&(u.steiner=!0),s.push(Upe(u));for(s.sort(Fpe),n=0;n<s.length;n++)Dpe(s[n],i),i=is(i,i.next);return i}function Fpe(e,t){return e.x-t.x}function Dpe(e,t){if(t=Ipe(e,t),t){var i=vO(t,e);is(t,t.next),is(i,i.next)}}function Ipe(e,t){var i=t,r=e.x,s=e.y,n=-1/0,a;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var h=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(h<=r&&h>n){if(n=h,h===r){if(s===i.y)return i;if(s===i.next.y)return i.next}a=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!a)return null;if(r===n)return a;var o=a,u=a.x,f=a.y,d=1/0,v;i=a;do r>=i.x&&i.x>=u&&r!==i.x&&Nn(s<f?r:n,s,u,f,s<f?n:r,s,i.x,i.y)&&(v=Math.abs(s-i.y)/(r-i.x),nh(i,e)&&(v<d||v===d&&(i.x>a.x||i.x===a.x&&Npe(a,i)))&&(a=i,d=v)),i=i.next;while(i!==o);return a}function Npe(e,t){return Pe(e.prev,e,t.prev)<0&&Pe(t.next,e,e.next)<0}function Gpe(e,t,i,r){var s=e;do s.z===null&&(s.z=yc(s.x,s.y,t,i,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,Bpe(s)}function Bpe(e){var t,i,r,s,n,a,h,o,u=1;do{for(i=e,e=null,n=null,a=0;i;){for(a++,r=i,h=0,t=0;t<u&&(h++,r=r.nextZ,!!r);t++);for(o=u;h>0||o>0&&r;)h!==0&&(o===0||!r||i.z<=r.z)?(s=i,i=i.nextZ,h--):(s=r,r=r.nextZ,o--),n?n.nextZ=s:e=s,s.prevZ=n,n=s;i=r}n.nextZ=null,u*=2}while(a>1);return e}function yc(e,t,i,r,s){return e=32767*(e-i)*s,t=32767*(t-r)*s,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Upe(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Nn(e,t,i,r,s,n,a,h){return(s-a)*(t-h)-(e-a)*(n-h)>=0&&(e-a)*(r-h)-(i-a)*(t-h)>=0&&(i-a)*(n-h)-(s-a)*(r-h)>=0}function kpe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!zpe(e,t)&&(nh(e,t)&&nh(t,e)&&Ype(e,t)&&(Pe(e.prev,e,t.prev)||Pe(e,t.prev,t))||ou(e,t)&&Pe(e.prev,e,e.next)>0&&Pe(t.prev,t,t.next)>0)}function Pe(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function ou(e,t){return e.x===t.x&&e.y===t.y}function dO(e,t,i,r){var s=hu(Pe(e,t,i)),n=hu(Pe(e,t,r)),a=hu(Pe(i,r,e)),h=hu(Pe(i,r,t));return!!(s!==n&&a!==h||s===0&&au(e,i,t)||n===0&&au(e,r,t)||a===0&&au(i,e,r)||h===0&&au(i,t,r))}function au(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function hu(e){return e>0?1:e<0?-1:0}function zpe(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&dO(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function nh(e,t){return Pe(e.prev,e,e.next)<0?Pe(e,t,e.next)>=0&&Pe(e,e.prev,t)>=0:Pe(e,t,e.prev)<0||Pe(e,e.next,t)<0}function Ype(e,t){var i=e,r=!1,s=(e.x+t.x)/2,n=(e.y+t.y)/2;do i.y>n!=i.next.y>n&&i.next.y!==i.y&&s<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e);return r}function vO(e,t){var i=new Tc(e.i,e.x,e.y),r=new Tc(t.i,t.x,t.y),s=e.next,n=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,r.next=i,i.prev=r,n.next=r,r.prev=n,r}function lO(e,t,i,r){var s=new Tc(e,t,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function ah(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Tc(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Sc.deviation=function(e,t,i,r){var s=t&&t.length,n=s?t[0]*i:e.length,a=Math.abs(Ec(e,0,n,i));if(s)for(var h=0,o=t.length;h<o;h++){var u=t[h]*i,f=h<o-1?t[h+1]*i:e.length;a-=Math.abs(Ec(e,u,f,i))}var d=0;for(h=0;h<r.length;h+=3){var v=r[h]*i,c=r[h+1]*i,p=r[h+2]*i;d+=Math.abs((e[v]-e[p])*(e[c+1]-e[v+1])-(e[v]-e[c])*(e[p+1]-e[v+1]))}return a===0&&d===0?0:Math.abs((d-a)/a)};function Ec(e,t,i,r){for(var s=0,n=t,a=i-r;n<i;n+=r)s+=(e[a]-e[n])*(e[n+1]+e[a+1]),a=n;return s}Sc.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,s=0;s<e.length;s++){for(var n=0;n<e[s].length;n++)for(var a=0;a<t;a++)i.vertices.push(e[s][n][a]);s>0&&(r+=e[s-1].length,i.holes.push(r))}return i};cO.exports=Sc});var mO=l((iHe,pO)=>{pO.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)});var xO=l((rHe,gO)=>{gO.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)});var Cc=l((sHe,yO)=>{var Xpe=C(),Vpe=$i(),_c=z(),Wpe=mO(),Hpe=xO(),Kpe=xt(),Zpe=In(),wc=Qi(),Jpe=new Xpe({Extends:wc,initialize:function(t){t.fragShader=_c(t,"fragShader",Wpe),t.vertShader=_c(t,"vertShader",Hpe),t.attributes=_c(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:Zpe.UNSIGNED_BYTE,normalized:!0}]),wc.call(this,t),this.calcMatrix=new Kpe,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(e,t,i,r,s,n){this.renderer.pipelines.set(this);var a=this.calcMatrix;n&&n.multiply(s,a);var h=e+i,o=t+r,u=a.getX(e,t),f=a.getY(e,t),d=a.getX(e,o),v=a.getY(e,o),c=a.getX(h,o),p=a.getY(h,o),m=a.getX(h,t),x=a.getY(h,t),g=this.fillTint;this.batchQuad(u,f,d,v,c,p,m,x,g.TL,g.TR,g.BL,g.BR)},batchFillTriangle:function(e,t,i,r,s,n,a,h){this.renderer.pipelines.set(this);var o=this.calcMatrix;h&&h.multiply(a,o);var u=o.getX(e,t),f=o.getY(e,t),d=o.getX(i,r),v=o.getY(i,r),c=o.getX(s,n),p=o.getY(s,n),m=this.fillTint;this.batchTri(u,f,d,v,c,p,m.TL,m.TR,m.BL)},batchStrokeTriangle:function(e,t,i,r,s,n,a,h,o){var u=this.tempTriangle;u[0].x=e,u[0].y=t,u[0].width=a,u[1].x=i,u[1].y=r,u[1].width=a,u[2].x=s,u[2].y=n,u[2].width=a,u[3].x=e,u[3].y=t,u[3].width=a,this.batchStrokePath(u,a,!1,h,o)},batchFillPath:function(e,t,i){this.renderer.pipelines.set(this);var r=this.calcMatrix;i&&i.multiply(t,r);for(var s=e.length,n=this.polygonCache,a,h,o=this.fillTint.TL,u=this.fillTint.TR,f=this.fillTint.BL,d=0;d<s;++d)h=e[d],n.push(h.x,h.y);a=Vpe(n),s=a.length;for(var v=0;v<s;v+=3){var c=a[v+0]*2,p=a[v+1]*2,m=a[v+2]*2,x=n[c+0],g=n[c+1],y=n[p+0],T=n[p+1],S=n[m+0],E=n[m+1],_=r.getX(x,g),w=r.getY(x,g),R=r.getX(y,T),q=r.getY(y,T),A=r.getX(S,E),P=r.getY(S,E);this.batchTri(_,w,R,q,A,P,o,u,f)}n.length=0},batchStrokePath:function(e,t,i,r,s){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var n=e.length-1,a=0;a<n;a++){var h=e[a],o=e[a+1];this.batchLine(h.x,h.y,o.x,o.y,h.width/2,o.width/2,t,a,!i&&a===n-1,r,s)}},batchLine:function(e,t,i,r,s,n,a,h,o,u,f){this.renderer.pipelines.set(this);var d=this.calcMatrix;f&&f.multiply(u,d);var v=i-e,c=r-t,p=Math.sqrt(v*v+c*c),m=s*(r-t)/p,x=s*(e-i)/p,g=n*(r-t)/p,y=n*(e-i)/p,T=i-g,S=r-y,E=e-m,_=t-x,w=i+g,R=r+y,q=e+m,A=t+x,P=d.getX(T,S),L=d.getY(T,S),b=d.getX(E,_),G=d.getY(E,_),M=d.getX(w,R),D=d.getY(w,R),I=d.getX(q,A),F=d.getY(q,A),O=this.strokeTint,K=O.TL,H=O.TR,Y=O.BL,ee=O.BR;if(this.batchQuad(I,F,b,G,P,L,M,D,K,H,Y,ee),!(a<=2)){var U=this.prevQuad,J=this.firstQuad;h>0&&U[4]?this.batchQuad(I,F,b,G,U[0],U[1],U[2],U[3],K,H,Y,ee):(J[0]=I,J[1]=F,J[2]=b,J[3]=G,J[4]=1),o&&J[4]?this.batchQuad(P,L,M,D,J[0],J[1],J[2],J[3],K,H,Y,ee):(U[0]=P,U[1]=L,U[2]=M,U[3]=D,U[4]=1)}},batchVert:function(e,t,i){var r=this.vertexViewF32,s=this.vertexViewU32,n=this.vertexCount*this.currentShader.vertexComponentCount-1;r[++n]=e,r[++n]=t,s[++n]=i,this.vertexCount++},batchQuad:function(e,t,i,r,s,n,a,h,o,u,f,d){var v=!1;return this.shouldFlush(6)&&(this.flush(),v=!0),this.batchVert(e,t,o),this.batchVert(i,r,f),this.batchVert(s,n,d),this.batchVert(e,t,o),this.batchVert(s,n,d),this.batchVert(a,h,u),v},batchTri:function(e,t,i,r,s,n,a,h,o){var u=!1;return this.shouldFlush(3)&&(this.flush(),u=!0),this.batchVert(e,t,a),this.batchVert(i,r,h),this.batchVert(s,n,o),u},destroy:function(){return wc.prototype.destroy.call(this),this.polygonCache=null,this}});yO.exports=Jpe});var EO=l((nHe,TO)=>{TO.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)});var _O=l((aHe,SO)=>{SO.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)});var CO=l((hHe,wO)=>{wO.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)});var Gn=l((oHe,RO)=>{var Qpe=C(),$pe=$i(),Rc=z(),jpe=_O(),eme=CO(),uu=xt(),qc=Te(),tme=In(),Ac=Qi(),ime=new Qpe({Extends:Ac,initialize:function(t){var i=t.game.renderer,r=Rc(t,"fragShader",jpe);t.fragShader=qc.parseFragmentShaderMaxTextures(r,i.maxTextures),t.vertShader=Rc(t,"vertShader",eme),t.attributes=Rc(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:tme.UNSIGNED_BYTE,normalized:!0}]),Ac.call(this,t),this._tempMatrix1=new uu,this._tempMatrix2=new uu,this._tempMatrix3=new uu,this.calcMatrix=new uu,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){Ac.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(e,t,i){this.manager.set(this,e);var r=this._tempMatrix1,s=this._tempMatrix2,n=this._tempMatrix3,a=e.frame,h=a.glTexture,o=a.u0,u=a.v0,f=a.u1,d=a.v1,v=a.x,c=a.y,p=a.cutWidth,m=a.cutHeight,x=a.customPivot,g=e.displayOriginX,y=e.displayOriginY,T=-g+v,S=-y+c;if(e.isCropped){var E=e._crop;(E.flipX!==e.flipX||E.flipY!==e.flipY)&&a.updateCropUVs(E,e.flipX,e.flipY),o=E.u0,u=E.v0,f=E.u1,d=E.v1,p=E.width,m=E.height,v=E.x,c=E.y,T=-g+v,S=-y+c}var _=1,w=1;e.flipX&&(x||(T+=-a.realWidth+g*2),_=-1),(e.flipY||a.source.isGLTexture&&!h.flipY)&&(x||(S+=-a.realHeight+y*2),w=-1),s.applyITRS(e.x,e.y,e.rotation,e.scaleX*_,e.scaleY*w),r.copyFrom(t.matrix),i?(r.multiplyWithOffset(i,-t.scrollX*e.scrollFactorX,-t.scrollY*e.scrollFactorY),s.e=e.x,s.f=e.y):(s.e-=t.scrollX*e.scrollFactorX,s.f-=t.scrollY*e.scrollFactorY),r.multiply(s,n);var R=T+p,q=S+m,A=t.roundPixels,P=n.getXRound(T,S,A),L=n.getYRound(T,S,A),b=n.getXRound(T,q,A),G=n.getYRound(T,q,A),M=n.getXRound(R,q,A),D=n.getYRound(R,q,A),I=n.getXRound(R,S,A),F=n.getYRound(R,S,A),O=qc.getTintAppendFloatAlpha,K=t.alpha,H=O(e.tintTopLeft,K*e._alphaTL),Y=O(e.tintTopRight,K*e._alphaTR),ee=O(e.tintBottomLeft,K*e._alphaBL),U=O(e.tintBottomRight,K*e._alphaBR);this.shouldFlush(6)&&this.flush();var J=this.setGameObject(e,a);this.manager.preBatch(e),this.batchQuad(e,P,L,b,G,M,D,I,F,o,u,f,d,H,Y,ee,U,e.tintFill,h,J),this.manager.postBatch(e)},batchTexture:function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m,x,g,y,T,S,E,_,w,R,q,A,P,L,b,G,M){this.manager.set(this,e);var D=this._tempMatrix1,I=this._tempMatrix2,F=this._tempMatrix3,O=g/i+A,K=y/r+P,H=(g+T)/i+A,Y=(y+S)/r+P,ee=a,U=h,J=-m,st=-x;if(e.isCropped){var ve=e._crop,gt=ve.width,_e=ve.height;ee=gt,U=_e,a=gt,h=_e,g=ve.x,y=ve.y;var nt=g,Ze=y;d&&(nt=T-ve.x-gt),v&&(Ze=S-ve.y-_e),O=nt/i+A,K=Ze/r+P,H=(nt+gt)/i+A,Y=(Ze+_e)/r+P,J=-m+g,st=-x+y}v=v^(!G&&t.isRenderTexture?1:0),d&&(ee*=-1,J+=a),v&&(U*=-1,st+=h);var te=J+ee,Ue=st+U;I.applyITRS(s,n,f,o,u),D.copyFrom(L.matrix),b?(D.multiplyWithOffset(b,-L.scrollX*c,-L.scrollY*p),I.e=s,I.f=n):(I.e-=L.scrollX*c,I.f-=L.scrollY*p),D.multiply(I,F);var qe=L.roundPixels,Pt=F.getXRound(J,st,qe),ut=F.getYRound(J,st,qe),oe=F.getXRound(J,Ue,qe),ke=F.getYRound(J,Ue,qe),lt=F.getXRound(te,Ue,qe),X=F.getYRound(te,Ue,qe),V=F.getXRound(te,st,qe),Z=F.getYRound(te,st,qe);M===void 0&&(M=this.renderer.setTexture2D(t)),e&&this.manager.preBatch(e),this.batchQuad(e,Pt,ut,oe,ke,lt,X,V,Z,O,K,H,Y,E,_,w,R,q,t,M),e&&this.manager.postBatch(e)},batchTextureFrame:function(e,t,i,r,s,n,a){this.manager.set(this);var h=this._tempMatrix1.copyFrom(n),o=this._tempMatrix2,u=t+e.width,f=i+e.height;a?h.multiply(a,o):o=h;var d=o.getX(t,i),v=o.getY(t,i),c=o.getX(t,f),p=o.getY(t,f),m=o.getX(u,f),x=o.getY(u,f),g=o.getX(u,i),y=o.getY(u,i),T=this.renderer.setTextureSource(e.source);r=qc.getTintAppendFloatAlpha(r,s),this.batchQuad(null,d,v,c,p,m,x,g,y,e.u0,e.v0,e.u1,e.v1,r,r,r,r,0,e.glTexture,T)},batchFillRect:function(e,t,i,r,s,n){this.renderer.pipelines.set(this);var a=this.calcMatrix;n&&n.multiply(s,a);var h=e+i,o=t+r,u=a.getX(e,t),f=a.getY(e,t),d=a.getX(e,o),v=a.getY(e,o),c=a.getX(h,o),p=a.getY(h,o),m=a.getX(h,t),x=a.getY(h,t),g=this.fillTint;this.batchQuad(null,u,f,d,v,c,p,m,x,0,0,1,1,g.TL,g.TR,g.BL,g.BR,2)},batchFillTriangle:function(e,t,i,r,s,n,a,h){this.renderer.pipelines.set(this);var o=this.calcMatrix;h&&h.multiply(a,o);var u=o.getX(e,t),f=o.getY(e,t),d=o.getX(i,r),v=o.getY(i,r),c=o.getX(s,n),p=o.getY(s,n),m=this.fillTint;this.batchTri(null,u,f,d,v,c,p,0,0,1,1,m.TL,m.TR,m.BL,2)},batchStrokeTriangle:function(e,t,i,r,s,n,a,h,o){var u=this.tempTriangle;u[0].x=e,u[0].y=t,u[0].width=a,u[1].x=i,u[1].y=r,u[1].width=a,u[2].x=s,u[2].y=n,u[2].width=a,u[3].x=e,u[3].y=t,u[3].width=a,this.batchStrokePath(u,a,!1,h,o)},batchFillPath:function(e,t,i){this.renderer.pipelines.set(this);var r=this.calcMatrix;i&&i.multiply(t,r);for(var s=e.length,n=this.polygonCache,a,h,o=this.fillTint.TL,u=this.fillTint.TR,f=this.fillTint.BL,d=0;d<s;++d)h=e[d],n.push(h.x,h.y);a=$pe(n),s=a.length;for(var v=0;v<s;v+=3){var c=a[v+0]*2,p=a[v+1]*2,m=a[v+2]*2,x=n[c+0],g=n[c+1],y=n[p+0],T=n[p+1],S=n[m+0],E=n[m+1],_=r.getX(x,g),w=r.getY(x,g),R=r.getX(y,T),q=r.getY(y,T),A=r.getX(S,E),P=r.getY(S,E);this.batchTri(null,_,w,R,q,A,P,0,0,1,1,o,u,f,2)}n.length=0},batchStrokePath:function(e,t,i,r,s){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var n=e.length-1,a=0;a<n;a++){var h=e[a],o=e[a+1];this.batchLine(h.x,h.y,o.x,o.y,h.width/2,o.width/2,t,a,!i&&a===n-1,r,s)}},batchLine:function(e,t,i,r,s,n,a,h,o,u,f){this.renderer.pipelines.set(this);var d=this.calcMatrix;f&&f.multiply(u,d);var v=i-e,c=r-t,p=Math.sqrt(v*v+c*c),m=s*(r-t)/p,x=s*(e-i)/p,g=n*(r-t)/p,y=n*(e-i)/p,T=i-g,S=r-y,E=e-m,_=t-x,w=i+g,R=r+y,q=e+m,A=t+x,P=d.getX(T,S),L=d.getY(T,S),b=d.getX(E,_),G=d.getY(E,_),M=d.getX(w,R),D=d.getY(w,R),I=d.getX(q,A),F=d.getY(q,A),O=this.strokeTint,K=O.TL,H=O.TR,Y=O.BL,ee=O.BR;if(this.batchQuad(null,I,F,b,G,P,L,M,D,0,0,1,1,K,H,Y,ee,2),!(a<=2)){var U=this.prevQuad,J=this.firstQuad;h>0&&U[4]?this.batchQuad(null,I,F,b,G,U[0],U[1],U[2],U[3],0,0,1,1,K,H,Y,ee,2):(J[0]=I,J[1]=F,J[2]=b,J[3]=G,J[4]=1),o&&J[4]?this.batchQuad(null,P,L,M,D,J[0],J[1],J[2],J[3],0,0,1,1,K,H,Y,ee,2):(U[0]=P,U[1]=L,U[2]=M,U[3]=D,U[4]=1)}}});RO.exports=ime});var bc=l((uHe,AO)=>{var rme=C(),sme=z(),nme=EO(),hh=Gn(),ame=xe(),hme=Qi(),Mc=10,Pc=new ame,qO=new rme({Extends:hh,initialize:function(t){Mc=t.game.renderer.config.maxLights;for(var i=sme(t,"fragShader",nme),r=[],s=1;s<=Mc;s++)r.push({name:"lights"+s,fragShader:i.replace("%LIGHT_COUNT%",s.toString())});t.shaders=r,hh.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){hme.prototype.boot.call(this);var e=this.gl,t=e.createTexture();e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:t};for(var i=0;i<this.shaders.length;i++)this["lightShader"+(i+1)]=this.shaders[i]},onRender:function(e,t){var i=e.sys.lights;if(this.lightsActive=!1,!(!i||!i.active)){var r=i.getLights(t),s=r.length;if(s!==0){this.lightsActive=!0,this.setShader(this["lightShader"+s],!0);var n,a=this.renderer,h=a.height,o=t.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",t.x,t.y,t.rotation,t.zoom),this.set3f("uAmbientLightColor",i.ambientColor.r,i.ambientColor.g,i.ambientColor.b),n=0;n<s;n++){var u=r[n].light,f=u.color,d="uLights["+n+"].";o.transformPoint(u.x,u.y,Pc),this.set2f(d+"position",Pc.x-t.scrollX*u.scrollFactorX*t.zoom,h-(Pc.y-t.scrollY*u.scrollFactorY*t.zoom)),this.set3f(d+"color",f.r,f.g,f.b),this.set1f(d+"intensity",u.intensity),this.set1f(d+"radius",u.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(e){if(e!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var t=this.inverseRotationMatrix;if(e){var i=-e,r=Math.cos(i),s=Math.sin(i);t[1]=s,t[3]=-s,t[0]=t[4]=r}else t[0]=t[4]=1,t[1]=t[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,t),this.currentNormalMapRotation=e}},setTexture2D:function(e,t){var i=this.renderer;e===void 0&&(e=i.tempTextures[0]);var r=this.getNormalMap(t);i.isNewNormalMap(e,r)&&(this.flush(),i.setTextureZero(e),i.setNormalMap(r));var s=t?t.rotation:0;return this.setNormalMapRotation(s),this.currentUnit=0,0},setGameObject:function(e,t){t===void 0&&(t=e.frame);var i=this.renderer,r=t.glTexture,s=this.getNormalMap(e);return i.isNewNormalMap()&&(this.flush(),i.setTextureZero(r),i.setNormalMap(s)),this.setNormalMapRotation(e.rotation),this.currentUnit=0,0},getNormalMap:function(e){var t;return e?e.displayTexture?t=e.displayTexture.dataSource[e.displayFrame.sourceIndex]:e.texture?t=e.texture.dataSource[e.frame.sourceIndex]:e.tileset&&(Array.isArray(e.tileset)?t=e.tileset[0].image.dataSource[0]:t=e.tileset.image.dataSource[0]):t=this.defaultNormalMap,t||(t=this.defaultNormalMap),t.glTexture},batchSprite:function(e,t,i){this.lightsActive&&hh.prototype.batchSprite.call(this,e,t,i)},batchTexture:function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m,x,g,y,T,S,E,_,w,R,q,A,P,L,b,G,M){this.lightsActive&&hh.prototype.batchTexture.call(this,e,t,i,r,s,n,a,h,o,u,f,d,v,c,p,m,x,g,y,T,S,E,_,w,R,q,A,P,L,b,G,M)},batchTextureFrame:function(e,t,i,r,s,n,a){this.lightsActive&&hh.prototype.batchTextureFrame.call(this,e,t,i,r,s,n,a)}});qO.LIGHT_COUNT=Mc;AO.exports=qO});var MO=l((lHe,PO)=>{PO.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)});var LO=l((fHe,bO)=>{bO.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)});var Oc=l((dHe,FO)=>{var ome=C(),Lc=z(),ume=MO(),lme=LO(),OO=Qi(),fme=new ome({Extends:OO,initialize:function(t){t.vertShader=Lc(t,"vertShader",lme),t.fragShader=Lc(t,"fragShader",ume),t.attributes=Lc(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),OO.call(this,t)},onRender:function(e,t){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",t.zoom)},batchPointLight:function(e,t,i,r,s,n,a,h,o,u,f,d){var v=e.color,c=e.intensity,p=e.radius,m=e.attenuation,x=v.r*c,g=v.g*c,y=v.b*c,T=t.alpha*e.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(i,r,f,d,p,m,x,g,y,T),this.batchLightVert(s,n,f,d,p,m,x,g,y,T),this.batchLightVert(a,h,f,d,p,m,x,g,y,T),this.batchLightVert(i,r,f,d,p,m,x,g,y,T),this.batchLightVert(a,h,f,d,p,m,x,g,y,T),this.batchLightVert(o,u,f,d,p,m,x,g,y,T)},batchLightVert:function(e,t,i,r,s,n,a,h,o,u){var f=this.vertexViewF32,d=this.vertexCount*this.currentShader.vertexComponentCount-1;f[++d]=e,f[++d]=t,f[++d]=i,f[++d]=r,f[++d]=s,f[++d]=n,f[++d]=a,f[++d]=h,f[++d]=o,f[++d]=u,this.vertexCount++}});FO.exports=fme});var Fc=l((vHe,IO)=>{var dme=C(),vme=z(),DO=Gn(),cme=new dme({Extends:DO,initialize:function(t){t.topology=5,t.batchSize=vme(t,"batchSize",256),DO.call(this,t)}});IO.exports=cme});var GO=l((cHe,NO)=>{NO.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)});var UO=l((pHe,BO)=>{BO.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)});var Dc=l((mHe,YO)=>{var pme=C(),kO=z(),zO=Gn(),mme=GO(),gme=UO(),xme=Qi(),yme=new pme({Extends:zO,initialize:function(t){t.fragShader=kO(t,"fragShader",mme),t.vertShader=kO(t,"vertShader",gme),t.forceZero=!0,zO.call(this,t)},boot:function(){xme.prototype.boot.call(this),this.set1i("uMainSampler",0)}});YO.exports=yme});var VO=l((gHe,XO)=>{XO.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)});var lu=l((xHe,WO)=>{var Tme=C(),Eme=new Tme({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(e){return this._matrix=e,this._dirty=!0,this},reset:function(){var e=this._matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=0,e[10]=0,e[11]=0,e[12]=1,e[13]=0,e[14]=0,e[15]=0,e[16]=0,e[17]=0,e[18]=1,e[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var e=new Float32Array(this._matrix);e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,this._data=e,this._dirty=!1}return this._data},brightness:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1);var i=e;return this.multiply([i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0],t)},saturate:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1);var i=e*2/3+1,r=(i-1)*-.5;return this.multiply([i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0],t)},desaturate:function(e){return e===void 0&&(e=!1),this.saturate(-1,e)},hue:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1),e=e/180*Math.PI;var i=Math.cos(e),r=Math.sin(e),s=.213,n=.715,a=.072;return this.multiply([s+i*(1-s)+r*-s,n+i*-n+r*-n,a+i*-a+r*(1-a),0,0,s+i*-s+r*.143,n+i*(1-n)+r*.14,a+i*-a+r*-.283,0,0,s+i*-s+r*-(1-s),n+i*-n+r*n,a+i*(1-a)+r*a,0,0,0,0,0,1,0],t)},grayscale:function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!1),this.saturate(-e,t)},blackWhite:function(e){return e===void 0&&(e=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},contrast:function(e,t){e===void 0&&(e=0),t===void 0&&(t=!1);var i=e+1,r=-.5*(i-1);return this.multiply([i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0],t)},negative:function(e){return e===void 0&&(e=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},desaturateLuminance:function(e){return e===void 0&&(e=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],e)},sepia:function(e){return e===void 0&&(e=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},night:function(e,t){return e===void 0&&(e=.1),t===void 0&&(t=!1),this.multiply([e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0],t)},lsd:function(e){return e===void 0&&(e=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},brown:function(e){return e===void 0&&(e=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},vintagePinhole:function(e){return e===void 0&&(e=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},kodachrome:function(e){return e===void 0&&(e=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},technicolor:function(e){return e===void 0&&(e=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},polaroid:function(e){return e===void 0&&(e=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},shiftToBGR:function(e){return e===void 0&&(e=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},multiply:function(e,t){t||this.reset();for(var i=this._matrix,r=[],s=0;s<20;s++)r[s]=i[s];return i[0]=r[0]*e[0]+r[1]*e[5]+r[2]*e[10]+r[3]*e[15],i[1]=r[0]*e[1]+r[1]*e[6]+r[2]*e[11]+r[3]*e[16],i[2]=r[0]*e[2]+r[1]*e[7]+r[2]*e[12]+r[3]*e[17],i[3]=r[0]*e[3]+r[1]*e[8]+r[2]*e[13]+r[3]*e[18],i[4]=r[0]*e[4]+r[1]*e[9]+r[2]*e[14]+r[3]*e[19]+r[4],i[5]=r[5]*e[0]+r[6]*e[5]+r[7]*e[10]+r[8]*e[15],i[6]=r[5]*e[1]+r[6]*e[6]+r[7]*e[11]+r[8]*e[16],i[7]=r[5]*e[2]+r[6]*e[7]+r[7]*e[12]+r[8]*e[17],i[8]=r[5]*e[3]+r[6]*e[8]+r[7]*e[13]+r[8]*e[18],i[9]=r[5]*e[4]+r[6]*e[9]+r[7]*e[14]+r[8]*e[19]+r[9],i[10]=r[10]*e[0]+r[11]*e[5]+r[12]*e[10]+r[13]*e[15],i[11]=r[10]*e[1]+r[11]*e[6]+r[12]*e[11]+r[13]*e[16],i[12]=r[10]*e[2]+r[11]*e[7]+r[12]*e[12]+r[13]*e[17],i[13]=r[10]*e[3]+r[11]*e[8]+r[12]*e[13]+r[13]*e[18],i[14]=r[10]*e[4]+r[11]*e[9]+r[12]*e[14]+r[13]*e[19]+r[14],i[15]=r[15]*e[0]+r[16]*e[5]+r[17]*e[10]+r[18]*e[15],i[16]=r[15]*e[1]+r[16]*e[6]+r[17]*e[11]+r[18]*e[16],i[17]=r[15]*e[2]+r[16]*e[7]+r[17]*e[12]+r[18]*e[17],i[18]=r[15]*e[3]+r[16]*e[8]+r[17]*e[13]+r[18]*e[18],i[19]=r[15]*e[4]+r[16]*e[9]+r[17]*e[14]+r[18]*e[19]+r[19],this._dirty=!0,this}});WO.exports=Eme});var KO=l((yHe,HO)=>{HO.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)});var JO=l((THe,ZO)=>{ZO.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)});var $O=l((EHe,QO)=>{QO.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)});var Ic=l((SHe,jO)=>{jO.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)});var Gc=l((_He,eF)=>{var Sme=VO(),_me=Si(),wme=C(),Cme=lu(),Rme=KO(),qme=JO(),fu=z(),Ame=$O(),Pme=Ic(),Nc=Qi(),Mme=new wme({Extends:Nc,initialize:function(t){t.renderTarget=fu(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=fu(t,"vertShader",Pme),t.shaders=fu(t,"shaders",[{name:"Copy",fragShader:qme},{name:"AddBlend",fragShader:Sme},{name:"LinearBlend",fragShader:Ame},{name:"ColorMatrix",fragShader:Rme}]),t.attributes=fu(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,Nc.call(this,t),this.colorMatrix=new Cme,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){Nc.prototype.boot.call(this);var e=this.shaders,t=this.renderTargets;this.copyShader=e[0],this.addShader=e[1],this.linearShader=e[2],this.colorMatrixShader=e[3],this.fullFrame1=t[0],this.fullFrame2=t[1],this.halfFrame1=t[2],this.halfFrame2=t[3]},copyFrame:function(e,t,i,r,s){i===void 0&&(i=1),r===void 0&&(r=!0),s===void 0&&(s=!0);var n=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture),t?(n.viewport(0,0,t.width,t.height),n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t.texture,0)):n.viewport(0,0,e.width,e.height),r&&(s?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT)),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)},blitFrame:function(e,t,i,r,s,n){i===void 0&&(i=1),r===void 0&&(r=!0),s===void 0&&(s=!0),n===void 0&&(n=!1);var a=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture),e.height>t.height)a.viewport(0,0,e.width,e.height),this.setTargetUVs(e,t);else{var h=t.height-e.height;a.viewport(0,h,e.width,e.height)}if(a.bindFramebuffer(a.FRAMEBUFFER,t.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t.texture,0),r&&(s?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT)),n){var o=this.renderer.currentBlendMode;this.renderer.setBlendMode(_me.ERASE)}a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),n&&this.renderer.setBlendMode(o),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(e,t,i,r,s,n,a,h){a===void 0&&(a=!0),h===void 0&&(h=!0);var o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,e.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e.texture,0),a&&(h?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT)),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture),o.copyTexSubImage2D(o.TEXTURE_2D,0,0,0,i,r,s,n),o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindTexture(o.TEXTURE_2D,null)},copyToGame:function(e){var t=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e.texture),t.bufferData(t.ARRAY_BUFFER,this.vertexData,t.STATIC_DRAW),t.drawArrays(t.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(e,t,i,r){i===void 0&&(i=!0),r===void 0&&(r=this.colorMatrix);var s=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",r.getData()),this.set1f("uAlpha",r.alpha),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e.texture),t?(s.viewport(0,0,t.width,t.height),s.bindFramebuffer(s.FRAMEBUFFER,t.framebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t.texture,0)):s.viewport(0,0,e.width,e.height),i?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindTexture(s.TEXTURE_2D,null)},blendFrames:function(e,t,i,r,s,n){r===void 0&&(r=1),s===void 0&&(s=!0),n===void 0&&(n=this.linearShader);var a=this.gl;this.setShader(n),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",r),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,t.texture),i?(a.bindFramebuffer(a.FRAMEBUFFER,i.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i.texture,0),a.viewport(0,0,i.width,i.height)):a.viewport(0,0,e.width,e.height),s?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null)},blendFramesAdditive:function(e,t,i,r,s){this.blendFrames(e,t,i,r,s,this.addShader)},clearFrame:function(e,t){t===void 0&&(t=!0);var i=this.gl;i.viewport(0,0,e.width,e.height),i.bindFramebuffer(i.FRAMEBUFFER,e.framebuffer),t?i.clearColor(0,0,0,0):i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);var r=this.renderer.currentFramebuffer;i.bindFramebuffer(i.FRAMEBUFFER,r)},setUVs:function(e,t,i,r,s,n,a,h){var o=this.vertexViewF32;o[2]=e,o[3]=t,o[6]=i,o[7]=r,o[10]=s,o[11]=n,o[14]=e,o[15]=t,o[18]=s,o[19]=n,o[22]=a,o[23]=h},setTargetUVs:function(e,t){var i=t.height/e.height;i>.5?i=.5-(i-.5):i=.5+(.5-i),this.setUVs(0,i,0,1+i,1,1+i,1,i)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});eF.exports=Mme});var Uc=l((wHe,tF)=>{var bme=C(),Mi=Ks(),Bc=Rn(),Lme=xc(),Ome=Cc(),Fme=bc(),Dme=Gn(),Ime=Oc(),Nme=Fc(),Gme=Dc(),Bme=Gc(),Ume=new bme({initialize:function(t){this.game=t.game,this.renderer=t,this.classes=new Bc([[Mi.UTILITY_PIPELINE,Bme],[Mi.MULTI_PIPELINE,Dme],[Mi.BITMAPMASK_PIPELINE,Lme],[Mi.SINGLE_PIPELINE,Gme],[Mi.ROPE_PIPELINE,Nme],[Mi.LIGHT_PIPELINE,Fme],[Mi.POINTLIGHT_PIPELINE,Ime],[Mi.GRAPHICS_PIPELINE,Ome]]),this.postPipelineClasses=new Bc,this.pipelines=new Bc,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(e){var t,i,r=this,s=this.game;if(this.classes.each(function(a,h){t=r.add(a,new h({game:s})),a===Mi.UTILITY_PIPELINE&&(r.UTILITY_PIPELINE=t,r.fullFrame1=t.fullFrame1,r.fullFrame2=t.fullFrame2,r.halfFrame1=t.halfFrame1,r.halfFrame2=t.halfFrame2)}),this.MULTI_PIPELINE=this.get(Mi.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(Mi.BITMAPMASK_PIPELINE),e)for(i in e){var n=e[i];t=new n(s),t.isPostFX?this.postPipelineClasses.set(i,n):this.has(i)||(this.classes.set(i,n),this.add(i,t))}},add:function(e,t){if(t.isPostFX){console.warn(e+" is a Post Pipeline. Use `addPostPipeline` instead");return}var i=this.pipelines,r=this.renderer;return i.has(e)?console.warn("Pipeline exists: "+e):(t.name=e,t.manager=this,i.set(e,t)),t.hasBooted||t.boot(),r.width!==0&&r.height!==0&&t.resize(r.width,r.height),t},addPostPipeline:function(e,t){this.postPipelineClasses.has(e)||this.postPipelineClasses.set(e,t)},flush:function(){this.current&&this.current.flush()},has:function(e){var t=this.pipelines;return typeof e=="string"?t.has(e):!!t.contains(e)},get:function(e){var t=this.pipelines;if(typeof e=="string")return t.get(e);if(t.contains(e))return e},getPostPipeline:function(e,t){var i=this.postPipelineClasses,r;if(typeof e=="string"?r=i.get(e):typeof e=="function"?i.contains(e)&&(r=e):typeof e=="object"&&(r=i.get(e.name)),r){var s=new r(this.game);return t&&(s.gameObject=t),s}},remove:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!0),this.pipelines.delete(e),t&&this.classes.delete(e),i&&this.postPipelineClasses.delete(e)},set:function(e,t,i){if(!e.isPostFX)return this.isCurrent(e,i)||(this.flush(),this.current&&this.current.unbind(),this.current=e,e.bind(i)),e.updateProjectionMatrix(),e.onBind(t),e},preBatch:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=t.length-1;i>=0;i--){var r=t[i];r.active&&r.preBatch(e)}}},postBatch:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=0;i<t.length;i++){var r=t[i];r.active&&r.postBatch(e)}}},preBatchCamera:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=t.length-1;i>=0;i--){var r=t[i];r.active&&r.preBatch(e)}}},postBatchCamera:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=0;i<t.length;i++){var r=t[i];r.active&&r.postBatch(e)}}},isCurrent:function(e,t){var i=this.renderer,r=this.current;return r&&!t&&(t=r.currentShader),!(r!==e||t.program!==i.currentProgram)},copyFrame:function(e,t,i,r,s){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(e,t,i,r,s),this},copyToGame:function(e){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(e),this},drawFrame:function(e,t,i,r){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(e,t,i,r),this},blendFrames:function(e,t,i,r,s){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(e,t,i,r,s),this},blendFramesAdditive:function(e,t,i,r,s){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(e,t,i,r,s),this},clearFrame:function(e,t){return this.UTILITY_PIPELINE.clearFrame(e,t),this},blitFrame:function(e,t,i,r,s,n){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(e,t,i,r,s,n),this},copyFrameRect:function(e,t,i,r,s,n,a,h){return this.UTILITY_PIPELINE.copyFrameRect(e,t,i,r,s,n,a,h),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(e){return this.UTILITY_PIPELINE.bind(e)},rebind:function(e){e===void 0&&this.previous&&(e=this.previous);var t=this.renderer,i=t.gl;i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),t.hasActiveStencilMask()?i.clear(i.DEPTH_BUFFER_BIT):(i.disable(i.STENCIL_TEST),i.clear(i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT)),i.viewport(0,0,t.width,t.height),t.currentProgram=null,t.setBlendMode(0,!0);var r=this.pipelines.entries;for(var s in r)r[s].glReset=!0;e&&(this.current=e,e.rebind()),t.resetTextures()},clear:function(){var e=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,e.currentProgram=null,e.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});tF.exports=Ume});var zc=l((CHe,iF)=>{var kc=bt(),kme=di(),bi=z(),zme=function(e,t){var i=e.getContext("experimental-webgl"),r=bi(t,"callback"),s=bi(t,"type","image/png"),n=bi(t,"encoder",.92),a=bi(t,"x",0),h=bi(t,"y",0),o=bi(t,"getPixel",!1),u=bi(t,"isFramebuffer",!1),f=u?bi(t,"bufferWidth",1):i.drawingBufferWidth,d=u?bi(t,"bufferHeight",1):i.drawingBufferHeight;if(o){var v=new Uint8Array(4),c=u?h:d-h;i.readPixels(a,c,1,1,i.RGBA,i.UNSIGNED_BYTE,v),r.call(null,new kme(v[0],v[1],v[2],v[3]/255))}else{var p=bi(t,"width",f),m=bi(t,"height",d),x=p*m*4,g=new Uint8Array(x);i.readPixels(a,d-h-m,p,m,i.RGBA,i.UNSIGNED_BYTE,g);for(var y=kc.createWebGL(this,p,m),T=y.getContext("2d"),S=T.getImageData(0,0,p,m),E=S.data,_=0;_<m;_++)for(var w=0;w<p;w++){var R=((m-_-1)*p+w)*4,q=(_*p+w)*4;E[q+0]=g[R+0],E[q+1]=g[R+1],E[q+2]=g[R+2],E[q+3]=g[R+3]}T.putImageData(S,0,0);var A=new Image;A.onerror=function(){r.call(null),kc.remove(y)},A.onload=function(){r.call(null,A),kc.remove(y)},A.src=y.toDataURL(s,n)}};iF.exports=zme});var Yc=l((RHe,oF)=>{var Yme=tn(),rF=fi(),Xme=C(),Bn=Jt(),sF=ue(),du=Hs(),nF=Ye(),vu=$a(),Vme=Er(),aF=B(),Wme=Uc(),Hme=ih(),Kme=Mn(),Zme=Dn(),cu=Te(),hF=zc(),Jme=new Xme({Extends:sF,initialize:function(t){sF.call(this);var i=t.config,r={alpha:i.transparent,desynchronized:i.desynchronized,depth:!1,antialias:i.antialiasGL,premultipliedAlpha:i.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:i.failIfMajorPerformanceCaveat,powerPreference:i.powerPreference,preserveDrawingBuffer:i.preserveDrawingBuffer};this.config={clearBeforeRender:i.clearBeforeRender,antialias:i.antialias,backgroundColor:i.backgroundColor,contextCreation:r,roundPixels:i.roundPixels,maxTextures:i.maxTextures,maxTextureSize:i.maxTextureSize,batchSize:i.batchSize,maxLights:i.maxLights,mipmapFilter:i.mipmapFilter},this.game=t,this.type=Bn.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=aF,this.contextRestoredHandler=aF,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(e){var t,i=this.game,r=this.canvas,s=e.backgroundColor;if(i.config.context?t=i.config.context:t=r.getContext("webgl",e.contextCreation)||r.getContext("experimental-webgl",e.contextCreation),!t||t.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=t;var n=this;this.contextLostHandler=function(x){n.contextLost=!0,n.game.events.emit(nF.CONTEXT_LOST,n),x.preventDefault()},this.contextRestoredHandler=function(){n.contextLost=!1,n.init(n.config),n.game.events.emit(nF.CONTEXT_RESTORED,n)},r.addEventListener("webglcontextlost",this.contextLostHandler,!1),r.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),i.context=t;for(var a=0;a<=27;a++)this.blendModes.push({func:[t.ONE,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_ADD});this.blendModes[1].func=[t.ONE,t.DST_ALPHA],this.blendModes[2].func=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[t.ONE,t.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[t.ZERO,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=t.BYTE,this.glFormats[1]=t.SHORT,this.glFormats[2]=t.UNSIGNED_BYTE,this.glFormats[3]=t.UNSIGNED_SHORT,this.glFormats[4]=t.FLOAT,this.glFuncMap={mat2:{func:t.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:t.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:t.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:t.uniform1f,length:1},"1fv":{func:t.uniform1fv,length:1},"1i":{func:t.uniform1i,length:1},"1iv":{func:t.uniform1iv,length:1},"2f":{func:t.uniform2f,length:2},"2fv":{func:t.uniform2fv,length:1},"2i":{func:t.uniform2i,length:2},"2iv":{func:t.uniform2iv,length:1},"3f":{func:t.uniform3f,length:3},"3fv":{func:t.uniform3fv,length:1},"3i":{func:t.uniform3i,length:3},"3iv":{func:t.uniform3iv,length:1},"4f":{func:t.uniform4f,length:4},"4fv":{func:t.uniform4fv,length:1},"4i":{func:t.uniform4i,length:4},"4iv":{func:t.uniform4iv,length:1}};var h=t.getSupportedExtensions();(!e.maxTextures||e.maxTextures===-1)&&(e.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),e.maxTextureSize||(e.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE));var o="WEBGL_compressed_texture_",u="WEBKIT_"+o;this.compression.ETC1=t.getExtension(o+"etc1")||t.getExtension(u+"etc1"),this.compression.PVRTC=t.getExtension(o+"pvrtc")||t.getExtension(u+"pvrtc"),this.compression.S3TC=t.getExtension(o+"s3tc")||t.getExtension(u+"s3tc"),this.supportedExtensions=h;var f="ANGLE_instanced_arrays";this.instancedArraysExtension=h.indexOf(f)>-1?t.getExtension(f):null;var d="OES_vertex_array_object";this.vaoExtension=h.indexOf(d)>-1?t.getExtension(d):null,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.clearColor(s.redGL,s.greenGL,s.blueGL,s.alphaGL),this.mipmapFilter=t[e.mipmapFilter],this.maxTextures=cu.checkShaderMax(t,e.maxTextures),this.textureIndexes=[];var v=this.tempTextures;if(Array.isArray(v))for(var c=0;a<this.maxTextures;c++)t.deleteTexture(v[c]);else v=new Array(this.maxTextures);for(var p=0;p<this.maxTextures;p++){var m=t.createTexture();t.activeTexture(t.TEXTURE0+p),t.bindTexture(t.TEXTURE_2D,m),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),v[p]=m,this.textureIndexes.push(p)}return this.tempTextures=v,this.currentActiveTexture=1,this.startActiveTexture++,t.activeTexture(t.TEXTURE1),this.pipelines=new Wme(this),this.setBlendMode(Bn.BlendModes.NORMAL),this.projectionMatrix=new Vme().identity(),i.textures.once(Zme.READY,this.boot,this),this},boot:function(){var e=this.game,t=this.pipelines,i=e.scale.baseSize;this.width=i.width,this.height=i.height,this.isBooted=!0,this.renderTarget=new Hme(this,this.width,this.height,1,0,!0,!0),t.boot(e.config.pipeline),this.blankTexture=e.textures.getFrame("__DEFAULT"),this.whiteTexture=e.textures.getFrame("__WHITE");var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,null),r.enable(r.SCISSOR_TEST),e.scale.on(Kme.RESIZE,this.onResize,this),this.resize(i.width,i.height)},onResize:function(e,t){(t.width!==this.width||t.height!==this.height)&&this.resize(t.width,t.height)},beginCapture:function(e,t){e===void 0&&(e=this.width),t===void 0&&(t=this.height),this.renderTarget.bind(!0,e,t),this.setProjectionMatrix(e,t),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(e,t){var i=this.gl;return this.width=e,this.height=t,this.setProjectionMatrix(e,t),i.viewport(0,0,e,t),this.drawingBufferHeight=i.drawingBufferHeight,i.scissor(0,i.drawingBufferHeight-t,e,t),this.defaultScissor[2]=e,this.defaultScissor[3]=t,this.emit(du.RESIZE,e,t),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(e,t){return(e!==this.projectionWidth||t!==this.projectionHeight)&&(this.projectionWidth=e,this.projectionHeight=t,this.projectionMatrix.ortho(0,e,t,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(e){return this.supportedExtensions?this.supportedExtensions.indexOf(e):!1},getExtension:function(e){return this.hasExtension(e)?(e in this.extensions||(this.extensions[e]=this.gl.getExtension(e)),this.extensions[e]):null},flush:function(){this.pipelines.flush()},pushScissor:function(e,t,i,r,s){s===void 0&&(s=this.drawingBufferHeight);var n=this.scissorStack,a=[e,t,i,r];return n.push(a),this.setScissor(e,t,i,r,s),this.currentScissor=a,a},setScissor:function(e,t,i,r,s){s===void 0&&(s=this.drawingBufferHeight);var n=this.gl,a=this.currentScissor,h=i>0&&r>0;if(a&&h){var o=a[0],u=a[1],f=a[2],d=a[3];h=o!==e||u!==t||f!==i||d!==r}h&&(this.flush(),n.scissor(e,s-t-r,i,r))},resetScissor:function(){var e=this.gl;e.enable(e.SCISSOR_TEST);var t=this.currentScissor;if(t){var i=t[0],r=t[1],s=t[2],n=t[3];s>0&&n>0&&e.scissor(i,this.drawingBufferHeight-r-n,s,n)}},popScissor:function(){var e=this.scissorStack;e.pop();var t=e[e.length-1];t&&this.setScissor(t[0],t[1],t[2],t[3]),this.currentScissor=t},hasActiveStencilMask:function(){var e=this.currentMask.mask,t=this.currentCameraMask.mask;return e&&e.isStencil||t&&t.isStencil},resetViewport:function(){var e=this.gl;e.viewport(0,0,this.width,this.height),this.drawingBufferHeight=e.drawingBufferHeight},setBlendMode:function(e,t){t===void 0&&(t=!1);var i=this.gl,r=this.blendModes[e];return t||e!==Bn.BlendModes.SKIP_CHECK&&this.currentBlendMode!==e?(this.flush(),i.enable(i.BLEND),i.blendEquation(r.equation),r.func.length>2?i.blendFuncSeparate(r.func[0],r.func[1],r.func[2],r.func[3]):i.blendFunc(r.func[0],r.func[1]),this.currentBlendMode=e,!0):!1},addBlendMode:function(e,t){var i=this.blendModes.push({func:e,equation:t});return i-1},updateBlendMode:function(e,t,i){return this.blendModes[e]&&(this.blendModes[e].func=t,i&&(this.blendModes[e].equation=i)),this},removeBlendMode:function(e){return e>17&&this.blendModes[e]&&this.blendModes.splice(e,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(e){if(this.pipelines.forceZero())return this.setTextureZero(e.glTexture,!0),0;var t=this.gl,i=this.currentActiveTexture;return e.glIndexCounter<this.startActiveTexture&&(e.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(e.glIndex=i,t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,e.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,e.glIndexCounter=this.startActiveTexture,e.glIndex=1,t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,e.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,e.glIndex},isNewNormalMap:function(e,t){return this.textureZero!==e||this.normalTexture!==t},setTextureZero:function(e,t){if(this.textureZero!==e){t&&this.flush();var i=this.gl;i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e),this.textureZero=e}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(e){if(this.normalTexture!==e){var t=this.gl;t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,e),this.normalTexture=e,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var e=this.gl,t=this.tempTextures,i=0;i<t.length;i++)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(e){if(e===void 0&&(e=!1),!this.isTextureClean){this.flush();var t=this.gl,i=this.tempTextures;if(e){for(var r=0;r<i.length;r++)t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,i[r]);t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,i[1]),this.isTextureClean=!0}else t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i[0]),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,i[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(e){if(this.pipelines.forceZero())return this.setTextureZero(e,!0),0;var t=this.gl,i=this.currentActiveTexture;return e.glIndexCounter<this.startActiveTexture&&(e.glIndexCounter=this.startActiveTexture,i<this.maxTextures?(e.glIndex=i,t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,e),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,e.glIndexCounter=this.startActiveTexture,e.glIndex=1,t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,e),this.currentActiveTexture=2)),this.isTextureClean=!1,e.glIndex},pushFramebuffer:function(e,t,i,r){return e===this.currentFramebuffer?this:(this.fboStack.push(e),this.setFramebuffer(e,t,i,r))},setFramebuffer:function(e,t,i,r){if(t===void 0&&(t=!1),i===void 0&&(i=!1),r===void 0&&(r=!0),e===this.currentFramebuffer)return this;var s=this.gl,n=this.width,a=this.height;return e&&e.renderTexture&&r?(n=e.renderTexture.width,a=e.renderTexture.height):this.flush(),s.bindFramebuffer(s.FRAMEBUFFER,e),r&&s.viewport(0,0,n,a),t&&(e?(this.drawingBufferHeight=a,this.pushScissor(0,0,n,a)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=e,i&&this.resetTextures(),this},popFramebuffer:function(e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1),i===void 0&&(i=!0);var r=this.fboStack;r.pop();var s=r[r.length-1];return s||(s=null),this.setFramebuffer(s,e,t,i),s},setProgram:function(e){return e!==this.currentProgram?(this.flush(),this.gl.useProgram(e),this.currentProgram=e,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(e,t,i,r){var s=this.gl,n=s.NEAREST,a=s.NEAREST,h=s.CLAMP_TO_EDGE,o=null;t=e?e.width:t,i=e?e.height:i;var u=vu(t,i);return u&&(h=s.REPEAT),r===Bn.ScaleModes.LINEAR&&this.config.antialias&&(n=u?this.mipmapFilter:s.LINEAR,a=s.LINEAR),!e&&typeof t=="number"&&typeof i=="number"?o=this.createTexture2D(0,n,a,h,h,s.RGBA,null,t,i):o=this.createTexture2D(0,n,a,h,h,s.RGBA,e),o},createTexture2D:function(e,t,i,r,s,n,a,h,o,u,f,d){u=u==null?!0:u,f===void 0&&(f=!1),d===void 0&&(d=!1);var v=this.gl,c=v.createTexture();v.activeTexture(v.TEXTURE0);var p=v.getParameter(v.TEXTURE_BINDING_2D);return v.bindTexture(v.TEXTURE_2D,c),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,t),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,i),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,r),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,d),a==null?v.texImage2D(v.TEXTURE_2D,e,n,h,o,0,n,v.UNSIGNED_BYTE,null):(f||(h=a.width,o=a.height),v.texImage2D(v.TEXTURE_2D,e,n,n,v.UNSIGNED_BYTE,a)),vu(h,o)&&v.generateMipmap(v.TEXTURE_2D),p&&v.bindTexture(v.TEXTURE_2D,p),c.isAlphaPremultiplied=u,c.isRenderTexture=!1,c.width=h,c.height=o,c.glIndex=0,c.glIndexCounter=-1,c},createFramebuffer:function(e,t,i,r){var s=this.gl,n=s.createFramebuffer(),a=0;if(this.setFramebuffer(n),r){var h=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,h),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,e,t),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,h)}if(i.isRenderTexture=!0,i.isAlphaPremultiplied=!1,s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0),a=s.checkFramebufferStatus(s.FRAMEBUFFER),a!==s.FRAMEBUFFER_COMPLETE){var o={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+o[a])}return n.renderTexture=i,this.setFramebuffer(null),this.resetTextures(),n},createProgram:function(e,t){var i=this.gl,r=i.createProgram(),s=i.createShader(i.VERTEX_SHADER),n=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(s,e),i.shaderSource(n,t),i.compileShader(s),i.compileShader(n),!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+i.getShaderInfoLog(s));if(!i.getShaderParameter(n,i.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+i.getShaderInfoLog(n));if(i.attachShader(r,s),i.attachShader(r,n),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw new Error(`Link Program failed:
`+i.getProgramInfoLog(r));return i.useProgram(r),r},createVertexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return i.bindBuffer(i.ARRAY_BUFFER,r),i.bufferData(i.ARRAY_BUFFER,e,t),i.bindBuffer(i.ARRAY_BUFFER,null),r},createIndexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e,t),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),r},deleteTexture:function(e,t){return t&&this.resetTextures(!0),e&&this.gl.deleteTexture(e),this},deleteFramebuffer:function(e){return e&&(this.gl.deleteFramebuffer(e),Yme(this.fboStack,e),this.currentFramebuffer===e&&(this.currentFramebuffer=null)),this},deleteProgram:function(e){return e&&this.gl.deleteProgram(e),this},deleteBuffer:function(e){return this.gl.deleteBuffer(e),this},preRenderCamera:function(e){var t=e.x,i=e.y,r=e.width,s=e.height,n=e.backgroundColor;if(e.emit(rF.PRE_RENDER,e),this.pipelines.preBatchCamera(e),this.pushScissor(t,i,r,s),e.mask&&(this.currentCameraMask.mask=e.mask,this.currentCameraMask.camera=e._maskCamera,e.mask.preRenderWebGL(this,e,e._maskCamera)),n.alphaGL>0){var a=this.pipelines.setMulti();a.drawFillRect(t,i,r,s,cu.getTintFromFloats(n.blueGL,n.greenGL,n.redGL,1),n.alphaGL)}},getCurrentStencilMask:function(){var e=null,t=this.maskStack,i=this.currentCameraMask;return t.length>0?e=t[t.length-1]:i.mask&&i.mask.isStencil&&(e=i),e},postRenderCamera:function(e){var t=e.flashEffect,i=e.fadeEffect;if(t.isRunning||i.isRunning||i.isComplete){var r=this.pipelines.setMulti();t.postRenderWebGL(r,cu.getTintFromFloats),i.postRenderWebGL(r,cu.getTintFromFloats)}e.dirty=!1,this.popScissor(),e.mask&&(this.currentCameraMask.mask=null,e.mask.postRenderWebGL(this,e._maskCamera)),this.pipelines.postBatchCamera(e),e.emit(rF.POST_RENDER,e)},preRender:function(){if(!this.contextLost){var e=this.gl;if(e.bindFramebuffer(e.FRAMEBUFFER,null),this.config.clearBeforeRender){var t=this.config.backgroundColor;e.clearColor(t.redGL,t.greenGL,t.blueGL,t.alphaGL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}e.enable(e.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&e.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(du.PRE_RENDER)}},render:function(e,t,i){if(!this.contextLost){var r=t.length;if(this.emit(du.RENDER,e,i),this.preRenderCamera(i),r===0){this.setBlendMode(Bn.BlendModes.NORMAL),this.postRenderCamera(i);return}this.currentType="";for(var s=this.currentMask,n=0;n<r;n++){this.finalType=n===r-1;var a=t[n],h=a.mask;s=this.currentMask,s.mask&&s.mask!==h&&s.mask.postRenderWebGL(this,s.camera),h&&s.mask!==h&&h.preRenderWebGL(this,a,i),a.blendMode!==this.currentBlendMode&&this.setBlendMode(a.blendMode);var o=a.type;o!==this.currentType&&(this.newType=!0,this.currentType=o),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=t[n+1].type===this.currentType,a.renderWebGL(this,a,i),this.newType=!1}s=this.currentMask,s.mask&&s.mask.postRenderWebGL(this,s.camera),this.setBlendMode(Bn.BlendModes.NORMAL),this.postRenderCamera(i)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(du.POST_RENDER);var e=this.snapshotState;e.callback&&(hF(this.canvas,e),e.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,e,t,i)},snapshotArea:function(e,t,i,r,s,n,a){var h=this.snapshotState;return h.callback=s,h.type=n,h.encoder=a,h.getPixel=!1,h.x=e,h.y=t,h.width=Math.min(i,this.gl.drawingBufferWidth),h.height=Math.min(r,this.gl.drawingBufferHeight),this},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(e,t,i,r,s,n,a,h,o,u,f){s===void 0&&(s=!1),n===void 0&&(n=0),a===void 0&&(a=0),h===void 0&&(h=t),o===void 0&&(o=i);var d=this.currentFramebuffer;this.snapshotArea(n,a,h,o,r,u,f);var v=this.snapshotState;return v.getPixel=s,v.isFramebuffer=!0,v.bufferWidth=t,v.bufferHeight=i,this.setFramebuffer(e),hF(this.canvas,v),this.setFramebuffer(d),v.callback=null,v.isFramebuffer=!1,this},canvasToTexture:function(e,t,i,r){return i===void 0&&(i=!1),r===void 0&&(r=!1),t?this.updateCanvasTexture(e,t,r):this.createCanvasTexture(e,i,r)},createCanvasTexture:function(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=this.gl,s=r.NEAREST,n=r.NEAREST,a=e.width,h=e.height,o=r.CLAMP_TO_EDGE,u=vu(a,h);return!t&&u&&(o=r.REPEAT),this.config.antialias&&(s=u?this.mipmapFilter:r.LINEAR,n=r.LINEAR),this.createTexture2D(0,s,n,o,o,r.RGBA,e,a,h,!0,!1,i)},updateCanvasTexture:function(e,t,i){i===void 0&&(i=!1);var r=this.gl,s=e.width,n=e.height;if(s>0&&n>0){r.activeTexture(r.TEXTURE0);var a=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,t),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),t.width=s,t.height=n,a&&r.bindTexture(r.TEXTURE_2D,a)}return t},createVideoTexture:function(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=this.gl,s=r.NEAREST,n=r.NEAREST,a=e.videoWidth,h=e.videoHeight,o=r.CLAMP_TO_EDGE,u=vu(a,h);return!t&&u&&(o=r.REPEAT),this.config.antialias&&(s=u?this.mipmapFilter:r.LINEAR,n=r.LINEAR),this.createTexture2D(0,s,n,o,o,r.RGBA,e,a,h,!0,!0,i)},updateVideoTexture:function(e,t,i){i===void 0&&(i=!1);var r=this.gl,s=e.videoWidth,n=e.videoHeight;if(s>0&&n>0){r.activeTexture(r.TEXTURE0);var a=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,t),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),t.width=s,t.height=n,a&&r.bindTexture(r.TEXTURE_2D,a)}return t},setTextureFilter:function(e,t){var i=this.gl,r=[i.LINEAR,i.NEAREST][t];i.activeTexture(i.TEXTURE0);var s=i.getParameter(i.TEXTURE_BINDING_2D);return i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r),s&&i.bindTexture(i.TEXTURE_2D,s),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var e=this.gl,t=this.tempTextures,i=0;i<t.length;i++)e.deleteTexture(t[i]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});oF.exports=Jme});var Vc=l((qHe,lF)=>{var Qme=oc(),uF=bt(),Sr=Jt(),Xc=Zo(),$me=function(e){var t=e.config;if((t.customEnvironment||t.canvas)&&t.renderType===Sr.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!t.customEnvironment&&!t.canvas&&t.renderType!==Sr.HEADLESS)if(t.renderType===Sr.AUTO&&(t.renderType=Xc.webGL?Sr.WEBGL:Sr.CANVAS),t.renderType===Sr.WEBGL){if(!Xc.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(t.renderType===Sr.CANVAS){if(!Xc.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+t.renderType);t.antialias||uF.disableSmoothing();var i=e.scale.baseSize,r=i.width,s=i.height;if(t.canvas?(e.canvas=t.canvas,e.canvas.width=r,e.canvas.height=s):e.canvas=uF.create(e,r,s,t.renderType),t.canvasStyle&&(e.canvas.style=t.canvasStyle),t.antialias||Qme.setCrisp(e.canvas),t.renderType!==Sr.HEADLESS){var n,a;typeof WEBGL_RENDERER&&typeof CANVAS_RENDERER&&(n=vc(),a=Yc(),t.renderType===Sr.WEBGL?e.renderer=new a(e):(e.renderer=new n(e),e.context=e.renderer.gameContext))}};lF.exports=$me});var Wc=l((AHe,fF)=>{var pu=Jt(),jme=function(e){var t=e.config;if(!t.hideBanner){var i="WebGL";t.renderType===pu.CANVAS?i="Canvas":t.renderType===pu.HEADLESS&&(i="Headless");var r=t.audio,s=e.device.audio,n;if(s.webAudio&&!r.disableWebAudio?n="Web Audio":r.noAudio||!s.webAudio&&!s.audioData?n="No Audio":n="HTML5 Audio",e.device.browser.ie)window.console&&console.log("Phaser v"+pu.VERSION+" / https://phaser.io");else{var a="",h=[a];if(Array.isArray(t.bannerBackgroundColor)){var o;t.bannerBackgroundColor.forEach(function(f){a=a.concat("%c "),h.push("background: "+f),o=f}),h[h.length-1]="color: "+t.bannerTextColor+"; background: "+o}else a=a.concat("%c "),h.push("color: "+t.bannerTextColor+"; background: "+t.bannerBackgroundColor);h.push("background: transparent"),t.gameTitle&&(a=a.concat(t.gameTitle),t.gameVersion&&(a=a.concat(" v"+t.gameVersion)),t.hidePhaser||(a=a.concat(" / ")));var u="-FB";t.hidePhaser||(a=a.concat("Phaser v"+pu.VERSION+u+" ("+i+" | "+n+")")),a=a.concat(" %c "+t.gameURL),h[0]=a,console.log.apply(console,h)}}};fF.exports=jme});var Hc=l((PHe,vF)=>{var ege=C(),dF=B(),tge=new ege({initialize:function(){this.isRunning=!1,this.callback=dF,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function i(r){t.lastTime=t.tick,t.tick=r,t.callback(r),t.timeOutID=window.requestAnimationFrame(i)},this.stepTimeout=function i(){var r=Date.now(),s=Math.min(Math.max(t.target*2+t.tick-r,0),t.target);t.lastTime=t.tick,t.tick=r,t.callback(r),t.timeOutID=window.setTimeout(i,s)}},start:function(e,t,i){this.isRunning||(this.callback=e,this.isSetTimeOut=t,this.target=i,this.isRunning=!0,this.timeOutID=t?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=dF}});vF.exports=tge});var Kc=l((MHe,pF)=>{var ige=C(),Un=he(),cF=B(),rge=Hc(),sge=new ige({initialize:function(t,i){this.game=t,this.raf=new rge,this.started=!1,this.running=!1,this.minFps=Un(i,"min",5),this.targetFps=Un(i,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=cF,this.forceSetTimeOut=Un(i,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=Un(i,"deltaHistory",10),this.panicMax=Un(i,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=Un(i,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var e=window.performance.now();this.time=e,this.lastTime=e,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0;for(var t=0;t<this.deltaSmoothingMax;t++)this.deltaHistory[t]=Math.min(this._target,this.deltaHistory[t]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(e){if(this.started)return this;this.started=!0,this.running=!0;for(var t=0;t<this.deltaSmoothingMax;t++)this.deltaHistory[t]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=e,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(e){this.now=e;var t=e-this.lastTime;t<0&&(t=0),this.rawDelta=t;var i=this.deltaIndex,r=this.deltaHistory,s=this.deltaSmoothingMax,n=t,a=t;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=r[i],n=Math.min(n,this._min)),r[i]=n,this.deltaIndex++,this.deltaIndex>s&&(this.deltaIndex=0),a=0;for(var h=0;h<s;h++)a+=r[h];a/=s}this.delta=a,this.time+=this.rawDelta,e>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0),this.framesThisSecond++;var o=a/this._target;this.callback(e,a,o),this.lastTime=e,this.frame++},tick:function(){this.step(window.performance.now())},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(e){this.running||(e&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=cF,this.raf=null,this.game=null}});pF.exports=sge});var Zc=l((bHe,mF)=>{var mu=Ye(),nge=function(e){var t,i=e.events;if(document.hidden!==void 0)t="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(n){document[n+"Hidden"]!==void 0&&(document.hidden=function(){return document[n+"Hidden"]},t=n+"visibilitychange")})}var s=function(n){document.hidden||n.type==="pause"?i.emit(mu.HIDDEN):i.emit(mu.VISIBLE)};t&&document.addEventListener(t,s,!1),window.onblur=function(){i.emit(mu.BLUR)},window.onfocus=function(){i.emit(mu.FOCUS)},window.focus&&e.config.autoFocus&&window.focus()};mF.exports=nge});var xF=l((LHe,gF)=>{gF.exports={Config:hc(),CreateRenderer:Vc(),DebugHeader:Wc(),Events:Ye(),TimeStep:Kc(),VisibilityHandler:Zc()}});var Jc=l((OHe,yF)=>{yF.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}});var Qc=l((FHe,TF)=>{var age=Jc(),hge=bt(),_r=he(),oge=function(e){var t=_r(e,"data",[]),i=_r(e,"canvas",null),r=_r(e,"palette",age),s=_r(e,"pixelWidth",1),n=_r(e,"pixelHeight",s),a=_r(e,"resizeCanvas",!0),h=_r(e,"clearCanvas",!0),o=_r(e,"preRender",null),u=_r(e,"postRender",null),f=Math.floor(Math.abs(t[0].length*s)),d=Math.floor(Math.abs(t.length*n));i||(i=hge.create2D(this,f,d),a=!1,h=!1),a&&(i.width=f,i.height=d);var v=i.getContext("2d");h&&v.clearRect(0,0,f,d),o&&o(i,v);for(var c=0;c<t.length;c++)for(var p=t[c],m=0;m<p.length;m++){var x=p[m];x!=="."&&x!==" "&&(v.fillStyle=r[x],v.fillRect(m*s,c*n,s,n))}return u&&u(i,v),i};TF.exports=oge});var SF=l((DHe,EF)=>{EF.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}});var wF=l((IHe,_F)=>{_F.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}});var RF=l((NHe,CF)=>{CF.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}});var AF=l((GHe,qF)=>{qF.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}});var MF=l((BHe,PF)=>{PF.exports={ARNE16:Jc(),C64:SF(),CGA:wF(),JMP:RF(),MSX:AF()}});var LF=l((UHe,bF)=>{bF.exports={GenerateTexture:Qc(),Palettes:MF()}});var DF=l((kHe,FF)=>{var uge=C(),$c=Js(),lge=vt(),kn=Ne(),OF=new uge({Extends:$c,initialize:function(t){$c.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(kn.BOOT,this.boot,this),t.sys.events.on(kn.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(kn.DESTROY,this.destroy,this)},start:function(){this.events.once(kn.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(kn.SHUTDOWN,this.shutdown,this)},destroy:function(){$c.prototype.destroy.call(this),this.events.off(kn.START,this.start,this),this.scene=null,this.systems=null}});lge.register("DataManagerPlugin",OF,"data");FF.exports=OF});var NF=l((zHe,IF)=>{IF.exports={DataManager:Js(),DataManagerPlugin:DF(),Events:Jd()}});var BF=l((YHe,GF)=>{GF.exports={BottomCenter:xd(),BottomLeft:yd(),BottomRight:Td(),Center:Sd(),LeftCenter:_d(),QuickSet:Ad(),RightCenter:wd(),TopCenter:Cd(),TopLeft:Rd(),TopRight:qd()}});var kF=l((XHe,UF)=>{UF.exports={BottomCenter:nd(),BottomLeft:ad(),BottomRight:hd(),LeftBottom:od(),LeftCenter:ud(),LeftTop:ld(),QuickSet:gd(),RightBottom:fd(),RightCenter:dd(),RightTop:vd(),TopCenter:cd(),TopLeft:pd(),TopRight:md()}});var YF=l((VHe,zF)=>{var fge=Fa(),dge=ze(),jc={In:BF(),To:kF()};jc=dge(!1,jc,fge);zF.exports=jc});var ep=l((WHe,XF)=>{var vge=C(),cge=new vge({initialize:function(t,i,r,s){(!i||i==="")&&(i=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),s===void 0&&(s=null),this.key=t,this.fragmentSrc=i,this.vertexSrc=r,this.uniforms=s}});XF.exports=cge});var WF=l((HHe,VF)=>{var pge=_i(),mge=wi(),gge=Ci(),xge=Ri(),yge=function(e,t){t===void 0&&(t={});var i=mge(e),r=xge(e);return t.x=i,t.y=r,t.width=gge(e)-i,t.height=pge(e)-r,t};VF.exports=yge});var KF=l((KHe,HF)=>{var Tge=function(e){return e.width*e.originX};HF.exports=Tge});var JF=l((ZHe,ZF)=>{var Ege=function(e){return e.height*e.originY};ZF.exports=Ege});var $F=l((JHe,QF)=>{QF.exports={CenterOn:Ed(),GetBottom:_i(),GetBounds:WF(),GetCenterX:Ys(),GetCenterY:Vs(),GetLeft:wi(),GetOffsetX:KF(),GetOffsetY:JF(),GetRight:Ci(),GetTop:Ri(),SetBottom:Hi(),SetCenterX:Xs(),SetCenterY:Ws(),SetLeft:Vi(),SetRight:Wi(),SetTop:Xi()}});var e2=l((QHe,jF)=>{var Sge=function(e,t){return t===void 0&&(t="none"),e.style.msTouchAction=t,e.style["ms-touch-action"]=t,e.style["touch-action"]=t,e};jF.exports=Sge});var i2=l(($He,t2)=>{var _ge=function(e,t){t===void 0&&(t="none");var i=["-webkit-","-khtml-","-moz-","-ms-",""];return i.forEach(function(r){e.style[r+"user-select"]=t}),e.style["-webkit-touch-callout"]=t,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};t2.exports=_ge});var s2=l((jHe,r2)=>{r2.exports={CanvasInterpolation:oc(),CanvasPool:bt(),Smoothing:Ho(),TouchAction:e2(),UserSelect:i2()}});var a2=l((e6e,n2)=>{var gu=qn(),wge=function(e){e===void 0&&(e=1024);var t=[],i=255,r,s=255,n=0,a=0;for(r=0;r<=i;r++)t.push({r:s,g:r,b:a,color:gu(s,r,a)});for(n=255,r=i;r>=0;r--)t.push({r,g:n,b:a,color:gu(r,n,a)});for(s=0,r=0;r<=i;r++,n--)t.push({r:s,g:n,b:r,color:gu(s,n,r)});for(n=0,a=255,r=0;r<=i;r++,a--,s++)t.push({r:s,g:n,b:a,color:gu(s,n,a)});if(e===1024)return t;var h=[],o=0,u=1024/e;for(r=0;r<e;r++)h.push(t[Math.floor(o)]),o+=u;return h};n2.exports=wge});var o2=l((t6e,h2)=>{var Cge=function(e){var t={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(t.a=e>>>24),t};h2.exports=Cge});var tp=l((i6e,u2)=>{var Rge=function(e){var t=e.toString(16);return t.length===1?"0"+t:t};u2.exports=Rge});var ip=l((r6e,l2)=>{var qge=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<.16666666666666666?e+(t-e)*6*i:i<.5?t:i<.6666666666666666?e+(t-e)*(.6666666666666666-i)*6:e};l2.exports=qge});var d2=l((s6e,f2)=>{var Age=di(),rp=ip(),Pge=function(e,t,i){var r=i,s=i,n=i;if(t!==0){var a=i<.5?i*(1+t):i+t-i*t,h=2*i-a;r=rp(h,a,e+1/3),s=rp(h,a,e),n=rp(h,a,e-1/3)}var o=new Age;return o.setGLTo(r,s,n,1)};f2.exports=Pge});var c2=l((n6e,v2)=>{var Mge=Do(),bge=function(e,t){e===void 0&&(e=1),t===void 0&&(t=1);for(var i=[],r=0;r<=359;r++)i.push(Mge(r/359,e,t));return i};v2.exports=bge});var m2=l((a6e,p2)=>{var sp=Ka(),np=function(e,t,i,r,s,n,a,h){a===void 0&&(a=100),h===void 0&&(h=0);var o=h/a;return{r:sp(e,r,o),g:sp(t,s,o),b:sp(i,n,o)}},Lge=function(e,t,i,r){return i===void 0&&(i=100),r===void 0&&(r=0),np(e.r,e.g,e.b,t.r,t.g,t.b,i,r)},Oge=function(e,t,i,r,s,n){return s===void 0&&(s=100),n===void 0&&(n=0),np(e.r,e.g,e.b,t,i,r,s,n)};p2.exports={RGBWithRGB:np,ColorWithRGB:Oge,ColorWithColor:Lge}});var x2=l((h6e,g2)=>{var ap=$o(),Fge=di(),Dge=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=255),new Fge(ap(e,t),ap(e,t),ap(e,t))};g2.exports=Dge});var T2=l((o6e,y2)=>{var xu=tp(),Ige=function(e,t,i,r,s){return r===void 0&&(r=255),s===void 0&&(s="#"),s==="#"?"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1,7):"0x"+xu(r)+xu(e)+xu(t)+xu(i)};y2.exports=Ige});var S2=l((u6e,E2)=>{var Xe=di();Xe.ColorSpectrum=a2();Xe.ColorToRGBA=o2();Xe.ComponentToHex=tp();Xe.GetColor=qn();Xe.GetColor32=av();Xe.HexStringToColor=uv();Xe.HSLToColor=d2();Xe.HSVColorWheel=c2();Xe.HSVToRGB=Do();Xe.HueToComponent=ip();Xe.IntegerToColor=No();Xe.IntegerToRGB=lv();Xe.Interpolate=m2();Xe.ObjectToColor=fv();Xe.RandomRGB=x2();Xe.RGBStringToColor=dv();Xe.RGBToHSV=ov();Xe.RGBToString=T2();Xe.ValueToColor=Go();E2.exports=Xe});var w2=l((l6e,_2)=>{_2.exports={BitmapMask:Bd(),GeometryMask:Ud()}});var yu=l((f6e,C2)=>{var Nge=C(),Gge=B(),Bge=new Nge({initialize:function(t,i,r){this._rgb=[0,0,0],this.onChangeCallback=Gge,this.dirty=!1,this.set(t,i,r)},set:function(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),this._rgb=[e,t,i],this.onChange(),this},equals:function(e,t,i){var r=this._rgb;return r.r===e&&r.g===t&&r.b===i},onChange:function(){this.dirty=!0;var e=this._rgb;this.onChangeCallback.call(this,e[0],e[1],e[2])},r:{get:function(){return this._rgb[0]},set:function(e){this._rgb[0]=e,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(e){this._rgb[1]=e,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(e){this._rgb[2]=e,this.onChange()}},destroy:function(){this.onChangeCallback=null}});C2.exports=Bge});var q2=l((d6e,R2)=>{R2.exports={Align:YF(),BaseShader:ep(),Bounds:$F(),Canvas:s2(),Color:S2(),ColorMatrix:lu(),Masks:w2(),RGB:yu()}});var oh=l((v6e,A2)=>{var Uge=function(e,t){var i;if(t)typeof t=="string"?i=document.getElementById(t):typeof t=="object"&&t.nodeType===1&&(i=t);else if(e.parentElement||t===null)return e;return i||(i=document.body),i.appendChild(e),e};A2.exports=Uge});var hp=l((c6e,P2)=>{var kge=bn(),zge=function(e){if(document.readyState==="complete"||document.readyState==="interactive"){e();return}var t=function(){document.removeEventListener("deviceready",t,!0),document.removeEventListener("DOMContentLoaded",t,!0),window.removeEventListener("load",t,!0),e()};document.body?kge.cordova?document.addEventListener("deviceready",t,!1):(document.addEventListener("DOMContentLoaded",t,!0),window.addEventListener("load",t,!0)):window.setTimeout(t,20)};P2.exports=zge});var op=l((p6e,M2)=>{var Yge=function(e){if(!e)return window.innerHeight;var t=Math.abs(window.orientation),i={w:0,h:0},r=document.createElement("div");return r.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(r),i.w=t===90?r.offsetHeight:window.innerWidth,i.h=t===90?window.innerWidth:r.offsetHeight,document.documentElement.removeChild(r),r=null,Math.abs(window.orientation)!==90?i.h:i.w};M2.exports=Yge});var up=l((m6e,b2)=>{b2.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}});var lp=l((g6e,L2)=>{L2.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}});var fp=l((x6e,O2)=>{O2.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}});var dp=l((y6e,F2)=>{F2.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}});var Tu=l((T6e,D2)=>{var Xge={CENTER:up(),ORIENTATION:lp(),SCALE_MODE:fp(),ZOOM:dp()};D2.exports=Xge});var vp=l((E6e,I2)=>{var zn=Tu(),Vge=function(e,t){var i=window.screen,r=i?i.orientation||i.mozOrientation||i.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?zn.ORIENTATION.PORTRAIT:zn.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return zn.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return zn.ORIENTATION.LANDSCAPE}else return t>e?zn.ORIENTATION.PORTRAIT:zn.ORIENTATION.LANDSCAPE};I2.exports=Vge});var cp=l((S6e,N2)=>{var Wge=function(e){var t;return e!==""&&(typeof e=="string"?t=document.getElementById(e):e&&e.nodeType===1&&(t=e)),t||(t=document.body),t};N2.exports=Wge});var pp=l((_6e,G2)=>{var Hge=function(e){var t="";try{if(window.DOMParser){var i=new DOMParser;t=i.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.loadXML(e)}catch(r){t=null}return!t||!t.documentElement||t.getElementsByTagName("parsererror").length?null:t};G2.exports=Hge});var Eu=l((w6e,B2)=>{var Kge=function(e){e.parentNode&&e.parentNode.removeChild(e)};B2.exports=Kge});var k2=l((C6e,U2)=>{var Zge={AddToDOM:oh(),DOMContentLoaded:hp(),GetInnerHeight:op(),GetScreenOrientation:vp(),GetTarget:cp(),ParseXML:pp(),RemoveFromDOM:Eu(),RequestAnimationFrame:Hc()};U2.exports=Zge});var V2=l((R6e,X2)=>{var Jge=C(),z2=ue(),Qge=vt(),Y2=new Jge({Extends:z2,initialize:function(){z2.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});Qge.register("EventEmitter",Y2,"events");X2.exports=Y2});var H2=l((q6e,W2)=>{W2.exports={EventEmitter:V2()}});var Z2=l((A6e,K2)=>{K2.exports="add"});var Q2=l((P6e,J2)=>{J2.exports="animationcomplete"});var j2=l((M6e,$2)=>{$2.exports="animationcomplete-"});var tD=l((b6e,eD)=>{eD.exports="animationrepeat"});var rD=l((L6e,iD)=>{iD.exports="animationrestart"});var nD=l((O6e,sD)=>{sD.exports="animationstart"});var hD=l((F6e,aD)=>{aD.exports="animationstop"});var uD=l((D6e,oD)=>{oD.exports="animationupdate"});var fD=l((I6e,lD)=>{lD.exports="pauseall"});var vD=l((N6e,dD)=>{dD.exports="remove"});var pD=l((G6e,cD)=>{cD.exports="resumeall"});var Su=l((B6e,mD)=>{mD.exports={ADD_ANIMATION:Z2(),ANIMATION_COMPLETE:Q2(),ANIMATION_COMPLETE_KEY:j2(),ANIMATION_REPEAT:tD(),ANIMATION_RESTART:rD(),ANIMATION_START:nD(),ANIMATION_STOP:hD(),ANIMATION_UPDATE:uD(),PAUSE_ALL:fD(),REMOVE_ANIMATION:vD(),RESUME_ALL:pD()}});var mp=l((U6e,gD)=>{var $ge=function(e,t,i){if(t.length){if(t.length===1)return t[0]}else return NaN;var r=1,s,n;if(i){if(e<t[0][i])return t[0];for(;t[r][i]<e;)r++}else for(;t[r]<e;)r++;return r>t.length&&(r=t.length),i?(s=t[r-1][i],n=t[r][i],n-e<=e-s?t[r]:t[r-1]):(s=t[r-1],n=t[r],n-e<=e-s?n:s)};gD.exports=$ge});var yD=l((k6e,xD)=>{var jge=C(),e0e=new jge({initialize:function(t,i,r,s,n){n===void 0&&(n=!1),this.textureKey=t,this.textureFrame=i,this.index=r,this.frame=s,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=n},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});xD.exports=e0e});var gp=l((z6e,TD)=>{var t0e=function(e){var t=/\D/g;return e.sort(function(i,r){return parseInt(i.replace(t,""),10)-parseInt(r.replace(t,""),10)}),e};TD.exports=t0e});var xp=l((Y6e,ED)=>{var i0e=Le(),r0e=C(),_u=Su(),s0e=mp(),n0e=yD(),Lt=he(),a0e=gp(),h0e=new r0e({initialize:function(t,i,r){this.manager=t,this.key=i,this.type="frame",this.frames=this.getFrames(t.textureManager,Lt(r,"frames",[]),Lt(r,"defaultTextureKey",null),Lt(r,"sortFrames",!0)),this.frameRate=Lt(r,"frameRate",null),this.duration=Lt(r,"duration",null),this.msPerFrame,this.skipMissedFrames=Lt(r,"skipMissedFrames",!0),this.delay=Lt(r,"delay",0),this.repeat=Lt(r,"repeat",0),this.repeatDelay=Lt(r,"repeatDelay",0),this.yoyo=Lt(r,"yoyo",!1),this.showOnStart=Lt(r,"showOnStart",!1),this.hideOnComplete=Lt(r,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(_u.PAUSE_ALL,this.pause,this),this.manager.on(_u.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(e,t,i,r){i===null&&r===null?(e.frameRate=24,e.duration=24/t*1e3):i&&r===null?(e.duration=i,e.frameRate=t/(i/1e3)):(e.frameRate=r,e.duration=t/r*1e3),e.msPerFrame=1e3/e.frameRate},addFrame:function(e){return this.addFrameAt(this.frames.length,e)},addFrameAt:function(e,t){var i=this.getFrames(this.manager.textureManager,t);if(i.length>0){if(e===0)this.frames=i.concat(this.frames);else if(e===this.frames.length)this.frames=this.frames.concat(i);else{var r=this.frames.slice(0,e),s=this.frames.slice(e);this.frames=r.concat(i,s)}this.updateFrameSequence()}return this},checkFrame:function(e){return e>=0&&e<this.frames.length},getFirstTick:function(e){e.accumulator=0,e.nextTick=e.msPerFrame+e.currentFrame.duration},getFrameAt:function(e){return this.frames[e]},getFrames:function(e,t,i,r){r===void 0&&(r=!0);var s=[],n,a,h=1,o,u;if(typeof t=="string"){u=t;var f=e.get(u),d=f.getFrameNames();r&&a0e(d),t=[],d.forEach(function(g){t.push({key:u,frame:g})})}if(!Array.isArray(t)||t.length===0)return s;for(o=0;o<t.length;o++){var v=t[o],c=Lt(v,"key",i);if(!!c){var p=Lt(v,"frame",0),m=e.getFrame(c,p);a=new n0e(c,p,h,m),a.duration=Lt(v,"duration",0),a.isFirst=!n,n&&(n.nextFrame=a,a.prevFrame=n),s.push(a),n=a,h++}}if(s.length>0){a.isLast=!0,a.nextFrame=s[0],s[0].prevFrame=a;var x=1/(s.length-1);for(o=0;o<s.length;o++)s[o].progress=o*x}return s},getNextTick:function(e){e.accumulator-=e.nextTick,e.nextTick=e.msPerFrame+e.currentFrame.duration},getFrameByProgress:function(e){return e=i0e(e,0,1),s0e(e,this.frames,"progress")},nextFrame:function(e){var t=e.currentFrame;t.isLast?e.yoyo?this.handleYoyoFrame(e,!1):e.repeatCounter>0?e.inReverse&&e.forward?e.forward=!1:this.repeatAnimation(e):e.complete():this.updateAndGetNextTick(e,t.nextFrame)},handleYoyoFrame:function(e,t){if(t||(t=!1),e.inReverse===!t&&e.repeatCounter>0){(e.repeatDelay===0||e.pendingRepeat)&&(e.forward=t),this.repeatAnimation(e);return}if(e.inReverse!==t&&e.repeatCounter===0){e.complete();return}e.forward=t;var i=t?e.currentFrame.nextFrame:e.currentFrame.prevFrame;this.updateAndGetNextTick(e,i)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(e){var t=e.currentFrame;t.isFirst?e.yoyo?this.handleYoyoFrame(e,!0):e.repeatCounter>0?e.inReverse&&!e.forward?this.repeatAnimation(e):(e.forward=!0,this.repeatAnimation(e)):e.complete():this.updateAndGetNextTick(e,t.prevFrame)},updateAndGetNextTick:function(e,t){e.setCurrentFrame(t),this.getNextTick(e)},removeFrame:function(e){var t=this.frames.indexOf(e);return t!==-1&&this.removeFrameAt(t),this},removeFrameAt:function(e){return this.frames.splice(e,1),this.updateFrameSequence(),this},repeatAnimation:function(e){if(e._pendingStop===2){if(e._pendingStopValue===0)return e.stop();e._pendingStopValue--}e.repeatDelay>0&&!e.pendingRepeat?(e.pendingRepeat=!0,e.accumulator-=e.nextTick,e.nextTick+=e.repeatDelay):(e.repeatCounter--,e.forward?e.setCurrentFrame(e.currentFrame.nextFrame):e.setCurrentFrame(e.currentFrame.prevFrame),e.isPlaying&&(this.getNextTick(e),e.handleRepeat()))},toJSON:function(){var e={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(t){e.frames.push(t.toJSON())}),e},updateFrameSequence:function(){for(var e=this.frames.length,t=1/(e-1),i,r=0;r<e;r++)i=this.frames[r],i.index=r+1,i.isFirst=!1,i.isLast=!1,i.progress=r*t,r===0?(i.isFirst=!0,e===1?(i.isLast=!0,i.nextFrame=i,i.prevFrame=i):(i.isLast=!1,i.prevFrame=this.frames[e-1],i.nextFrame=this.frames[r+1])):r===e-1&&e>1?(i.isLast=!0,i.prevFrame=this.frames[e-2],i.nextFrame=this.frames[0]):e>1&&(i.prevFrame=this.frames[r-1],i.nextFrame=this.frames[r+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(_u.PAUSE_ALL,this.pause,this),this.manager.off(_u.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var e=0;e<this.frames.length;e++)this.frames[e].destroy();this.frames=[],this.manager=null}});ED.exports=h0e});var wu=l((X6e,SD)=>{var o0e=function(e,t,i,r){t===void 0&&(t=0),i===void 0&&(i=" "),r===void 0&&(r=3),e=e.toString();var s=0;if(t+1>=e.length)switch(r){case 1:e=new Array(t+1-e.length).join(i)+e;break;case 3:var n=Math.ceil((s=t-e.length)/2),a=s-n;e=new Array(a+1).join(i)+e+new Array(n+1).join(i);break;default:e=e+new Array(t+1-e.length).join(i);break}return e};SD.exports=o0e});var yp=l((V6e,_D)=>{var u0e=function(e,t,i,r){var s=[],n,a=!1;if((i||r)&&(a=!0,i||(i=""),r||(r="")),t<e)for(n=e;n>=t;n--)a?s.push(i+n.toString()+r):s.push(n);else for(n=e;n<=t;n++)a?s.push(i+n.toString()+r):s.push(n);return s};_D.exports=u0e});var PD=l((W6e,AD)=>{var l0e=xp(),f0e=C(),wD=Rn(),CD=ue(),uh=Su(),RD=Ye(),lh=z(),Ot=he(),d0e=wu(),qD=yp(),v0e=new f0e({Extends:CD,initialize:function(t){CD.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new wD,this.mixes=new wD,this.paused=!1,this.name="AnimationManager",t.events.once(RD.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(RD.DESTROY,this.destroy,this)},addMix:function(e,t,i){var r=this.anims,s=this.mixes,n=typeof e=="string"?e:e.key,a=typeof t=="string"?t:t.key;if(r.has(n)&&r.has(a)){var h=s.get(n);h||(h={}),h[a]=i,s.set(n,h)}return this},removeMix:function(e,t){var i=this.mixes,r=typeof e=="string"?e:e.key,s=i.get(r);if(s)if(t){var n=typeof t=="string"?t:t.key;s.hasOwnProperty(n)&&delete s[n]}else t||i.delete(r);return this},getMix:function(e,t){var i=this.mixes,r=typeof e=="string"?e:e.key,s=typeof t=="string"?t:t.key,n=i.get(r);return n&&n.hasOwnProperty(s)?n[s]:0},add:function(e,t){return this.anims.has(e)?(console.warn("Animation key exists: "+e),this):(t.key=e,this.anims.set(e,t),this.emit(uh.ADD_ANIMATION,e,t),this)},exists:function(e){return this.anims.has(e)},createFromAseprite:function(e,t){var i=[],r=this.game.cache.json.get(e);if(!r)return i;var s=this,n=Ot(r,"meta",null),a=Ot(r,"frames",null);if(n&&a){var h=Ot(n,"frameTags",[]);h.forEach(function(o){var u=[],f=lh(o,"name",null),d=lh(o,"from",0),v=lh(o,"to",0),c=lh(o,"direction","forward");if(!!f&&(!t||t&&t.indexOf(f)>-1)){for(var p=[],m=Number.MAX_SAFE_INTEGER,x=d;x<=v;x++){var g=x.toString(),y=a[g];if(y){var T=lh(y,"duration",Number.MAX_SAFE_INTEGER);T<m&&(m=T),p.push({frame:g,duration:T})}}p.forEach(function(w){u.push({key:e,frame:w.frame,duration:w.duration-m})});var S=m*u.length;c==="reverse"&&(u=u.reverse());var E={key:f,frames:u,duration:S,yoyo:c==="pingpong"},_=s.create(E);_&&i.push(_)}})}return i},create:function(e){var t=e.key,i=!1;return t&&(i=this.get(t),i||(i=new l0e(this,t,e),this.anims.set(t,i),this.emit(uh.ADD_ANIMATION,t,i))),i},fromJSON:function(e,t){t===void 0&&(t=!1),t&&this.anims.clear(),typeof e=="string"&&(e=JSON.parse(e));var i=[];if(e.hasOwnProperty("anims")&&Array.isArray(e.anims)){for(var r=0;r<e.anims.length;r++)i.push(this.create(e.anims[r]));e.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=e.globalTimeScale)}else e.hasOwnProperty("key")&&e.type==="frame"&&i.push(this.create(e));return i},generateFrameNames:function(e,t){var i=Ot(t,"prefix",""),r=Ot(t,"start",0),s=Ot(t,"end",0),n=Ot(t,"suffix",""),a=Ot(t,"zeroPad",0),h=Ot(t,"outputArray",[]),o=Ot(t,"frames",!1),u=this.textureManager.get(e);if(!u)return h;var f;if(t)for(o||(o=qD(r,s)),f=0;f<o.length;f++){var d=i+d0e(o[f],a,"0",1)+n;u.has(d)?h.push({key:e,frame:d}):console.warn("generateFrameNames: Frame missing: "+d+" from texture: "+e)}else for(o=u.getFrameNames(),f=0;f<o.length;f++)h.push({key:e,frame:o[f]});return h},generateFrameNumbers:function(e,t){var i=Ot(t,"start",0),r=Ot(t,"end",-1),s=Ot(t,"first",!1),n=Ot(t,"outputArray",[]),a=Ot(t,"frames",!1),h=this.textureManager.get(e);if(!h)return n;s&&h.has(s)&&n.push({key:e,frame:s}),a||(r===-1&&(r=h.frameTotal-2),a=qD(i,r));for(var o=0;o<a.length;o++)h.has(a[o])?n.push({key:e,frame:a[o]}):console.warn("generateFrameNumbers: Frame "+o+" missing from texture: "+e);return n},get:function(e){return this.anims.get(e)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(uh.PAUSE_ALL)),this},play:function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)t[i].anims.play(e);return this},staggerPlay:function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=!0),Array.isArray(t)||(t=[t]);var s=t.length;r||s--;for(var n=0;n<t.length;n++){var a=i<0?Math.abs(i)*(s-n):i*n;t[n].anims.playAfterDelay(e,a)}return this},remove:function(e){var t=this.get(e);return t&&(this.emit(uh.REMOVE_ANIMATION,e,t),this.anims.delete(e),this.removeMix(e)),t},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(uh.RESUME_ALL)),this},toJSON:function(e){var t={anims:[],globalTimeScale:this.globalTimeScale};return e!==void 0&&e!==""?t.anims.push(this.anims.get(e).toJSON()):this.anims.each(function(i,r){t.anims.push(r.toJSON())}),t},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});AD.exports=v0e});var bD=l((H6e,MD)=>{var c0e=oh(),p0e=function(e){var t=e.config;if(!(!t.parent||!t.domCreateContainer)){var i=document.createElement("div");i.style.cssText=["display: block;","width: "+e.scale.width+"px;","height: "+e.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+t.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),e.domContainer=i,c0e(i,t.parent)}};MD.exports=p0e});var Cu=l((K6e,LD)=>{var m0e={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};LD.exports=m0e});var FD=l((Z6e,OD)=>{OD.exports="boot"});var ID=l((J6e,DD)=>{DD.exports="destroy"});var GD=l((Q6e,ND)=>{ND.exports="dragend"});var UD=l(($6e,BD)=>{BD.exports="dragenter"});var zD=l((j6e,kD)=>{kD.exports="drag"});var XD=l((e9e,YD)=>{YD.exports="dragleave"});var WD=l((t9e,VD)=>{VD.exports="dragover"});var KD=l((i9e,HD)=>{HD.exports="dragstart"});var JD=l((r9e,ZD)=>{ZD.exports="drop"});var $D=l((s9e,QD)=>{QD.exports="gameout"});var eI=l((n9e,jD)=>{jD.exports="gameover"});var iI=l((a9e,tI)=>{tI.exports="gameobjectdown"});var sI=l((h9e,rI)=>{rI.exports="dragend"});var aI=l((o9e,nI)=>{nI.exports="dragenter"});var oI=l((u9e,hI)=>{hI.exports="drag"});var lI=l((l9e,uI)=>{uI.exports="dragleave"});var dI=l((f9e,fI)=>{fI.exports="dragover"});var cI=l((d9e,vI)=>{vI.exports="dragstart"});var mI=l((v9e,pI)=>{pI.exports="drop"});var xI=l((c9e,gI)=>{gI.exports="gameobjectmove"});var TI=l((p9e,yI)=>{yI.exports="gameobjectout"});var SI=l((m9e,EI)=>{EI.exports="gameobjectover"});var wI=l((g9e,_I)=>{_I.exports="pointerdown"});var RI=l((x9e,CI)=>{CI.exports="pointermove"});var AI=l((y9e,qI)=>{qI.exports="pointerout"});var MI=l((T9e,PI)=>{PI.exports="pointerover"});var LI=l((E9e,bI)=>{bI.exports="pointerup"});var FI=l((S9e,OI)=>{OI.exports="wheel"});var II=l((_9e,DI)=>{DI.exports="gameobjectup"});var GI=l((w9e,NI)=>{NI.exports="gameobjectwheel"});var UI=l((C9e,BI)=>{BI.exports="boot"});var zI=l((R9e,kI)=>{kI.exports="process"});var XI=l((q9e,YI)=>{YI.exports="update"});var WI=l((A9e,VI)=>{VI.exports="pointerdown"});var KI=l((P9e,HI)=>{HI.exports="pointerdownoutside"});var JI=l((M9e,ZI)=>{ZI.exports="pointermove"});var $I=l((b9e,QI)=>{QI.exports="pointerout"});var eN=l((L9e,jI)=>{jI.exports="pointerover"});var iN=l((O9e,tN)=>{tN.exports="pointerup"});var sN=l((F9e,rN)=>{rN.exports="pointerupoutside"});var aN=l((D9e,nN)=>{nN.exports="wheel"});var oN=l((I9e,hN)=>{hN.exports="pointerlockchange"});var lN=l((N9e,uN)=>{uN.exports="preupdate"});var dN=l((G9e,fN)=>{fN.exports="shutdown"});var cN=l((B9e,vN)=>{vN.exports="start"});var mN=l((U9e,pN)=>{pN.exports="update"});var ji=l((k9e,gN)=>{gN.exports={BOOT:FD(),DESTROY:ID(),DRAG_END:GD(),DRAG_ENTER:UD(),DRAG:zD(),DRAG_LEAVE:XD(),DRAG_OVER:WD(),DRAG_START:KD(),DROP:JD(),GAME_OUT:$D(),GAME_OVER:eI(),GAMEOBJECT_DOWN:iI(),GAMEOBJECT_DRAG_END:sI(),GAMEOBJECT_DRAG_ENTER:aI(),GAMEOBJECT_DRAG:oI(),GAMEOBJECT_DRAG_LEAVE:lI(),GAMEOBJECT_DRAG_OVER:dI(),GAMEOBJECT_DRAG_START:cI(),GAMEOBJECT_DROP:mI(),GAMEOBJECT_MOVE:xI(),GAMEOBJECT_OUT:TI(),GAMEOBJECT_OVER:SI(),GAMEOBJECT_POINTER_DOWN:wI(),GAMEOBJECT_POINTER_MOVE:RI(),GAMEOBJECT_POINTER_OUT:AI(),GAMEOBJECT_POINTER_OVER:MI(),GAMEOBJECT_POINTER_UP:LI(),GAMEOBJECT_POINTER_WHEEL:FI(),GAMEOBJECT_UP:II(),GAMEOBJECT_WHEEL:GI(),MANAGER_BOOT:UI(),MANAGER_PROCESS:zI(),MANAGER_UPDATE:XI(),POINTER_DOWN:WI(),POINTER_DOWN_OUTSIDE:KI(),POINTER_MOVE:JI(),POINTER_OUT:$I(),POINTER_OVER:eN(),POINTER_UP:iN(),POINTER_UP_OUTSIDE:sN(),POINTER_WHEEL:aN(),POINTERLOCK_CHANGE:oN(),PRE_UPDATE:lN(),SHUTDOWN:dN(),START:cN(),UPDATE:mN()}});var fh=l((z9e,xN)=>{var g0e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};xN.exports=g0e});var Ep=l((Y9e,SN)=>{var x0e=tn(),y0e=C(),yN=Ye(),Tp=ji(),TN=fh(),EN=B(),T0e=new y0e({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=EN,this.onKeyUp=EN,t.events.once(Tp.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputKeyboard,this.target=e.inputKeyboardEventTarget,this.addCapture(e.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(yN.POST_STEP,this.postUpdate,this)},startListeners:function(){var e=this;this.onKeyDown=function(i){if(!(i.defaultPrevented||!e.enabled||!e.manager)){e.queue.push(i),e.manager.events.emit(Tp.MANAGER_PROCESS);var r=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;e.preventDefault&&!r&&e.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}},this.onKeyUp=function(i){if(!(i.defaultPrevented||!e.enabled||!e.manager)){e.queue.push(i),e.manager.events.emit(Tp.MANAGER_PROCESS);var r=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;e.preventDefault&&!r&&e.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}};var t=this.target;t&&(t.addEventListener("keydown",this.onKeyDown,!1),t.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var e=this.target;e.removeEventListener("keydown",this.onKeyDown,!1),e.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(e){typeof e=="string"&&(e=e.split(",")),Array.isArray(e)||(e=[e]);for(var t=this.captures,i=0;i<e.length;i++){var r=e[i];typeof r=="string"&&(r=TN[r.trim().toUpperCase()]),t.indexOf(r)===-1&&t.push(r)}this.preventDefault=t.length>0},removeCapture:function(e){typeof e=="string"&&(e=e.split(",")),Array.isArray(e)||(e=[e]);for(var t=this.captures,i=0;i<e.length;i++){var r=e[i];typeof r=="string"&&(r=TN[r.toUpperCase()]),x0e(t,r)}this.preventDefault=t.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(yN.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});SN.exports=T0e});var Sp=l((X9e,_N)=>{var E0e=C(),Ru=Zo(),S0e=ji(),wr=B(),_0e=new E0e({initialize:function(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=wr,this.onMouseDown=wr,this.onMouseUp=wr,this.onMouseDownWindow=wr,this.onMouseUpWindow=wr,this.onMouseOver=wr,this.onMouseOut=wr,this.onMouseWheel=wr,this.pointerLockChange=wr,this.isTop=!0,t.events.once(S0e.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputMouse,this.target=e.inputMouseEventTarget,this.passive=e.inputMousePassive,this.preventDefaultDown=e.inputMousePreventDefaultDown,this.preventDefaultUp=e.inputMousePreventDefaultUp,this.preventDefaultMove=e.inputMousePreventDefaultMove,this.preventDefaultWheel=e.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},requestPointerLock:function(){if(Ru.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()}},releasePointerLock:function(){Ru.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var e=this.target;if(!!e){var t=this,i=this.manager,r=i.canvas,s=window&&window.focus&&i.game.config.autoFocus;this.onMouseMove=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseMove(a),t.preventDefaultMove&&a.preventDefault())},this.onMouseDown=function(a){s&&window.focus(),!a.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseDown(a),t.preventDefaultDown&&a.target===r&&a.preventDefault())},this.onMouseDownWindow=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&a.target!==r&&i.onMouseDown(a)},this.onMouseUp=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseUp(a),t.preventDefaultUp&&a.target===r&&a.preventDefault())},this.onMouseUpWindow=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&a.target!==r&&i.onMouseUp(a)},this.onMouseOver=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&i.setCanvasOver(a)},this.onMouseOut=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&i.setCanvasOut(a)},this.onMouseWheel=function(a){!a.defaultPrevented&&t.enabled&&i&&i.enabled&&i.onMouseWheel(a),t.preventDefaultWheel&&a.target===r&&a.preventDefault()};var n={passive:!0};if(e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mouseover",this.onMouseOver,n),e.addEventListener("mouseout",this.onMouseOut,n),this.preventDefaultWheel?e.addEventListener("wheel",this.onMouseWheel,{passive:!1}):e.addEventListener("wheel",this.onMouseWheel,n),window&&i.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,n),window.top.addEventListener("mouseup",this.onMouseUpWindow,n)}catch(a){window.addEventListener("mousedown",this.onMouseDownWindow,n),window.addEventListener("mouseup",this.onMouseUpWindow,n),this.isTop=!1}Ru.pointerLock&&(this.pointerLockChange=function(a){var h=t.target;t.locked=document.pointerLockElement===h||document.mozPointerLockElement===h||document.webkitPointerLockElement===h,i.onPointerLockChange(a)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("mouseover",this.onMouseOver),e.removeEventListener("mouseout",this.onMouseOut),window&&(e=this.isTop?window.top:window,e.removeEventListener("mousedown",this.onMouseDownWindow),e.removeEventListener("mouseup",this.onMouseUpWindow)),Ru.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});_N.exports=_0e});var wp=l((V9e,RN)=>{var _p=kv(),w0e=C(),wN=Wr(),CN=yo(),qu=Jv(),Au=xe(),C0e=bn(),R0e=new w0e({initialize:function(t,i){this.manager=t,this.id=i,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new Au,this.prevPosition=new Au,this.midPoint=new Au(-1,-1),this.velocity=new Au,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=i===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(e){var t=e.getWorldPoint(this.x,this.y);return this.worldX=t.x,this.worldY=t.y,this},positionToCamera:function(e,t){return e.getWorldPoint(this.x,this.y,t)},updateMotion:function(){var e=this.position.x,t=this.position.y,i=this.midPoint.x,r=this.midPoint.y;if(!(e===i&&t===r)){var s=qu(this.motionFactor,i,e),n=qu(this.motionFactor,r,t);CN(s,e,.1)&&(s=e),CN(n,t,.1)&&(n=t),this.midPoint.set(s,n);var a=e-s,h=t-n;this.velocity.set(a,h),this.angle=_p(s,n,e,t),this.distance=Math.sqrt(a*a+h*h)}},up:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.button=e.button,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),e.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=e.timeStamp,this.wasTouch=!1)},down:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.button=e.button,this.downElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),e.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),C0e.macOS&&e.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=e.timeStamp),this.wasTouch=!1},move:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.manager.transformPointer(this,e.pageX,e.pageY,!0),this.locked&&(this.movementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,this.movementY=e.movementY||e.mozMovementY||e.webkitMovementY||0),this.moveTime=e.timeStamp,this.wasTouch=!1},wheel:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.deltaX=e.deltaX,this.deltaY=e.deltaY,this.deltaZ=e.deltaZ,this.wasTouch=!1},touchstart:function(e,t){e.pointerId&&(this.pointerId=e.pointerId),this.identifier=e.identifier,this.target=e.target,this.active=!0,this.buttons=1,this.event=t,this.downElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=t.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(e,t){this.event=t,this.manager.transformPointer(this,e.pageX,e.pageY,!0),this.moveTime=t.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(e,t){this.buttons=0,this.event=t,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(e,t){this.buttons=0,this.event=t,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?wN(this.downX,this.downY,this.x,this.y):wN(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?_p(this.downX,this.downY,this.x,this.y):_p(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(e,t){e===void 0&&(e=10),t===void 0&&(t=[]);for(var i=this.prevPosition.x,r=this.prevPosition.y,s=this.position.x,n=this.position.y,a=0;a<e;a++){var h=1/e*a;t[a]={x:qu(h,i,s),y:qu(h,r,n)}}return t},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},time:{get:function(){return this.event?this.event.timeStamp:0}}});RN.exports=R0e});var Cp=l((W9e,qN)=>{var q0e=C(),A0e=ji(),Cr=B(),P0e=new q0e({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=Cr,this.onTouchStartWindow=Cr,this.onTouchMove=Cr,this.onTouchEnd=Cr,this.onTouchEndWindow=Cr,this.onTouchCancel=Cr,this.onTouchCancelWindow=Cr,this.onTouchOver=Cr,this.onTouchOut=Cr,t.events.once(A0e.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputTouch,this.target=e.inputTouchEventTarget,this.capture=e.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},startListeners:function(){var e=this,t=this.manager.canvas,i=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(a){i&&window.focus(),!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchStart(a),e.capture&&a.cancelable&&a.target===t&&a.preventDefault())},this.onTouchStartWindow=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&a.target!==t&&e.manager.onTouchStart(a)},this.onTouchMove=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchMove(a),e.capture&&a.cancelable&&a.preventDefault())},this.onTouchEnd=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchEnd(a),e.capture&&a.cancelable&&a.target===t&&a.preventDefault())},this.onTouchEndWindow=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&a.target!==t&&e.manager.onTouchEnd(a)},this.onTouchCancel=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchCancel(a),e.capture&&a.preventDefault())},this.onTouchCancelWindow=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.onTouchCancel(a)},this.onTouchOver=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOver(a)},this.onTouchOut=function(a){!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOut(a)};var r=this.target;if(!!r){var s={passive:!0},n={passive:!1};r.addEventListener("touchstart",this.onTouchStart,this.capture?n:s),r.addEventListener("touchmove",this.onTouchMove,this.capture?n:s),r.addEventListener("touchend",this.onTouchEnd,this.capture?n:s),r.addEventListener("touchcancel",this.onTouchCancel,this.capture?n:s),r.addEventListener("touchover",this.onTouchOver,this.capture?n:s),r.addEventListener("touchout",this.onTouchOut,this.capture?n:s),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,n),window.addEventListener("touchend",this.onTouchEndWindow,n),window.addEventListener("touchcancel",this.onTouchCancelWindow,n)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),e.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("touchcancel",this.onTouchCancel),e.removeEventListener("touchover",this.onTouchOver),e.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});qN.exports=P0e});var Rp=l((H9e,MN)=>{var M0e=C(),rs=Cu(),b0e=ue(),dh=ji(),Pu=Ye(),L0e=Ep(),O0e=Sp(),AN=wp(),F0e=Cp(),PN=xt(),D0e=Co(),I0e=new M0e({initialize:function(t,i){this.game=t,this.scaleManager,this.canvas,this.config=i,this.enabled=!0,this.events=new b0e,this.isOver=!0,this.defaultCursor="",this.keyboard=i.inputKeyboard?new L0e(this):null,this.mouse=i.inputMouse?new O0e(this):null,this.touch=i.inputTouch?new F0e(this):null,this.pointers=[],this.pointersTotal=i.inputActivePointers,i.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var r=0;r<=this.pointersTotal;r++){var s=new AN(this,r);s.smoothFactor=i.inputSmoothFactor,this.pointers.push(s)}this.mousePointer=i.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new PN,this._tempMatrix2=new PN,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(Pu.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(dh.MANAGER_BOOT),this.game.events.on(Pu.PRE_RENDER,this.preRender,this),this.game.events.once(Pu.DESTROY,this.destroy,this)},setCanvasOver:function(e){this.isOver=!0,this.events.emit(dh.GAME_OVER,e)},setCanvasOut:function(e){this.isOver=!1,this.events.emit(dh.GAME_OUT,e)},preRender:function(){var e=this.game.loop.now,t=this.game.loop.delta,i=this.game.scene.getScenes(!0,!0);this.time=e,this.events.emit(dh.MANAGER_UPDATE);for(var r=0;r<i.length;r++){var s=i[r];if(s.sys.input&&s.sys.input.updatePoll(e,t)&&this.globalTopOnly)return}},setDefaultCursor:function(e){this.defaultCursor=e,this.canvas.style.cursor!==e&&(this.canvas.style.cursor=e)},setCursor:function(e){e.cursor&&(this.canvas.style.cursor=e.cursor)},resetCursor:function(e){e.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(e){e===void 0&&(e=1);var t=[];this.pointersTotal+e>10&&(e=10-this.pointersTotal);for(var i=0;i<e;i++){var r=this.pointers.length,s=new AN(this,r);s.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(s),this.pointersTotal++,t.push(s)}return t},updateInputPlugins:function(e,t){var i=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var r=0;r<i.length;r++){var s=i[r];if(s.sys.input){var n=s.sys.input.update(e,t);if(n&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(!a.active){a.touchstart(s,e),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(rs.TOUCH_START,i)},onTouchMove:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(a.active&&a.identifier===s.identifier){a.touchmove(s,e),this.activePointer=a,i.push(a);break}}this.updateInputPlugins(rs.TOUCH_MOVE,i)},onTouchEnd:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(a.active&&a.identifier===s.identifier){a.touchend(s,e),i.push(a);break}}this.updateInputPlugins(rs.TOUCH_END,i)},onTouchCancel:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],n=1;n<this.pointersTotal;n++){var a=t[n];if(a.active&&a.identifier===s.identifier){a.touchcancel(s,e),i.push(a);break}}this.updateInputPlugins(rs.TOUCH_CANCEL,i)},onMouseDown:function(e){var t=this.mousePointer;t.down(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(rs.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(e){var t=this.mousePointer;t.move(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(rs.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(e){var t=this.mousePointer;t.up(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(rs.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(e){var t=this.mousePointer;t.wheel(e),this.activePointer=t,this.updateInputPlugins(rs.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(e){var t=this.mouse.locked;this.mousePointer.locked=t,this.events.emit(dh.POINTERLOCK_CHANGE,e,t)},inputCandidate:function(e,t){var i=e.input;if(!i||!i.enabled||!i.alwaysEnabled&&!e.willRender(t))return!1;var r=!0,s=e.parentContainer;if(s)do{if(!s.willRender(t)){r=!1;break}s=s.parentContainer}while(s);return r},hitTest:function(e,t,i,r){r===void 0&&(r=this._tempHitTest);var s=this._tempPoint,n=i.scrollX,a=i.scrollY;r.length=0;var h=e.x,o=e.y;i.getWorldPoint(h,o,s),e.worldX=s.x,e.worldY=s.y;for(var u={x:0,y:0},f=this._tempMatrix,d=this._tempMatrix2,v=0;v<t.length;v++){var c=t[v];if(!!this.inputCandidate(c,i)){var p=s.x+n*c.scrollFactorX-n,m=s.y+a*c.scrollFactorY-a;c.parentContainer?(c.getWorldTransformMatrix(f,d),f.applyInverse(p,m,u)):D0e(p,m,c.x,c.y,c.rotation,c.scaleX,c.scaleY,u),this.pointWithinHitArea(c,u.x,u.y)&&r.push(c)}}return r},pointWithinHitArea:function(e,t,i){t+=e.displayOriginX,i+=e.displayOriginY;var r=e.input;return r&&r.hitAreaCallback(r.hitArea,t,i,e)?(r.localX=t,r.localY=i,!0):!1},pointWithinInteractiveObject:function(e,t,i){return e.hitArea?(t+=e.gameObject.displayOriginX,i+=e.gameObject.displayOriginY,e.localX=t,e.localY=i,e.hitAreaCallback(e.hitArea,t,i,e)):!1},transformPointer:function(e,t,i,r){var s=e.position,n=e.prevPosition;n.x=s.x,n.y=s.y;var a=this.scaleManager.transformX(t),h=this.scaleManager.transformY(i),o=e.smoothFactor;!r||o===0?(s.x=a,s.y=h):(s.x=a*o+n.x*(1-o),s.y=h*o+n.y*(1-o))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(Pu.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var e=0;e<this.pointers.length;e++)this.pointers[e].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});MN.exports=I0e});var se=l((K9e,bN)=>{var Mu={},N0e={install:function(e){for(var t in Mu)e[t]=Mu[t]},register:function(e,t){Mu[e]=t},destroy:function(){Mu={}}};bN.exports=N0e});var Me=l((Z9e,LN)=>{var G0e=C(),B0e=vt(),Yn=Ne(),ss=new G0e({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(Yn.BOOT,this.boot,this),this.events.on(Yn.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(Yn.DESTROY,this.destroy,this)},start:function(){this.events.once(Yn.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(Yn.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(Yn.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});ss.register=function(e,t){ss.prototype.hasOwnProperty(e)||(ss.prototype[e]=t)};ss.remove=function(e){ss.prototype.hasOwnProperty(e)&&delete ss.prototype[e]};B0e.register("GameObjectCreator",ss,"make");LN.exports=ss});var ie=l((J9e,ON)=>{var U0e=C(),k0e=vt(),Xn=Ne(),ns=new U0e({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(Xn.BOOT,this.boot,this),this.events.on(Xn.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(Xn.DESTROY,this.destroy,this)},start:function(){this.events.once(Xn.SHUTDOWN,this.shutdown,this)},existing:function(e){return(e.renderCanvas||e.renderWebGL)&&this.displayList.add(e),e.preUpdate&&this.updateList.add(e),e},shutdown:function(){this.events.off(Xn.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(Xn.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});ns.register=function(e,t){ns.prototype.hasOwnProperty(e)||(ns.prototype[e]=t)};ns.remove=function(e){ns.prototype.hasOwnProperty(e)&&delete ns.prototype[e]};k0e.register("GameObjectFactory",ns,"add");ON.exports=ns});var qp=l((Q9e,BN)=>{var z0e=C(),FN=Ye(),DN=ue(),Y0e=se(),IN=Me(),NN=ie(),as=z(),ti=vt(),GN=tn(),X0e=new z0e({Extends:DN,initialize:function(t){DN.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(FN.BOOT,this.boot,this)},boot:function(){var e,t,i,r,s,n,a,h=this.game.config,o=h.installGlobalPlugins;for(o=o.concat(this._pendingGlobal),e=0;e<o.length;e++)t=o[e],i=as(t,"key",null),r=as(t,"plugin",null),s=as(t,"start",!1),n=as(t,"mapping",null),a=as(t,"data",null),i&&(r?this.install(i,r,s,n,a):console.warn("Missing `plugin` for key: "+i));for(o=h.installScenePlugins,o=o.concat(this._pendingScene),e=0;e<o.length;e++)t=o[e],i=as(t,"key",null),r=as(t,"plugin",null),n=as(t,"mapping",null),i&&(r?this.installScenePlugin(i,r,n):console.warn("Missing `plugin` for key: "+i));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(FN.DESTROY,this.destroy,this)},addToScene:function(e,t,i){var r,s,n,a=this.game,h=e.scene,o=e.settings.map,u=e.settings.isBooted;for(r=0;r<t.length;r++)s=t[r],a[s]?(e[s]=a[s],o.hasOwnProperty(s)&&(h[o[s]]=e[s])):s==="game"&&o.hasOwnProperty(s)&&(h[o[s]]=a);for(var f=0;f<i.length;f++)for(n=i[f],r=0;r<n.length;r++)if(s=n[r],!!ti.hasCore(s)){var d=ti.getCore(s),v=d.mapping,c=new d.plugin(h,this,v);e[v]=c,d.custom?h[v]=c:o.hasOwnProperty(v)&&(h[o[v]]=c),u&&c.boot()}for(n=this.plugins,r=0;r<n.length;r++){var p=n[r];p.mapping&&(h[p.mapping]=p.plugin)}},getDefaultScenePlugins:function(){var e=this.game.config.defaultPlugins;return e=e.concat(this.scenePlugins),e},installScenePlugin:function(e,t,i,r,s){if(s===void 0&&(s=!1),typeof t!="function"){console.warn("Invalid Scene Plugin: "+e);return}if(!ti.hasCore(e))ti.register(e,t,i,!0),this.scenePlugins.push(e);else if(!s&&ti.hasCore(e)){console.warn("Scene Plugin key in use: "+e);return}if(r){var n=new t(r,this,e);r.sys[e]=n,i&&i!==""&&(r[i]=n),n.boot()}},install:function(e,t,i,r,s){if(i===void 0&&(i=!1),r===void 0&&(r=null),s===void 0&&(s=null),typeof t!="function")return console.warn("Invalid Plugin: "+e),null;if(ti.hasCustom(e))return console.warn("Plugin key in use: "+e),null;if(r!==null&&(i=!0),!this.game.isBooted)this._pendingGlobal.push({key:e,plugin:t,start:i,mapping:r,data:s});else if(ti.registerCustom(e,t,r,s),i)return this.start(e);return null},getIndex:function(e){for(var t=this.plugins,i=0;i<t.length;i++){var r=t[i];if(r.key===e)return i}return-1},getEntry:function(e){var t=this.getIndex(e);if(t!==-1)return this.plugins[t]},isActive:function(e){var t=this.getEntry(e);return t&&t.active},start:function(e,t){t===void 0&&(t=e);var i=this.getEntry(t);return i&&!i.active?(i.active=!0,i.plugin.start()):i||(i=this.createEntry(e,t)),i?i.plugin:null},createEntry:function(e,t){var i=ti.getCustom(e);if(i){var r=new i.plugin(this);i={key:t,plugin:r,active:!0,mapping:i.mapping,data:i.data},this.plugins.push(i),r.init(i.data),r.start()}return i},stop:function(e){var t=this.getEntry(e);return t&&t.active&&(t.active=!1,t.plugin.stop()),this},get:function(e,t){t===void 0&&(t=!0);var i=this.getEntry(e);if(i)return i.plugin;var r=this.getClass(e);return r&&t?(i=this.createEntry(e,e),i?i.plugin:null):r||null},getClass:function(e){return ti.getCustomClass(e)},removeGlobalPlugin:function(e){var t=this.getEntry(e);t&&GN(this.plugins,t),ti.removeCustom(e)},removeScenePlugin:function(e){GN(this.scenePlugins,e),ti.remove(e)},registerGameObject:function(e,t,i){return t&&NN.register(e,t),i&&IN.register(e,i),this},removeGameObject:function(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!0),t&&NN.remove(e),i&&IN.remove(e),this},registerFileType:function(e,t,i){Y0e.register(e,t),i&&i.sys.load&&(i.sys.load[e]=t)},destroy:function(){for(var e=0;e<this.plugins.length;e++)this.plugins[e].plugin.destroy();ti.destroyCustomPlugins(),this.game.noReturn&&ti.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});BN.exports=X0e});var Ap=l(($9e,UN)=>{var Vn=Le(),V0e=C(),er=ja(),W0e=xe(),Li=new V0e({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=t),r===void 0&&(r=0),s===void 0&&(s=null),this._width=t,this._height=i,this._parent=s,this.aspectMode=r,this.aspectRatio=i===0?1:t/i,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new W0e},setAspectMode:function(e){return e===void 0&&(e=0),this.aspectMode=e,this.setSize(this._width,this._height)},setSnap:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.snapTo.set(e,t),this.setSize(this._width,this._height)},setParent:function(e){return this._parent=e,this.setSize(this._width,this._height)},setMin:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.minWidth=Vn(e,0,this.maxWidth),this.minHeight=Vn(t,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(e,t){return e===void 0&&(e=Number.MAX_VALUE),t===void 0&&(t=e),this.maxWidth=Vn(e,this.minWidth,Number.MAX_VALUE),this.maxHeight=Vn(t,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(e,t){switch(e===void 0&&(e=0),t===void 0&&(t=e),this.aspectMode){case Li.NONE:this._width=this.getNewWidth(er(e,this.snapTo.x)),this._height=this.getNewHeight(er(t,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case Li.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(er(e,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case Li.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(er(t,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case Li.FIT:this.constrain(e,t,!0);break;case Li.ENVELOP:this.constrain(e,t,!1);break}return this},setAspectRatio:function(e){return this.aspectRatio=e,this.setSize(this._width,this._height)},resize:function(e,t){return this._width=this.getNewWidth(er(e,this.snapTo.x)),this._height=this.getNewHeight(er(t,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(e,t){return t===void 0&&(t=!0),e=Vn(e,this.minWidth,this.maxWidth),t&&this._parent&&e>this._parent.width&&(e=Math.max(this.minWidth,this._parent.width)),e},getNewHeight:function(e,t){return t===void 0&&(t=!0),e=Vn(e,this.minHeight,this.maxHeight),t&&this._parent&&e>this._parent.height&&(e=Math.max(this.minHeight,this._parent.height)),e},constrain:function(e,t,i){e===void 0&&(e=0),t===void 0&&(t=e),i===void 0&&(i=!0),e=this.getNewWidth(e),t=this.getNewHeight(t);var r=this.snapTo,s=t===0?1:e/t;return i&&this.aspectRatio>s||!i&&this.aspectRatio<s?(e=er(e,r.x),t=e/this.aspectRatio,r.y>0&&(t=er(t,r.y),e=t*this.aspectRatio)):(i&&this.aspectRatio<s||!i&&this.aspectRatio>s)&&(t=er(t,r.y),e=t*this.aspectRatio,r.x>0&&(e=er(e,r.x),t=e*(1/this.aspectRatio))),this._width=e,this._height=t,this},fitTo:function(e,t){return this.constrain(e,t,!0)},envelop:function(e,t){return this.constrain(e,t,!1)},setWidth:function(e){return this.setSize(e,this._height)},setHeight:function(e){return this.setSize(this._width,e)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(e){e&&e.style&&(e.style.width=this._width+"px",e.style.height=this._height+"px")},copy:function(e){return e.setAspectMode(this.aspectMode),e.aspectRatio=this.aspectRatio,e.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(e){this.setSize(e,this._height)}},height:{get:function(){return this._height},set:function(e){this.setSize(this._width,e)}}});Li.NONE=0;Li.WIDTH_CONTROLS_HEIGHT=1;Li.HEIGHT_CONTROLS_WIDTH=2;Li.FIT=3;Li.ENVELOP=4;UN.exports=Li});var Pp=l((j9e,WN)=>{var zt=Tu(),H0e=C(),kN=ue(),sn=Mn(),bu=Ye(),K0e=op(),zN=cp(),YN=vp(),Lu=B(),XN=Ae(),Ou=Ap(),VN=ja(),Z0e=xe(),J0e=new H0e({Extends:kN,initialize:function(t){kN.call(this),this.game=t,this.canvas,this.canvasBounds=new XN,this.parent=null,this.parentIsWindow=!1,this.parentSize=new Ou,this.gameSize=new Ou,this.baseSize=new Ou,this.displaySize=new Ou,this.scaleMode=zt.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new Z0e(1,1),this.autoRound=!1,this.autoCenter=zt.CENTER.NO_CENTER,this.orientation=zt.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:Lu,windowResize:Lu,fullScreenChange:Lu,fullScreenError:Lu}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(bu.BOOT,this.boot,this)},boot:function(){var e=this.game;this.canvas=e.canvas,this.fullscreen=e.device.fullscreen,this.scaleMode!==zt.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===zt.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),e.events.on(bu.PRE_STEP,this.step,this),e.events.once(bu.READY,this.refresh,this),e.events.once(bu.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(e){this.getParent(e),this.getParentBounds();var t=e.width,i=e.height,r=e.scaleMode,s=e.zoom,n=e.autoRound;if(typeof t=="string"){var a=this.parentSize.width;a===0&&(a=window.innerWidth);var h=parseInt(t,10)/100;t=Math.floor(a*h)}if(typeof i=="string"){var o=this.parentSize.height;o===0&&(o=window.innerHeight);var u=parseInt(i,10)/100;i=Math.floor(o*u)}this.scaleMode=r,this.autoRound=n,this.autoCenter=e.autoCenter,this.resizeInterval=e.resizeInterval,n&&(t=Math.floor(t),i=Math.floor(i)),this.gameSize.setSize(t,i),s===zt.ZOOM.MAX_ZOOM&&(s=this.getMaxZoom()),this.zoom=s,s!==1&&(this._resetZoom=!0),this.baseSize.setSize(t,i),n&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),e.minWidth>0&&this.displaySize.setMin(e.minWidth*s,e.minHeight*s),e.maxWidth>0&&this.displaySize.setMax(e.maxWidth*s,e.maxHeight*s),this.displaySize.setSize(t,i),this.orientation=YN(t,i)},getParent:function(e){var t=e.parent;if(t!==null){if(this.parent=zN(t),this.parentIsWindow=this.parent===document.body,e.expandParent&&e.scaleMode!==zt.SCALE_MODE.NONE){var i=this.parent.getBoundingClientRect();(this.parentIsWindow||i.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",i=this.parent.getBoundingClientRect(),!this.parentIsWindow&&i.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}e.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=zN(e.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var e=this.parentSize,t=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(t.height=K0e(!0));var i=t.width,r=t.height;return e.width!==i||e.height!==r?(e.setSize(i,r),!0):!1},lockOrientation:function(e){var t=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return t?t.call(screen,e):!1},setParentSize:function(e,t){return this.parentSize.setSize(e,t),this.refresh()},setGameSize:function(e,t){var i=this.autoRound;i&&(e=Math.floor(e),t=Math.floor(t));var r=this.width,s=this.height;return this.gameSize.resize(e,t),this.baseSize.resize(e,t),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(e/t),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(r,s)},resize:function(e,t){var i=this.zoom,r=this.autoRound;r&&(e=Math.floor(e),t=Math.floor(t));var s=this.width,n=this.height;this.gameSize.resize(e,t),this.baseSize.resize(e,t),r&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(e*i,t*i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var a=this.canvas.style,h=e*i,o=t*i;return r&&(h=Math.floor(h),o=Math.floor(o)),(h!==e||o!==t)&&(a.width=h+"px",a.height=o+"px"),this.refresh(s,n)},setZoom:function(e){return this.zoom=e,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(e,t){e===void 0&&(e=this.width),t===void 0&&(t=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i=this.game.domContainer;if(i){this.baseSize.setCSS(i);var r=this.canvas.style,s=i.style;s.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",s.marginLeft=r.marginLeft,s.marginTop=r.marginTop}return this.emit(sn.RESIZE,this.gameSize,this.baseSize,this.displaySize,e,t),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var e=YN(this.width,this.height);e!==this.orientation&&(this.orientation=e,this.emit(sn.ORIENTATION_CHANGE,e))}},updateScale:function(){var e=this.canvas.style,t=this.gameSize.width,i=this.gameSize.height,r,s,n=this.zoom,a=this.autoRound;this.scaleMode===zt.SCALE_MODE.NONE?(this.displaySize.setSize(t*n,i*n),r=this.displaySize.width,s=this.displaySize.height,a&&(r=Math.floor(r),s=Math.floor(s)),this._resetZoom&&(e.width=r+"px",e.height=s+"px",this._resetZoom=!1)):this.scaleMode===zt.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),r=this.displaySize.width,s=this.displaySize.height,a&&(r=Math.floor(r),s=Math.floor(s)),this.canvas.width=r,this.canvas.height=s):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),r=this.displaySize.width,s=this.displaySize.height,a&&(r=Math.floor(r),s=Math.floor(s)),e.width=r+"px",e.height=s+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var e=VN(this.parentSize.width,this.gameSize.width,0,!0),t=VN(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(e,t),1)},updateCenter:function(){var e=this.autoCenter;if(e!==zt.CENTER.NO_CENTER){var t=this.canvas,i=t.style,r=t.getBoundingClientRect(),s=r.width,n=r.height,a=Math.floor((this.parentSize.width-s)/2),h=Math.floor((this.parentSize.height-n)/2);e===zt.CENTER.CENTER_HORIZONTALLY?h=0:e===zt.CENTER.CENTER_VERTICALLY&&(a=0),i.marginLeft=a+"px",i.marginTop=h+"px"}},updateBounds:function(){var e=this.canvasBounds,t=this.canvas.getBoundingClientRect();e.x=t.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),e.y=t.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),e.width=t.width,e.height=t.height},transformX:function(e){return(e-this.canvasBounds.left)*this.displayScale.x},transformY:function(e){return(e-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(e){e===void 0&&(e={navigationUI:"hide"});var t=this.fullscreen;if(!t.available){this.emit(sn.FULLSCREEN_UNSUPPORTED);return}if(!t.active){var i=this.getFullscreenTarget();t.keyboard?i[t.request](Element.ALLOW_KEYBOARD_INPUT):i[t.request](e)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(sn.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(e){this.removeFullscreenTarget(),this.emit(sn.FULLSCREEN_FAILED,e)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var e=document.createElement("div");e.style.margin="0",e.style.padding="0",e.style.width="100%",e.style.height="100%",this.fullscreenTarget=e,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var t=this.canvas.parentNode;t.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var e=this.fullscreenTarget;if(e&&e.parentNode){var t=e.parentNode;t.insertBefore(this.canvas,e),t.removeChild(e)}}},stopFullscreen:function(){var e=this.fullscreen;if(!e.available)return this.emit(sn.FULLSCREEN_UNSUPPORTED),!1;e.active&&document[e.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(sn.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(e){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(e)},startListeners:function(){var e=this,t=this.listeners;if(t.orientationChange=function(){e.updateBounds(),e._checkOrientation=!0,e.dirty=!0},t.windowResize=function(){e.updateBounds(),e.dirty=!0},window.addEventListener("orientationchange",t.orientationChange,!1),window.addEventListener("resize",t.windowResize,!1),this.fullscreen.available){t.fullScreenChange=function(r){return e.onFullScreenChange(r)},t.fullScreenError=function(r){return e.onFullScreenError(r)};var i=["webkit","moz",""];i.forEach(function(r){document.addEventListener(r+"fullscreenchange",t.fullScreenChange,!1),document.addEventListener(r+"fullscreenerror",t.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.addEventListener("MSFullscreenError",t.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(e){e===void 0&&(e=new XN);var t=this.baseSize,i=this.parentSize,r=this.canvasBounds,s=this.displayScale,n=r.x>=0?0:-(r.x*s.x),a=r.y>=0?0:-(r.y*s.y),h;i.width>=r.width?h=t.width:h=t.width-(r.width-i.width)*s.x;var o;return i.height>=r.height?o=t.height:o=t.height-(r.height-i.height)*s.y,e.setTo(n,a,h,o),e},step:function(e,t){!this.parent||(this._lastCheck+=t,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var e=this.listeners;window.removeEventListener("orientationchange",e.orientationChange,!1),window.removeEventListener("resize",e.windowResize,!1);var t=["webkit","moz",""];t.forEach(function(i){document.removeEventListener(i+"fullscreenchange",e.fullScreenChange,!1),document.removeEventListener(i+"fullscreenerror",e.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",e.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===zt.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===zt.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});WN.exports=J0e});var vh=l((e8e,HN)=>{var Q0e={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};HN.exports=Q0e});var ZN=l((t8e,KN)=>{KN.exports="addfile"});var QN=l((i8e,JN)=>{JN.exports="complete"});var jN=l((r8e,$N)=>{$N.exports="filecomplete"});var tG=l((s8e,eG)=>{eG.exports="filecomplete-"});var rG=l((n8e,iG)=>{iG.exports="loaderror"});var nG=l((a8e,sG)=>{sG.exports="load"});var hG=l((h8e,aG)=>{aG.exports="fileprogress"});var uG=l((o8e,oG)=>{oG.exports="postprocess"});var fG=l((u8e,lG)=>{lG.exports="progress"});var vG=l((l8e,dG)=>{dG.exports="start"});var nn=l((f8e,cG)=>{cG.exports={ADD:ZN(),COMPLETE:QN(),FILE_COMPLETE:jN(),FILE_KEY_COMPLETE:tG(),FILE_LOAD_ERROR:rG(),FILE_LOAD:nG(),FILE_PROGRESS:hG(),POST_PROCESS:uG(),PROGRESS:fG(),START:vG()}});var Fu=l((d8e,pG)=>{var $0e=function(e){return e&&e[0].toUpperCase()+e.slice(1)};pG.exports=$0e});var Mp=l((v8e,gG)=>{var j0e=z(),mG=Fu(),exe=function(e){var t=e.game.config.defaultPhysicsSystem,i=j0e(e.settings,"physics",!1);if(!(!t&&!i)){var r=[];if(t&&r.push(mG(t+"Physics")),i)for(var s in i)s=mG(s.concat("Physics")),r.indexOf(s)===-1&&r.push(s);return r}};gG.exports=exe});var bp=l((c8e,xG)=>{var txe=z(),ixe=function(e){var t=e.plugins.getDefaultScenePlugins(),i=txe(e.settings,"plugins",!1);return Array.isArray(i)?i:t||[]};xG.exports=ixe});var hs=l((p8e,yG)=>{var rxe=function(e){var t={};for(var i in e)Array.isArray(e[i])?t[i]=e[i].slice(0):t[i]=e[i];return t};yG.exports=rxe});var Lp=l((m8e,TG)=>{var sxe=hs(),nxe=function(e,t){var i=sxe(e);for(var r in t)i.hasOwnProperty(r)||(i[r]=t[r]);return i};TG.exports=nxe});var SG=l((g8e,EG)=>{var Op={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};Op.cameras3d="cameras3d";Op.facebook="facebook";EG.exports=Op});var Fp=l((x8e,_G)=>{var axe=vh(),Oi=he(),hxe=Lp(),oxe=SG(),uxe={create:function(e){return typeof e=="string"?e={key:e}:e===void 0&&(e={}),{status:axe.PENDING,key:Oi(e,"key",""),active:Oi(e,"active",!1),visible:Oi(e,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:Oi(e,"pack",!1),cameras:Oi(e,"cameras",null),map:Oi(e,"map",hxe(oxe,Oi(e,"mapAdd",{}))),physics:Oi(e,"physics",{}),loader:Oi(e,"loader",{}),plugins:Oi(e,"plugins",!1),input:Oi(e,"input",{})}}};_G.exports=uxe});var Du=l((y8e,RG)=>{var lxe=C(),Fi=vh(),wG=ru(),$e=Ne(),fxe=Mp(),dxe=bp(),vxe=Jt(),CG=B(),cxe=Fp(),pxe=new lxe({initialize:function(t,i){this.scene=t,this.game,this.renderer,this.facebook,this.config=i,this.settings=cxe.create(i),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=CG},init:function(e){this.settings.status=Fi.INIT,this.sceneUpdate=CG,this.game=e,this.renderer=e.renderer,this.canvas=e.canvas,this.context=e.context;var t=e.plugins;this.plugins=t,t.addToScene(this,wG.Global,[wG.CoreScene,dxe(this),fxe(this)]),this.events.emit($e.BOOT,this),this.settings.isBooted=!0},step:function(e,t){var i=this.events;i.emit($e.PRE_UPDATE,e,t),i.emit($e.UPDATE,e,t),this.sceneUpdate.call(this.scene,e,t),i.emit($e.POST_UPDATE,e,t)},render:function(e){var t=this.displayList;t.depthSort(),this.events.emit($e.PRE_RENDER,e),this.cameras.render(e,t),this.events.emit($e.RENDER,e)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(e){var t=this.events,i=this.settings;return this.settings.active&&(i.status=Fi.PAUSED,i.active=!1,t.emit($e.PAUSE,this,e)),this},resume:function(e){var t=this.events,i=this.settings;return this.settings.active||(i.status=Fi.RUNNING,i.active=!0,t.emit($e.RESUME,this,e)),this},sleep:function(e){var t=this.events,i=this.settings;return i.status=Fi.SLEEPING,i.active=!1,i.visible=!1,t.emit($e.SLEEP,this,e),this},wake:function(e){var t=this.events,i=this.settings;return i.status=Fi.RUNNING,i.active=!0,i.visible=!0,t.emit($e.WAKE,this,e),i.isTransition&&t.emit($e.TRANSITION_WAKE,i.transitionFrom,i.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===Fi.SLEEPING},isActive:function(){return this.settings.status===Fi.RUNNING},isPaused:function(){return this.settings.status===Fi.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(e){return this.settings.visible=e,this},setActive:function(e,t){return e?this.resume(t):this.pause(t)},start:function(e){var t=this.events,i=this.settings;e&&(i.data=e),i.status=Fi.START,i.active=!0,i.visible=!0,t.emit($e.START,this),t.emit($e.READY,this,e)},shutdown:function(e){var t=this.events,i=this.settings;t.off($e.TRANSITION_INIT),t.off($e.TRANSITION_START),t.off($e.TRANSITION_COMPLETE),t.off($e.TRANSITION_OUT),i.status=Fi.SHUTDOWN,i.active=!1,i.visible=!1,this.renderer===vxe.WEBGL&&this.renderer.resetTextures(!0),t.emit($e.SHUTDOWN,this,e)},destroy:function(){var e=this.events,t=this.settings;t.status=Fi.DESTROYED,t.active=!1,t.visible=!1,e.emit($e.DESTROY,this),e.removeAllListeners();for(var i=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],r=0;r<i.length;r++)this[i[r]]=null}});RG.exports=pxe});var Dp=l((T8e,qG)=>{var mxe=C(),gxe=Du(),xxe=new mxe({initialize:function(t){this.sys=new gxe(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.facebook,this.scale,this.plugins,this.renderer},update:function(){}});qG.exports=xxe});var Np=l((E8e,PG)=>{var yxe=C(),mi=vh(),Ip=Ne(),Txe=Ye(),Exe=he(),AG=nn(),Iu=B(),ch=Dp(),Sxe=Du(),_xe=new yxe({initialize:function(t,i){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)this._pending.push({key:"default",scene:i[r],autoStart:r===0,data:{}})}t.events.once(Txe.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var e,t,i,r;for(e=0;e<this._pending.length;e++){t=this._pending[e],i=t.key,r=t.scene;var s;r instanceof ch?s=this.createSceneFromInstance(i,r):typeof r=="object"?s=this.createSceneFromObject(i,r):typeof r=="function"&&(s=this.createSceneFromFunction(i,r)),i=s.sys.settings.key,this.keys[i]=s,this.scenes.push(s),this._data[i]&&(s.sys.settings.data=this._data[i].data,this._data[i].autoStart&&(t.autoStart=!0)),(t.autoStart||s.sys.settings.active)&&this._start.push(i)}for(this._pending.length=0,this._data={},this.isBooted=!0,e=0;e<this._start.length;e++)t=this._start[e],this.start(t);this._start.length=0}},processQueue:function(){var e=this._pending.length,t=this._queue.length;if(!(e===0&&t===0)){var i,r;if(e){for(i=0;i<e;i++)r=this._pending[i],this.add(r.key,r.scene,r.autoStart,r.data);for(i=0;i<this._start.length;i++)r=this._start[i],this.start(r);this._start.length=0,this._pending.length=0;return}for(i=0;i<this._queue.length;i++)r=this._queue[i],this[r.op](r.keyA,r.keyB);this._queue.length=0}},add:function(e,t,i,r){if(i===void 0&&(i=!1),r===void 0&&(r={}),this.isProcessing||!this.isBooted)return this._pending.push({key:e,scene:t,autoStart:i,data:r}),this.isBooted||(this._data[e]={data:r}),null;e=this.getKey(e,t);var s;return t instanceof ch?s=this.createSceneFromInstance(e,t):typeof t=="object"?(t.key=e,s=this.createSceneFromObject(e,t)):typeof t=="function"&&(s=this.createSceneFromFunction(e,t)),s.sys.settings.data=r,e=s.sys.settings.key,this.keys[e]=s,this.scenes.push(s),(i||s.sys.settings.active)&&(this._pending.length?this._start.push(e):this.start(e)),s},remove:function(e){if(this.isProcessing)this._queue.push({op:"remove",keyA:e,keyB:null});else{var t=this.getScene(e);if(!t||t.sys.isTransitioning())return this;var i=this.scenes.indexOf(t),r=t.sys.settings.key;i>-1&&(delete this.keys[r],this.scenes.splice(i,1),this._start.indexOf(r)>-1&&(i=this._start.indexOf(r),this._start.splice(i,1)),t.sys.destroy())}return this},bootScene:function(e){var t=e.sys,i=t.settings;t.sceneUpdate=Iu,e.init&&(e.init.call(e,i.data),i.status=mi.INIT,i.isTransition&&t.events.emit(Ip.TRANSITION_INIT,i.transitionFrom,i.transitionDuration));var r;t.load&&(r=t.load,r.reset()),r&&e.preload?(e.preload.call(e),r.list.size===0?this.create(e):(i.status=mi.LOADING,r.once(AG.COMPLETE,this.loadComplete,this),r.start())):this.create(e)},loadComplete:function(e){this.create(e.scene)},payloadComplete:function(e){this.bootScene(e.scene)},update:function(e,t){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;i>=0;i--){var r=this.scenes[i].sys;r.settings.status>mi.START&&r.settings.status<=mi.RUNNING&&r.step(e,t)}},render:function(e){for(var t=0;t<this.scenes.length;t++){var i=this.scenes[t].sys;i.settings.visible&&i.settings.status>=mi.LOADING&&i.settings.status<mi.SLEEPING&&i.render(e)}this.isProcessing=!1},create:function(e){var t=e.sys,i=t.settings;e.create&&(i.status=mi.CREATING,e.create.call(e,i.data),i.status===mi.DESTROYED)||(i.isTransition&&t.events.emit(Ip.TRANSITION_START,i.transitionFrom,i.transitionDuration),e.update&&(t.sceneUpdate=e.update),i.status=mi.RUNNING,t.events.emit(Ip.CREATE,e))},createSceneFromFunction:function(e,t){var i=new t;if(i instanceof ch){var r=i.sys.settings.key;if(r!==""&&(e=r),this.keys.hasOwnProperty(e))throw new Error("Cannot add a Scene with duplicate key: "+e);return this.createSceneFromInstance(e,i)}else return i.sys=new Sxe(i),i.sys.settings.key=e,i.sys.init(this.game),i},createSceneFromInstance:function(e,t){var i=t.sys.settings.key;return i===""&&(t.sys.settings.key=e),t.sys.init(this.game),t},createSceneFromObject:function(e,t){var i=new ch(t),r=i.sys.settings.key;r!==""?e=r:i.sys.settings.key=e,i.sys.init(this.game);for(var s=["init","preload","create","update","render"],n=0;n<s.length;n++){var a=Exe(t,s[n],null);a&&(i[s[n]]=a)}if(t.hasOwnProperty("extend")){for(var h in t.extend)if(!!t.extend.hasOwnProperty(h)){var o=t.extend[h];h==="data"&&i.hasOwnProperty("data")&&typeof o=="object"?i.data.merge(o):h!=="sys"&&(i[h]=o)}}return i},getKey:function(e,t){if(e||(e="default"),typeof t=="function")return e;if(t instanceof ch?e=t.sys.settings.key:typeof t=="object"&&t.hasOwnProperty("key")&&(e=t.key),this.keys.hasOwnProperty(e))throw new Error("Cannot add a Scene with duplicate key: "+e);return e},getScenes:function(e,t){e===void 0&&(e=!0),t===void 0&&(t=!1);for(var i=[],r=this.scenes,s=0;s<r.length;s++){var n=r[s];n&&(!e||e&&n.sys.isActive())&&i.push(n)}return t?i.reverse():i},getScene:function(e){if(typeof e=="string"){if(this.keys[e])return this.keys[e]}else for(var t=0;t<this.scenes.length;t++)if(e===this.scenes[t])return e;return null},isActive:function(e){var t=this.getScene(e);return t?t.sys.isActive():null},isPaused:function(e){var t=this.getScene(e);return t?t.sys.isPaused():null},isVisible:function(e){var t=this.getScene(e);return t?t.sys.isVisible():null},isSleeping:function(e){var t=this.getScene(e);return t?t.sys.isSleeping():null},pause:function(e,t){var i=this.getScene(e);return i&&i.sys.pause(t),this},resume:function(e,t){var i=this.getScene(e);return i&&i.sys.resume(t),this},sleep:function(e,t){var i=this.getScene(e);return i&&!i.sys.isTransitioning()&&i.sys.sleep(t),this},wake:function(e,t){var i=this.getScene(e);return i&&i.sys.wake(t),this},run:function(e,t){var i=this.getScene(e);if(!i){for(var r=0;r<this._pending.length;r++)if(this._pending[r].key===e){this.queueOp("start",e,t);break}return this}i.sys.isSleeping()?i.sys.wake(t):i.sys.isPaused()?i.sys.resume(t):this.start(e,t)},start:function(e,t){if(!this.isBooted)return this._data[e]={autoStart:!0,data:t},this;var i=this.getScene(e);if(!i)return console.warn("Scene not found for key: "+e),this;var r=i.sys;if(r.isActive()||r.isPaused())r.shutdown(),r.sceneUpdate=Iu,r.start(t);else{r.sceneUpdate=Iu,r.start(t);var s;if(r.load&&(s=r.load),s&&r.settings.hasOwnProperty("pack")&&(s.reset(),s.addPack({payload:r.settings.pack})))return r.settings.status=mi.LOADING,s.once(AG.COMPLETE,this.payloadComplete,this),s.start(),this}return this.bootScene(i),this},stop:function(e,t){var i=this.getScene(e);return i&&!i.sys.isTransitioning()&&i.sys.shutdown(t),this},switch:function(e,t){var i=this.getScene(e),r=this.getScene(t);return i&&r&&i!==r&&(this.sleep(e),this.isSleeping(t)?this.wake(t):this.start(t)),this},getAt:function(e){return this.scenes[e]},getIndex:function(e){var t=this.getScene(e);return this.scenes.indexOf(t)},bringToTop:function(e){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t!==-1&&t<this.scenes.length){var i=this.getScene(e);this.scenes.splice(t,1),this.scenes.push(i)}}return this},sendToBack:function(e){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t!==-1&&t>0){var i=this.getScene(e);this.scenes.splice(t,1),this.scenes.unshift(i)}}return this},moveDown:function(e){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t>0){var i=t-1,r=this.getScene(e),s=this.getAt(i);this.scenes[t]=s,this.scenes[i]=r}}return this},moveUp:function(e){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:e,keyB:null});else{var t=this.getIndex(e);if(t<this.scenes.length-1){var i=t+1,r=this.getScene(e),s=this.getAt(i);this.scenes[t]=s,this.scenes[i]=r}}return this},moveAbove:function(e,t){if(e===t)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:e,keyB:t});else{var i=this.getIndex(e),r=this.getIndex(t);if(i!==-1&&r!==-1){var s=this.getAt(r);this.scenes.splice(r,1),this.scenes.splice(i+1,0,s)}}return this},moveBelow:function(e,t){if(e===t)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:e,keyB:t});else{var i=this.getIndex(e),r=this.getIndex(t);if(i!==-1&&r!==-1){var s=this.getAt(r);this.scenes.splice(r,1),i===0?this.scenes.unshift(s):this.scenes.splice(i,0,s)}}return this},queueOp:function(e,t,i){return this._queue.push({op:e,keyA:t,keyB:i}),this},swapPosition:function(e,t){if(e===t)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:e,keyB:t});else{var i=this.getIndex(e),r=this.getIndex(t);if(i!==r&&i!==-1&&r!==-1){var s=this.getAt(i);this.scenes[i]=this.scenes[r],this.scenes[r]=s}}return this},dump:function(){for(var e=[],t=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var r=this.scenes[i].sys,s=r.settings.visible&&(r.settings.status===mi.RUNNING||r.settings.status===mi.PAUSED)?"[*] ":"[-] ";s+=r.settings.key+" ("+t[r.settings.status]+")",e.push(s)}console.log(e.join(`
`))},destroy:function(){for(var e=0;e<this.scenes.length;e++){var t=this.scenes[e].sys;t.destroy()}this.update=Iu,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});PG.exports=_xe});var Hn=l((S8e,bG)=>{var wxe=C(),Wn=Le(),Cxe=ze(),MG=new wxe({initialize:function(t,i,r,s,n,a,h){this.texture=t,this.name=i,this.source=t.source[r],this.sourceIndex=r,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(a,h,s,n)},setSize:function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=0),this.cutX=i,this.cutY=r,this.cutWidth=e,this.cutHeight=t,this.width=e,this.height=t,this.halfWidth=Math.floor(e*.5),this.halfHeight=Math.floor(t*.5),this.centerX=Math.floor(e/2),this.centerY=Math.floor(t/2);var s=this.data,n=s.cut;n.x=i,n.y=r,n.w=e,n.h=t,n.r=i+e,n.b=r+t,s.sourceSize.w=e,s.sourceSize.h=t,s.spriteSourceSize.w=e,s.spriteSourceSize.h=t,s.radius=.5*Math.sqrt(e*e+t*t);var a=s.drawImage;return a.x=i,a.y=r,a.width=e,a.height=t,this.updateUVs()},setTrim:function(e,t,i,r,s,n){var a=this.data,h=a.spriteSourceSize;return a.trim=!0,a.sourceSize.w=e,a.sourceSize.h=t,h.x=i,h.y=r,h.w=s,h.h=n,h.r=i+s,h.b=r+n,this.x=i,this.y=r,this.width=s,this.height=n,this.halfWidth=s*.5,this.halfHeight=n*.5,this.centerX=Math.floor(s/2),this.centerY=Math.floor(n/2),this.updateUVs()},setCropUVs:function(e,t,i,r,s,n,a){var h=this.cutX,o=this.cutY,u=this.cutWidth,f=this.cutHeight,d=this.realWidth,v=this.realHeight;t=Wn(t,0,d),i=Wn(i,0,v),r=Wn(r,0,d-t),s=Wn(s,0,v-i);var c=h+t,p=o+i,m=r,x=s,g=this.data;if(g.trim){var y=g.spriteSourceSize;r=Wn(r,0,u-t),s=Wn(s,0,f-i);var T=t+r,S=i+s,E=!(y.r<t||y.b<i||y.x>T||y.y>S);if(E){var _=Math.max(y.x,t),w=Math.max(y.y,i),R=Math.min(y.r,T)-_,q=Math.min(y.b,S)-w;m=R,x=q,n?c=h+(u-(_-y.x)-R):c=h+(_-y.x),a?p=o+(f-(w-y.y)-q):p=o+(w-y.y),t=_,i=w,r=R,s=q}else c=0,p=0,m=0,x=0}else n&&(c=h+(u-t-r)),a&&(p=o+(f-i-s));var A=this.source.width,P=this.source.height;return e.u0=Math.max(0,c/A),e.v0=Math.max(0,p/P),e.u1=Math.min(1,(c+m)/A),e.v1=Math.min(1,(p+x)/P),e.x=t,e.y=i,e.cx=c,e.cy=p,e.cw=m,e.ch=x,e.width=r,e.height=s,e.flipX=n,e.flipY=a,e},updateCropUVs:function(e,t,i){return this.setCropUVs(e,e.x,e.y,e.width,e.height,t,i)},setUVs:function(e,t,i,r,s,n){var a=this.data.drawImage;return a.width=e,a.height=t,this.u0=i,this.v0=r,this.u1=s,this.v1=n,this},updateUVs:function(){var e=this.cutX,t=this.cutY,i=this.cutWidth,r=this.cutHeight,s=this.data.drawImage;s.width=i,s.height=r;var n=this.source.width,a=this.source.height;return this.u0=e/n,this.v0=t/a,this.u1=(e+i)/n,this.v1=(t+r)/a,this},updateUVsInverted:function(){var e=this.source.width,t=this.source.height;return this.u0=(this.cutX+this.cutHeight)/e,this.v0=this.cutY/t,this.u1=this.cutX/e,this.v1=(this.cutY+this.cutWidth)/t,this},clone:function(){var e=new MG(this.texture,this.name,this.sourceIndex);return e.cutX=this.cutX,e.cutY=this.cutY,e.cutWidth=this.cutWidth,e.cutHeight=this.cutHeight,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.halfWidth=this.halfWidth,e.halfHeight=this.halfHeight,e.centerX=this.centerX,e.centerY=this.centerY,e.rotated=this.rotated,e.data=Cxe(!0,e.data,this.data),e.updateUVs(),e},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});bG.exports=MG});var Gp=l((_8e,LG)=>{var Rxe=bt(),qxe=C(),Axe=$a(),Pxe=sd(),Mxe=new qxe({initialize:function(t,i,r,s,n){n===void 0&&(n=!1);var a=t.manager.game;this.renderer=a.renderer,this.texture=t,this.source=i,this.image=i,this.compressionAlgorithm=null,this.resolution=1,this.width=r||i.naturalWidth||i.videoWidth||i.width||0,this.height=s||i.naturalHeight||i.videoHeight||i.height||0,this.scaleMode=Pxe.DEFAULT,this.isCanvas=i instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&i instanceof HTMLVideoElement,this.isRenderTexture=i.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&i instanceof WebGLTexture,this.isPowerOf2=Axe(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=n,this.init(a)},init:function(e){var t=this.renderer;t&&(t.gl?this.isCanvas?this.glTexture=t.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=t.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=t.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=t.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),e.config.antialias||this.setFilter(1)},setFilter:function(e){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,e),this.scaleMode=e},setFlipY:function(e){return e===void 0&&(e=!0),this.flipY=e,this},update:function(){var e=this.renderer.gl;e&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):e&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&Rxe.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});LG.exports=Mxe});var Nu=l((w8e,FG)=>{var bxe=Jt(),Lxe=C(),Oxe=Hn(),OG=Gp(),Bp='Texture "%s" has no frame "%s"',Fxe=new Lxe({initialize:function(t,i,r,s,n){Array.isArray(r)||(r=[r]),this.manager=t,this.key=i,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var a=0;a<r.length;a++)this.source.push(new OG(this,r[a],s,n))},add:function(e,t,i,r,s,n){if(this.has(e))return null;var a=new Oxe(this,e,t,i,r,s,n);return this.frames[e]=a,this.firstFrame==="__BASE"&&(this.firstFrame=e),this.frameTotal++,a},remove:function(e){if(this.has(e)){var t=this.get(e);return t.destroy(),delete this.frames[e],!0}return!1},has:function(e){return this.frames[e]},get:function(e){e||(e=this.firstFrame);var t=this.frames[e];return t||(console.warn(Bp,this.key,e),t=this.frames[this.firstFrame]),t},getTextureSourceIndex:function(e){for(var t=0;t<this.source.length;t++)if(this.source[t]===e)return t;return-1},getFramesFromTextureSource:function(e,t){t===void 0&&(t=!1);var i=[];for(var r in this.frames)if(!(r==="__BASE"&&!t)){var s=this.frames[r];s.sourceIndex===e&&i.push(s)}return i},getFrameNames:function(e){e===void 0&&(e=!1);var t=Object.keys(this.frames);if(!e){var i=t.indexOf("__BASE");i!==-1&&t.splice(i,1)}return t},getSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var t=this.frames[e];return t?t.source.image:(console.warn(Bp,this.key,e),this.frames.__BASE.source.image)},getDataSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var t=this.frames[e],i;return t?i=t.sourceIndex:(console.warn(Bp,this.key,e),i=this.frames.__BASE.sourceIndex),this.dataSource[i].image},setDataSource:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=this.source[t];this.dataSource.push(new OG(this,e[t],i.width,i.height))}},setFilter:function(e){var t;for(t=0;t<this.source.length;t++)this.source[t].setFilter(e);for(t=0;t<this.dataSource.length;t++)this.dataSource[t].setFilter(e)},destroy:function(){var e;for(e=0;e<this.source.length;e++)this.source[e].destroy();for(e=0;e<this.dataSource.length;e++)this.dataSource[e].destroy();for(var t in this.frames){var i=this.frames[t];i.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var r=this.manager.game.renderer;r&&r.type===bxe.WEBGL&&r.resetTextures(!0),this.manager=null}});FG.exports=Fxe});var kp=l((C8e,IG)=>{var Dxe=C(),os=Le(),DG=di(),Ixe=Jt(),Nxe=$a(),Up=Nu(),Gxe=new Dxe({Extends:Up,initialize:function(t,i,r,s,n){Up.call(this,t,i,r,s,n),this.add("__BASE",0,0,0,s,n),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=s,this.height=n,this.imageData=this.context.getImageData(0,0,s,n),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===Ixe.WEBGL&&this.refresh(),this},draw:function(e,t,i){return this.context.drawImage(i,e,t),this.update()},drawFrame:function(e,t,i,r){i===void 0&&(i=0),r===void 0&&(r=0);var s=this.manager.getFrame(e,t);if(s){var n=s.canvasData,a=s.cutWidth,h=s.cutHeight,o=s.source.resolution;return this.context.drawImage(s.source.image,n.x,n.y,a,h,i,r,a/o,h/o),this.update()}else return this},setPixel:function(e,t,i,r,s,n){n===void 0&&(n=255),e=Math.abs(Math.floor(e)),t=Math.abs(Math.floor(t));var a=this.getIndex(e,t);if(a>-1){var h=this.context.getImageData(e,t,1,1);h.data[0]=i,h.data[1]=r,h.data[2]=s,h.data[3]=n,this.context.putImageData(h,e,t)}return this},putData:function(e,t,i,r,s,n,a){return r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=e.width),a===void 0&&(a=e.height),this.context.putImageData(e,t,i,r,s,n,a),this},getData:function(e,t,i,r){e=os(Math.floor(e),0,this.width-1),t=os(Math.floor(t),0,this.height-1),i=os(i,1,this.width-e),r=os(r,1,this.height-t);var s=this.context.getImageData(e,t,i,r);return s},getPixel:function(e,t,i){i||(i=new DG);var r=this.getIndex(e,t);if(r>-1){var s=this.data,n=s[r+0],a=s[r+1],h=s[r+2],o=s[r+3];i.setTo(n,a,h,o)}return i},getPixels:function(e,t,i,r){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.width),r===void 0&&(r=i),e=Math.abs(Math.round(e)),t=Math.abs(Math.round(t));for(var s=os(e,0,this.width),n=os(e+i,0,this.width),a=os(t,0,this.height),h=os(t+r,0,this.height),o=new DG,u=[],f=a;f<h;f++){for(var d=[],v=s;v<n;v++)o=this.getPixel(v,f,o),d.push({x:v,y:f,color:o.color,alpha:o.alphaGL});u.push(d)}return u},getIndex:function(e,t){return e=Math.abs(Math.round(e)),t=Math.abs(Math.round(t)),e<this.width&&t<this.height?(e+t*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.width),r===void 0&&(r=this.height),this.context.clearRect(e,t,i,r),this.update()},setSize:function(e,t){return t===void 0&&(t=e),(e!==this.width||t!==this.height)&&(this.canvas.width=e,this.canvas.height=t,this._source.width=e,this._source.height=t,this._source.isPowerOf2=Nxe(e,t),this.frames.__BASE.setSize(e,t,0,0),this.width=e,this.height=t,this.refresh()),this},destroy:function(){Up.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});IG.exports=Gxe});var GG=l((R8e,NG)=>{var Bxe=function(e,t,i){if(!i.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);for(var s=i.getElementsByTagName("SubTexture"),n,a=0;a<s.length;a++){var h=s[a].attributes,o=h.name.value,u=parseInt(h.x.value,10),f=parseInt(h.y.value,10),d=parseInt(h.width.value,10),v=parseInt(h.height.value,10);if(n=e.add(o,t,u,f,d,v),h.frameX){var c=Math.abs(parseInt(h.frameX.value,10)),p=Math.abs(parseInt(h.frameY.value,10)),m=parseInt(h.frameWidth.value,10),x=parseInt(h.frameHeight.value,10);n.setTrim(d,v,c,p,m,x)}}return e};NG.exports=Bxe});var UG=l((q8e,BG)=>{var Uxe=function(e,t){var i=e.source[t];return e.add("__BASE",t,0,0,i.width,i.height),e};BG.exports=Uxe});var zG=l((A8e,kG)=>{var kxe=function(e,t){var i=e.source[t];return e.add("__BASE",t,0,0,i.width,i.height),e};kG.exports=kxe});var XG=l((P8e,YG)=>{var zxe=hs(),Yxe=function(e,t,i){if(!i.frames&&!i.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);for(var s=Array.isArray(i.textures)?i.textures[t].frames:i.frames,n,a=0;a<s.length;a++){var h=s[a];n=e.add(h.filename,t,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&n.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(n.rotated=!0,n.updateUVsInverted());var o=h.anchor||h.pivot;o&&(n.customPivot=!0,n.pivotX=o.x,n.pivotY=o.y),n.customData=zxe(h)}for(var u in i)u!=="frames"&&(Array.isArray(i[u])?e.customData[u]=i[u].slice(0):e.customData[u]=i[u]);return e};YG.exports=Yxe});var WG=l((M8e,VG)=>{var Xxe=hs(),Vxe=function(e,t,i){if(!i.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);var s=i.frames,n;for(var a in s)if(!!s.hasOwnProperty(a)){var h=s[a];n=e.add(a,t,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&n.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(n.rotated=!0,n.updateUVsInverted());var o=h.anchor||h.pivot;o&&(n.customPivot=!0,n.pivotX=o.x,n.pivotY=o.y),n.customData=Xxe(h)}for(var u in i)u!=="frames"&&(Array.isArray(i[u])?e.customData[u]=i[u].slice(0):e.customData[u]=i[u]);return e};VG.exports=Vxe});var KG=l((b8e,HG)=>{var Kn=z(),Wxe=function(e,t,i,r,s,n,a){var h=Kn(a,"frameWidth",null),o=Kn(a,"frameHeight",h);if(h===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var u=e.source[t];e.add("__BASE",t,0,0,u.width,u.height);var f=Kn(a,"startFrame",0),d=Kn(a,"endFrame",-1),v=Kn(a,"margin",0),c=Kn(a,"spacing",0),p=Math.floor((s-v+c)/(h+c)),m=Math.floor((n-v+c)/(o+c)),x=p*m;x===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",e.key),(f>x||f<-x)&&(f=0),f<0&&(f=x+f),d!==-1&&(x=f+(d+1));for(var g=v,y=v,T=0,S=0,E=0;E<x;E++){T=0,S=0;var _=g+h,w=y+o;_>s&&(T=_-s),w>n&&(S=w-n),e.add(E,t,i+g,r+y,h-T,o-S),g+=h+c,g+h>s&&(g=v,y+=o+c)}return e};HG.exports=Wxe});var JG=l((L8e,ZG)=>{var Zn=z(),Hxe=function(e,t,i){var r=Zn(i,"frameWidth",null),s=Zn(i,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var n=e.source[0];e.add("__BASE",0,0,0,n.width,n.height);var a=Zn(i,"startFrame",0),h=Zn(i,"endFrame",-1),o=Zn(i,"margin",0),u=Zn(i,"spacing",0),f=t.cutX,d=t.cutY,v=t.cutWidth,c=t.cutHeight,p=t.realWidth,m=t.realHeight,x=Math.floor((p-o+u)/(r+u)),g=Math.floor((m-o+u)/(s+u)),y=x*g,T=t.x,S=r-T,E=r-(p-v-T),_=t.y,w=s-_,R=s-(m-c-_);(a>y||a<-y)&&(a=0),a<0&&(a=y+a),h!==-1&&(y=a+(h+1));for(var q,A=o,P=o,L=0,b=t.sourceIndex,G=0;G<g;G++){for(var M=G===0,D=G===g-1,I=0;I<x;I++){var F=I===0,O=I===x-1;if(q=e.add(L,b,f+A,d+P,r,s),F||M||O||D){var K=F?T:0,H=M?_:0,Y=0,ee=0;F&&(Y+=r-S),O&&(Y+=r-E),M&&(ee+=s-w),D&&(ee+=s-R);var U=r-Y,J=s-ee;q.cutWidth=U,q.cutHeight=J,q.setTrim(r,s,K,H,U,J)}A+=u,F?A+=S:O?A+=E:A+=r,L++}A=o,P+=u,M?P+=w:D?P+=R:P+=s}return e};ZG.exports=Hxe});var eB=l((O8e,jG)=>{var $G=0,QG=function(e,t,i,r){var s=$G-r.y-r.height;e.add(i,t,r.x,s,r.width,r.height)},Kxe=function(e,t,i){var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height),$G=r.height;for(var s=i.split(`
`),n=/^[ ]*(- )*(\w+)+[: ]+(.*)/,a="",h="",o={x:0,y:0,width:0,height:0},u=0;u<s.length;u++){var f=s[u].match(n);if(!!f){var d=f[1]==="- ",v=f[2],c=f[3];if(d&&(h!==a&&(QG(e,t,h,o),a=h),o={x:0,y:0,width:0,height:0}),v==="name"){h=c;continue}switch(v){case"x":case"y":case"width":case"height":o[v]=parseInt(c,10);break}}}return h!==a&&QG(e,t,h,o),e};jG.exports=Kxe});var zp=l((F8e,tB)=>{tB.exports={AtlasXML:GG(),Canvas:UG(),Image:zG(),JSONArray:XG(),JSONHash:WG(),SpriteSheet:KG(),SpriteSheetFromAtlas:JG(),UnityYAML:eB()}});var Yp=l((D8e,hB)=>{var Jn=bt(),iB=kp(),Zxe=C(),Jxe=di(),Qxe=Jt(),rB=ue(),je=Dn(),sB=Ye(),$xe=Qc(),nB=he(),Di=zp(),aB=Nu(),jxe=new Zxe({Extends:rB,initialize:function(t){rB.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=Jn.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(sB.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(je.LOAD,this.updatePending,this),this.on(je.ERROR,this.updatePending,this);var e=this.game.config;this.addBase64("__DEFAULT",e.defaultImage),this.addBase64("__MISSING",e.missingImage),this.addBase64("__WHITE",e.whiteImage),this.game.events.once(sB.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(je.LOAD),this.off(je.ERROR),this.emit(je.READY))},checkKey:function(e){return this.exists(e)?(console.error("Texture key already in use: "+e),!1):!0},remove:function(e){if(typeof e=="string")if(this.exists(e))e=this.get(e);else return console.warn("No texture found matching key: "+e),this;return this.list.hasOwnProperty(e.key)&&(e.destroy(),this.emit(je.REMOVE,e.key)),this},removeKey:function(e){return this.list.hasOwnProperty(e)&&delete this.list[e],this},addBase64:function(e,t){if(this.checkKey(e)){var i=this,r=new Image;r.onerror=function(){i.emit(je.ERROR,e)},r.onload=function(){var s=i.create(e,r);Di.Image(s,0),i.emit(je.ADD,e,s),i.emit(je.LOAD,e,s)},r.src=t}return this},getBase64:function(e,t,i,r){i===void 0&&(i="image/png"),r===void 0&&(r=.92);var s="",n=this.getFrame(e,t);if(n&&(n.source.isRenderTexture||n.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(n){var a=n.canvasData,h=Jn.create2D(this,a.width,a.height),o=h.getContext("2d");o.drawImage(n.source.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),s=h.toDataURL(i,r),Jn.remove(h)}return s},addImage:function(e,t,i){var r=null;return this.checkKey(e)&&(r=this.create(e,t),Di.Image(r,0),i&&r.setDataSource(i),this.emit(je.ADD,e,r)),r},addGLTexture:function(e,t,i,r){var s=null;return this.checkKey(e)&&(i===void 0&&(i=t.width),r===void 0&&(r=t.height),s=this.create(e,t,i,r),s.add("__BASE",0,0,0,i,r),this.emit(je.ADD,e,s)),s},addRenderTexture:function(e,t){var i=null;return this.checkKey(e)&&(i=this.create(e,t),i.add("__BASE",0,0,0,t.width,t.height),this.emit(je.ADD,e,i)),i},generate:function(e,t){if(this.checkKey(e)){var i=Jn.create(this,1,1);return t.canvas=i,$xe(t),this.addCanvas(e,i)}else return null},createCanvas:function(e,t,i){if(t===void 0&&(t=256),i===void 0&&(i=256),this.checkKey(e)){var r=Jn.create(this,t,i,Qxe.CANVAS,!0);return this.addCanvas(e,r)}return null},addCanvas:function(e,t,i){i===void 0&&(i=!1);var r=null;return i?r=new iB(this,e,t,t.width,t.height):this.checkKey(e)&&(r=new iB(this,e,t,t.width,t.height),this.list[e]=r,this.emit(je.ADD,e,r)),r},addAtlas:function(e,t,i,r){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(e,t,i,r):this.addAtlasJSONHash(e,t,i,r)},addAtlasJSONArray:function(e,t,i,r){var s=null;if(this.checkKey(e)){if(s=this.create(e,t),Array.isArray(i))for(var n=i.length===1,a=0;a<s.source.length;a++){var h=n?i[0]:i[a];Di.JSONArray(s,a,h)}else Di.JSONArray(s,0,i);r&&s.setDataSource(r),this.emit(je.ADD,e,s)}return s},addAtlasJSONHash:function(e,t,i,r){var s=null;if(this.checkKey(e)){if(s=this.create(e,t),Array.isArray(i))for(var n=0;n<i.length;n++)Di.JSONHash(s,n,i[n]);else Di.JSONHash(s,0,i);r&&s.setDataSource(r),this.emit(je.ADD,e,s)}return s},addAtlasXML:function(e,t,i,r){var s=null;return this.checkKey(e)&&(s=this.create(e,t),Di.AtlasXML(s,0,i),r&&s.setDataSource(r),this.emit(je.ADD,e,s)),s},addUnityAtlas:function(e,t,i,r){var s=null;return this.checkKey(e)&&(s=this.create(e,t),Di.UnityYAML(s,0,i),r&&s.setDataSource(r),this.emit(je.ADD,e,s)),s},addSpriteSheet:function(e,t,i){var r=null;if(this.checkKey(e)){r=this.create(e,t);var s=r.source[0].width,n=r.source[0].height;Di.SpriteSheet(r,0,0,0,s,n,i),this.emit(je.ADD,e,r)}return r},addSpriteSheetFromAtlas:function(e,t){if(!this.checkKey(e))return null;var i=nB(t,"atlas",null),r=nB(t,"frame",null);if(!(!i||!r)){var s=this.get(i),n=s.get(r);if(n){var a=this.create(e,n.source.image);return n.trimmed?Di.SpriteSheetFromAtlas(a,n,t):Di.SpriteSheet(a,0,n.cutX,n.cutY,n.cutWidth,n.cutHeight,t),this.emit(je.ADD,e,a),a}}},create:function(e,t,i,r){var s=null;return this.checkKey(e)&&(s=new aB(this,e,t,i,r),this.list[e]=s),s},exists:function(e){return this.list.hasOwnProperty(e)},get:function(e){return e===void 0&&(e="__DEFAULT"),this.list[e]?this.list[e]:e instanceof aB?e:this.list.__MISSING},cloneFrame:function(e,t){if(this.list[e])return this.list[e].get(t).clone()},getFrame:function(e,t){if(this.list[e])return this.list[e].get(t)},getTextureKeys:function(){var e=[];for(var t in this.list)t!=="__DEFAULT"&&t!=="__MISSING"&&e.push(t);return e},getPixel:function(e,t,i,r){var s=this.getFrame(i,r);if(s){e-=s.x,t-=s.y;var n=s.data.cut;if(e+=n.x,t+=n.y,e>=n.x&&e<n.r&&t>=n.y&&t<n.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(s.source.image,e,t,1,1,0,0,1,1);var h=a.getImageData(0,0,1,1);return new Jxe(h.data[0],h.data[1],h.data[2],h.data[3])}}return null},getPixelAlpha:function(e,t,i,r){var s=this.getFrame(i,r);if(s){e-=s.x,t-=s.y;var n=s.data.cut;if(e+=n.x,t+=n.y,e>=n.x&&e<n.r&&t>=n.y&&t<n.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(s.source.image,e,t,1,1,0,0,1,1);var h=a.getImageData(0,0,1,1);return h.data[3]}}return null},setTexture:function(e,t,i){return this.list[t]&&(e.texture=this.list[t],e.frame=e.texture.get(i)),e},renameTexture:function(e,t){var i=this.get(e);return i&&e!==t?(i.key=t,this.list[t]=i,delete this.list[e],!0):!1},each:function(e,t){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var s in this.list)i[0]=this.list[s],e.apply(t,i)},destroy:function(){for(var e in this.list)this.list[e].destroy();this.list={},this.game=null,Jn.remove(this._tempCanvas)}});hB.exports=jxe});var uB=l((I8e,oB)=>{oB.exports="complete"});var fB=l((N8e,lB)=>{lB.exports="decoded"});var vB=l((G8e,dB)=>{dB.exports="decodedall"});var pB=l((B8e,cB)=>{cB.exports="destroy"});var gB=l((U8e,mB)=>{mB.exports="detune"});var yB=l((k8e,xB)=>{xB.exports="detune"});var EB=l((z8e,TB)=>{TB.exports="mute"});var _B=l((Y8e,SB)=>{SB.exports="rate"});var CB=l((X8e,wB)=>{wB.exports="volume"});var qB=l((V8e,RB)=>{RB.exports="loop"});var PB=l((W8e,AB)=>{AB.exports="looped"});var bB=l((H8e,MB)=>{MB.exports="mute"});var OB=l((K8e,LB)=>{LB.exports="pan"});var DB=l((Z8e,FB)=>{FB.exports="pauseall"});var NB=l((J8e,IB)=>{IB.exports="pause"});var BB=l((Q8e,GB)=>{GB.exports="play"});var kB=l(($8e,UB)=>{UB.exports="rate"});var YB=l((j8e,zB)=>{zB.exports="resumeall"});var VB=l((e7e,XB)=>{XB.exports="resume"});var HB=l((t7e,WB)=>{WB.exports="seek"});var ZB=l((i7e,KB)=>{KB.exports="stopall"});var QB=l((r7e,JB)=>{JB.exports="stop"});var jB=l((s7e,$B)=>{$B.exports="unlocked"});var tU=l((n7e,eU)=>{eU.exports="volume"});var us=l((a7e,iU)=>{iU.exports={COMPLETE:uB(),DECODED:fB(),DECODED_ALL:vB(),DESTROY:pB(),DETUNE:gB(),GLOBAL_DETUNE:yB(),GLOBAL_MUTE:EB(),GLOBAL_RATE:_B(),GLOBAL_VOLUME:CB(),LOOP:qB(),LOOPED:PB(),MUTE:bB(),PAN:OB(),PAUSE_ALL:DB(),PAUSE:NB(),PLAY:BB(),RATE:kB(),RESUME_ALL:YB(),RESUME:VB(),SEEK:HB(),STOP_ALL:ZB(),STOP:QB(),UNLOCKED:jB(),VOLUME:tU()}});var ls=l((h7e,rU)=>{var eye=function(e,t,i,r){var s=e.length;if(t<0||t>s||t>=i||i>s||t+i>s){if(r)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};rU.exports=eye});var Gu=l((o7e,sU)=>{var tye=ls(),iye=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=e.length);var n=[];if(tye(e,r,s))for(var a=r;a<s;a++){var h=e[a];(!t||t&&i===void 0&&h.hasOwnProperty(t)||t&&i!==void 0&&h[t]===i)&&n.push(h)}return n};sU.exports=iye});var Xp=l((u7e,nU)=>{var rye=ls(),sye=function(e,t,i,r,s){if(r===void 0&&(r=0),s===void 0&&(s=e.length),rye(e,r,s))for(var n=r;n<s;n++){var a=e[n];if(!t||t&&i===void 0&&a.hasOwnProperty(t)||t&&i!==void 0&&a[t]===i)return a}return null};nU.exports=sye});var Uu=l((l7e,hU)=>{var nye=C(),aye=hs(),aU=ue(),fs=us(),an=Ye(),Bu=B(),hye=Gu(),oye=Xp(),uye=new nye({Extends:aU,initialize:function(t){aU.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(an.BLUR,this.onGameBlur,this),t.events.on(an.FOCUS,this.onGameFocus,this),t.events.on(an.PRE_STEP,this.update,this),t.events.once(an.DESTROY,this.destroy,this)},add:Bu,addAudioSprite:function(e,t){t===void 0&&(t={});var i=this.add(e,t);i.spritemap=this.jsonCache.get(e).spritemap;for(var r in i.spritemap)if(!!i.spritemap.hasOwnProperty(r)){var s=aye(t),n=i.spritemap[r];s.loop=n.hasOwnProperty("loop")?n.loop:!1,i.addMarker({name:r,start:n.start,duration:n.end-n.start,config:s})}return i},get:function(e){return oye(this.sounds,"key",e)},getAll:function(e){return hye(this.sounds,"key",e)},play:function(e,t){var i=this.add(e);return i.once(fs.COMPLETE,i.destroy,i),t?t.name?(i.addMarker(t),i.play(t.name)):i.play(t):i.play()},playAudioSprite:function(e,t,i){var r=this.addAudioSprite(e);return r.once(fs.COMPLETE,r.destroy,r),r.play(t,i)},remove:function(e){var t=this.sounds.indexOf(e);return t!==-1?(e.destroy(),this.sounds.splice(t,1),!0):!1},removeAll:function(){this.sounds.forEach(function(e){e.destroy()}),this.sounds.length=0},removeByKey:function(e){for(var t=0,i=this.sounds.length-1;i>=0;i--){var r=this.sounds[i];r.key===e&&(r.destroy(),this.sounds.splice(i,1),t++)}return t},pauseAll:function(){this.forEachActiveSound(function(e){e.pause()}),this.emit(fs.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(e){e.resume()}),this.emit(fs.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(e){e.stop()}),this.emit(fs.STOP_ALL,this)},stopByKey:function(e){var t=0;return this.getAll(e).forEach(function(i){i.stop()&&t++}),t},unlock:Bu,onBlur:Bu,onFocus:Bu,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(e,t){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(fs.UNLOCKED,this));for(var i=this.sounds.length-1;i>=0;i--)this.sounds[i].pendingRemove&&this.sounds.splice(i,1);this.sounds.forEach(function(r){r.update(e,t)})},destroy:function(){this.game.events.off(an.BLUR,this.onGameBlur,this),this.game.events.off(an.FOCUS,this.onGameFocus,this),this.game.events.off(an.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(e,t){var i=this;this.sounds.forEach(function(r,s){r&&!r.pendingRemove&&e.call(t||i,r,s,i.sounds)})},setRate:function(e){return this.rate=e,this},rate:{get:function(){return this._rate},set:function(e){this._rate=e,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(fs.GLOBAL_RATE,this,e)}},setDetune:function(e){return this.detune=e,this},detune:{get:function(){return this._detune},set:function(e){this._detune=e,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(fs.GLOBAL_DETUNE,this,e)}}});hU.exports=uye});var zu=l((f7e,uU)=>{var lye=C(),oU=ue(),fye=us(),ku=ze(),dye=B(),vye=new lye({Extends:oU,initialize:function(t,i,r){oU.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=ku(this.config,r),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(e){return!e||!e.name||typeof e.name!="string"?!1:this.markers[e.name]?(console.error("addMarker "+e.name+" already exists in Sound"),!1):(e=ku(!0,{name:"",start:0,duration:this.totalDuration-(e.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},e),this.markers[e.name]=e,!0)},updateMarker:function(e){return!e||!e.name||typeof e.name!="string"?!1:this.markers[e.name]?(this.markers[e.name]=ku(!0,this.markers[e.name],e),!0):(console.warn("Audio Marker: "+e.name+" missing in Sound: "+this.key),!1)},removeMarker:function(e){var t=this.markers[e];return t?(this.markers[e]=null,t):null},play:function(e,t){if(e===void 0&&(e=""),typeof e=="object"&&(t=e,e=""),typeof e!="string")return!1;if(!e)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[e])return console.warn("Marker: "+e+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[e],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=ku(this.currentConfig,t),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:dye,calculateRate:function(){var e=1.0005777895065548,t=this.currentConfig.detune+this.manager.detune,i=Math.pow(e,t);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function(){this.pendingRemove||(this.emit(fye.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});uU.exports=vye});var fU=l((d7e,lU)=>{var Rr=zu(),cye=C(),Ft=us(),pye=Le(),mye=new cye({Extends:Rr,initialize:function(t,i,r){if(r===void 0&&(r={}),this.tags=t.game.cache.audio.get(i),!this.tags)throw new Error('There is no audio asset with key "'+i+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,Rr.call(this,t,i,r)},play:function(e,t){return this.manager.isLocked(this,"play",[e,t])||!Rr.prototype.play.call(this,e,t)||!this.pickAndPlayAudioTag()?!1:(this.emit(Ft.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!Rr.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(Ft.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!Rr.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(Ft.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!Rr.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(Ft.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var e=this.currentConfig.seek,t=this.currentConfig.delay,i=(this.currentMarker?this.currentMarker.start:0)+e;return this.previousTime=i,this.audio.currentTime=i,this.applyConfig(),t===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+t*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var e=0;e<this.tags.length;e++){var t=this.tags[e];if(t.dataset.used==="false")return t.dataset.used="true",this.audio=t,!0}if(!this.manager.override)return!1;var i=[];this.manager.forEachActiveSound(function(s){s.key===this.key&&s.audio&&i.push(s)},this),i.sort(function(s,n){return s.loop===n.loop?n.seek/n.duration-s.seek/s.duration:s.loop?1:-1});var r=i[0];return this.audio=r.audio,r.reset(),r.audio=null,r.startTime=0,r.previousTime=0,!0},playCatchPromise:function(){var e=this.audio.play();e&&e.catch(function(t){console.warn(t)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){Rr.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(e){if(!!this.isPlaying){if(this.startTime>0){this.startTime<e-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,e-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var t=this.currentMarker?this.currentMarker.start:0,i=t+this.duration,r=this.audio.currentTime;if(this.currentConfig.loop)r>=i-this.manager.loopEndOffset?(this.audio.currentTime=t+Math.max(0,r-i),r=this.audio.currentTime):r<t&&(this.audio.currentTime+=t,r=this.audio.currentTime),r<this.previousTime&&this.emit(Ft.LOOPED,this);else if(r>=i){this.reset(),this.stopAndReleaseAudioTag(),this.emit(Ft.COMPLETE,this);return}this.previousTime=r}},destroy:function(){Rr.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=pye(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){Rr.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(e){this.currentConfig.mute=e,!this.manager.isLocked(this,"mute",e)&&(this.updateMute(),this.emit(Ft.MUTE,this,e))}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.currentConfig.volume},set:function(e){this.currentConfig.volume=e,!this.manager.isLocked(this,"volume",e)&&(this.updateVolume(),this.emit(Ft.VOLUME,this,e))}},setVolume:function(e){return this.volume=e,this},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,!this.manager.isLocked(this,Ft.RATE,e)&&(this.calculateRate(),this.emit(Ft.RATE,this,e))}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,!this.manager.isLocked(this,Ft.DETUNE,e)&&(this.calculateRate(),this.emit(Ft.DETUNE,this,e))}},setDetune:function(e){return this.detune=e,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.isLocked(this,"seek",e)||this.startTime>0||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.isPlaying?(this.previousTime=e,this.audio.currentTime=e):this.isPaused&&(this.currentConfig.seek=e),this.emit(Ft.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,!this.manager.isLocked(this,"loop",e)&&(this.audio&&(this.audio.loop=e),this.emit(Ft.LOOP,this,e))}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.currentConfig.pan},set:function(e){this.currentConfig.pan=e,this.emit(Ft.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});lU.exports=mye});var vU=l((v7e,dU)=>{var Vp=Uu(),gye=C(),Wp=us(),xye=fU(),yye=new gye({Extends:Vp,initialize:function(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,Vp.call(this,t)},add:function(e,t){var i=new xye(this,e,t);return this.sounds.push(i),i},unlock:function(){this.locked=!1;var e=this;if(this.game.cache.audio.entries.each(function(s,n){for(var a=0;a<n.length;a++)if(n[a].dataset.locked==="true")return e.locked=!0,!1;return!0}),!!this.locked){var t=!1,i=function(){t=!0},r=function(){if(t){t=!1;return}document.body.removeEventListener("touchmove",i),document.body.removeEventListener("touchend",r);var s=[];if(e.game.cache.audio.entries.each(function(a,h){for(var o=0;o<h.length;o++){var u=h[o];u.dataset.locked==="true"&&s.push(u)}return!0}),s.length!==0){var n=s[s.length-1];n.oncanplaythrough=function(){n.oncanplaythrough=null,s.forEach(function(a){a.dataset.locked="false"}),e.unlocked=!0},s.forEach(function(a){a.load()})}};this.once(Wp.UNLOCKED,function(){for(this.forEachActiveSound(function(n){n.currentMarker===null&&n.duration===0&&(n.duration=n.tags[0].duration),n.totalDuration=n.tags[0].duration});this.lockedActionsQueue.length;){var s=this.lockedActionsQueue.shift();s.sound[s.prop].apply?s.sound[s.prop].apply(s.sound,s.value||[]):s.sound[s.prop]=s.value}},this),document.body.addEventListener("touchmove",i,!1),document.body.addEventListener("touchend",r,!1)}},onBlur:function(){this.forEachActiveSound(function(e){e.isPlaying&&(this.onBlurPausedSounds.push(e),e.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(e){e.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){Vp.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(e,t,i){return e.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:e,prop:t,value:i}),!0):!1},setMute:function(e){return this.mute=e,this},mute:{get:function(){return this._mute},set:function(e){this._mute=e,this.forEachActiveSound(function(t){t.updateMute()}),this.emit(Wp.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this._volume},set:function(e){this._volume=e,this.forEachActiveSound(function(t){t.updateVolume()}),this.emit(Wp.GLOBAL_VOLUME,this,e)}}});dU.exports=yye});var mU=l((c7e,pU)=>{var Tye=zu(),Eye=C(),cU=ue(),Sye=ze(),Qn=function(){return!1},_ye=function(){return null},hn=function(){return this},wye=new Eye({Extends:cU,initialize:function(t,i,r){r===void 0&&(r={}),cU.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=Sye({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},r),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:Qn,updateMarker:Qn,removeMarker:_ye,play:Qn,pause:Qn,resume:Qn,stop:Qn,destroy:function(){Tye.prototype.destroy.call(this)},setMute:hn,setVolume:hn,setRate:hn,setDetune:hn,setSeek:hn,setLoop:hn,setPan:hn});pU.exports=wye});var yU=l((p7e,xU)=>{var Yu=Uu(),Cye=C(),gU=ue(),Rye=mU(),ds=B(),qye=new Cye({Extends:gU,initialize:function(t){gU.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(e,t){var i=new Rye(this,e,t);return this.sounds.push(i),i},addAudioSprite:function(e,t){var i=this.add(e,t);return i.spritemap={},i},play:function(e,t){return!1},playAudioSprite:function(e,t,i){return!1},remove:function(e){return Yu.prototype.remove.call(this,e)},removeByKey:function(e){return Yu.prototype.removeByKey.call(this,e)},pauseAll:ds,resumeAll:ds,stopAll:ds,update:ds,setRate:ds,setDetune:ds,setMute:ds,setVolume:ds,forEachActiveSound:function(e,t){Yu.prototype.forEachActiveSound.call(this,e,t)},destroy:function(){Yu.prototype.destroy.call(this)}});xU.exports=qye});var Hp=l((m7e,EU)=>{var TU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mh=new Uint8Array(256);for(ph=0;ph<TU.length;ph++)mh[TU.charCodeAt(ph)]=ph;var ph,Aye=function(e){e=e.substr(e.indexOf(",")+1);var t=e.length,i=t*.75,r=0,s,n,a,h;e[t-1]==="="&&(i--,e[t-2]==="="&&i--);for(var o=new ArrayBuffer(i),u=new Uint8Array(o),f=0;f<t;f+=4)s=mh[e.charCodeAt(f)],n=mh[e.charCodeAt(f+1)],a=mh[e.charCodeAt(f+2)],h=mh[e.charCodeAt(f+3)],u[r++]=s<<2|n>>4,u[r++]=(n&15)<<4|a>>2,u[r++]=(a&3)<<6|h&63;return o};EU.exports=Aye});var _U=l((g7e,SU)=>{var tr=zu(),Pye=C(),ii=us(),Mye=new Pye({Extends:tr,initialize:function(t,i,r){if(r===void 0&&(r={}),this.audioBuffer=t.game.cache.audio.get(i),!this.audioBuffer)throw new Error('Audio key "'+i+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,tr.call(this,t,i,r)},play:function(e,t){return tr.prototype.play.call(this,e,t)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(ii.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!tr.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(ii.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!tr.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(ii.RESUME,this),!0)},stop:function(){return tr.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(ii.STOP,this),!0):!1},createAndStartBufferSource:function(){var e=this.currentConfig.seek,t=this.currentConfig.delay,i=this.manager.context.currentTime+t,r=(this.currentMarker?this.currentMarker.start:0)+e,s=this.duration-e;this.playTime=i-e,this.startTime=i,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,i),Math.max(0,r),Math.max(0,s)),this.resetConfig()},createAndStartLoopBufferSource:function(){var e=this.getLoopTime(),t=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=e,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,e),Math.max(0,t),Math.max(0,i))},createBufferSource:function(){var e=this,t=this.manager.context.createBufferSource();return t.buffer=this.audioBuffer,t.connect(this.muteNode),t.onended=function(i){i.target===e.source&&(e.currentConfig.loop?e.hasLooped=!0:e.hasEnded=!0)},t},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),tr.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,tr.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(ii.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(ii.LOOPED,this))},destroy:function(){tr.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){tr.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,e),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var e=0,t=0;t<this.rateUpdates.length;t++){var i=0;t<this.rateUpdates.length-1?i=this.rateUpdates[t+1].time:i=this.manager.context.currentTime-this.playTime,e+=(i-this.rateUpdates[t].time)*this.rateUpdates[t].rate}return e},getLoopTime:function(){for(var e=0,t=0;t<this.rateUpdates.length-1;t++)e+=(this.rateUpdates[t+1].time-this.rateUpdates[t].time)*this.rateUpdates[t].rate;var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-e)/i.rate},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,this.calculateRate(),this.emit(ii.RATE,this,e)}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,this.calculateRate(),this.emit(ii.DETUNE,this,e)}},setDetune:function(e){return this.detune=e,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(e){this.currentConfig.mute=e,this.muteNode.gain.setValueAtTime(e?0:1,0),this.emit(ii.MUTE,this,e)}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(e){this.currentConfig.volume=e,this.volumeNode.gain.setValueAtTime(e,0),this.emit(ii.VOLUME,this,e)}},setVolume:function(e){return this.volume=e,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.currentConfig.seek=e,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(ii.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),e&&this.createAndStartLoopBufferSource()),this.emit(ii.LOOP,this,e)}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(e){this.currentConfig.pan=e,this.pannerNode&&this.pannerNode.pan.setValueAtTime(e,this.manager.context.currentTime),this.emit(ii.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});SU.exports=Mye});var CU=l((x7e,wU)=>{var bye=Hp(),Xu=Uu(),Lye=C(),gh=us(),Oye=Ye(),Fye=_U(),Dye=new Lye({Extends:Xu,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),Xu.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(Oye.BOOT,this.unlock,this)},createAudioContext:function(e){var t=e.config.audio;if(t.context)return t.context.resume(),t.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(e){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=e,this.masterMuteNode=e.createGain(),this.masterVolumeNode=e.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(e.destination),this.destination=this.masterMuteNode,this},add:function(e,t){var i=new Fye(this,e,t);return this.sounds.push(i),i},decodeAudio:function(e,t){var i;Array.isArray(e)?i=e:i=[{key:e,data:t}];for(var r=this.game.cache.audio,s=i.length,n=0;n<i.length;n++){var a=i[n],h=a.key,o=a.data;typeof o=="string"&&(o=bye(o));var u=function(d,v){r.add(d,v),this.emit(gh.DECODED,d),s--,s===0&&this.emit(gh.DECODED_ALL)}.bind(this,h),f=function(d,v){console.error("Error decoding audio: "+d+" - ",v?v.message:""),s--,s===0&&this.emit(gh.DECODED_ALL)}.bind(this,h);this.context.decodeAudioData(o,u,f)}},unlock:function(){var e=this,t=document.body,i=function r(){if(e.context&&t){var s=t.removeEventListener;e.context.resume().then(function(){s("touchstart",r),s("touchend",r),s("click",r),s("keydown",r),e.unlocked=!0},function(){s("touchstart",r),s("touchend",r),s("click",r),s("keydown",r)})}};t&&(t.addEventListener("touchstart",i,!1),t.addEventListener("touchend",i,!1),t.addEventListener("click",i,!1),t.addEventListener("keydown",i,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var e=this.context;(e.state==="suspended"||e.state==="interrupted")&&!this.locked&&e.resume()},update:function(e,t){Xu.prototype.update.call(this,e,t);var i=this.context;i&&i.state==="interrupted"&&i.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var e=this;this.context.close().then(function(){e.context=null})}Xu.prototype.destroy.call(this)},setMute:function(e){return this.mute=e,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(e){this.masterMuteNode.gain.setValueAtTime(e?0:1,0),this.emit(gh.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(e){this.masterVolumeNode.gain.setValueAtTime(e,0),this.emit(gh.GLOBAL_VOLUME,this,e)}}});wU.exports=Dye});var qU=l((y7e,RU)=>{var Iye=vU(),Nye=yU(),Gye=CU(),Bye={create:function(e){var t=e.config.audio,i=e.device.audio;return t.noAudio||!i.webAudio&&!i.audioData?new Nye(e):i.webAudio&&!t.disableWebAudio?new Gye(e):new Iye(e)}};RU.exports=Bye});var PU=l((T7e,AU)=>{var Uye=function(e,t,i){return{instance:t,placementID:e,shown:!1,video:i}};AU.exports=Uye});var bU=l((E7e,MU)=>{var kye=function(e){return{score:e.getScore(),scoreFormatted:e.getFormattedScore(),timestamp:e.getTimestamp(),rank:e.getRank(),data:e.getExtraData(),playerName:e.getPlayer().getName(),playerPhotoURL:e.getPlayer().getPhoto(),playerID:e.getPlayer().getID()}};MU.exports=kye});var FU=l((S7e,OU)=>{var zye=C(),LU=ue(),Vu=bU(),Yye=new zye({Extends:LU,initialize:function(t,i){LU.call(this),this.plugin=t,this.ref=i,this.name=i.getName(),this.contextID=i.getContextID(),this.entryCount=0,this.playerScore=null,this.scores=[],this.getEntryCount()},getEntryCount:function(){var e=this;return this.ref.getEntryCountAsync().then(function(t){e.entryCount=t,e.emit("getentrycount",t,e.name)}).catch(function(t){console.warn(t)}),this},setScore:function(e,t){t===void 0&&(t=""),typeof t=="object"&&(t=JSON.stringify(t));var i=this;return this.ref.setScoreAsync(e,t).then(function(r){if(r){var s=Vu(r);i.playerScore=s,i.emit("setscore",s,i.name)}else i.emit("setscore",null,i.name)}).catch(function(r){console.warn(r)}),this},getPlayerScore:function(){var e=this;return this.ref.getPlayerEntryAsync().then(function(t){if(t){var i=Vu(t);e.playerScore=i,e.emit("getplayerscore",i,e.name)}else e.emit("getplayerscore",null,e.name)}).catch(function(t){console.warn(t)}),this},getScores:function(e,t){e===void 0&&(e=10),t===void 0&&(t=0);var i=this;return this.ref.getEntriesAsync(e,t).then(function(r){i.scores=[],r.forEach(function(s){i.scores.push(Vu(s))}),i.emit("getscores",i.scores,i.name)}).catch(function(r){console.warn(r)}),this},getConnectedScores:function(){var e=this;return this.ref.getConnectedPlayerEntriesAsync().then(function(t){e.scores=[],t.forEach(function(i){e.scores.push(Vu(i))}),e.emit("getconnectedscores",e.scores,e.name)}).catch(function(t){console.warn(t)}),this}});OU.exports=Yye});var IU=l((_7e,DU)=>{var $n=z(),Xye=function(e){return{title:$n(e,"title",""),productID:$n(e,"productID",""),description:$n(e,"description",""),imageURI:$n(e,"imageURI",""),price:$n(e,"price",""),priceCurrencyCode:$n(e,"priceCurrencyCode","")}};DU.exports=Xye});var GU=l((w7e,NU)=>{var jn=z(),Vye=function(e){return{developerPayload:jn(e,"developerPayload",""),paymentID:jn(e,"paymentID",""),productID:jn(e,"productID",""),purchaseTime:jn(e,"purchaseTime",""),purchaseToken:jn(e,"purchaseToken",""),signedRequest:jn(e,"signedRequest","")}};NU.exports=Vye});var YU=l((C7e,zU)=>{var BU=PU(),Wye=C(),Hye=Js(),UU=ue(),Kye=FU(),Zye=IU(),kU=GU(),Jye=new Wye({Extends:UU,initialize:function(t){UU.call(this),this.game=t,this.data=new Hye(this),this.on("setdata",this.setDataHandler,this),this.on("changedata",this.changeDataHandler,this),this.hasLoaded=!1,this.dataLocked=!1,this.supportedAPIs=[],this.entryPoint="",this.entryPointData=null,this.contextID=null,this.contextType=null,this.locale=null,this.platform=null,this.version=null,this.playerID=null,this.playerName=null,this.playerPhotoURL=null,this.playerCanSubscribeBot=!1,this.paymentsReady=!1,this.catalog=[],this.purchases=[],this.leaderboards={},this.ads=[]},setDataHandler:function(e,t,i){if(!this.dataLocked){var r={};r[t]=i;var s=this;FBInstant.player.setDataAsync(r).then(function(){s.emit("savedata",r)})}},changeDataHandler:function(e,t,i){if(!this.dataLocked){var r={};r[t]=i;var s=this;FBInstant.player.setDataAsync(r).then(function(){s.emit("savedata",r)})}},showLoadProgress:function(e){return e.load.on("progress",function(t){this.hasLoaded||FBInstant.setLoadingProgress(t*100)},this),e.load.on("complete",function(){this.hasLoaded||(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},this),this},gameStarted:function(){this.hasLoaded?this.gameStartedHandler():(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStartedHandler.bind(this)))},gameStartedHandler:function(){var e=FBInstant.getSupportedAPIs(),t={},i=function(s){return s[1].toUpperCase()};e.forEach(function(s){s=s.replace(/\../g,i),t[s]=!0}),this.supportedAPIs=t,this.getID(),this.getType(),this.getLocale(),this.getPlatform(),this.getSDKVersion(),this.getPlayerID(),this.getPlayerName(),this.getPlayerPhotoURL();var r=this;FBInstant.onPause(function(){r.emit("pause")}),FBInstant.getEntryPointAsync().then(function(s){r.entryPoint=s,r.entryPointData=FBInstant.getEntryPointData(),r.emit("startgame")}).catch(function(s){console.warn(s)}),this.supportedAPIs.paymentsPurchaseAsync&&FBInstant.payments.onReady(function(){r.paymentsReady=!0}).catch(function(s){console.warn(s)})},checkAPI:function(e){return!!this.supportedAPIs[e]},getID:function(){return!this.contextID&&this.supportedAPIs.contextGetID&&(this.contextID=FBInstant.context.getID()),this.contextID},getType:function(){return!this.contextType&&this.supportedAPIs.contextGetType&&(this.contextType=FBInstant.context.getType()),this.contextType},getLocale:function(){return!this.locale&&this.supportedAPIs.getLocale&&(this.locale=FBInstant.getLocale()),this.locale},getPlatform:function(){return!this.platform&&this.supportedAPIs.getPlatform&&(this.platform=FBInstant.getPlatform()),this.platform},getSDKVersion:function(){return!this.version&&this.supportedAPIs.getSDKVersion&&(this.version=FBInstant.getSDKVersion()),this.version},getPlayerID:function(){return!this.playerID&&this.supportedAPIs.playerGetID&&(this.playerID=FBInstant.player.getID()),this.playerID},getPlayerName:function(){return!this.playerName&&this.supportedAPIs.playerGetName&&(this.playerName=FBInstant.player.getName()),this.playerName},getPlayerPhotoURL:function(){return!this.playerPhotoURL&&this.supportedAPIs.playerGetPhoto&&(this.playerPhotoURL=FBInstant.player.getPhoto()),this.playerPhotoURL},loadPlayerPhoto:function(e,t){return this.playerPhotoURL&&(e.load.setCORS("anonymous"),e.load.image(t,this.playerPhotoURL),e.load.once("filecomplete-image-"+t,function(){this.emit("photocomplete",t)},this),e.load.start()),this},canSubscribeBot:function(){if(this.supportedAPIs.playerCanSubscribeBotAsync){var e=this;FBInstant.player.canSubscribeBotAsync().then(function(){e.playerCanSubscribeBot=!0,e.emit("cansubscribebot")}).catch(function(t){e.emit("cansubscribebotfail",t)})}else this.emit("cansubscribebotfail");return this},subscribeBot:function(){if(this.playerCanSubscribeBot){var e=this;FBInstant.player.subscribeBotAsync().then(function(){e.emit("subscribebot")}).catch(function(t){e.emit("subscribebotfail",t)})}else this.emit("subscribebotfail");return this},getData:function(e){if(!this.checkAPI("playerGetDataAsync"))return this;Array.isArray(e)||(e=[e]);var t=this;return FBInstant.player.getDataAsync(e).then(function(i){t.dataLocked=!0;for(var r in i)t.data.set(r,i[r]);t.dataLocked=!1,t.emit("getdata",i)}),this},saveData:function(e){if(!this.checkAPI("playerSetDataAsync"))return this;var t=this;return FBInstant.player.setDataAsync(e).then(function(){t.emit("savedata",e)}).catch(function(i){t.emit("savedatafail",i)}),this},flushData:function(){if(!this.checkAPI("playerFlushDataAsync"))return this;var e=this;return FBInstant.player.flushDataAsync().then(function(){e.emit("flushdata")}).catch(function(t){e.emit("flushdatafail",t)}),this},getStats:function(e){if(!this.checkAPI("playerGetStatsAsync"))return this;var t=this;return FBInstant.player.getStatsAsync(e).then(function(i){t.emit("getstats",i)}).catch(function(i){t.emit("getstatsfail",i)}),this},saveStats:function(e){if(!this.checkAPI("playerSetStatsAsync"))return this;var t={};for(var i in e)typeof e[i]=="number"&&(t[i]=e[i]);var r=this;return FBInstant.player.setStatsAsync(t).then(function(){r.emit("savestats",t)}).catch(function(s){r.emit("savestatsfail",s)}),this},incStats:function(e){if(!this.checkAPI("playerIncrementStatsAsync"))return this;var t={};for(var i in e)typeof e[i]=="number"&&(t[i]=e[i]);var r=this;return FBInstant.player.incrementStatsAsync(t).then(function(s){r.emit("incstats",s)}).catch(function(s){r.emit("incstatsfail",s)}),this},saveSession:function(e){if(!this.checkAPI("setSessionData"))return this;var t=JSON.stringify(e);return t.length<=1e3?FBInstant.setSessionData(e):console.warn("Session data too long. Max 1000 chars."),this},openShare:function(e,t,i,r){return this._share("SHARE",e,t,i,r)},openInvite:function(e,t,i,r){return this._share("INVITE",e,t,i,r)},openRequest:function(e,t,i,r){return this._share("REQUEST",e,t,i,r)},openChallenge:function(e,t,i,r){return this._share("CHALLENGE",e,t,i,r)},_share:function(e,t,i,r,s){if(!this.checkAPI("shareAsync"))return this;if(s===void 0&&(s={}),i)var n=this.game.textures.getBase64(i,r);var a={intent:e,image:n,text:t,data:s},h=this;return FBInstant.shareAsync(a).then(function(){h.emit("resume")}),this},isSizeBetween:function(e,t){return this.checkAPI("contextIsSizeBetween")?FBInstant.context.isSizeBetween(e,t):this},switchContext:function(e){if(!this.checkAPI("contextSwitchAsync"))return this;if(e!==this.contextID){var t=this;FBInstant.context.switchAsync(e).then(function(){t.contextID=FBInstant.context.getID(),t.emit("switch",t.contextID)}).catch(function(i){t.emit("switchfail",i)})}return this},chooseContext:function(e){if(!this.checkAPI("contextChooseAsync"))return this;var t=this;return FBInstant.context.chooseAsync(e).then(function(){t.contextID=FBInstant.context.getID(),t.emit("choose",t.contextID)}).catch(function(i){t.emit("choosefail",i)}),this},createContext:function(e){if(!this.checkAPI("contextCreateAsync"))return this;var t=this;return FBInstant.context.createAsync(e).then(function(){t.contextID=FBInstant.context.getID(),t.emit("create",t.contextID)}).catch(function(i){t.emit("createfail",i)}),this},getPlayers:function(){if(!this.checkAPI("playerGetConnectedPlayersAsync"))return this;var e=this;return FBInstant.player.getConnectedPlayersAsync().then(function(t){e.emit("players",t)}).catch(function(t){e.emit("playersfail",t)}),this},getCatalog:function(){if(!this.paymentsReady)return this;var e=this,t=this.catalog;return FBInstant.payments.getCatalogAsync().then(function(i){t=[],i.forEach(function(r){t.push(Zye(r))}),e.emit("getcatalog",t)}).catch(function(i){e.emit("getcatalogfail",i)}),this},getProduct:function(e){for(var t=0;t<this.catalog.length;t++)if(this.catalog[t].productID===e)return this.catalog[t];return null},purchase:function(e,t){if(!this.paymentsReady)return this;var i={productID:e};t&&(i.developerPayload=t);var r=this;return FBInstant.payments.purchaseAsync(i).then(function(s){var n=kU(s);r.emit("purchase",n)}).catch(function(s){r.emit("purchasefail",s)}),this},getPurchases:function(){if(!this.paymentsReady)return this;var e=this,t=this.purchases;return FBInstant.payments.getPurchasesAsync().then(function(i){t=[],i.forEach(function(r){t.push(kU(r))}),e.emit("getpurchases",t)}).catch(function(i){e.emit("getpurchasesfail",i)}),this},consumePurchase:function(e){if(!this.paymentsReady)return this;var t=this;return FBInstant.payments.consumePurchaseAsync(e).then(function(){t.emit("consumepurchase",e)}).catch(function(i){t.emit("consumepurchasefail",i)}),this},update:function(e,t,i,r,s,n){return this._update("CUSTOM",e,t,i,r,s,n)},updateLeaderboard:function(e,t,i,r,s,n){return this._update("LEADERBOARD",e,t,i,r,s,n)},_update:function(e,t,i,r,s,n,a){if(!this.checkAPI("shareAsync"))return this;if(t===void 0&&(t=""),typeof i=="string"&&(i={default:i}),a===void 0&&(a={}),r)var h=this.game.textures.getBase64(r,s);var o={action:e,cta:t,image:h,text:i,template:n,data:a,strategy:"IMMEDIATE",notification:"NO_PUSH"},u=this;return FBInstant.updateAsync(o).then(function(){u.emit("update")}).catch(function(f){u.emit("updatefail",f)}),this},switchGame:function(e,t){if(!this.checkAPI("switchGameAsync"))return this;if(t){var i=JSON.stringify(t);if(i.length>1e3)return console.warn("Switch Game data too long. Max 1000 chars."),this}var r=this;return FBInstant.switchGameAsync(e,t).then(function(){r.emit("switchgame",e)}).catch(function(s){r.emit("switchgamefail",s)}),this},createShortcut:function(){var e=this;return FBInstant.canCreateShortcutAsync().then(function(t){t&&FBInstant.createShortcutAsync().then(function(){e.emit("shortcutcreated")}).catch(function(i){e.emit("shortcutfailed",i)})}),this},quit:function(){FBInstant.quit()},log:function(e,t,i){return this.checkAPI("logEvent")?(i===void 0&&(i={}),e.length>=2&&e.length<=40&&FBInstant.logEvent(e,parseFloat(t),i),this):this},preloadAds:function(e){if(!this.checkAPI("getInterstitialAdAsync"))return this;Array.isArray(e)||(e=[e]);var t,i=this,r=0;for(t=0;t<this.ads.length;t++)this.ads[t].shown||r++;if(r+e.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(t=0;t<e.length;t++){var s=e[t],n;FBInstant.getInterstitialAdAsync(s).then(function(a){return n=a,a.loadAsync()}).then(function(){var a=BU(s,n,!1);i.ads.push(a),i.emit("adloaded",a)}).catch(function(a){a.code==="ADS_NO_FILL"?i.emit("adsnofill",s):a.code==="ADS_FREQUENT_LOAD"?i.emit("adsfrequentload",s):console.warn(a)})}return this},preloadVideoAds:function(e){if(!this.checkAPI("getRewardedVideoAsync"))return this;Array.isArray(e)||(e=[e]);var t,i=this,r=0;for(t=0;t<this.ads.length;t++)this.ads[t].shown||r++;if(r+e.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(t=0;t<e.length;t++){var s=e[t],n;FBInstant.getRewardedVideoAsync(s).then(function(a){return n=a,a.loadAsync()}).then(function(){var a=BU(s,n,!0);i.ads.push(a),i.emit("adloaded",a)}).catch(function(a){a.code==="ADS_NO_FILL"?i.emit("adsnofill",s):a.code==="ADS_FREQUENT_LOAD"?i.emit("adsfrequentload",s):console.warn(a)})}return this},showAd:function(e){for(var t=this,i=0;i<this.ads.length;i++){var r=this.ads[i];if(r.placementID===e&&!r.shown){r.instance.showAsync().then(function(){r.shown=!0,t.emit("adfinished",r)}).catch(function(s){s.code==="ADS_NOT_LOADED"?t.emit("adsnotloaded",r):s.code==="RATE_LIMITED"&&t.emit("adratelimited",r),t.emit("adshowerror",s,r)});break}}return this},showVideo:function(e){for(var t=this,i=0;i<this.ads.length;i++){var r=this.ads[i];if(r.placementID===e&&r.video&&!r.shown){r.instance.showAsync().then(function(){r.shown=!0,t.emit("adfinished",r)}).catch(function(s){s.code==="ADS_NOT_LOADED"?t.emit("adsnotloaded",r):s.code==="RATE_LIMITED"&&t.emit("adratelimited",r),t.emit("adshowerror",s,r)});break}}return this},matchPlayer:function(e,t){if(e===void 0&&(e=null),t===void 0&&(t=!1),!this.checkAPI("matchPlayerAsync"))return this;var i=this;return FBInstant.matchPlayerAsync(e,t).then(function(){i.getID(),i.getType(),i.emit("matchplayer",i.contextID,i.contextType)}),this},getLeaderboard:function(e){if(!this.checkAPI("getLeaderboardAsync"))return this;var t=this;return FBInstant.getLeaderboardAsync(e).then(function(i){var r=new Kye(t,i);t.leaderboards[e]=r,t.emit("getleaderboard",r)}).catch(function(i){console.warn(i)}),this},destroy:function(){FBInstant.quit(),this.data.destroy(),this.removeAllListeners(),this.catalog=[],this.purchases=[],this.leaderboards=[],this.ads=[],this.game=null}});zU.exports=Jye});var HU=l((R7e,WU)=>{var Qye=oh(),$ye=PD(),jye=nv(),eTe=bt(),tTe=C(),iTe=hc(),rTe=bD(),sTe=Vc(),nTe=Js(),aTe=Wc(),hTe=Uv(),oTe=hp(),uTe=ue(),et=Ye(),lTe=Rp(),fTe=vt(),dTe=qp(),vTe=Pp(),cTe=Np(),pTe=Dn(),mTe=Yp(),gTe=Kc(),xTe=Zc();XU=qU();var XU;VU=YU();var VU,yTe=new tTe({initialize:function(t){this.config=new iTe(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new uTe,this.anims=new $ye(this),this.textures=new mTe(this),this.cache=new jye(this),this.registry=new nTe(this),this.input=new lTe(this,this.config),this.scene=new cTe(this,this.config.sceneConfig),this.device=hTe,this.scale=new vTe(this,this.config),this.sound=null,this.sound=XU.create(this),this.loop=new gTe(this,this.config.fps),this.plugins=new dTe(this,this.config),this.facebook=new VU(this),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,oTe(this.boot.bind(this))},boot:function(){if(!fTe.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),sTe(this),rTe(this),aTe(this),Qye(this.canvas,this.config.parent),this.textures.once(pTe.READY,this.texturesReady,this),this.events.emit(et.BOOT)},texturesReady:function(){this.events.emit(et.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),xTe(this);var e=this.events;e.on(et.HIDDEN,this.onHidden,this),e.on(et.VISIBLE,this.onVisible,this),e.on(et.BLUR,this.onBlur,this),e.on(et.FOCUS,this.onFocus,this)},step:function(e,t){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(et.PRE_STEP,e,t),i.emit(et.STEP,e,t),this.scene.update(e,t),i.emit(et.POST_STEP,e,t);var r=this.renderer;r.preRender(),i.emit(et.PRE_RENDER,r,e,t),this.scene.render(r),r.postRender(),i.emit(et.POST_RENDER,r,e,t)},headlessStep:function(e,t){if(this.pendingDestroy)return this.runDestroy();var i=this.events;i.emit(et.PRE_STEP,e,t),i.emit(et.STEP,e,t),this.scene.update(e,t),i.emit(et.POST_STEP,e,t),i.emit(et.PRE_RENDER),i.emit(et.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(et.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(et.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(e,t){t===void 0&&(t=!1),this.pendingDestroy=!0,this.removeCanvas=e,this.noReturn=t},runDestroy:function(){this.scene.destroy(),this.events.emit(et.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(eTe.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});WU.exports=yTe});var Wu=l((q7e,KU)=>{var TTe=function(e){if(!Array.isArray(e)||e.length<2||!Array.isArray(e[0]))return!1;for(var t=e[0].length,i=1;i<e.length;i++)if(e[i].length!==t)return!1;return!0};KU.exports=TTe});var JU=l((A7e,ZU)=>{var ETe=wu(),STe=Wu(),_Te=function(e){var t="";if(!STe(e))return t;for(var i=0;i<e.length;i++){for(var r=0;r<e[i].length;r++){var s=e[i][r].toString();s!=="undefined"?t+=ETe(s,2):t+="?",r<e[i].length-1&&(t+=" |")}if(i<e.length-1){t+=`
`;for(var n=0;n<e[i].length;n++)t+="---",n<e[i].length-1&&(t+="+");t+=`
`}}return t};ZU.exports=_Te});var $U=l((P7e,QU)=>{var wTe=function(e){return e.reverse()};QU.exports=wTe});var ek=l((M7e,jU)=>{var CTe=function(e){for(var t=0;t<e.length;t++)e[t].reverse();return e};jU.exports=CTe});var Kp=l((b7e,tk)=>{var RTe=function(e){for(var t=e.length,i=e[0].length,r=new Array(i),s=0;s<i;s++){r[s]=new Array(t);for(var n=t-1;n>-1;n--)r[s][n]=e[n][s]}return r};tk.exports=RTe});var xh=l((L7e,rk)=>{var qTe=Wu(),ik=Kp(),ATe=function(e,t){if(t===void 0&&(t=90),!qTe(e))return null;if(typeof t!="string"&&(t=(t%360+360)%360),t===90||t===-270||t==="rotateLeft")e=ik(e),e.reverse();else if(t===-90||t===270||t==="rotateRight")e.reverse(),e=ik(e);else if(Math.abs(t)===180||t==="rotate180"){for(var i=0;i<e.length;i++)e[i].reverse();e.reverse()}return e};rk.exports=ATe});var nk=l((O7e,sk)=>{var PTe=xh(),MTe=function(e){return PTe(e,180)};sk.exports=MTe});var hk=l((F7e,ak)=>{var bTe=xh(),LTe=function(e){return bTe(e,90)};ak.exports=LTe});var uk=l((D7e,ok)=>{var OTe=xh(),FTe=function(e){return OTe(e,-90)};ok.exports=FTe});var vk=l((I7e,dk)=>{var lk=qo(),fk=Ao(),DTe=function(e,t,i){if(t===void 0&&(t=0),i===void 0&&(i=0),i!==0&&(i<0?lk(e,Math.abs(i)):fk(e,i)),t!==0)for(var r=0;r<e.length;r++){var s=e[r];t<0?lk(s,Math.abs(t)):fk(s,t)}return e};dk.exports=DTe});var pk=l((N7e,ck)=>{ck.exports={CheckMatrix:Wu(),MatrixToString:JU(),ReverseColumns:$U(),ReverseRows:ek(),Rotate180:nk(),RotateLeft:hk(),RotateMatrix:xh(),RotateRight:uk(),Translate:vk(),TransposeMatrix:Kp()}});var gk=l((G7e,mk)=>{var ITe=function(e,t,i,r,s){if(s===void 0&&(s=e),i>0){var n=i-e.length;if(n<=0)return null}if(!Array.isArray(t))return e.indexOf(t)===-1?(e.push(t),r&&r.call(s,t),t):null;for(var a=t.length-1;a>=0;)e.indexOf(t[a])!==-1&&t.splice(a,1),a--;if(a=t.length,a===0)return null;i>0&&a>n&&(t.splice(n),a=n);for(var h=0;h<a;h++){var o=t[h];e.push(o),r&&r.call(s,o)}return t};mk.exports=ITe});var yk=l((B7e,xk)=>{var NTe=function(e,t,i,r,s,n){if(i===void 0&&(i=0),n===void 0&&(n=e),r>0){var a=r-e.length;if(a<=0)return null}if(!Array.isArray(t))return e.indexOf(t)===-1?(e.splice(i,0,t),s&&s.call(n,t),t):null;for(var h=t.length-1;h>=0;)e.indexOf(t[h])!==-1&&t.pop(),h--;if(h=t.length,h===0)return null;r>0&&h>a&&(t.splice(a),h=a);for(var o=h-1;o>=0;o--){var u=t[o];e.splice(i,0,u),s&&s.call(n,u)}return t};xk.exports=NTe});var Ek=l((U7e,Tk)=>{var GTe=function(e,t){var i=e.indexOf(t);return i!==-1&&i<e.length&&(e.splice(i,1),e.push(t)),t};Tk.exports=GTe});var _k=l((k7e,Sk)=>{var BTe=ls(),UTe=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=e.length);var n=0;if(BTe(e,r,s))for(var a=r;a<s;a++){var h=e[a];h[t]===i&&n++}return n};Sk.exports=UTe});var Ck=l((z7e,wk)=>{var kTe=function(e,t,i){var r,s=[null];for(r=3;r<arguments.length;r++)s.push(arguments[r]);for(r=0;r<e.length;r++)s[0]=e[r],t.apply(i,s);return e};wk.exports=kTe});var qk=l((Y7e,Rk)=>{var zTe=ls(),YTe=function(e,t,i,r,s){if(r===void 0&&(r=0),s===void 0&&(s=e.length),zTe(e,r,s)){var n,a=[null];for(n=5;n<arguments.length;n++)a.push(arguments[n]);for(n=r;n<s;n++)a[0]=e[n],t.apply(i,a)}return e};Rk.exports=YTe});var Zp=l((X7e,Ak)=>{var XTe=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=e.length);var r=t+Math.floor(Math.random()*i);return e[r]===void 0?null:e[r]};Ak.exports=XTe});var Mk=l((V7e,Pk)=>{var VTe=function(e,t){var i=e.indexOf(t);if(i>0){var r=e[i-1],s=e.indexOf(r);e[i]=r,e[s]=t}return e};Pk.exports=VTe});var Lk=l((W7e,bk)=>{var WTe=function(e,t,i){var r=e.indexOf(t);if(r===-1||i<0||i>=e.length)throw new Error("Supplied index out of bounds");return r!==i&&(e.splice(r,1),e.splice(i,0,t)),t};bk.exports=WTe});var Fk=l((H7e,Ok)=>{var HTe=function(e,t){var i=e.indexOf(t);if(i!==-1&&i<e.length-1){var r=e[i+1],s=e.indexOf(r);e[i]=r,e[s]=t}return e};Ok.exports=HTe});var Ik=l((K7e,Dk)=>{var KTe=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),s=e.indexOf(i);if(r<0||s<0)throw new Error("Supplied items must be elements of the same array");return r>s||(e.splice(r,1),s===e.length-1?e.push(t):e.splice(s,0,t)),e};Dk.exports=KTe});var Gk=l((Z7e,Nk)=>{var ZTe=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),s=e.indexOf(i);if(r<0||s<0)throw new Error("Supplied items must be elements of the same array");return r<s||(e.splice(r,1),s===0?e.unshift(t):e.splice(s,0,t)),e};Nk.exports=ZTe});var Uk=l((J7e,Bk)=>{var JTe=ec(),QTe=function(e,t,i){e===void 0&&(e=0),t===void 0&&(t=null),i===void 0&&(i=1),t===null&&(t=e,e=0);for(var r=[],s=Math.max(JTe((t-e)/(i||1)),0),n=0;n<s;n++)r.push(e),e+=i;return r};Bk.exports=QTe});var Jp=l((Q7e,zk)=>{function yh(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function $Te(e,t){return e<t?-1:e>t?1:0}var kk=function(e,t,i,r,s){for(i===void 0&&(i=0),r===void 0&&(r=e.length-1),s===void 0&&(s=$Te);r>i;){if(r-i>600){var n=r-i+1,a=t-i+1,h=Math.log(n),o=.5*Math.exp(2*h/3),u=.5*Math.sqrt(h*o*(n-o)/n)*(a-n/2<0?-1:1),f=Math.max(i,Math.floor(t-a*o/n+u)),d=Math.min(r,Math.floor(t+(n-a)*o/n+u));kk(e,t,f,d,s)}var v=e[t],c=i,p=r;for(yh(e,i,t),s(e[r],v)>0&&yh(e,i,r);c<p;){for(yh(e,c,p),c++,p--;s(e[c],v)<0;)c++;for(;s(e[p],v)>0;)p--}s(e[i],v)===0?yh(e,i,p):(p++,yh(e,p,r)),p<=t&&(i=p+1),t<=p&&(r=p-1)}};zk.exports=kk});var Qp=l(($7e,Xk)=>{var ea=he(),Yk=Lo(),jTe=function(e,t,i){for(var r=[],s=0;s<e.length;s++)for(var n=0;n<t.length;n++)for(var a=0;a<i;a++)r.push({a:e[s],b:t[n]});return r},eEe=function(e,t,i){var r=ea(i,"max",0),s=ea(i,"qty",1),n=ea(i,"random",!1),a=ea(i,"randomB",!1),h=ea(i,"repeat",0),o=ea(i,"yoyo",!1),u=[];if(a&&Yk(t),h===-1)if(r===0)h=0;else{var f=e.length*t.length*s;o&&(f*=2),h=Math.ceil(r/f)}for(var d=0;d<=h;d++){var v=jTe(e,t,s);n&&Yk(v),u=u.concat(v),o&&(v.reverse(),u=u.concat(v))}return r&&u.splice(r),u};Xk.exports=eEe});var Wk=l((j7e,Vk)=>{var tEe=Zs(),iEe=function(e,t,i,r){if(r===void 0&&(r=e),t<0||t>e.length-1)throw new Error("Index out of bounds");var s=tEe(e,t);return i&&i.call(r,s),s};Vk.exports=iEe});var Kk=l((eKe,Hk)=>{var rEe=ls(),sEe=function(e,t,i,r,s){if(t===void 0&&(t=0),i===void 0&&(i=e.length),s===void 0&&(s=e),rEe(e,t,i)){var n=i-t,a=e.splice(t,n);if(r)for(var h=0;h<a.length;h++){var o=a[h];r.call(s,o)}return a}else return[]};Hk.exports=sEe});var Jk=l((tKe,Zk)=>{var nEe=Zs(),aEe=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=e.length);var r=t+Math.floor(Math.random()*i);return nEe(e,r)};Zk.exports=aEe});var $k=l((iKe,Qk)=>{var hEe=function(e,t,i){var r=e.indexOf(t),s=e.indexOf(i);return r!==-1&&s===-1?(e[r]=i,!0):!1};Qk.exports=hEe});var ez=l((rKe,jk)=>{var oEe=function(e,t){var i=e.indexOf(t);return i!==-1&&i>0&&(e.splice(i,1),e.unshift(t)),t};jk.exports=oEe});var iz=l((sKe,tz)=>{var uEe=ls(),lEe=function(e,t,i,r,s){if(r===void 0&&(r=0),s===void 0&&(s=e.length),uEe(e,r,s))for(var n=r;n<s;n++){var a=e[n];a.hasOwnProperty(t)&&(a[t]=i)}return e};tz.exports=lEe});var vs=l((nKe,sz)=>{function fEe(e,t){return String(e).localeCompare(t)}function dEe(e,t){var i=e.length;if(i<=1)return e;for(var r=new Array(i),s=1;s<i;s*=2){rz(e,t,s,r);var n=e;e=r,r=n}return e}function rz(e,t,i,r){var s=e.length,n=0,a=i*2,h,o,u,f,d;for(h=0;h<s;h+=a)for(o=h+i,u=o+i,o>s&&(o=s),u>s&&(u=s),f=h,d=o;;)if(f<o&&d<u)t(e[f],e[d])<=0?r[n++]=e[f++]:r[n++]=e[d++];else if(f<o)r[n++]=e[f++];else if(d<u)r[n++]=e[d++];else break}var vEe=function(e,t){t===void 0&&(t=fEe);var i=dEe(e,t);return i!==e&&rz(i,null,e.length,e),e};sz.exports=vEe});var az=l((aKe,nz)=>{var cEe=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),s=e.indexOf(i);if(r<0||s<0)throw new Error("Supplied items must be elements of the same array");return e[r]=i,e[s]=t,e};nz.exports=cEe});var Hu=l((hKe,hz)=>{hz.exports={Matrix:pk(),Add:gk(),AddAt:yk(),BringToTop:Ek(),CountAllMatching:_k(),Each:Ck(),EachInRange:qk(),FindClosestInSorted:mp(),GetAll:Gu(),GetFirst:Xp(),GetRandom:Zp(),MoveDown:Mk(),MoveTo:Lk(),MoveUp:Fk(),MoveAbove:Ik(),MoveBelow:Gk(),NumberArray:yp(),NumberArrayStep:Uk(),QuickSelect:Jp(),Range:Qp(),Remove:tn(),RemoveAt:Wk(),RemoveBetween:Kk(),RemoveRandomElement:Jk(),Replace:$k(),RotateLeft:qo(),RotateRight:Ao(),SafeRange:ls(),SendToBack:ez(),SetAll:iz(),Shuffle:Lo(),SortByDigits:gp(),SpliceOne:Zs(),StableSort:vs(),Swap:az()}});var ta=l((oKe,uz)=>{var Ee=Hu(),pEe=C(),oz=B(),mEe=vs(),gEe=new pEe({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=oz,this.removeCallback=oz,this._sortKey=""},add:function(e,t){return t?Ee.Add(this.list,e):Ee.Add(this.list,e,0,this.addCallback,this)},addAt:function(e,t,i){return i?Ee.AddAt(this.list,e,t):Ee.AddAt(this.list,e,t,0,this.addCallback,this)},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,t){return e?(t===void 0&&(t=function(i,r){return i[e]-r[e]}),mEe(this.list,t),this):this},getByName:function(e){return Ee.GetFirst(this.list,"name",e)},getRandom:function(e,t){return Ee.GetRandom(this.list,e,t)},getFirst:function(e,t,i,r){return Ee.GetFirst(this.list,e,t,i,r)},getAll:function(e,t,i,r){return Ee.GetAll(this.list,e,t,i,r)},count:function(e,t){return Ee.CountAllMatching(this.list,e,t)},swap:function(e,t){Ee.Swap(this.list,e,t)},moveTo:function(e,t){return Ee.MoveTo(this.list,e,t)},moveAbove:function(e,t){return Ee.MoveAbove(this.list,e,t)},moveBelow:function(e,t){return Ee.MoveBelow(this.list,e,t)},remove:function(e,t){return t?Ee.Remove(this.list,e):Ee.Remove(this.list,e,this.removeCallback,this)},removeAt:function(e,t){return t?Ee.RemoveAt(this.list,e):Ee.RemoveAt(this.list,e,this.removeCallback,this)},removeBetween:function(e,t,i){return i?Ee.RemoveBetween(this.list,e,t):Ee.RemoveBetween(this.list,e,t,this.removeCallback,this)},removeAll:function(e){for(var t=this.list.length;t--;)this.remove(this.list[t],e);return this},bringToTop:function(e){return Ee.BringToTop(this.list,e)},sendToBack:function(e){return Ee.SendToBack(this.list,e)},moveUp:function(e){return Ee.MoveUp(this.list,e),e},moveDown:function(e){return Ee.MoveDown(this.list,e),e},reverse:function(){return this.list.reverse(),this},shuffle:function(){return Ee.Shuffle(this.list),this},replace:function(e,t){return Ee.Replace(this.list,e,t)},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,t,i,r){return Ee.SetAll(this.list,e,t,i,r),this},each:function(e,t){for(var i=[null],r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<this.list.length;r++)i[0]=this.list[r],e.apply(t,i)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});uz.exports=gEe});var cz=l((uKe,vz)=>{var xEe=C(),lz=ta(),yEe=vt(),fz=Vr(),cs=Ne(),TEe=vs(),dz=new xEe({Extends:lz,initialize:function(t){lz.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(cs.BOOT,this.boot,this),this.events.on(cs.START,this.start,this)},boot:function(){this.events.once(cs.DESTROY,this.destroy,this)},addChildCallback:function(e){e.displayList&&e.displayList!==this&&e.removeFromDisplayList(),e.displayList||(this.queueDepthSort(),e.displayList=this,e.emit(fz.ADDED_TO_SCENE,e,this.scene),this.events.emit(cs.ADDED_TO_SCENE,e,this.scene))},removeChildCallback:function(e){this.queueDepthSort(),e.displayList=null,e.emit(fz.REMOVED_FROM_SCENE,e,this.scene),this.events.emit(cs.REMOVED_FROM_SCENE,e,this.scene)},start:function(){this.events.once(cs.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(TEe(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(e,t){return e._depth-t._depth},getChildren:function(){return this.list},shutdown:function(){for(var e=this.list,t=e.length;t--;)e[t].destroy(!0);e.length=0,this.events.off(cs.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(cs.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});yEe.register("DisplayList",dz,"displayList");vz.exports=dz});var mz=l((lKe,pz)=>{pz.exports="add"});var xz=l((fKe,gz)=>{gz.exports="remove"});var $p=l((dKe,yz)=>{yz.exports={PROCESS_QUEUE_ADD:mz(),PROCESS_QUEUE_REMOVE:xz()}});var jp=l((vKe,Sz)=>{var EEe=C(),Tz=ue(),Ez=$p(),SEe=new EEe({Extends:Tz,initialize:function(){Tz.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(e){return this._pending.push(e),this._toProcess++,e},remove:function(e){return this._destroy.push(e),this._toProcess++,e},removeAll:function(){for(var e=this._active,t=this._destroy,i=e.length;i--;)t.push(e[i]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var e=this._destroy,t=this._active,i,r;for(i=0;i<e.length;i++){r=e[i];var s=t.indexOf(r);s!==-1&&(t.splice(s,1),this.emit(Ez.PROCESS_QUEUE_REMOVE,r))}for(e.length=0,e=this._pending,i=0;i<e.length;i++)r=e[i],(!this.checkQueue||this.checkQueue&&t.indexOf(r)===-1)&&(t.push(r),this.emit(Ez.PROCESS_QUEUE_ADD,r));return e.length=0,this._toProcess=0,t},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});Sz.exports=SEe});var Rz=l((cKe,Cz)=>{var _Ee=C(),_z=jp(),wEe=vt(),ir=Ne(),wz=new _Ee({Extends:_z,initialize:function(t){_z.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(ir.BOOT,this.boot,this),t.sys.events.on(ir.START,this.start,this)},boot:function(){this.systems.events.once(ir.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(ir.PRE_UPDATE,this.update,this),e.on(ir.UPDATE,this.sceneUpdate,this),e.once(ir.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(e,t){for(var i=this._active,r=i.length,s=0;s<r;s++){var n=i[s];n.active&&n.preUpdate.call(n,e,t)}},shutdown:function(){for(var e=this._active.length;e--;)this._active[e].destroy(!0);for(e=this._pending.length;e--;)this._pending[e].destroy(!0);for(e=this._destroy.length;e--;)this._destroy[e].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var t=this.systems.events;t.off(ir.PRE_UPDATE,this.update,this),t.off(ir.UPDATE,this.sceneUpdate,this),t.off(ir.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(ir.START,this.start,this),this.scene=null,this.systems=null}});wEe.register("UpdateList",wz,"updateList");Cz.exports=wz});var be=l((pKe,Mz)=>{var em=xt(),qz=new em,Az=new em,Pz=new em,CEe={camera:qz,sprite:Az,calc:Pz},REe=function(e,t,i){var r=qz,s=Az,n=Pz;return s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),r.copyFrom(t.matrix),i?(r.multiplyWithOffset(i,-t.scrollX*e.scrollFactorX,-t.scrollY*e.scrollFactorY),s.e=e.x,s.f=e.y):(s.e-=t.scrollX*e.scrollFactorX,s.f-=t.scrollY*e.scrollFactorY),r.multiply(s,n),CEe};Mz.exports=REe});var we=l((mKe,bz)=>{var tm=iu(),qEe=he(),AEe=function(e,t,i){var r=qEe(e,t,null);if(r===null)return i;if(Array.isArray(r))return tm.RND.pick(r);if(typeof r=="object"){if(r.hasOwnProperty("randInt"))return tm.RND.integerInRange(r.randInt[0],r.randInt[1]);if(r.hasOwnProperty("randFloat"))return tm.RND.realInRange(r.randFloat[0],r.randFloat[1])}else if(typeof r=="function")return r(t);return r};bz.exports=AEe});var mt=l((gKe,Lz)=>{var PEe=Si(),Ve=we(),MEe=function(e,t,i){t.x=Ve(i,"x",0),t.y=Ve(i,"y",0),t.depth=Ve(i,"depth",0),t.flipX=Ve(i,"flipX",!1),t.flipY=Ve(i,"flipY",!1);var r=Ve(i,"scale",null);typeof r=="number"?t.setScale(r):r!==null&&(t.scaleX=Ve(r,"x",1),t.scaleY=Ve(r,"y",1));var s=Ve(i,"scrollFactor",null);typeof s=="number"?t.setScrollFactor(s):s!==null&&(t.scrollFactorX=Ve(s,"x",1),t.scrollFactorY=Ve(s,"y",1)),t.rotation=Ve(i,"rotation",0);var n=Ve(i,"angle",null);n!==null&&(t.angle=n),t.alpha=Ve(i,"alpha",1);var a=Ve(i,"origin",null);if(typeof a=="number")t.setOrigin(a);else if(a!==null){var h=Ve(a,"x",.5),o=Ve(a,"y",.5);t.setOrigin(h,o)}t.blendMode=Ve(i,"blendMode",PEe.NORMAL),t.visible=Ve(i,"visible",!0);var u=Ve(i,"add",!0);return u&&e.sys.displayList.add(t),t.preUpdate&&e.sys.updateList.add(t),t};Lz.exports=MEe});var im=l((xKe,Oz)=>{var qr=we(),bEe=function(e,t){var i=qr(t,"anims",null);if(i===null)return e;if(typeof i=="string")e.anims.play(i);else if(typeof i=="object"){var r=e.anims,s=qr(i,"key",void 0);if(s){var n=qr(i,"startFrame",void 0),a=qr(i,"delay",0),h=qr(i,"repeat",0),o=qr(i,"repeatDelay",0),u=qr(i,"yoyo",!1),f=qr(i,"play",!1),d=qr(i,"delayedPlay",0),v={key:s,delay:a,repeat:h,repeatDelay:o,yoyo:u,startFrame:n};f?r.play(v):d>0?r.playAfterDelay(v,d):r.load(v)}}return e};Oz.exports=bEe});var Dz=l((yKe,Fz)=>{var LEe=function(e,t,i,r){if(i===void 0&&(i=!1),r===void 0)return r={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},r;var s=e.text,n=s.length,a=e.maxWidth,h=e.wordWrapCharCode,o=Number.MAX_VALUE,u=Number.MAX_VALUE,f=0,d=0,v=e.fontData.chars,c=e.fontData.lineHeight,p=e.letterSpacing,m=0,x=0,g=0,y=null,T=e._align,S=0,E=0,_=e.fontSize/e.fontData.size,w=_*e.scaleX,R=_*e.scaleY,q=null,A=0,P=[],L=Number.MAX_VALUE,b=0,G=0,M=0,D,I=[],F=[],O=null;if(a>0){for(D=0;D<n;D++){if(g=s.charCodeAt(D),g===10){O!==null&&(I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R,cr:!0}),O=null),m=0,x+=c,q=null;continue}if(y=v[g],!!y){if(q!==null)var K=y.kerning[A];g===h?O!==null&&(I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R,cr:!1}),O=null):(O===null&&(O={word:"",i:D,x:m,y:x,w:0,h:c,cr:!1}),O.word=O.word.concat(s[D]),O.w+=y.xOffset+y.xAdvance+(K!==void 0?K:0)),m+=y.xAdvance+p,q=y,A=g}}O!==null&&I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R,cr:!1}),m=0,x=0,q=null,A=0;var H,Y=0,ee=[];for(D=0;D<I.length;D++){var U=I[D],J=U.x,st=U.x+U.w;if(H){var ve=J-(H.x+H.w);Y=J-(ve+H.w),H=null}var gt=J-Y,_e=st-Y;gt>a||_e>a?(ee.push(U.i-1),U.cr?(ee.push(U.i+U.word.length),Y=0,H=null):H=U):U.cr&&(ee.push(U.i+U.word.length),Y=0,H=null)}var nt=function(pe,Q,zi){return pe.substr(0,Q)+zi+pe.substr(Q+1)};for(D=ee.length-1;D>=0;D--)s=nt(s,ee[D],`
`);r.wrappedText=s,n=s.length,I=[],O=null}var Ze=0;for(D=0;D<n;D++){if(g=s.charCodeAt(D),g===10){O!==null&&(I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R}),O=null),m=0,x+=c,q=null,P[G]=M,M>b&&(b=M),M<L&&(L=M),G++,M=0;continue}if(y=v[g],!!y){if(S=m,E=x,q!==null){var te=y.kerning[A];S+=te!==void 0?te:0}o>S&&(o=S),u>E&&(u=E);var Ue=S+y.xAdvance,qe=E+c;f<Ue&&(f=Ue),d<qe&&(d=qe);var Pt=y.xOffset+y.xAdvance+(te!==void 0?te:0);g===h?O!==null&&(I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R}),O=null):(O===null&&(O={word:"",i:Ze,x:m,y:x,w:0,h:c}),O.word=O.word.concat(s[D]),O.w+=Pt),F.push({i:Ze,char:s[D],code:g,x:(y.xOffset+m)*_,y:(y.yOffset+x)*_,w:y.width*_,h:y.height*_,t:x*_,r:Ue*_,b:c*_,line:G,glyph:y}),m+=y.xAdvance+p,q=y,A=g,M=Ue*_,Ze++}}if(O!==null&&I.push({word:O.word,i:O.i,x:O.x*w,y:O.y*R,w:O.w*w,h:O.h*R}),P[G]=M,M>b&&(b=M),M<L&&(L=M),T>0)for(var ut=0;ut<F.length;ut++){var oe=F[ut];if(T===1){var ke=(b-P[oe.line])/2;oe.x+=ke,oe.r+=ke}else if(T===2){var lt=b-P[oe.line];oe.x+=lt,oe.r+=lt}}var X=r.local,V=r.global,Z=r.lines;return X.x=o*_,X.y=u*_,X.width=f*_,X.height=d*_,V.x=e.x-e._displayOriginX+o*w,V.y=e.y-e._displayOriginY+u*R,V.width=f*w,V.height=d*R,Z.shortest=L,Z.longest=b,Z.lengths=P,t&&(X.x=Math.ceil(X.x),X.y=Math.ceil(X.y),X.width=Math.ceil(X.width),X.height=Math.ceil(X.height),V.x=Math.ceil(V.x),V.y=Math.ceil(V.y),V.width=Math.ceil(V.width),V.height=Math.ceil(V.height),Z.shortest=Math.ceil(L),Z.longest=Math.ceil(b)),i&&(e._displayOriginX=e.originX*X.width,e._displayOriginY=e.originY*X.height,V.x=e.x-e._displayOriginX*e.scaleX,V.y=e.y-e._displayOriginY*e.scaleY,t&&(V.x=Math.ceil(V.x),V.y=Math.ceil(V.y))),r.words=I,r.characters=F,r.lines.height=c,r.scale=_,r.scaleX=e.scaleX,r.scaleY=e.scaleY,r};Fz.exports=LEe});var Ku=l((TKe,Iz)=>{function ri(e,t){return parseInt(e.getAttribute(t),10)}var OEe=function(e,t,i,r,s){i===void 0&&(i=0),r===void 0&&(r=0);var n=t.cutX,a=t.cutY,h=t.source.width,o=t.source.height,u=t.sourceIndex,f={},d=e.getElementsByTagName("info")[0],v=e.getElementsByTagName("common")[0];f.font=d.getAttribute("face"),f.size=ri(d,"size"),f.lineHeight=ri(v,"lineHeight")+r,f.chars={};var c=e.getElementsByTagName("char"),p=t!==void 0&&t.trimmed;if(p)var m=t.height,x=t.width;for(var g=0;g<c.length;g++){var y=c[g],T=ri(y,"id"),S=String.fromCharCode(T),E=ri(y,"x"),_=ri(y,"y"),w=ri(y,"width"),R=ri(y,"height");p&&(E<x&&(x=E),_<m&&(m=_)),p&&m!==0&&x!==0&&(E-=t.x,_-=t.y);var q=(n+E)/h,A=(a+_)/o,P=(n+E+w)/h,L=(a+_+R)/o;if(f.chars[T]={x:E,y:_,width:w,height:R,centerX:Math.floor(w/2),centerY:Math.floor(R/2),xOffset:ri(y,"xoffset"),yOffset:ri(y,"yoffset"),xAdvance:ri(y,"xadvance")+i,data:{},kerning:{},u0:q,v0:A,u1:P,v1:L},s&&w!==0&&R!==0){var b=s.add(S,u,E,_,w,R);b&&b.setUVs(w,R,q,A,P,L)}}var G=e.getElementsByTagName("kerning");for(g=0;g<G.length;g++){var M=G[g],D=ri(M,"first"),I=ri(M,"second"),F=ri(M,"amount");f.chars[I].kerning[D]=F}return f};Iz.exports=OEe});var Gz=l((EKe,Nz)=>{var FEe=Ku(),DEe=function(e,t,i,r,s,n,a){var h=e.sys.textures.get(i),o=h.get(r),u=e.sys.cache.xml.get(s);if(o&&u){var f=FEe(u,o,n,a,h);return e.sys.cache.bitmapFont.add(t,{data:f,texture:i,frame:r,fromAtlas:!0}),!0}else return!1};Nz.exports=DEe});var Uz=l((SKe,Bz)=>{var IEe=function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p){var m=i.x-t.displayOriginX+s,x=i.y-t.displayOriginY+n,g=m+i.w,y=x+i.h,T=a.getXRound(m,x,h),S=a.getYRound(m,x,h),E=a.getXRound(m,y,h),_=a.getYRound(m,y,h),w=a.getXRound(g,y,h),R=a.getYRound(g,y,h),q=a.getXRound(g,x,h),A=a.getYRound(g,x,h);e.batchQuad(t,T,S,E,_,w,R,q,A,r.u0,r.v0,r.u1,r.v1,o,u,f,d,v,c,p)};Bz.exports=IEe});var zz=l((_Ke,kz)=>{var rm=Uz(),NEe=be(),GEe=Te(),BEe=function(e,t,i,r){var s=t._text,n=s.length;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline,t),h=NEe(t,i,r).calc,o=i.roundPixels,u=i.alpha,f=t.charColors,d=t.tintFill,v=GEe.getTintAppendFloatAlpha,c=v(t.tintTopLeft,u*t._alphaTL),p=v(t.tintTopRight,u*t._alphaTR),m=v(t.tintBottomLeft,u*t._alphaBL),x=v(t.tintBottomRight,u*t._alphaBR),g=t.frame.glTexture,y=a.setGameObject(t),T=t.getTextBounds(!1),S,E,_,w=T.characters,R=t.dropShadowX,q=t.dropShadowY,A=R!==0||q!==0;if(e.pipelines.preBatch(t),A){var P=t.dropShadowColor,L=t.dropShadowAlpha,b=v(P,u*L*t._alphaTL),G=v(P,u*L*t._alphaTR),M=v(P,u*L*t._alphaBL),D=v(P,u*L*t._alphaBR);for(S=0;S<w.length;S++)E=w[S],_=E.glyph,!(E.code===32||_.width===0||_.height===0)&&rm(a,t,E,_,R,q,h,o,b,G,M,D,1,g,y)}for(S=0;S<w.length;S++)if(E=w[S],_=E.glyph,!(E.code===32||_.width===0||_.height===0))if(f[E.i]){var I=f[E.i],F=I.tintEffect,O=v(I.tintTL,u*t._alphaTL),K=v(I.tintTR,u*t._alphaTR),H=v(I.tintBL,u*t._alphaBL),Y=v(I.tintBR,u*t._alphaBR);rm(a,t,E,_,0,0,h,o,O,K,H,Y,F,g,y)}else rm(a,t,E,_,0,0,h,o,c,p,m,x,d,g,y);e.pipelines.postBatch(t)}};kz.exports=BEe});var St=l((wKe,Yz)=>{var UEe=be(),kEe=function(e,t,i,r,s){var n=r.alpha*i.alpha;if(n<=0)return!1;var a=UEe(i,r,s).calc;return t.globalCompositeOperation=e.blendModes[i.blendMode],t.globalAlpha=n,t.save(),a.setToContext(t),t.imageSmoothingEnabled=!(!e.antialias||i.frame&&i.frame.source.scaleMode),!0};Yz.exports=kEe});var Vz=l((CKe,Xz)=>{var zEe=St(),YEe=function(e,t,i,r){var s=t._text,n=s.length,a=e.currentContext;if(!(n===0||!zEe(e,a,t,i,r))){i.addToRenderList(t);var h=t.fromAtlas?t.frame:t.texture.frames.__BASE,o=t.fontData.chars,u=t.fontData.lineHeight,f=t._letterSpacing,d=0,v=0,c=0,p=null,m=0,x=0,g=0,y=0,T=0,S=0,E=null,_=0,w=h.source.image,R=h.cutX,q=h.cutY,A=t._fontSize/t.fontData.size,P=t._align,L=0,b=0,G=t.getTextBounds(!1);t.maxWidth>0&&(s=G.wrappedText,n=s.length);var M=t._bounds.lines;P===1?b=(M.longest-M.lengths[0])/2:P===2&&(b=M.longest-M.lengths[0]),a.translate(-t.displayOriginX,-t.displayOriginY);for(var D=i.roundPixels,I=0;I<n;I++){if(c=s.charCodeAt(I),c===10){L++,P===1?b=(M.longest-M.lengths[L])/2:P===2&&(b=M.longest-M.lengths[L]),d=0,v+=u,E=null;continue}if(p=o[c],!!p){if(m=R+p.x,x=q+p.y,g=p.width,y=p.height,T=p.xOffset+d,S=p.yOffset+v,E!==null){var F=p.kerning[_];T+=F!==void 0?F:0}T*=A,S*=A,T+=b,d+=p.xAdvance+f,E=p,_=c,!(g===0||y===0||c===32)&&(D&&(T=Math.round(T),S=Math.round(S)),a.save(),a.translate(T,S),a.scale(A,A),a.drawImage(w,m,x,g,y,0,0,g,y),a.restore())}}a.restore()}};Xz.exports=YEe});var Zz=l((RKe,Kz)=>{var Wz=B(),Hz=B();Wz=zz();Hz=Vz();Kz.exports={renderWebGL:Wz,renderCanvas:Hz}});var Th=l((qKe,$z)=>{var XEe=C(),Jz=Le(),gi=ye(),Qz=Fe(),sm=Dz(),VEe=Gz(),WEe=Ku(),HEe=Ae(),KEe=Zz(),Ar=new XEe({Extends:Qz,Mixins:[gi.Alpha,gi.BlendMode,gi.Depth,gi.Mask,gi.Origin,gi.Pipeline,gi.ScrollFactor,gi.Texture,gi.Tint,gi.Transform,gi.Visible,KEe],initialize:function(t,i,r,s,n,a,h){n===void 0&&(n=""),h===void 0&&(h=0),Qz.call(this,t,"BitmapText"),this.font=s;var o=this.scene.sys.cache.bitmapFont.get(s);o||console.warn("Invalid BitmapText key: "+s),this.fontData=o.data,this._text="",this._fontSize=a||this.fontData.size,this._letterSpacing=0,this._align=h,this._bounds=sm(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=o.fromAtlas,this.setTexture(o.texture,o.frame),this.setPosition(i,r),this.setOrigin(0,0),this.initPipeline(),this.setText(n)},setLeftAlign:function(){return this._align=Ar.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=Ar.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=Ar.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(e){return this._fontSize=e,this._dirty=!0,this},setLetterSpacing:function(e){return e===void 0&&(e=0),this._letterSpacing=e,this._dirty=!0,this},setText:function(e){return!e&&e!==0&&(e=""),Array.isArray(e)&&(e=e.join(`
`)),e!==this.text&&(this._text=e.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(e,t,i,r){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=.5),this.dropShadowX=e,this.dropShadowY=t,this.dropShadowColor=i,this.dropShadowAlpha=r,this},setCharacterTint:function(e,t,i,r,s,n,a){e===void 0&&(e=0),t===void 0&&(t=1),i===void 0&&(i=!1),r===void 0&&(r=-1),s===void 0&&(s=r,n=r,a=r);var h=this.text.length;t===-1&&(t=h),e<0&&(e=h+e),e=Jz(e,0,h-1);for(var o=Jz(e+t,e,h),u=this.charColors,f=e;f<o;f++){var d=u[f];if(r===-1)u[f]=null;else{var v=i?1:0;d?(d.tintEffect=v,d.tintTL=r,d.tintTR=s,d.tintBL=n,d.tintBR=a):u[f]={tintEffect:v,tintTL:r,tintTR:s,tintBL:n,tintBR:a}}}return this},setWordTint:function(e,t,i,r,s,n,a){t===void 0&&(t=1);for(var h=this.getTextBounds(),o=h.words,u=typeof e=="number",f=0,d=0;d<o.length;d++){var v=o[d];if((u&&d===e||!u&&v.word===e)&&(this.setCharacterTint(v.i,v.word.length,i,r,s,n,a),f++,f===t))return this}return this},getTextBounds:function(e){var t=this._bounds;return(this._dirty||e||this.scaleX!==t.scaleX||this.scaleY!==t.scaleY)&&(sm(this,e,!0,t),this._dirty=!1),t},getCharacterAt:function(e,t,i){for(var r=this.getLocalPoint(e,t,null,i),s=this.getTextBounds(),n=s.characters,a=new HEe,h=0;h<n.length;h++){var o=n[h];if(a.setTo(o.x,o.t,o.r-o.x,o.b),a.contains(r.x,r.y))return o}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(e,t,i){if(t===void 0&&(t=this._fontSize),i===void 0&&(i=this._align),e!==this.font){var r=this.scene.sys.cache.bitmapFont.get(e);r&&(this.font=e,this.fontData=r.data,this._fontSize=t,this._align=i,this.fromAtlas=r.fromAtlas===!0,this.setTexture(r.texture,r.frame),sm(this,!1,!0,this._bounds))}return this},setMaxWidth:function(e,t){return this._maxWidth=e,this._dirty=!0,t!==void 0&&(this.wordWrapCharCode=t),this},align:{set:function(e){this._align=e,this._dirty=!0},get:function(){return this._align}},text:{set:function(e){this.setText(e)},get:function(){return this._text}},fontSize:{set:function(e){this._fontSize=e,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(e){this._letterSpacing=e,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(e){this._maxWidth=e,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var e=gi.ToJSON(this),t={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return e.data=t,e},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});Ar.ALIGN_LEFT=0;Ar.ALIGN_CENTER=1;Ar.ALIGN_RIGHT=2;Ar.ParseFromAtlas=VEe;Ar.ParseXMLBitmapFont=WEe;$z.exports=Ar});var eY=l((AKe,jz)=>{var ZEe=xt(),JEe=Te(),QEe=new ZEe,$Ee=function(e,t,i,r){var s=t.getRenderList();if(s.length!==0){var n=i.alpha*t.alpha;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(this.pipeline,t),h=i.scrollX*t.scrollFactorX,o=i.scrollY*t.scrollFactorY,u=QEe.copyFrom(i.matrix);r&&(u.multiplyWithOffset(r,-h,-o),h=0,o=0);var f=t.x-h,d=t.y-o,v=-1,c=!1,p=i.roundPixels;e.pipelines.preBatch(t);for(var m=0;m<s.length;m++){var x=s[m],g=x.frame,y=x.alpha*n;if(y!==0){var T=g.width,S=g.height,E=f+x.x+g.x,_=d+x.y+g.y;x.flipX&&(T*=-1,E+=g.width),x.flipY&&(S*=-1,_+=g.height);var w=E+T,R=_+S,q=u.getX(E,_),A=u.getY(E,_),P=u.getX(w,R),L=u.getY(w,R),b=JEe.getTintAppendFloatAlpha(x.tint,y);if(g.sourceIndex!==v){var G=a.setGameObject(t,g);v=g.sourceIndex}p&&(q=Math.round(q),A=Math.round(A),P=Math.round(P),L=Math.round(L)),a.batchQuad(t,q,A,q,L,P,L,P,A,g.u0,g.v0,g.u1,g.v1,b,b,b,b,c,g.glTexture,G)&&(v=-1)}}e.pipelines.postBatch(t)}}};jz.exports=$Ee});var iY=l((PKe,tY)=>{var jEe=function(e,t,i,r){var s=t.getRenderList();if(s.length!==0){var n=e.currentContext,a=i.alpha*t.alpha;if(a!==0){i.addToRenderList(t),n.globalCompositeOperation=e.blendModes[t.blendMode],n.imageSmoothingEnabled=!(!e.antialias||t.frame.source.scaleMode);var h=t.x-i.scrollX*t.scrollFactorX,o=t.y-i.scrollY*t.scrollFactorY;n.save(),r&&r.copyToContext(n);for(var u=i.roundPixels,f=0;f<s.length;f++){var d=s[f],v=d.flipX||d.flipY,c=d.frame,p=c.canvasData,m=c.x,x=c.y,g=1,y=1,T=d.alpha*a;T!==0&&(n.globalAlpha=T,v?(d.flipX&&(g=-1,m-=p.width),d.flipY&&(y=-1,x-=p.height),n.save(),n.translate(d.x+h,d.y+o),n.scale(g,y),n.drawImage(c.source.image,p.x,p.y,p.width,p.height,m,x,p.width,p.height),n.restore()):(u&&(m=Math.round(m),x=Math.round(x)),n.drawImage(c.source.image,p.x,p.y,p.width,p.height,m+d.x+h,x+d.y+o,p.width,p.height)))}n.restore()}}};tY.exports=jEe});var aY=l((MKe,nY)=>{var rY=B(),sY=B();rY=eY();sY=iY();nY.exports={renderWebGL:rY,renderCanvas:sY}});var nm=l((bKe,hY)=>{var eSe=C(),tSe=Hn(),iSe=new eSe({initialize:function(t,i,r,s,n){this.parent=t,this.x=i,this.y=r,this.frame=s,this.data={},this.tint=16777215,this._visible=n,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(e){return e===void 0?this.frame=this.parent.frame:e instanceof tSe&&e.texture===this.parent.texture?this.frame=e:this.frame=this.parent.texture.get(e),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(e,t,i){return this.x=e,this.y=t,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(e,t){return this.x=e,this.y=t,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,t){return this.flipX=e,this.flipY=t,this},setVisible:function(e){return this.visible=e,this},setAlpha:function(e){return this.alpha=e,this},setTint:function(e){return this.tint=e,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(e){this.parent.dirty|=this._visible!==e,this._visible=e}},alpha:{get:function(){return this._alpha},set:function(e){this.parent.dirty|=this._alpha>0!=e>0,this._alpha=e}}});hY.exports=iSe});var Zu=l((LKe,uY)=>{var rSe=aY(),sSe=nm(),nSe=C(),rr=ye(),aSe=Hn(),oY=Fe(),hSe=ta(),oSe=new nSe({Extends:oY,Mixins:[rr.Alpha,rr.BlendMode,rr.Depth,rr.Mask,rr.Pipeline,rr.ScrollFactor,rr.Size,rr.Texture,rr.Transform,rr.Visible,rSe],initialize:function(t,i,r,s,n){oY.call(this,t,"Blitter"),this.setTexture(s,n),this.setPosition(i,r),this.initPipeline(),this.children=new hSe,this.renderList=[],this.dirty=!1},create:function(e,t,i,r,s){r===void 0&&(r=!0),s===void 0&&(s=this.children.length),i===void 0?i=this.frame:i instanceof aSe||(i=this.texture.get(i));var n=new sSe(this,e,t,i,r);return this.children.addAt(n,s,!1),this.dirty=!0,n},createFromCallback:function(e,t,i,r){for(var s=this.createMultiple(t,i,r),n=0;n<s.length;n++){var a=s[n];e.call(this,a,n)}return s},createMultiple:function(e,t,i){t===void 0&&(t=this.frame.name),i===void 0&&(i=!0),Array.isArray(t)||(t=[t]);var r=[],s=this;return t.forEach(function(n){for(var a=0;a<e;a++)r.push(s.create(0,0,n,i))}),r},childCanRender:function(e){return e.visible&&e.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});uY.exports=oSe});var fY=l((OKe,lY)=>{var uSe=function(e,t,i,r){i.addToRenderList(t);var s=t.list,n=s.length;if(n!==0){var a=t.localTransform;r?(a.loadIdentity(),a.multiply(r),a.translate(t.x,t.y),a.rotate(t.rotation),a.scale(t.scaleX,t.scaleY)):a.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),e.pipelines.preBatch(t);var h=t.blendMode!==-1;h||e.setBlendMode(0);for(var o=t.alpha,u=t.scrollFactorX,f=t.scrollFactorY,d=0;d<n;d++){var v=s[d];if(!!v.willRender(i)){var c,p,m,x;if(v.alphaTopLeft!==void 0)c=v.alphaTopLeft,p=v.alphaTopRight,m=v.alphaBottomLeft,x=v.alphaBottomRight;else{var g=v.alpha;c=g,p=g,m=g,x=g}var y=v.scrollFactorX,T=v.scrollFactorY;!h&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode);var S=v.mask;S&&S.preRenderWebGL(e,v,i);var E=v.type;E!==e.currentType&&(e.newType=!0,e.currentType=E),e.nextTypeMatch=d<n-1?s[d+1].type===e.currentType:!1,v.setScrollFactor(y*u,T*f),v.setAlpha(c*o,p*o,m*o,x*o),v.renderWebGL(e,v,i,a),v.setAlpha(c,p,m,x),v.setScrollFactor(y,T),S&&S.postRenderWebGL(e,i),e.newType=!1}}e.pipelines.postBatch(t)}};lY.exports=uSe});var vY=l((FKe,dY)=>{var lSe=function(e,t,i,r){i.addToRenderList(t);var s=t.list;if(s.length!==0){var n=t.localTransform;r?(n.loadIdentity(),n.multiply(r),n.translate(t.x,t.y),n.rotate(t.rotation),n.scale(t.scaleX,t.scaleY)):n.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);var a=t.blendMode!==-1;a||e.setBlendMode(0);var h=t._alpha,o=t.scrollFactorX,u=t.scrollFactorY;t.mask&&t.mask.preRenderCanvas(e,null,i);for(var f=0;f<s.length;f++){var d=s[f];if(!!d.willRender(i)){var v=d.alpha,c=d.scrollFactorX,p=d.scrollFactorY;!a&&d.blendMode!==e.currentBlendMode&&e.setBlendMode(d.blendMode),d.setScrollFactor(c*o,p*u),d.setAlpha(v*h),d.renderCanvas(e,d,i,n),d.setAlpha(v),d.setScrollFactor(c,p)}}t.mask&&t.mask.postRenderCanvas(e)}};dY.exports=lSe});var gY=l((DKe,mY)=>{var cY=B(),pY=B();cY=fY();pY=vY();mY.exports={renderWebGL:cY,renderCanvas:pY}});var am=l((IKe,xY)=>{var fSe=Ae(),dSe=function(e,t,i){i===void 0&&(i=new fSe);var r=Math.min(e.x,t.x),s=Math.min(e.y,t.y),n=Math.max(e.right,t.right)-r,a=Math.max(e.bottom,t.bottom)-s;return i.setTo(r,s,n,a)};xY.exports=dSe});var Ju=l((NKe,_Y)=>{var Ce=Hu(),vSe=Si(),cSe=C(),sr=ye(),yY=Vr(),TY=Fe(),EY=Ae(),pSe=gY(),mSe=am(),SY=xe(),gSe=new cSe({Extends:TY,Mixins:[sr.AlphaSingle,sr.BlendMode,sr.ComputedSize,sr.Depth,sr.Mask,sr.Pipeline,sr.Transform,sr.Visible,pSe],initialize:function(t,i,r,s){TY.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new sr.TransformMatrix,this.tempTransformMatrix=new sr.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(i,r),this.clearAlpha(),this.setBlendMode(vSe.SKIP_CHECK),s&&this.add(s)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(e){return e===void 0&&(e=!0),this.exclusive=e,this},getBounds:function(e){if(e===void 0&&(e=new EY),e.setTo(this.x,this.y,0,0),this.parentContainer){var t=this.parentContainer.getBoundsTransformMatrix(),i=t.transformPoint(this.x,this.y);e.setTo(i.x,i.y,0,0)}if(this.list.length>0){var r=this.list,s=new EY,n=!1;e.setEmpty();for(var a=0;a<r.length;a++){var h=r[a];h.getBounds&&(h.getBounds(s),n?mSe(s,e,e):(e.setTo(s.x,s.y,s.width,s.height),n=!0))}}return e},addHandler:function(e){e.once(yY.DESTROY,this.remove,this),this.exclusive&&(e.parentContainer&&e.parentContainer.remove(e),e.removeFromDisplayList(),e.parentContainer=this)},removeHandler:function(e){e.off(yY.DESTROY,this.remove),this.exclusive&&(e.parentContainer=null,e.addToDisplayList())},pointToContainer:function(e,t){t===void 0&&(t=new SY),this.parentContainer?this.parentContainer.pointToContainer(e,t):t=new SY(e.x,e.y);var i=this.tempTransformMatrix;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(e.x,e.y,t),t},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(e){return Ce.Add(this.list,e,this.maxSize,this.addHandler,this),this},addAt:function(e,t){return Ce.AddAt(this.list,e,t,this.maxSize,this.addHandler,this),this},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,t){return e?(t===void 0&&(t=function(i,r){return i[e]-r[e]}),Ce.StableSort(this.list,t),this):this},getByName:function(e){return Ce.GetFirst(this.list,"name",e)},getRandom:function(e,t){return Ce.GetRandom(this.list,e,t)},getFirst:function(e,t,i,r){return Ce.GetFirst(this.list,e,t,i,r)},getAll:function(e,t,i,r){return Ce.GetAll(this.list,e,t,i,r)},count:function(e,t,i,r){return Ce.CountAllMatching(this.list,e,t,i,r)},swap:function(e,t){return Ce.Swap(this.list,e,t),this},moveTo:function(e,t){return Ce.MoveTo(this.list,e,t),this},moveAbove:function(e,t){return Ce.MoveAbove(this.list,e,t),this},moveBelow:function(e,t){return Ce.MoveBelow(this.list,e,t),this},remove:function(e,t){var i=Ce.Remove(this.list,e,this.removeHandler,this);if(t&&i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)i[r].destroy()}return this},removeAt:function(e,t){var i=Ce.RemoveAt(this.list,e,this.removeHandler,this);return t&&i&&i.destroy(),this},removeBetween:function(e,t,i){var r=Ce.RemoveBetween(this.list,e,t,this.removeHandler,this);if(i)for(var s=0;s<r.length;s++)r[s].destroy();return this},removeAll:function(e){var t=Ce.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(e)for(var i=0;i<t.length;i++)t[i].destroy();return this},bringToTop:function(e){return Ce.BringToTop(this.list,e),this},sendToBack:function(e){return Ce.SendToBack(this.list,e),this},moveUp:function(e){return Ce.MoveUp(this.list,e),this},moveDown:function(e){return Ce.MoveDown(this.list,e),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return Ce.Shuffle(this.list),this},replace:function(e,t,i){var r=Ce.Replace(this.list,e,t);return r&&(this.addHandler(t),this.removeHandler(e),i&&e.destroy()),this},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,t,i,r){return Ce.SetAll(this.list,e,t,i,r),this},each:function(e,t){var i=[null],r,s=this.list.slice(),n=s.length;for(r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<n;r++)i[0]=s[r],e.apply(t,i);return this},iterate:function(e,t){var i=[null],r;for(r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<this.list.length;r++)i[0]=this.list[r],e.apply(t,i);return this},setScrollFactor:function(e,t,i){return t===void 0&&(t=e),i===void 0&&(i=!1),this.scrollFactorX=e,this.scrollFactorY=t,i&&(Ce.SetAll(this.list,"scrollFactorX",e),Ce.SetAll(this.list,"scrollFactorY",t)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});_Y.exports=gSe});var CY=l((GKe,wY)=>{wY.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]});var om=l((BKe,RY)=>{var xSe=CY(),ySe=Fe(),hm=xt(),TSe=new hm,ESe=new hm,SSe=new hm,_Se=function(e,t,i,r){if(!!t.node){var s=t.node.style,n=t.scene.sys.settings;if(!s||!n.visible||ySe.RENDER_MASK!==t.renderFlags||t.cameraFilter!==0&&t.cameraFilter&i.id||t.parentContainer&&!t.parentContainer.willRender()){s.display="none";return}var a=t.parentContainer,h=i.alpha*t.alpha;a&&(h*=a.alpha);var o=TSe,u=ESe,f=SSe,d=0,v=0,c="0%",p="0%";r?(d=t.width*t.scaleX*t.originX,v=t.height*t.scaleY*t.originY,u.applyITRS(t.x-d,t.y-v,t.rotation,t.scaleX,t.scaleY),o.copyFrom(i.matrix),o.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),u.e=t.x-d,u.f=t.y-v,o.multiply(u,f)):(d=t.width*t.originX,v=t.height*t.originY,u.applyITRS(t.x-d,t.y-v,t.rotation,t.scaleX,t.scaleY),o.copyFrom(i.matrix),c=100*t.originX+"%",p=100*t.originY+"%",u.e-=i.scrollX*t.scrollFactorX,u.f-=i.scrollY*t.scrollFactorY,o.multiply(u,f)),t.transformOnly||(s.display="block",s.opacity=h,s.zIndex=t._depth,s.pointerEvents=t.pointerEvents,s.mixBlendMode=xSe[t._blendMode]),s.transform=f.getCSSMatrix()+" skew("+t.skewX+"rad, "+t.skewY+"rad) rotate3d("+t.rotate3d.x+","+t.rotate3d.y+","+t.rotate3d.z+","+t.rotate3d.w+t.rotate3dAngle+")",s.transformOrigin=c+" "+p}};RY.exports=_Se});var MY=l((UKe,PY)=>{var qY=B(),AY=B();qY=om();AY=om();PY.exports={renderWebGL:qY,renderCanvas:AY}});var um=l((kKe,LY)=>{var wSe=C(),on=ye(),CSe=MY(),bY=Fe(),RSe=ae(),qSe=Eu(),ia=Ne(),ASe=th(),PSe=new wSe({Extends:bY,Mixins:[on.AlphaSingle,on.BlendMode,on.Depth,on.Origin,on.ScrollFactor,on.Transform,on.Visible,CSe],initialize:function(t,i,r,s,n,a){bY.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new ASe,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(i,r),typeof s=="string"?s[0]==="#"?this.setElement(s.substr(1),n,a):this.createElement(s,n,a):s&&this.setElement(s,n,a),t.sys.events.on(ia.SLEEP,this.handleSceneEvent,this),t.sys.events.on(ia.WAKE,this.handleSceneEvent,this),t.sys.events.on(ia.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(e){var t=this.node,i=t.style;t&&(i.display=e.settings.visible?"block":"none")},setSkew:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.skewX=e,this.skewY=t,this},setPerspective:function(e){return this.parent.style.perspective=e+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(e){this.parent.style.perspective=e+"px"}},addListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++)this.node.addEventListener(e[t],this.handler,!1)}return this},removeListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++)this.node.removeEventListener(e[t],this.handler)}return this},dispatchNativeEvent:function(e){this.emit(e.type,e)},createElement:function(e,t,i){return this.setElement(document.createElement(e),t,i)},setElement:function(e,t,i){this.removeElement();var r;if(typeof e=="string"?(e[0]==="#"&&(e=e.substr(1)),r=document.getElementById(e)):typeof e=="object"&&e.nodeType===1&&(r=e),!r)return this;if(this.node=r,t&&RSe(t))for(var s in t)r.style[s]=t[s];else typeof t=="string"&&(r.style=t);return r.style.zIndex="0",r.style.display="inline",r.style.position="absolute",r.phaser=this,this.parent&&this.parent.appendChild(r),i&&(r.innerText=i),this.updateSize()},createFromCache:function(e,t){var i=this.cache.get(e);return i&&this.createFromHTML(i,t),this},createFromHTML:function(e,t){t===void 0&&(t="div"),this.removeElement();var i=document.createElement(t);return this.node=i,i.style.zIndex="0",i.style.display="inline",i.style.position="absolute",i.phaser=this,this.parent&&this.parent.appendChild(i),i.innerHTML=e,this.updateSize()},removeElement:function(){return this.node&&(qSe(this.node),this.node=null),this},updateSize:function(){var e=this.node,t=e.getBoundingClientRect();return this.width=e.clientWidth,this.height=e.clientHeight,this.displayWidth=t.width||0,this.displayHeight=t.height||0,this},getChildByProperty:function(e,t){if(this.node){for(var i=this.node.querySelectorAll("*"),r=0;r<i.length;r++)if(i[r][e]===t)return i[r]}return null},getChildByID:function(e){return this.getChildByProperty("id",e)},getChildByName:function(e){return this.getChildByProperty("name",e)},setClassName:function(e){return this.node&&(this.node.className=e,this.updateSize()),this},setText:function(e){return this.node&&(this.node.innerText=e,this.updateSize()),this},setHTML:function(e){return this.node&&(this.node.innerHTML=e,this.updateSize()),this},preRender:function(){var e=this.parentContainer,t=this.node;t&&e&&!e.willRender()&&(t.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(ia.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(ia.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(ia.PRE_RENDER,this.preRender,this)}});LY.exports=PSe});var FY=l((zKe,OY)=>{var MSe=be(),bSe=xt(),ps=Te(),LSe=new bSe,OSe=function(e,t,i,r){var s=t.text,n=s.length;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline,t),h=MSe(t,i,r),o=h.sprite,u=h.calc,f=LSe,d=t.cropWidth>0||t.cropHeight>0;d&&(a.flush(),e.pushScissor(u.tx,u.ty,t.cropWidth*u.scaleX,t.cropHeight*u.scaleY));var v=t.frame,c=v.glTexture,p=t.tintFill,m=ps.getTintAppendFloatAlpha(t.tintTopLeft,i.alpha*t._alphaTL),x=ps.getTintAppendFloatAlpha(t.tintTopRight,i.alpha*t._alphaTR),g=ps.getTintAppendFloatAlpha(t.tintBottomLeft,i.alpha*t._alphaBL),y=ps.getTintAppendFloatAlpha(t.tintBottomRight,i.alpha*t._alphaBR),T=a.setGameObject(t),S=0,E=0,_=0,w=0,R=t.letterSpacing,q,A=0,P=0,L,b=t.scrollX,G=t.scrollY,M=t.fontData,D=M.chars,I=M.lineHeight,F=t.fontSize/M.size,O=0,K=t._align,H=0,Y=0,ee=t.getTextBounds(!1);t.maxWidth>0&&(s=ee.wrappedText,n=s.length);var U=t._bounds.lines;K===1?Y=(U.longest-U.lengths[0])/2:K===2&&(Y=U.longest-U.lengths[0]);var J=i.roundPixels,st=t.displayCallback,ve=t.callbackData;e.pipelines.preBatch(t);for(var gt=0;gt<n;gt++){if(_=s.charCodeAt(gt),_===10){H++,K===1?Y=(U.longest-U.lengths[H])/2:K===2&&(Y=U.longest-U.lengths[H]),S=0,E+=I,L=null;continue}if(q=D[_],!!q){A=q.width,P=q.height;var _e=q.xOffset+S-b,nt=q.yOffset+E-G;if(L!==null){var Ze=q.kerning[w];_e+=Ze!==void 0?Ze:0}if(S+=q.xAdvance+R,L=q,w=_,!(A===0||P===0||_===32)){if(F=t.fontSize/t.fontData.size,O=0,st){ve.color=0,ve.tint.topLeft=m,ve.tint.topRight=x,ve.tint.bottomLeft=g,ve.tint.bottomRight=y,ve.index=gt,ve.charCode=_,ve.x=_e,ve.y=nt,ve.scale=F,ve.rotation=O,ve.data=q.data;var te=st(ve);_e=te.x,nt=te.y,F=te.scale,O=te.rotation,te.color?(m=te.color,x=te.color,g=te.color,y=te.color):(m=te.tint.topLeft,x=te.tint.topRight,g=te.tint.bottomLeft,y=te.tint.bottomRight),m=ps.getTintAppendFloatAlpha(m,i.alpha*t._alphaTL),x=ps.getTintAppendFloatAlpha(x,i.alpha*t._alphaTR),g=ps.getTintAppendFloatAlpha(g,i.alpha*t._alphaBL),y=ps.getTintAppendFloatAlpha(y,i.alpha*t._alphaBR)}_e*=F,nt*=F,_e-=t.displayOriginX,nt-=t.displayOriginY,_e+=Y,f.applyITRS(_e,nt,O,F,F),u.multiply(f,o);var Ue=q.u0,qe=q.v0,Pt=q.u1,ut=q.v1,oe=A,ke=P,lt=o.e,X=o.f,V=ke*o.c+o.e,Z=ke*o.d+o.f,pe=oe*o.a+ke*o.c+o.e,Q=oe*o.b+ke*o.d+o.f,zi=oe*o.a+o.e,ce=oe*o.b+o.f;J&&(lt=Math.round(lt),X=Math.round(X),V=Math.round(V),Z=Math.round(Z),pe=Math.round(pe),Q=Math.round(Q),zi=Math.round(zi),ce=Math.round(ce)),a.batchQuad(t,lt,X,V,Z,pe,Q,zi,ce,Ue,qe,Pt,ut,m,x,g,y,p,c,T)}}}d&&(a.flush(),e.popScissor()),e.pipelines.postBatch(t)}};OY.exports=OSe});var IY=l((YKe,DY)=>{var FSe=St(),DSe=function(e,t,i,r){var s=t._text,n=s.length,a=e.currentContext;if(!(n===0||!FSe(e,a,t,i,r))){i.addToRenderList(t);var h=t.fromAtlas?t.frame:t.texture.frames.__BASE,o=t.displayCallback,u=t.callbackData,f=t.fontData.chars,d=t.fontData.lineHeight,v=t._letterSpacing,c=0,p=0,m=0,x=null,g=0,y=0,T=0,S=0,E=0,_=0,w=null,R=0,q=t.frame.source.image,A=h.cutX,P=h.cutY,L=0,b=0,G=t._fontSize/t.fontData.size,M=t._align,D=0,I=0;t.getTextBounds(!1);var F=t._bounds.lines;M===1?I=(F.longest-F.lengths[0])/2:M===2&&(I=F.longest-F.lengths[0]),a.translate(-t.displayOriginX,-t.displayOriginY);var O=i.roundPixels;t.cropWidth>0&&t.cropHeight>0&&(a.beginPath(),a.rect(0,0,t.cropWidth,t.cropHeight),a.clip());for(var K=0;K<n;K++){if(b=G,L=0,m=s.charCodeAt(K),m===10){D++,M===1?I=(F.longest-F.lengths[D])/2:M===2&&(I=F.longest-F.lengths[D]),c=0,p+=d,w=null;continue}if(x=f[m],!!x){if(g=A+x.x,y=P+x.y,T=x.width,S=x.height,E=x.xOffset+c-t.scrollX,_=x.yOffset+p-t.scrollY,w!==null){var H=x.kerning[R];E+=H!==void 0?H:0}if(o){u.index=K,u.charCode=m,u.x=E,u.y=_,u.scale=b,u.rotation=L,u.data=x.data;var Y=o(u);E=Y.x,_=Y.y,b=Y.scale,L=Y.rotation}E*=b,_*=b,E+=I,c+=x.xAdvance+v,w=x,R=m,!(T===0||S===0||m===32)&&(O&&(E=Math.round(E),_=Math.round(_)),a.save(),a.translate(E,_),a.rotate(L),a.scale(b,b),a.drawImage(q,g,y,T,S,0,0,T,S),a.restore())}}a.restore()}};DY.exports=DSe});var UY=l((XKe,BY)=>{var NY=B(),GY=B();NY=FY();GY=IY();BY.exports={renderWebGL:NY,renderCanvas:GY}});var Qu=l((VKe,zY)=>{var kY=Th(),ISe=C(),NSe=UY(),GSe=new ISe({Extends:kY,Mixins:[NSe],initialize:function(t,i,r,s,n,a,h){kY.call(this,t,i,r,s,n,a,h),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(e,t){return this.cropWidth=e,this.cropHeight=t,this},setDisplayCallback:function(e){return this.displayCallback=e,this},setScrollX:function(e){return this.scrollX=e,this},setScrollY:function(e){return this.scrollY=e,this}});zY.exports=GSe});var XY=l((WKe,YY)=>{var BSe=be(),USe=function(e,t,i,r){e.pipelines.clear();var s=BSe(t,i,r).calc;t.render.call(t,e,i,s),e.pipelines.rebind()};YY.exports=USe});var VY=l(()=>{});var ZY=l((ZKe,KY)=>{var WY=B(),HY=B();WY=XY();HY=VY();KY.exports={renderWebGL:WY,renderCanvas:HY}});var lm=l((JKe,QY)=>{var kSe=C(),Ii=ye(),JY=Fe(),zSe=ZY(),YSe=new kSe({Extends:JY,Mixins:[Ii.Alpha,Ii.BlendMode,Ii.Depth,Ii.Flip,Ii.Origin,Ii.ScrollFactor,Ii.Size,Ii.Texture,Ii.Tint,Ii.Transform,Ii.Visible,zSe],initialize:function(t){JY.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});QY.exports=YSe});var $u=l((QKe,$Y)=>{$Y.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}});var ra=l(($Ke,jY)=>{var XSe=function(e,t,i){if(e.width<=0||e.height<=0)return!1;var r=(t-e.x)/e.width,s=(i-e.y)/e.height;return r*=r,s*=s,r+s<.25};jY.exports=XSe});var ju=l((jKe,e3)=>{var VSe=$(),WSe=function(e,t,i){i===void 0&&(i=new VSe);var r=e.width/2,s=e.height/2;return i.x=e.x+r*Math.cos(t),i.y=e.y+s*Math.sin(t),i};e3.exports=WSe});var fm=l((eZe,t3)=>{var HSe=ju(),KSe=Tn(),ZSe=Oe(),JSe=$(),QSe=function(e,t,i){i===void 0&&(i=new JSe);var r=KSe(t,0,ZSe.PI2);return HSe(e,r,i)};t3.exports=QSe});var dm=l((tZe,i3)=>{var $Se=function(e){var t=e.width/2,i=e.height/2,r=Math.pow(t-i,2)/Math.pow(t+i,2);return Math.PI*(t+i)*(1+3*r/(10+Math.sqrt(4-3*r)))};i3.exports=$Se});var vm=l((iZe,r3)=>{var jSe=dm(),e_e=ju(),t_e=Tn(),i_e=Oe(),r_e=function(e,t,i,r){r===void 0&&(r=[]),!t&&i>0&&(t=jSe(e)/i);for(var s=0;s<t;s++){var n=t_e(s/t,0,i_e.PI2);r.push(e_e(e,n))}return r};r3.exports=r_e});var sa=l((rZe,s3)=>{var s_e=C(),n_e=ra(),a_e=fm(),h_e=vm(),o_e=Ki(),u_e=Po(),l_e=new s_e({initialize:function(t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),this.type=o_e.ELLIPSE,this.x=t,this.y=i,this.width=r,this.height=s},contains:function(e,t){return n_e(this,e,t)},getPoint:function(e,t){return a_e(this,e,t)},getPoints:function(e,t,i){return h_e(this,e,t,i)},getRandomPoint:function(e){return u_e(this,e)},setTo:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(e,t){return t===void 0&&(t=e),this.x=e,this.y=t,this},setSize:function(e,t){return t===void 0&&(t=e),this.width=e,this.height=t,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(e){this.x=e+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(e){this.y=e+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}});s3.exports=l_e});var h3=l((sZe,a3)=>{var tt=$u(),f_e=be(),d_e=xt(),v_e=Te(),el=function(e,t,i){this.x=e,this.y=t,this.width=i},cm=function(e,t,i){this.points=[],this.pointsLength=1,this.points[0]=new el(e,t,i)},n3=[],c_e=new d_e,p_e=function(e,t,i,r){if(t.commandBuffer.length!==0){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline,t);e.pipelines.preBatch(t);for(var n=f_e(t,i,r).calc,a=c_e.loadIdentity(),h=t.commandBuffer,o=i.alpha*t.alpha,u=1,f=s.fillTint,d=s.strokeTint,v=0,c=0,p=0,m=.01,x=Math.PI*2,g,y=[],T=0,S=!0,E=null,_=v_e.getTintAppendFloatAlpha,w=0;w<h.length;w++)switch(g=h[w],g){case tt.BEGIN_PATH:{y.length=0,E=null,S=!0;break}case tt.CLOSE_PATH:{S=!1,E&&E.points.length&&E.points.push(E.points[0]);break}case tt.FILL_PATH:{for(T=0;T<y.length;T++)s.batchFillPath(y[T].points,a,n);break}case tt.STROKE_PATH:{for(T=0;T<y.length;T++)s.batchStrokePath(y[T].points,u,S,a,n);break}case tt.LINE_STYLE:{u=h[++w];var R=h[++w],q=h[++w]*o,A=_(R,q);d.TL=A,d.TR=A,d.BL=A,d.BR=A;break}case tt.FILL_STYLE:{var P=h[++w],L=h[++w]*o,b=_(P,L);f.TL=b,f.TR=b,f.BL=b,f.BR=b;break}case tt.GRADIENT_FILL_STYLE:{var G=h[++w]*o,M=h[++w]*o,D=h[++w]*o,I=h[++w]*o;f.TL=_(h[++w],G),f.TR=_(h[++w],M),f.BL=_(h[++w],D),f.BR=_(h[++w],I);break}case tt.GRADIENT_LINE_STYLE:{u=h[++w];var F=h[++w]*o;d.TL=_(h[++w],F),d.TR=_(h[++w],F),d.BL=_(h[++w],F),d.BR=_(h[++w],F);break}case tt.ARC:{var O=0,K=h[++w],H=h[++w],Y=h[++w],ee=h[++w],U=h[++w],J=h[++w],st=h[++w];for(U-=ee,J?U<-x?U=-x:U>0&&(U=-x+U%x):U>x?U=x:U<0&&(U=x+U%x),E===null&&(E=new cm(K+Math.cos(ee)*Y,H+Math.sin(ee)*Y,u),y.push(E),O+=m);O<1+st;)p=U*O+ee,v=K+Math.cos(p)*Y,c=H+Math.sin(p)*Y,E.points.push(new el(v,c,u)),O+=m;p=U+ee,v=K+Math.cos(p)*Y,c=H+Math.sin(p)*Y,E.points.push(new el(v,c,u));break}case tt.FILL_RECT:{s.batchFillRect(h[++w],h[++w],h[++w],h[++w],a,n);break}case tt.FILL_TRIANGLE:{s.batchFillTriangle(h[++w],h[++w],h[++w],h[++w],h[++w],h[++w],a,n);break}case tt.STROKE_TRIANGLE:{s.batchStrokeTriangle(h[++w],h[++w],h[++w],h[++w],h[++w],h[++w],u,a,n);break}case tt.LINE_TO:{E!==null?E.points.push(new el(h[++w],h[++w],u)):(E=new cm(h[++w],h[++w],u),y.push(E));break}case tt.MOVE_TO:{E=new cm(h[++w],h[++w],u),y.push(E);break}case tt.SAVE:{n3.push(a.copyToArray());break}case tt.RESTORE:{a.copyFromArray(n3.pop());break}case tt.TRANSLATE:{K=h[++w],H=h[++w],a.translate(K,H);break}case tt.SCALE:{K=h[++w],H=h[++w],a.scale(K,H);break}case tt.ROTATE:{a.rotate(h[++w]);break}}e.pipelines.postBatch(t)}};a3.exports=p_e});var pm=l((nZe,o3)=>{var Ge=$u(),m_e=St(),g_e=function(e,t,i,r,s,n){var a=t.commandBuffer,h=a.length,o=s||e.currentContext;if(!(h===0||!m_e(e,o,t,i,r))){i.addToRenderList(t);var u=1,f=1,d=0,v=0,c=1,p=0,m=0,x=0;o.beginPath();for(var g=0;g<h;++g){var y=a[g];switch(y){case Ge.ARC:o.arc(a[g+1],a[g+2],a[g+3],a[g+4],a[g+5],a[g+6]),g+=7;break;case Ge.LINE_STYLE:c=a[g+1],d=a[g+2],u=a[g+3],p=(d&16711680)>>>16,m=(d&65280)>>>8,x=d&255,o.strokeStyle="rgba("+p+","+m+","+x+","+u+")",o.lineWidth=c,g+=3;break;case Ge.FILL_STYLE:v=a[g+1],f=a[g+2],p=(v&16711680)>>>16,m=(v&65280)>>>8,x=v&255,o.fillStyle="rgba("+p+","+m+","+x+","+f+")",g+=2;break;case Ge.BEGIN_PATH:o.beginPath();break;case Ge.CLOSE_PATH:o.closePath();break;case Ge.FILL_PATH:n||o.fill();break;case Ge.STROKE_PATH:n||o.stroke();break;case Ge.FILL_RECT:n?o.rect(a[g+1],a[g+2],a[g+3],a[g+4]):o.fillRect(a[g+1],a[g+2],a[g+3],a[g+4]),g+=4;break;case Ge.FILL_TRIANGLE:o.beginPath(),o.moveTo(a[g+1],a[g+2]),o.lineTo(a[g+3],a[g+4]),o.lineTo(a[g+5],a[g+6]),o.closePath(),n||o.fill(),g+=6;break;case Ge.STROKE_TRIANGLE:o.beginPath(),o.moveTo(a[g+1],a[g+2]),o.lineTo(a[g+3],a[g+4]),o.lineTo(a[g+5],a[g+6]),o.closePath(),n||o.stroke(),g+=6;break;case Ge.LINE_TO:o.lineTo(a[g+1],a[g+2]),g+=2;break;case Ge.MOVE_TO:o.moveTo(a[g+1],a[g+2]),g+=2;break;case Ge.LINE_FX_TO:o.lineTo(a[g+1],a[g+2]),g+=5;break;case Ge.MOVE_FX_TO:o.moveTo(a[g+1],a[g+2]),g+=5;break;case Ge.SAVE:o.save();break;case Ge.RESTORE:o.restore();break;case Ge.TRANSLATE:o.translate(a[g+1],a[g+2]),g+=2;break;case Ge.SCALE:o.scale(a[g+1],a[g+2]),g+=2;break;case Ge.ROTATE:o.rotate(a[g+1]),g+=1;break;case Ge.GRADIENT_FILL_STYLE:g+=5;break;case Ge.GRADIENT_LINE_STYLE:g+=6;break}}o.restore()}};o3.exports=g_e});var f3=l((aZe,l3)=>{var u3=B(),mm=B();u3=h3(),mm=pm();mm=pm();l3.exports={renderWebGL:u3,renderCanvas:mm}});var tl=l((hZe,c3)=>{var x_e=za(),y_e=C(),Se=$u(),T_e=Od(),E_e=Fd(),S_e=Dd(),__e=kd(),w_e=Yd(),C_e=Xd(),R_e=Kd(),q_e=Zd(),d3=sa(),v3=Fe(),ms=z(),Pr=he(),nr=Oe(),A_e=f3(),un=new y_e({Extends:v3,Mixins:[T_e,E_e,S_e,__e,w_e,R_e,q_e,C_e,A_e],initialize:function(t,i){var r=Pr(i,"x",0),s=Pr(i,"y",0);v3.call(this,t,"Graphics"),this.setPosition(r,s),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(i)},setDefaultStyles:function(e){return Pr(e,"lineStyle",null)&&(this.defaultStrokeWidth=Pr(e,"lineStyle.width",1),this.defaultStrokeColor=Pr(e,"lineStyle.color",16777215),this.defaultStrokeAlpha=Pr(e,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),Pr(e,"fillStyle",null)&&(this.defaultFillColor=Pr(e,"fillStyle.color",16777215),this.defaultFillAlpha=Pr(e,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(e,t,i){return i===void 0&&(i=1),this.commandBuffer.push(Se.LINE_STYLE,e,t,i),this._lineWidth=e,this},fillStyle:function(e,t){return t===void 0&&(t=1),this.commandBuffer.push(Se.FILL_STYLE,e,t),this},fillGradientStyle:function(e,t,i,r,s,n,a,h){return s===void 0&&(s=1),n===void 0&&(n=s),a===void 0&&(a=s),h===void 0&&(h=s),this.commandBuffer.push(Se.GRADIENT_FILL_STYLE,s,n,a,h,e,t,i,r),this},lineGradientStyle:function(e,t,i,r,s,n){return n===void 0&&(n=1),this.commandBuffer.push(Se.GRADIENT_LINE_STYLE,e,n,t,i,r,s),this},beginPath:function(){return this.commandBuffer.push(Se.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(Se.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(Se.FILL_PATH),this},fill:function(){return this.commandBuffer.push(Se.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(Se.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(Se.STROKE_PATH),this},fillCircleShape:function(e){return this.fillCircle(e.x,e.y,e.radius)},strokeCircleShape:function(e){return this.strokeCircle(e.x,e.y,e.radius)},fillCircle:function(e,t,i){return this.beginPath(),this.arc(e,t,i,0,nr.PI2),this.fillPath(),this},strokeCircle:function(e,t,i){return this.beginPath(),this.arc(e,t,i,0,nr.PI2),this.strokePath(),this},fillRectShape:function(e){return this.fillRect(e.x,e.y,e.width,e.height)},strokeRectShape:function(e){return this.strokeRect(e.x,e.y,e.width,e.height)},fillRect:function(e,t,i,r){return this.commandBuffer.push(Se.FILL_RECT,e,t,i,r),this},strokeRect:function(e,t,i,r){var s=this._lineWidth/2,n=e-s,a=e+s;return this.beginPath(),this.moveTo(e,t),this.lineTo(e,t+r),this.strokePath(),this.beginPath(),this.moveTo(e+i,t),this.lineTo(e+i,t+r),this.strokePath(),this.beginPath(),this.moveTo(n,t),this.lineTo(a+i,t),this.strokePath(),this.beginPath(),this.moveTo(n,t+r),this.lineTo(a+i,t+r),this.strokePath(),this},fillRoundedRect:function(e,t,i,r,s){s===void 0&&(s=20);var n=s,a=s,h=s,o=s;return typeof s!="number"&&(n=ms(s,"tl",20),a=ms(s,"tr",20),h=ms(s,"bl",20),o=ms(s,"br",20)),this.beginPath(),this.moveTo(e+n,t),this.lineTo(e+i-a,t),this.arc(e+i-a,t+a,a,-nr.TAU,0),this.lineTo(e+i,t+r-o),this.arc(e+i-o,t+r-o,o,0,nr.TAU),this.lineTo(e+h,t+r),this.arc(e+h,t+r-h,h,nr.TAU,Math.PI),this.lineTo(e,t+n),this.arc(e+n,t+n,n,-Math.PI,-nr.TAU),this.fillPath(),this},strokeRoundedRect:function(e,t,i,r,s){s===void 0&&(s=20);var n=s,a=s,h=s,o=s;return typeof s!="number"&&(n=ms(s,"tl",20),a=ms(s,"tr",20),h=ms(s,"bl",20),o=ms(s,"br",20)),this.beginPath(),this.moveTo(e+n,t),this.lineTo(e+i-a,t),this.moveTo(e+i-a,t),this.arc(e+i-a,t+a,a,-nr.TAU,0),this.lineTo(e+i,t+r-o),this.moveTo(e+i,t+r-o),this.arc(e+i-o,t+r-o,o,0,nr.TAU),this.lineTo(e+h,t+r),this.moveTo(e+h,t+r),this.arc(e+h,t+r-h,h,nr.TAU,Math.PI),this.lineTo(e,t+n),this.moveTo(e,t+n),this.arc(e+n,t+n,n,-Math.PI,-nr.TAU),this.strokePath(),this},fillPointShape:function(e,t){return this.fillPoint(e.x,e.y,t)},fillPoint:function(e,t,i){return!i||i<1?i=1:(e-=i/2,t-=i/2),this.commandBuffer.push(Se.FILL_RECT,e,t,i,i),this},fillTriangleShape:function(e){return this.fillTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},strokeTriangleShape:function(e){return this.strokeTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},fillTriangle:function(e,t,i,r,s,n){return this.commandBuffer.push(Se.FILL_TRIANGLE,e,t,i,r,s,n),this},strokeTriangle:function(e,t,i,r,s,n){return this.commandBuffer.push(Se.STROKE_TRIANGLE,e,t,i,r,s,n),this},strokeLineShape:function(e){return this.lineBetween(e.x1,e.y1,e.x2,e.y2)},lineBetween:function(e,t,i,r){return this.beginPath(),this.moveTo(e,t),this.lineTo(i,r),this.strokePath(),this},lineTo:function(e,t){return this.commandBuffer.push(Se.LINE_TO,e,t),this},moveTo:function(e,t){return this.commandBuffer.push(Se.MOVE_TO,e,t),this},strokePoints:function(e,t,i,r){t===void 0&&(t=!1),i===void 0&&(i=!1),r===void 0&&(r=e.length),this.beginPath(),this.moveTo(e[0].x,e[0].y);for(var s=1;s<r;s++)this.lineTo(e[s].x,e[s].y);return t&&this.lineTo(e[0].x,e[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(e,t,i,r){t===void 0&&(t=!1),i===void 0&&(i=!1),r===void 0&&(r=e.length),this.beginPath(),this.moveTo(e[0].x,e[0].y);for(var s=1;s<r;s++)this.lineTo(e[s].x,e[s].y);return t&&this.lineTo(e[0].x,e[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(e,t){t===void 0&&(t=32);var i=e.getPoints(t);return this.strokePoints(i,!0)},strokeEllipse:function(e,t,i,r,s){s===void 0&&(s=32);var n=new d3(e,t,i,r),a=n.getPoints(s);return this.strokePoints(a,!0)},fillEllipseShape:function(e,t){t===void 0&&(t=32);var i=e.getPoints(t);return this.fillPoints(i,!0)},fillEllipse:function(e,t,i,r,s){s===void 0&&(s=32);var n=new d3(e,t,i,r),a=n.getPoints(s);return this.fillPoints(a,!0)},arc:function(e,t,i,r,s,n,a){return n===void 0&&(n=!1),a===void 0&&(a=0),this.commandBuffer.push(Se.ARC,e,t,i,r,s,n,a),this},slice:function(e,t,i,r,s,n,a){return n===void 0&&(n=!1),a===void 0&&(a=0),this.commandBuffer.push(Se.BEGIN_PATH),this.commandBuffer.push(Se.MOVE_TO,e,t),this.commandBuffer.push(Se.ARC,e,t,i,r,s,n,a),this.commandBuffer.push(Se.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(Se.SAVE),this},restore:function(){return this.commandBuffer.push(Se.RESTORE),this},translateCanvas:function(e,t){return this.commandBuffer.push(Se.TRANSLATE,e,t),this},scaleCanvas:function(e,t){return this.commandBuffer.push(Se.SCALE,e,t),this},rotateCanvas:function(e){return this.commandBuffer.push(Se.ROTATE,e),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(e,t,i){var r=this.scene.sys,s=r.game.renderer;t===void 0&&(t=r.scale.width),i===void 0&&(i=r.scale.height),un.TargetCamera.setScene(this.scene),un.TargetCamera.setViewport(0,0,t,i),un.TargetCamera.scrollX=this.x,un.TargetCamera.scrollY=this.y;var n,a;if(typeof e=="string")if(r.textures.exists(e)){n=r.textures.get(e);var h=n.getSourceImage();h instanceof HTMLCanvasElement&&(a=h.getContext("2d"))}else n=r.textures.createCanvas(e,t,i),a=n.getSourceImage().getContext("2d");else e instanceof HTMLCanvasElement&&(a=e.getContext("2d"));return a&&(this.renderCanvas(s,this,un.TargetCamera,null,a,!1),n&&n.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});un.TargetCamera=new x_e;c3.exports=un});var rl=l((oZe,p3)=>{var P_e=C(),il=new P_e({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i])},set:function(e){return this.entries.indexOf(e)===-1&&this.entries.push(e),this},get:function(e,t){for(var i=0;i<this.entries.length;i++){var r=this.entries[i];if(r[e]===t)return r}},getArray:function(){return this.entries.slice(0)},delete:function(e){var t=this.entries.indexOf(e);return t>-1&&this.entries.splice(t,1),this},dump:function(){console.group("Set");for(var e=0;e<this.entries.length;e++){var t=this.entries[e];console.log(t)}console.groupEnd()},each:function(e,t){var i,r=this.entries.slice(),s=r.length;if(t)for(i=0;i<s&&e.call(t,r[i],i)!==!1;i++);else for(i=0;i<s&&e(r[i],i)!==!1;i++);return this},iterate:function(e,t){var i,r=this.entries.length;if(t)for(i=0;i<r&&e.call(t,this.entries[i],i)!==!1;i++);else for(i=0;i<r&&e(this.entries[i],i)!==!1;i++);return this},iterateLocal:function(e){var t,i=[];for(t=1;t<arguments.length;t++)i.push(arguments[t]);var r=this.entries.length;for(t=0;t<r;t++){var s=this.entries[t];s[e].apply(s,i)}return this},clear:function(){return this.entries.length=0,this},contains:function(e){return this.entries.indexOf(e)>-1},union:function(e){var t=new il;return e.entries.forEach(function(i){t.set(i)}),this.entries.forEach(function(i){t.set(i)}),t},intersect:function(e){var t=new il;return this.entries.forEach(function(i){e.contains(i)&&t.set(i)}),t},difference:function(e){var t=new il;return this.entries.forEach(function(i){e.contains(i)||t.set(i)}),t},size:{get:function(){return this.entries.length},set:function(e){return e<this.entries.length?this.entries.length=e:this.entries.length}}});p3.exports=il});var gm=l((uZe,m3)=>{var M_e=C(),b_e=Rn(),xi=z(),Mr=Su(),L_e=xp(),O_e=new M_e({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(Mr.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(e){var t=this.parent;if(e===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,t;Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];this.nextAnim===null?this.nextAnim=r:this.nextAnimsQueue.push(r)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(e){this.isPlaying&&this.stop();var t=this.animationManager,i=typeof e=="string"?e:xi(e,"key",null),r=this.exists(i)?this.get(i):t.get(i);if(!r)console.warn("Missing animation: "+i);else{this.currentAnim=r;var s=r.getTotalFrames(),n=xi(e,"frameRate",r.frameRate),a=xi(e,"duration",r.duration);r.calculateDuration(this,s,a,n),this.delay=xi(e,"delay",r.delay),this.repeat=xi(e,"repeat",r.repeat),this.repeatDelay=xi(e,"repeatDelay",r.repeatDelay),this.yoyo=xi(e,"yoyo",r.yoyo),this.showOnStart=xi(e,"showOnStart",r.showOnStart),this.hideOnComplete=xi(e,"hideOnComplete",r.hideOnComplete),this.skipMissedFrames=xi(e,"skipMissedFrames",r.skipMissedFrames),this.timeScale=xi(e,"timeScale",this.timeScale);var h=xi(e,"startFrame",0);h>r.getTotalFrames()&&(h=0);var o=r.frames[h];h===0&&!this.forward&&(o=r.getLastFrame()),this.currentFrame=o}return this.parent},pause:function(e){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),e!==void 0&&this.setCurrentFrame(e),this.parent},resume:function(e){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),e!==void 0&&this.setCurrentFrame(e),this.parent},playAfterDelay:function(e,t){if(!this.isPlaying)this.delayCounter=t,this.play(e,!0);else{var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),this.nextAnim=e,this._pendingStop=1,this._pendingStopValue=t}return this.parent},playAfterRepeat:function(e,t){if(t===void 0&&(t=1),!this.isPlaying)this.play(e);else{var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),this.repeatCounter!==-1&&t>this.repeatCounter&&(t=this.repeatCounter),this.nextAnim=e,this._pendingStop=2,this._pendingStopValue=t}return this.parent},play:function(e,t){t===void 0&&(t=!1);var i=this.currentAnim,r=this.parent,s=typeof e=="string"?e:e.key;if(t&&this.isPlaying&&i.key===s)return r;if(i&&this.isPlaying){var n=this.animationManager.getMix(i.key,e);if(n>0)return this.playAfterDelay(e,n)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(e)},playReverse:function(e,t){t===void 0&&(t=!1);var i=typeof e=="string"?e:e.key;return t&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(e))},startAnimation:function(e){this.load(e);var t=this.currentAnim,i=this.parent;return t&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,t.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),i},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(Mr.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(Mr.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(Mr.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(Mr.ANIMATION_COMPLETE,Mr.ANIMATION_COMPLETE_KEY)},emitEvents:function(e,t){var i=this.currentAnim,r=this.currentFrame,s=this.parent,n=r.textureFrame;s.emit(e,i,r,s,n),t&&s.emit(t+i.key,i,r,s,n)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var e=this.currentFrame;if(!e)return 0;var t=e.progress;return this.inReverse&&(t*=-1),t},setProgress:function(e){return this.forward||(e=1-e),this.setCurrentFrame(this.currentAnim.getFrameByProgress(e)),this.parent},setRepeat:function(e){return this.repeatCounter=e===-1?Number.MAX_VALUE:e,this.parent},globalRemove:function(e,t){t===void 0&&(t=this.currentAnim),this.isPlaying&&t.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=this.currentAnim,r=this.parent;return i?(t&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),i.getFirstTick(this),this.emitEvents(Mr.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!e,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(i.frames[0]),this.parent):r},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var e=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(e)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var e=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(e)}return this.parent},stopAfterDelay:function(e){return this._pendingStop=1,this._pendingStopValue=e,this.parent},stopAfterRepeat:function(e){return e===void 0&&(e=1),this.repeatCounter!==-1&&e>this.repeatCounter&&(e=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=e,this.parent},stopOnFrame:function(e){return this._pendingStop=3,this._pendingStopValue=e,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(e,t){var i=this.currentAnim;if(!(!this.isPlaying||!i||i.paused)){if(this.accumulator+=t*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=t,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?i.nextFrame(this):i.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var r=0;do this.forward?i.nextFrame(this):i.previousFrame(this),r++;while(this.isPlaying&&this.accumulator>this.nextTick&&r<60)}}},setCurrentFrame:function(e){var t=this.parent;return this.currentFrame=e,t.texture=e.frame.texture,t.frame=e.frame,t.isCropped&&t.frame.updateCropUVs(t._crop,t.flipX,t.flipY),e.setAlpha&&(t.alpha=e.alpha),t.setSizeToFrame(),t._originComponent&&(e.frame.customPivot?t.setOrigin(e.frame.pivotX,e.frame.pivotY):t.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(Mr.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===e&&this.stop()),t},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(e){return this.anims?this.anims.get(e):null},exists:function(e){return this.anims?this.anims.has(e):!1},create:function(e){var t=e.key,i=!1;return t&&(i=this.get(t),i||(i=new L_e(this,t,e),this.anims||(this.anims=new b_e),this.anims.set(t,i))),i},generateFrameNames:function(e,t){return this.animationManager.generateFrameNames(e,t)},generateFrameNumbers:function(e,t){return this.animationManager.generateFrameNumbers(e,t)},remove:function(e){var t=this.get(e);return t&&(this.currentAnim===t&&this.stop(),this.anims.delete(e)),t},destroy:function(){this.animationManager.off(Mr.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});m3.exports=O_e});var x3=l((lZe,g3)=>{var F_e=function(e,t,i,r){i.addToRenderList(t),t.pipeline.batchSprite(t,i,r)};g3.exports=F_e});var T3=l((fZe,y3)=>{var D_e=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};y3.exports=D_e});var w3=l((dZe,_3)=>{var E3=B(),S3=B();E3=x3();S3=T3();_3.exports={renderWebGL:E3,renderCanvas:S3}});var na=l((vZe,R3)=>{var I_e=gm(),N_e=C(),Dt=ye(),C3=Fe(),G_e=w3(),B_e=new N_e({Extends:C3,Mixins:[Dt.Alpha,Dt.BlendMode,Dt.Depth,Dt.Flip,Dt.GetBounds,Dt.Mask,Dt.Origin,Dt.Pipeline,Dt.ScrollFactor,Dt.Size,Dt.TextureCrop,Dt.Tint,Dt.Transform,Dt.Visible,G_e],initialize:function(t,i,r,s,n){C3.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new I_e(this),this.setTexture(s,n),this.setPosition(i,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(e,t){this.anims.update(e,t)},play:function(e,t){return this.anims.play(e,t)},playReverse:function(e,t){return this.anims.playReverse(e,t)},playAfterDelay:function(e,t){return this.anims.playAfterDelay(e,t)},playAfterRepeat:function(e,t){return this.anims.playAfterRepeat(e,t)},chain:function(e){return this.anims.chain(e)},stop:function(){return this.anims.stop()},stopAfterDelay:function(e){return this.anims.stopAfterDelay(e)},stopAfterRepeat:function(e){return this.anims.stopAfterRepeat(e)},stopOnFrame:function(e){return this.anims.stopOnFrame(e)},toJSON:function(){return Dt.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});R3.exports=B_e});var sl=l((cZe,P3)=>{var ne=iv(),U_e=C(),aa=Vr(),q3=ue(),k_e=Gu(),ge=z(),De=he(),A3=ae(),z_e=Qp(),Y_e=rl(),X_e=na(),V_e=new U_e({Extends:q3,initialize:function(t,i,r){q3.call(this),r?i&&!Array.isArray(i)&&(i=[i]):Array.isArray(i)?A3(i[0])&&(r=i,i=null):A3(i)&&(r=i,i=null),this.scene=t,this.children=new Y_e,this.isParent=!0,this.type="Group",this.classType=ge(r,"classType",X_e),this.name=ge(r,"name",""),this.active=ge(r,"active",!0),this.maxSize=ge(r,"maxSize",-1),this.defaultKey=ge(r,"defaultKey",null),this.defaultFrame=ge(r,"defaultFrame",null),this.runChildUpdate=ge(r,"runChildUpdate",!1),this.createCallback=ge(r,"createCallback",null),this.removeCallback=ge(r,"removeCallback",null),this.createMultipleCallback=ge(r,"createMultipleCallback",null),this.internalCreateCallback=ge(r,"internalCreateCallback",null),this.internalRemoveCallback=ge(r,"internalRemoveCallback",null),i&&this.addMultiple(i),r&&this.createMultiple(r),this.on(aa.ADDED_TO_SCENE,this.addedToScene,this),this.on(aa.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(e,t,i,r,s,n){if(e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.defaultKey),r===void 0&&(r=this.defaultFrame),s===void 0&&(s=!0),n===void 0&&(n=!0),this.isFull())return null;var a=new this.classType(this.scene,e,t,i,r);return a.addToDisplayList(this.scene.sys.displayList),a.addToUpdateList(),a.visible=s,a.setActive(n),this.add(a),a},createMultiple:function(e){if(this.isFull())return[];Array.isArray(e)||(e=[e]);var t=[];if(e[0].key)for(var i=0;i<e.length;i++){var r=this.createFromConfig(e[i]);t=t.concat(r)}return t},createFromConfig:function(e){if(this.isFull())return[];this.classType=ge(e,"classType",this.classType);var t=ge(e,"key",void 0),i=ge(e,"frame",null),r=ge(e,"visible",!0),s=ge(e,"active",!0),n=[];if(t===void 0)return n;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);var a=ge(e,"repeat",0),h=ge(e,"randomKey",!1),o=ge(e,"randomFrame",!1),u=ge(e,"yoyo",!1),f=ge(e,"quantity",!1),d=ge(e,"frameQuantity",1),v=ge(e,"max",0),c=z_e(t,i,{max:v,qty:f||d,random:h,randomB:o,repeat:a,yoyo:u});e.createCallback&&(this.createCallback=e.createCallback),e.removeCallback&&(this.removeCallback=e.removeCallback);for(var p=0;p<c.length;p++){var m=this.create(0,0,c[p].a,c[p].b,r,s);if(!m)break;n.push(m)}var x=De(e,"setXY.x",0),g=De(e,"setXY.y",0),y=De(e,"setXY.stepX",0),T=De(e,"setXY.stepY",0);ne.SetXY(n,x,g,y,T);var S=De(e,"setRotation.value",0),E=De(e,"setRotation.step",0);ne.SetRotation(n,S,E);var _=De(e,"setScale.x",1),w=De(e,"setScale.y",_),R=De(e,"setScale.stepX",0),q=De(e,"setScale.stepY",0);ne.SetScale(n,_,w,R,q);var A=De(e,"setOrigin.x",.5),P=De(e,"setOrigin.y",A),L=De(e,"setOrigin.stepX",0),b=De(e,"setOrigin.stepY",0);ne.SetOrigin(n,A,P,L,b);var G=De(e,"setAlpha.value",1),M=De(e,"setAlpha.step",0);ne.SetAlpha(n,G,M);var D=De(e,"setDepth.value",0),I=De(e,"setDepth.step",0);ne.SetDepth(n,D,I);var F=De(e,"setScrollFactor.x",1),O=De(e,"setScrollFactor.y",F),K=De(e,"setScrollFactor.stepX",0),H=De(e,"setScrollFactor.stepY",0);ne.SetScrollFactor(n,F,O,K,H);var Y=ge(e,"hitArea",null),ee=ge(e,"hitAreaCallback",null);Y&&ne.SetHitArea(n,Y,ee);var U=ge(e,"gridAlign",!1);return U&&ne.GridAlign(n,U),this.createMultipleCallback&&this.createMultipleCallback.call(this,n),n},preUpdate:function(e,t){if(!(!this.runChildUpdate||this.children.size===0))for(var i=this.children.entries.slice(),r=0;r<i.length;r++){var s=i[r];s.active&&s.update(e,t)}},add:function(e,t){return t===void 0&&(t=!1),this.isFull()?this:(this.children.set(e),this.internalCreateCallback&&this.internalCreateCallback.call(this,e),this.createCallback&&this.createCallback.call(this,e),t&&(e.addToDisplayList(this.scene.sys.displayList),e.addToUpdateList()),e.on(aa.DESTROY,this.remove,this),this)},addMultiple:function(e,t){if(t===void 0&&(t=!1),Array.isArray(e))for(var i=0;i<e.length;i++)this.add(e[i],t);return this},remove:function(e,t,i){return t===void 0&&(t=!1),i===void 0&&(i=!1),this.children.contains(e)?(this.children.delete(e),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,e),this.removeCallback&&this.removeCallback.call(this,e),e.off(aa.DESTROY,this.remove,this),i?e.destroy():t&&(e.removeFromDisplayList(),e.removeFromUpdateList()),this):this},clear:function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);for(var i=this.children,r=0;r<i.size;r++){var s=i.entries[r];s.off(aa.DESTROY,this.remove,this),t?s.destroy():e&&(s.removeFromDisplayList(),s.removeFromUpdateList())}return this.children.clear(),this},contains:function(e){return this.children.contains(e)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(e,t,i,r){return k_e(this.children.entries,e,t,i,r)},getFirst:function(e,t,i,r,s,n,a){return this.getHandler(!0,1,e,t,i,r,s,n,a)},getFirstNth:function(e,t,i,r,s,n,a,h){return this.getHandler(!0,e,t,i,r,s,n,a,h)},getLast:function(e,t,i,r,s,n,a){return this.getHandler(!1,1,e,t,i,r,s,n,a)},getLastNth:function(e,t,i,r,s,n,a,h){return this.getHandler(!1,e,t,i,r,s,n,a,h)},getHandler:function(e,t,i,r,s,n,a,h,o){i===void 0&&(i=!1),r===void 0&&(r=!1);var u,f,d=0,v=this.children.entries;if(e)for(f=0;f<v.length;f++)if(u=v[f],u.active===i){if(d++,d===t)break}else u=null;else for(f=v.length-1;f>=0;f--)if(u=v[f],u.active===i){if(d++,d===t)break}else u=null;return u?(typeof s=="number"&&(u.x=s),typeof n=="number"&&(u.y=n),u):r?this.create(s,n,a,h,o):null},get:function(e,t,i,r,s){return this.getFirst(!1,!0,e,t,i,r,s)},getFirstAlive:function(e,t,i,r,s,n){return this.getFirst(!0,e,t,i,r,s,n)},getFirstDead:function(e,t,i,r,s,n){return this.getFirst(!1,e,t,i,r,s,n)},playAnimation:function(e,t){return ne.PlayAnimation(this.children.entries,e,t),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(e){e===void 0&&(e=!0);for(var t=0,i=0;i<this.children.size;i++)this.children.entries[i].active===e&&t++;return t},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var e=this.getTotalUsed(),t=this.maxSize===-1?999999999999:this.maxSize;return t-e},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},propertyValueSet:function(e,t,i,r,s){return ne.PropertyValueSet(this.children.entries,e,t,i,r,s),this},propertyValueInc:function(e,t,i,r,s){return ne.PropertyValueInc(this.children.entries,e,t,i,r,s),this},setX:function(e,t){return ne.SetX(this.children.entries,e,t),this},setY:function(e,t){return ne.SetY(this.children.entries,e,t),this},setXY:function(e,t,i,r){return ne.SetXY(this.children.entries,e,t,i,r),this},incX:function(e,t){return ne.IncX(this.children.entries,e,t),this},incY:function(e,t){return ne.IncY(this.children.entries,e,t),this},incXY:function(e,t,i,r){return ne.IncXY(this.children.entries,e,t,i,r),this},shiftPosition:function(e,t,i){return ne.ShiftPosition(this.children.entries,e,t,i),this},angle:function(e,t){return ne.Angle(this.children.entries,e,t),this},rotate:function(e,t){return ne.Rotate(this.children.entries,e,t),this},rotateAround:function(e,t){return ne.RotateAround(this.children.entries,e,t),this},rotateAroundDistance:function(e,t,i){return ne.RotateAroundDistance(this.children.entries,e,t,i),this},setAlpha:function(e,t){return ne.SetAlpha(this.children.entries,e,t),this},setTint:function(e,t,i,r){return ne.SetTint(this.children.entries,e,t,i,r),this},setOrigin:function(e,t,i,r){return ne.SetOrigin(this.children.entries,e,t,i,r),this},scaleX:function(e,t){return ne.ScaleX(this.children.entries,e,t),this},scaleY:function(e,t){return ne.ScaleY(this.children.entries,e,t),this},scaleXY:function(e,t,i,r){return ne.ScaleXY(this.children.entries,e,t,i,r),this},setDepth:function(e,t){return ne.SetDepth(this.children.entries,e,t),this},setBlendMode:function(e){return ne.SetBlendMode(this.children.entries,e),this},setHitArea:function(e,t){return ne.SetHitArea(this.children.entries,e,t),this},shuffle:function(){return ne.Shuffle(this.children.entries),this},kill:function(e){this.children.contains(e)&&e.setActive(!1)},killAndHide:function(e){this.children.contains(e)&&(e.setActive(!1),e.setVisible(!1))},setVisible:function(e,t,i){return ne.SetVisible(this.children.entries,e,t,i),this},toggleVisible:function(){return ne.ToggleVisible(this.children.entries),this},destroy:function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(aa.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(t,e),this.scene=void 0,this.children=void 0)}});P3.exports=V_e});var b3=l((pZe,M3)=>{var W_e=function(e,t,i,r){i.addToRenderList(t),this.pipeline.batchSprite(t,i,r)};M3.exports=W_e});var O3=l((mZe,L3)=>{var H_e=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};L3.exports=H_e});var N3=l((gZe,I3)=>{var F3=B(),D3=B();F3=b3();D3=O3();I3.exports={renderWebGL:F3,renderCanvas:D3}});var nl=l((xZe,B3)=>{var K_e=C(),Yt=ye(),G3=Fe(),Z_e=N3(),J_e=new K_e({Extends:G3,Mixins:[Yt.Alpha,Yt.BlendMode,Yt.Depth,Yt.Flip,Yt.GetBounds,Yt.Mask,Yt.Origin,Yt.Pipeline,Yt.ScrollFactor,Yt.Size,Yt.TextureCrop,Yt.Tint,Yt.Transform,Yt.Visible,Z_e],initialize:function(t,i,r,s,n){G3.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(s,n),this.setPosition(i,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});B3.exports=J_e});var k3=l((yZe,U3)=>{var Q_e=function(e,t,i){var r=t.list,s=r.length;if(s!==0){t.depthSort(),e.pipelines.preBatch(t);var n=t.blendMode!==-1;n||e.setBlendMode(0);for(var a=t.alpha,h=0;h<s;h++){var o=r[h];if(!!o.willRender(i)){var u,f,d,v;if(o.alphaTopLeft!==void 0)u=o.alphaTopLeft,f=o.alphaTopRight,d=o.alphaBottomLeft,v=o.alphaBottomRight;else{var c=o.alpha;u=c,f=c,d=c,v=c}!n&&o.blendMode!==e.currentBlendMode&&e.setBlendMode(o.blendMode);var p=o.mask;p&&p.preRenderWebGL(e,o,i);var m=o.type;m!==e.currentType&&(e.newType=!0,e.currentType=m),e.nextTypeMatch=h<s-1?r[h+1].type===e.currentType:!1,o.setAlpha(u*a,f*a,d*a,v*a),o.renderWebGL(e,o,i),o.setAlpha(u,f,d,v),p&&p.postRenderWebGL(e,i),e.newType=!1}}e.pipelines.postBatch(t)}};U3.exports=Q_e});var Y3=l((TZe,z3)=>{var $_e=function(e,t,i){var r=t.list;if(r.length!==0){t.depthSort();var s=t.blendMode!==-1;s||e.setBlendMode(0);var n=t._alpha;t.mask&&t.mask.preRenderCanvas(e,null,i);for(var a=0;a<r.length;a++){var h=r[a];if(!!h.willRender(i)){var o=h.alpha;!s&&h.blendMode!==e.currentBlendMode&&e.setBlendMode(h.blendMode),h.setAlpha(o*n),h.renderCanvas(e,h,i),h.setAlpha(o)}}t.mask&&t.mask.postRenderCanvas(e)}};z3.exports=$_e});var H3=l((EZe,W3)=>{var X3=B(),V3=B();X3=k3();V3=Y3();W3.exports={renderWebGL:X3,renderCanvas:V3}});var hl=l((SZe,J3)=>{var j_e=Si(),ewe=C(),ha=ye(),twe=wo(),Eh=Js(),K3=ue(),Sh=Vr(),Z3=ta(),iwe=H3(),al=Ne(),rwe=vs(),swe=new ewe({Extends:Z3,Mixins:[ha.AlphaSingle,ha.BlendMode,ha.Depth,ha.Mask,ha.Pipeline,ha.Visible,K3,iwe],initialize:function(t,i){Z3.call(this,t),K3.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(j_e.SKIP_CHECK),i&&this.add(i),t.sys.queueDepthSort()},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},setState:function(e){return this.state=e,this},setDataEnabled:function(){return this.data||(this.data=new Eh(this)),this},setData:function(e,t){return this.data||(this.data=new Eh(this)),this.data.set(e,t),this},incData:function(e,t){return this.data||(this.data=new Eh(this)),this.data.inc(e,t),this},toggleData:function(e){return this.data||(this.data=new Eh(this)),this.data.toggle(e),this},getData:function(e){return this.data||(this.data=new Eh(this)),this.data.get(e)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return twe(this)},willRender:function(e){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&e.id)},getIndexList:function(){for(var e=this,t=this.parentContainer,i=[];t&&(i.unshift(t.getIndex(e)),e=t,t.parentContainer);)t=t.parentContainer;return i.unshift(this.displayList.getIndex(e)),i},addChildCallback:function(e){e.displayList&&e.displayList!==this&&e.removeFromDisplayList(),e.displayList||(this.queueDepthSort(),e.displayList=this,e.emit(Sh.ADDED_TO_SCENE,e,this.scene),this.events.emit(al.ADDED_TO_SCENE,e,this.scene))},removeChildCallback:function(e){this.queueDepthSort(),e.displayList=null,e.emit(Sh.REMOVED_FROM_SCENE,e,this.scene),this.events.emit(al.REMOVED_FROM_SCENE,e,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(rwe(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(e,t){return e._depth-t._depth},getChildren:function(){return this.list},addToDisplayList:function(e){return e===void 0&&(e=this.scene.sys.displayList),this.displayList&&this.displayList!==e&&this.removeFromDisplayList(),e.exists(this)||(this.displayList=e,e.add(this,!0),e.queueDepthSort(),this.emit(Sh.ADDED_TO_SCENE,this,this.scene),e.events.emit(al.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var e=this.displayList||this.scene.sys.displayList;return e.exists(this)&&(e.remove(this,!0),e.queueDepthSort(),this.displayList=null,this.emit(Sh.REMOVED_FROM_SCENE,this,this.scene),e.events.emit(al.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(Sh.DESTROY,this);for(var e=this.list.length;e--;)this.list[e].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});J3.exports=swe});var gs=l((_Ze,Q3)=>{var _h=Ha(),nwe=Fu(),awe=function(e,t){var i=_h.Power0;if(typeof e=="string")if(_h.hasOwnProperty(e))i=_h[e];else{var r="";e.indexOf(".")&&(r=e.substr(e.indexOf(".")+1),r.toLowerCase()==="in"?r="easeIn":r.toLowerCase()==="out"?r="easeOut":r.toLowerCase()==="inout"&&(r="easeInOut")),e=nwe(e.substr(0,e.indexOf(".")+1)+r),_h.hasOwnProperty(e)&&(i=_h[e])}else typeof e=="function"?i=e:Array.isArray(e)&&e.length;if(!t)return i;var s=t.slice(0);return s.unshift(0),function(n){return s[0]=n,i.apply(this,s)}};Q3.exports=awe});var xm=l((wZe,$3)=>{var hwe=C(),owe=Qa(),uwe=gs(),lwe=z(),fwe=Xr(),dwe=new hwe({initialize:function(t,i,r,s){s===void 0&&(s=!1),this.propertyKey=i,this.propertyValue=r,this.defaultValue=r,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=s,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(e,t){e===void 0&&(e={}),t&&(this.propertyKey=t),this.propertyValue=lwe(e,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(e){return this.propertyValue=e,this.setMethods()},setMethods:function(){var e=this.propertyValue,t=typeof e;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,t==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(e))this.onEmit=this.randomStaticValueEmit;else if(t==="function")this.emitOnly?this.onEmit=e:this.onUpdate=e;else if(t==="object"&&this.hasBoth(e,"start","end")){this.start=e.start,this.end=e.end;var i=this.has(e,"random");if(i&&(this.onEmit=this.randomRangedValueEmit),this.has(e,"steps"))this.steps=e.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var r=this.has(e,"ease")?e.ease:"Linear";this.ease=uwe(r,e.easeParams),i||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(t==="object"&&this.hasBoth(e,"min","max"))this.start=e.min,this.end=e.max,this.onEmit=this.randomRangedValueEmit;else if(t==="object"&&this.has(e,"random")){var s=e.random;Array.isArray(s)&&(this.start=s[0],this.end=s[1]),this.onEmit=this.randomRangedValueEmit}else t==="object"&&this.hasEither(e,"onEmit","onUpdate")&&(this.has(e,"onEmit")&&(this.onEmit=e.onEmit),this.has(e,"onUpdate")&&(this.onUpdate=e.onUpdate));return this},has:function(e,t){return e.hasOwnProperty(t)},hasBoth:function(e,t,i){return e.hasOwnProperty(t)&&e.hasOwnProperty(i)},hasEither:function(e,t,i){return e.hasOwnProperty(t)||e.hasOwnProperty(i)},defaultEmit:function(e,t,i){return i},defaultUpdate:function(e,t,i,r){return r},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var e=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[e]},randomRangedValueEmit:function(e,t){var i=owe(this.start,this.end);return e&&e.data[t]&&(e.data[t].min=i),i},steppedEmit:function(){var e=this.counter,t=this.counter+(this.end-this.start)/this.steps;return this.counter=fwe(t,this.start,this.end),e},easedValueEmit:function(e,t){if(e&&e.data[t]){var i=e.data[t];i.min=this.start,i.max=this.end}return this.start},easeValueUpdate:function(e,t,i){var r=e.data[t];return(r.max-r.min)*this.ease(i)+r.min}});$3.exports=dwe});var ym=l((CZe,j3)=>{var vwe=C(),wh=z(),cwe=new vwe({initialize:function(t,i,r,s,n){if(typeof t=="object"){var a=t;t=wh(a,"x",0),i=wh(a,"y",0),r=wh(a,"power",0),s=wh(a,"epsilon",100),n=wh(a,"gravity",50)}else t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=100),n===void 0&&(n=50);this.x=t,this.y=i,this.active=!0,this._gravity=n,this._power=0,this._epsilon=0,this.power=r,this.epsilon=s},update:function(e,t){var i=this.x-e.x,r=this.y-e.y,s=i*i+r*r;if(s!==0){var n=Math.sqrt(s);s<this._epsilon&&(s=this._epsilon);var a=this._power*t/(s*n)*100;e.velocityX+=i*a,e.velocityY+=r*a}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(e){this._epsilon=e*e}},power:{get:function(){return this._power/this._gravity},set:function(e){this._power=e*this._gravity}},gravity:{get:function(){return this._gravity},set:function(e){var t=this.power;this._gravity=e,this.power=t}}});j3.exports=cwe});var Em=l((RZe,eX)=>{var pwe=C(),Tm=yr(),mwe=Wr(),gwe=new pwe({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(e,t){var i=this.emitter;this.frame=i.getFrame(),i.emitZone&&i.emitZone.getPoint(this),e===void 0?this.x+=i.x.onEmit(this,"x"):this.x+=e,t===void 0?this.y+=i.y.onEmit(this,"y"):this.y+=t,this.life=i.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var r=i.speedX.onEmit(this,"speedX"),s=i.speedY?i.speedY.onEmit(this,"speedY"):r;if(i.radial){var n=Tm(i.angle.onEmit(this,"angle"));this.velocityX=Math.cos(n)*Math.abs(r),this.velocityY=Math.sin(n)*Math.abs(s)}else if(i.moveTo){var a=i.moveToX.onEmit(this,"moveToX"),h=i.moveToY?i.moveToY.onEmit(this,"moveToY"):a,o=Math.atan2(h-this.y,a-this.x),u=mwe(this.x,this.y,a,h)/(this.life/1e3);this.velocityX=Math.cos(o)*u,this.velocityY=Math.sin(o)*u}else this.velocityX=r,this.velocityY=s;i.acceleration&&(this.accelerationX=i.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=i.delay.onEmit(this,"delay"),this.scaleX=i.scaleX.onEmit(this,"scaleX"),this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=i.rotate.onEmit(this,"rotate"),this.rotation=Tm(this.angle),this.bounce=i.bounce.onEmit(this,"bounce"),this.alpha=i.alpha.onEmit(this,"alpha"),this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function(e,t,i,r){var s=this.velocityX,n=this.velocityY,a=this.accelerationX,h=this.accelerationY,o=this.maxVelocityX,u=this.maxVelocityY;s+=e.gravityX*i,n+=e.gravityY*i,a&&(s+=a*i),h&&(n+=h*i),s>o?s=o:s<-o&&(s=-o),n>u?n=u:n<-u&&(n=-u),this.velocityX=s,this.velocityY=n;for(var f=0;f<r.length;f++)r[f].update(this,t,i)},checkBounds:function(e){var t=e.bounds,i=-this.bounce;this.x<t.x&&e.collideLeft?(this.x=t.x,this.velocityX*=i):this.x>t.right&&e.collideRight&&(this.x=t.right,this.velocityX*=i),this.y<t.y&&e.collideTop?(this.y=t.y,this.velocityY*=i):this.y>t.bottom&&e.collideBottom&&(this.y=t.bottom,this.velocityY*=i)},update:function(e,t,i){if(this.delayCurrent>0)return this.delayCurrent-=e,!1;var r=this.emitter,s=1-this.lifeCurrent/this.life;return this.lifeT=s,this.computeVelocity(r,e,t,i),this.x+=this.velocityX*t,this.y+=this.velocityY*t,r.bounds&&this.checkBounds(r),r.deathZone&&r.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=r.scaleX.onUpdate(this,"scaleX",s,this.scaleX),r.scaleY?this.scaleY=r.scaleY.onUpdate(this,"scaleY",s,this.scaleY):this.scaleY=this.scaleX,this.angle=r.rotate.onUpdate(this,"rotate",s,this.angle),this.rotation=Tm(this.angle),this.alpha=r.alpha.onUpdate(this,"alpha",s,this.alpha),this.tint=r.tint.onUpdate(this,"tint",s,this.tint),this.lifeCurrent-=e,this.lifeCurrent<=0)}});eX.exports=gwe});var Sm=l((qZe,tX)=>{var xwe=C(),ywe=new xwe({initialize:function(t,i){this.source=t,this.killOnEnter=i},willKill:function(e){var t=this.source.contains(e.x,e.y);return t&&this.killOnEnter||!t&&!this.killOnEnter}});tX.exports=ywe});var _m=l((AZe,iX)=>{var Twe=C(),Ewe=new Twe({initialize:function(t,i,r,s,n){s===void 0&&(s=!1),n===void 0&&(n=!0),this.source=t,this.points=[],this.quantity=i,this.stepRate=r,this.yoyo=s,this.counter=-1,this.seamless=n,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var e=this.points[0],t=this.points[this.points.length-1];e.x===t.x&&e.y===t.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(e){return this.source=e,this.updateSource()},getPoint:function(e){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var t=this.points[this.counter];t&&(e.x=t.x,e.y=t.y)}});iX.exports=Ewe});var wm=l((PZe,rX)=>{var Swe=function(e,t){for(var i=0;i<t.length;i++)if(e.hasOwnProperty(t[i]))return!0;return!1};rX.exports=Swe});var ol=l((MZe,sX)=>{var _we=function(e,t){return e.hasOwnProperty(t)};sX.exports=_we});var Cm=l((bZe,nX)=>{var wwe=C(),Cwe=xe(),Rwe=new wwe({initialize:function(t){this.source=t,this._tempVec=new Cwe},getPoint:function(e){var t=this._tempVec;this.source.getRandomPoint(t),e.x=t.x,e.y=t.y}});nX.exports=Rwe});var Rm=l((LZe,aX)=>{var qwe=Si(),Awe=C(),ul=ye(),Pwe=Sm(),Mwe=_m(),We=xm(),Xt=z(),bwe=Zp(),Lwe=wm(),si=ol(),Owe=Em(),Fwe=Cm(),Dwe=Ae(),Iwe=vs(),Nwe=xe(),Gwe=Xr(),Bwe=new Awe({Mixins:[ul.BlendMode,ul.Mask,ul.ScrollFactor,ul.Visible],initialize:function(t,i){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=Owe,this.x=new We(i,"x",0,!0),this.y=new We(i,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new We(i,"accelerationX",0,!0),this.accelerationY=new We(i,"accelerationY",0,!0),this.maxVelocityX=new We(i,"maxVelocityX",1e4,!0),this.maxVelocityY=new We(i,"maxVelocityY",1e4,!0),this.speedX=new We(i,"speedX",0,!0),this.speedY=new We(i,"speedY",0,!0),this.moveTo=!1,this.moveToX=new We(i,"moveToX",0,!0),this.moveToY=new We(i,"moveToY",0,!0),this.bounce=new We(i,"bounce",0,!0),this.scaleX=new We(i,"scaleX",1),this.scaleY=new We(i,"scaleY",1),this.tint=new We(i,"tint",16777215),this.alpha=new We(i,"alpha",1),this.lifespan=new We(i,"lifespan",1e3,!0),this.angle=new We(i,"angle",{min:0,max:360},!0),this.rotate=new We(i,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new We(i,"quantity",1,!0),this.delay=new We(i,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=qwe.NORMAL,this.follow=null,this.followOffset=new Nwe,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,i&&this.fromJSON(i)},fromJSON:function(e){if(!e)return this;var t=0,i="";for(t=0;t<this.configFastMap.length;t++)i=this.configFastMap[t],si(e,i)&&(this[i]=Xt(e,i));for(t=0;t<this.configOpMap.length;t++)i=this.configOpMap[t],si(e,i)&&this[i].loadConfig(e);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,si(e,"speed")&&(this.speedX.loadConfig(e,"speed"),this.speedY=null),(Lwe(e,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),si(e,"scale")&&(this.scaleX.loadConfig(e,"scale"),this.scaleY=null),si(e,"callbackScope")){var r=Xt(e,"callbackScope",null);this.emitCallbackScope=r,this.deathCallbackScope=r}return si(e,"emitZone")&&this.setEmitZone(e.emitZone),si(e,"deathZone")&&this.setDeathZone(e.deathZone),si(e,"bounds")&&this.setBounds(e.bounds),si(e,"followOffset")&&this.followOffset.setFromObject(Xt(e,"followOffset",0)),si(e,"frame")&&this.setFrame(e.frame),si(e,"reserve")&&this.reserve(e.reserve),this},toJSON:function(e){e===void 0&&(e={});var t=0,i="";for(t=0;t<this.configFastMap.length;t++)i=this.configFastMap[t],e[i]=this[i];for(t=0;t<this.configOpMap.length;t++)i=this.configOpMap[t],this[i]&&(e[i]=this[i].toJSON());return this.speedY||(delete e.speedX,e.speed=this.speedX.toJSON()),this.scaleY||(delete e.scaleX,e.scale=this.scaleX.toJSON()),e},startFollow:function(e,t,i,r){return t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=!1),this.follow=e,this.followOffset.set(t,i),this.trackVisible=r,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return bwe(this.frames);var e=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=Gwe(this.currentFrame+1,0,this._frameLength)),e},setFrame:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=1),this.randomFrame=t,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var r=typeof e;if(Array.isArray(e)||r==="string"||r==="number")this.manager.setEmitterFrames(e,this);else if(r==="object"){var s=e;e=Xt(s,"frames",null),e&&this.manager.setEmitterFrames(e,this);var n=Xt(s,"cycle",!1);this.randomFrame=!n,this.frameQuantity=Xt(s,"quantity",i)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(e){return e===void 0&&(e=!0),this.radial=e,this},setPosition:function(e,t){return this.x.onChange(e),this.y.onChange(t),this},setBounds:function(e,t,i,r){if(typeof e=="object"){var s=e;e=s.x,t=s.y,i=si(s,"w")?s.w:s.width,r=si(s,"h")?s.h:s.height}return this.bounds?this.bounds.setTo(e,t,i,r):this.bounds=new Dwe(e,t,i,r),this},setSpeedX:function(e){return this.speedX.onChange(e),this.radial=!1,this},setSpeedY:function(e){return this.speedY&&(this.speedY.onChange(e),this.radial=!1),this},setSpeed:function(e){return this.speedX.onChange(e),this.speedY=null,this.radial=!0,this},setScaleX:function(e){return this.scaleX.onChange(e),this},setScaleY:function(e){return this.scaleY.onChange(e),this},setScale:function(e){return this.scaleX.onChange(e),this.scaleY=null,this},setGravityX:function(e){return this.gravityX=e,this},setGravityY:function(e){return this.gravityY=e,this},setGravity:function(e,t){return this.gravityX=e,this.gravityY=t,this},setAlpha:function(e){return this.alpha.onChange(e),this},setTint:function(e){return this.tint.onChange(e),this},setEmitterAngle:function(e){return this.angle.onChange(e),this},setAngle:function(e){return this.angle.onChange(e),this},setLifespan:function(e){return this.lifespan.onChange(e),this},setQuantity:function(e){return this.quantity.onChange(e),this},setFrequency:function(e,t){return this.frequency=e,this._counter=0,t&&this.quantity.onChange(t),this},setEmitZone:function(e){if(e===void 0)this.emitZone=null;else{var t=Xt(e,"type","random"),i=Xt(e,"source",null);switch(t){case"random":this.emitZone=new Fwe(i);break;case"edge":var r=Xt(e,"quantity",1),s=Xt(e,"stepRate",0),n=Xt(e,"yoyo",!1),a=Xt(e,"seamless",!0);this.emitZone=new Mwe(i,r,s,n,a);break}}return this},setDeathZone:function(e){if(e===void 0)this.deathZone=null;else{var t=Xt(e,"type","onEnter"),i=Xt(e,"source",null);if(i&&typeof i.contains=="function"){var r=t==="onEnter";this.deathZone=new Pwe(i,r)}}return this},reserve:function(e){for(var t=this.dead,i=0;i<e;i++)t.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(e,t){return e===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof e=="function"&&(this.emitCallback=e,t&&(this.emitCallbackScope=t)),this},onParticleDeath:function(e,t){return e===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof e=="function"&&(this.deathCallback=e,t&&(this.deathCallbackScope=t)),this},killAll:function(){for(var e=this.dead,t=this.alive;t.length>0;)e.push(t.pop());return this},forEachAlive:function(e,t){for(var i=this.alive,r=i.length,s=0;s<r;++s)e.call(t,i[s],this);return this},forEachDead:function(e,t){for(var i=this.dead,r=i.length,s=0;s<r;++s)e.call(t,i[s],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return Iwe(this.alive,this.depthSortCallback),this},flow:function(e,t){return t===void 0&&(t=1),this.frequency=e,this.quantity.onChange(t),this.start()},explode:function(e,t,i){return this.frequency=-1,this.emitParticle(e,t,i)},emitParticleAt:function(e,t,i){return this.emitParticle(i,e,t)},emitParticle:function(e,t,i){if(!this.atLimit()){e===void 0&&(e=this.quantity.onEmit());for(var r=this.dead,s=this.follow?this.follow.x+this.followOffset.x:t,n=this.follow?this.follow.y+this.followOffset.y:i,a=0;a<e;a++){var h=r.pop();if(h||(h=new this.particleClass(this)),h.fire(s,n),this.particleBringToTop?this.alive.push(h):this.alive.unshift(h),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,h,this),this.atLimit())break}return h}},preUpdate:function(e,t){t*=this.timeScale;var i=t/1e3;this.trackVisible&&(this.visible=this.follow.visible);var r=this.manager.getProcessors(),s=this.alive,n=this.dead,a=0,h=[],o=s.length;for(a=0;a<o;a++){var u=s[a];u.update(t,i,r)&&h.push({index:a,particle:u})}if(o=h.length,o>0){var f=this.deathCallback,d=this.deathCallbackScope;for(a=o-1;a>=0;a--){var v=h[a];s.splice(v.index,1),n.push(v.particle),f&&f.call(d,v.particle),v.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=t,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(e,t){return e.y-t.y}});aX.exports=Bwe});var oX=l((OZe,hX)=>{var ll=xt(),Uwe=Te(),kwe=new ll,zwe=new ll,Ywe=new ll,Xwe=new ll,Vwe=function(e,t,i,r){var s=t.emitters.list,n=s.length;if(n!==0){var a=e.pipelines.set(t.pipeline),h=kwe,o=zwe,u=Ywe,f=Xwe;r?(f.loadIdentity(),f.multiply(r),f.translate(t.x,t.y),f.rotate(t.rotation),f.scale(t.scaleX,t.scaleY)):f.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);var d=i.roundPixels,v=t.defaultFrame.glTexture,c=Uwe.getTintAppendFloatAlpha,p=a.setGameObject(t,t.defaultFrame);e.pipelines.preBatch(t);for(var m=0;m<n;m++){var x=s[m],g=x.alive,y=g.length;if(!(!x.visible||y===0)){i.addToRenderList(x);var T=x.scrollFactorX,S=x.scrollFactorY;e.setBlendMode(x.blendMode),x.mask&&(x.mask.preRenderWebGL(e,x,i),e.pipelines.set(t.pipeline));for(var E=0,_=0;_<y;_++){var w=g[_],R=w.alpha*i.alpha;if(!(R<=0)){u.applyITRS(w.x,w.y,w.rotation,w.scaleX,w.scaleY),h.copyFrom(i.matrix),h.multiplyWithOffset(f,-i.scrollX*T,-i.scrollY*S),u.e=w.x,u.f=w.y,h.multiply(u,o);var q=w.frame,A=-q.halfWidth,P=-q.halfHeight,L=A+q.width,b=P+q.height,G=o.getXRound(A,P,d),M=o.getYRound(A,P,d),D=o.getXRound(A,b,d),I=o.getYRound(A,b,d),F=o.getXRound(L,b,d),O=o.getYRound(L,b,d),K=o.getXRound(L,P,d),H=o.getYRound(L,P,d),Y=c(w.tint,R);a.batchQuad(x,G,M,D,I,F,O,K,H,q.u0,q.v0,q.u1,q.v1,Y,Y,Y,Y,E,v,p)}}x.mask&&x.mask.postRenderWebGL(e,i)}}e.pipelines.postBatch(t)}};hX.exports=Vwe});var lX=l((FZe,uX)=>{var fl=xt(),Wwe=new fl,Hwe=new fl,Kwe=new fl,Zwe=new fl,Jwe=function(e,t,i,r){var s=t.emitters.list,n=s.length;if(n!==0){var a=Wwe.copyFrom(i.matrix),h=Hwe,o=Kwe,u=Zwe;r?(u.loadIdentity(),u.multiply(r),u.translate(t.x,t.y),u.rotate(t.rotation),u.scale(t.scaleX,t.scaleY)):u.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);for(var f=e.currentContext,d=i.roundPixels,v=0;v<n;v++){var c=s[v],p=c.alive,m=p.length;if(!(!c.visible||m===0)){i.addToRenderList(c);var x=c.scrollFactorX,g=c.scrollFactorY;f.save(),f.globalCompositeOperation=e.blendModes[c.blendMode];for(var y=0;y<m;y++){var T=p[y],S=T.alpha*i.alpha;if(!(S<=0)){o.applyITRS(T.x,T.y,T.rotation,T.scaleX,T.scaleY),a.copyFrom(i.matrix),a.multiplyWithOffset(u,-i.scrollX*x,-i.scrollY*g),o.e=T.x,o.f=T.y,a.multiply(o,h);var E=T.frame,_=E.canvasData,w=-E.halfWidth,R=-E.halfHeight;f.globalAlpha=S,f.save(),h.setToContext(f),d&&(w=Math.round(w),R=Math.round(R)),f.imageSmoothingEnabled=!(!e.antialias||E.source.scaleMode),f.drawImage(E.source.image,_.x,_.y,_.width,_.height,w,R,_.width,_.height),f.restore()}}f.restore()}}}};uX.exports=Jwe});var cX=l((DZe,vX)=>{var fX=B(),dX=B();fX=oX();dX=lX();vX.exports={renderWebGL:fX,renderCanvas:dX}});var dl=l((IZe,gX)=>{var Qwe=C(),Ch=ye(),pX=Fe(),$we=ym(),mX=ta(),jwe=Rm(),e1e=cX(),t1e=new Qwe({Extends:pX,Mixins:[Ch.Depth,Ch.Mask,Ch.Pipeline,Ch.Transform,Ch.Visible,e1e],initialize:function(t,i,r,s){if(pX.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],r!==null&&(typeof r=="object"||Array.isArray(r))&&(s=r,r=null),this.setTexture(i,r),this.initPipeline(),this.emitters=new mX(this),this.wells=new mX(this),s){Array.isArray(s)||(s=[s]);for(var n=0;n<s.length;n++)this.createEmitter(s[n])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e){this.frame=this.texture.get(e);var t=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),i=[];return t.forEach(function(r){i.push(r.name)}),this.frameNames=i,this.defaultFrame=this.frame,this},setEmitterFrames:function(e,t){Array.isArray(e)||(e=[e]);var i=t.frames;i.length=0;for(var r=0;r<e.length;r++){var s=e[r];this.frameNames.indexOf(s)!==-1&&i.push(this.texture.get(s))}return i.length>0?t.defaultFrame=i[0]:t.defaultFrame=this.defaultFrame,this},addEmitter:function(e){return this.emitters.add(e)},createEmitter:function(e){return this.addEmitter(new jwe(this,e))},removeEmitter:function(e){return this.emitters.remove(e,!0)},addGravityWell:function(e){return this.wells.add(e)},createGravityWell:function(e){return this.addGravityWell(new $we(e))},emitParticle:function(e,t,i){for(var r=this.emitters.list,s=0;s<r.length;s++){var n=r[s];n.active&&n.emitParticle(e,t,i)}return this},emitParticleAt:function(e,t,i){return this.emitParticle(i,e,t)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(e,t){t*=this.timeScale;for(var i=this.emitters.list,r=0;r<i.length;r++){var s=i[r];s.active&&s.preUpdate(e,t)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});gX.exports=t1e});var yX=l((NZe,xX)=>{xX.exports={DeathZone:Sm(),EdgeZone:_m(),RandomZone:Cm()}});var EX=l((GZe,TX)=>{TX.exports={EmitterOp:xm(),GravityWell:ym(),Particle:Em(),ParticleEmitter:Rm(),ParticleEmitterManager:dl(),Zones:yX()}});var qm=l((BZe,_X)=>{var i1e=C(),r1e=ye(),SX=na(),s1e=new i1e({Extends:SX,Mixins:[r1e.PathFollower],initialize:function(t,i,r,s,n,a){SX.call(this,t,r,s,n,a),this.path=i},preUpdate:function(e,t){this.anims.update(e,t),this.pathUpdate(e)}});_X.exports=s1e});var CX=l((UZe,wX)=>{var n1e=Te(),a1e=function(e,t,i,r){i.addToRenderList(t);var s=i.alpha,n=t.renderTarget,a=n.width,h=n.height,o=n1e.getTintAppendFloatAlpha,u=e.pipelines.set(t.pipeline),f=u.setTexture2D(n.texture);e.pipelines.preBatch(t),u.batchTexture(t,n.texture,a,h,t.x,t.y,a,h,t.scaleX,t.scaleY,t.rotation,t.flipX,!t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,a,h,o(t.tintTopLeft,s*t._alphaTL),o(t.tintTopRight,s*t._alphaTR),o(t.tintBottomLeft,s*t._alphaBL),o(t.tintBottomRight,s*t._alphaBR),t.tintFill,0,0,i,r,!0,f),e.resetTextures(),e.pipelines.postBatch(t)};wX.exports=a1e});var qX=l((kZe,RX)=>{var h1e=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};RX.exports=h1e});var bX=l((zZe,MX)=>{var AX=B(),PX=B();AX=CX();PX=qX();MX.exports={renderWebGL:AX,renderCanvas:PX}});var vl=l((YZe,LX)=>{var o1e=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,i=e==="x"?t:t&3|8;return i.toString(16)})};LX.exports=o1e});var cl=l((XZe,IX)=>{var u1e=Si(),l1e=za(),OX=bt(),f1e=C(),Vt=ye(),FX=Jt(),d1e=Hn(),DX=Fe(),v1e=B(),c1e=Ks(),p1e=bX(),m1e=ih(),g1e=Te(),x1e=vl(),y1e=new f1e({Extends:DX,Mixins:[Vt.Alpha,Vt.BlendMode,Vt.ComputedSize,Vt.Crop,Vt.Depth,Vt.Flip,Vt.GetBounds,Vt.Mask,Vt.Origin,Vt.Pipeline,Vt.ScrollFactor,Vt.Tint,Vt.Transform,Vt.Visible,p1e],initialize:function(t,i,r,s,n,a,h){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=32),n===void 0&&(n=32),DX.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,a===void 0?(this.canvas=OX.create2D(this,s,n),this.texture=t.sys.textures.addCanvas(x1e(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(a),this.frame=this.texture.get(h),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new l1e(0,0,s,n),this.renderTarget=null;var o=this.renderer;o?o.type===FX.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new m1e(o,s,n,1,0,!1)):o.type===FX.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=v1e,this.camera.setScene(t),this.setPosition(i,r),a===void 0&&this.setSize(s,n),this.setOrigin(0,0),this.initPipeline(c1e.SINGLE_PIPELINE)},setSize:function(e,t){return this.resize(e,t)},resize:function(e,t){t===void 0&&(t=e);var i=this.frame;if(e!==this.width||t!==this.height){if(i.name==="__BASE"){this.canvas.width=e,this.canvas.height=t,this.texture.width=e,this.texture.height=t;var r=this.renderTarget;r&&(r.resize(e,t),i.glTexture=r.texture,i.source.isRenderTexture=!0,i.source.isGLTexture=!0,i.source.glTexture=r.texture),this.camera.setSize(e,t),i.source.width=e,i.source.height=t,i.setSize(e,t),this.width=e,this.height=t}}else{var s=this.texture.getSourceImage();i.cutX+e>s.width&&(e=s.width-i.cutX),i.cutY+t>s.height&&(t=s.height-i.cutY),i.setSize(e,t,i.cutX,i.cutY)}this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=e,n.hitArea.height=t),this},setGlobalTint:function(e){return this.globalTint=e,this},setGlobalAlpha:function(e){return this.globalAlpha=e,this},saveTexture:function(e){return this.textureManager.renameTexture(this.texture.key,e),this._saved=!0,this.texture},fill:function(e,t,i,r,s,n){var a=this.frame,h=this.camera,o=this.renderer;t===void 0&&(t=1),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=a.cutWidth),n===void 0&&(n=a.cutHeight);var u=(e>>16&255)/255,f=(e>>8&255)/255,d=(e&255)/255,v=this.renderTarget;if(h.preRender(),v){v.bind(!0);var c=this.pipeline;c.manager.set(c);var p=v.width,m=v.height,x=o.width,g=o.height,y=x/p,T=g/m;c.drawFillRect(i*y,r*T,s*y,n*T,g1e.getTintFromFloats(d,f,u,1),t),v.unbind(!0)}else{var S=this.context;o.setContext(S),S.fillStyle="rgba("+u+","+f+","+d+","+t+")",S.fillRect(i+a.cutX,r+a.cutY,s,n),o.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var e=this.renderTarget;if(e)e.clear();else{var t=this.context;t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),t.restore()}this.dirty=!1}return this},erase:function(e,t,i){return this._eraseMode=!0,this.draw(e,t,i,1,16777215),this._eraseMode=!1,this},draw:function(e,t,i,r,s){return this.beginDraw(),this.batchDraw(e,t,i,r,s),this.endDraw(),this},drawFrame:function(e,t,i,r,s,n){return this.beginDraw(),this.batchDrawFrame(e,t,i,r,s,n),this.endDraw(),this},beginDraw:function(){var e=this.camera,t=this.renderer,i=this.renderTarget;return e.preRender(),i?t.beginCapture(i.width,i.height):t.setContext(this.context),this},batchDraw:function(e,t,i,r,s){return r===void 0&&(r=this.globalAlpha),s===void 0?s=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):s=(s>>16)+(s&65280)+((s&255)<<16),Array.isArray(e)||(e=[e]),this.batchList(e,t,i,r,s),this},batchDrawFrame:function(e,t,i,r,s,n){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=this.globalAlpha),n===void 0?n=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):n=(n>>16)+(n&65280)+((n&255)<<16);var a=this.textureManager.getFrame(e,t);return a&&(this.renderTarget?this.pipeline.batchTextureFrame(a,i,r,n,s,this.camera.matrix,null):this.batchTextureFrame(a,i+this.frame.cutX,r+this.frame.cutY,s,n)),this},endDraw:function(e){e===void 0&&(e=this._eraseMode);var t=this.renderer,i=this.renderTarget;if(i){var r=t.endCapture(),s=t.pipelines.setUtility();s.blitFrame(r,i,1,!1,!1,e),t.resetScissor(),t.resetViewport()}else t.setContext();return this.dirty=!0,this},batchList:function(e,t,i,r,s){for(var n=0;n<e.length;n++){var a=e[n];!a||a===this||(a.renderWebGL||a.renderCanvas?this.drawGameObject(a,t,i):a.isParent||a.list?this.batchGroup(a.getChildren(),t,i):typeof a=="string"?this.batchTextureFrameKey(a,null,t,i,r,s):a instanceof d1e?this.batchTextureFrame(a,t,i,r,s):Array.isArray(a)&&this.batchList(a,t,i,r,s))}},batchGroup:function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=0),t+=this.frame.cutX,i+=this.frame.cutY;for(var r=0;r<e.length;r++){var s=e[r];if(s.willRender(this.camera)){var n=s.x+t,a=s.y+i;this.drawGameObject(s,n,a)}}},batchGameObjectWebGL:function(e,t,i){t===void 0&&(t=e.x),i===void 0&&(i=e.y);var r=e.x,s=e.y;e.setPosition(t+this.frame.cutX,i+this.frame.cutY),e.renderDirect?e.renderDirect(this.renderer,e,this.camera):e.renderWebGL(this.renderer,e,this.camera),e.setPosition(r,s)},batchGameObjectCanvas:function(e,t,i){t===void 0&&(t=e.x),i===void 0&&(i=e.y);var r=e.x,s=e.y;if(this._eraseMode){var n=e.blendMode;e.blendMode=u1e.ERASE}e.setPosition(t+this.frame.cutX,i+this.frame.cutY),e.renderCanvas(this.renderer,e,this.camera,null),e.setPosition(r,s),this._eraseMode&&(e.blendMode=n)},batchTextureFrameKey:function(e,t,i,r,s,n){var a=this.textureManager.getFrame(e,t);a&&this.batchTextureFrame(a,i,r,s,n)},batchTextureFrame:function(e,t,i,r,s){t===void 0&&(t=0),i===void 0&&(i=0),t+=this.frame.cutX,i+=this.frame.cutY;var n=this.renderTarget;if(n)this.pipeline.batchTextureFrame(e,t,i,s,r,this.camera.matrix,null);else{var a=this.context,h=e.canvasData,o=e.source.image,u=this.camera.matrix;a.save(),a.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",a.globalAlpha=r,u.setToContext(a),a.drawImage(o,h.x,h.y,h.width,h.height,t,i,h.width,h.height),a.restore()}},snapshotArea:function(e,t,i,r,s,n,a){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,s,!1,e,t,i,r,n,a):this.renderer.snapshotCanvas(this.canvas,s,!1,e,t,i,r,n,a),this},snapshot:function(e,t,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,e,!1,0,0,this.width,this.height,t,i):this.renderer.snapshotCanvas(this.canvas,e,!1,0,0,this.width,this.height,t,i),this},snapshotPixel:function(e,t,i){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,i,!0,e,t):this.renderer.snapshotCanvas(this.canvas,i,!0,e,t),this},preDestroy:function(){this._saved||(OX.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});IX.exports=y1e});var GX=l((VZe,NX)=>{var T1e={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};NX.exports=T1e});var UX=l((WZe,BX)=>{var xs=he(),E1e=function(e,t){var i=t.width,r=t.height,s=Math.floor(i/2),n=Math.floor(r/2),a=xs(t,"chars","");if(a!==""){var h=xs(t,"image",""),o=e.sys.textures.getFrame(h),u=o.cutX,f=o.cutY,d=o.source.width,v=o.source.height,c=xs(t,"offset.x",0),p=xs(t,"offset.y",0),m=xs(t,"spacing.x",0),x=xs(t,"spacing.y",0),g=xs(t,"lineSpacing",0),y=xs(t,"charsPerRow",null);y===null&&(y=d/i,y>a.length&&(y=a.length));for(var T=c,S=p,E={retroFont:!0,font:h,size:i,lineHeight:r+g,chars:{}},_=0,w=0;w<a.length;w++){var R=a.charCodeAt(w),q=(u+T)/d,A=(f+S)/v,P=(u+T+i)/d,L=(f+S+r)/v;E.chars[R]={x:T,y:S,width:i,height:r,centerX:s,centerY:n,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:q,v0:A,u1:P,v1:L},_++,_===y?(_=0,T=c,S+=r+x):T+=i+m}var b={data:E,frame:null,texture:h};return b}};BX.exports=E1e});var zX=l((HZe,kX)=>{var S1e=GX(),_1e=ze(),Am={Parse:UX()};Am=_1e(!1,Am,S1e);kX.exports=Am});var XX=l((KZe,YX)=>{var w1e=be(),C1e=Te(),R1e=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline,t),n=w1e(t,i,r).calc,a=t.vertices,h=t.uv,o=t.colors,u=t.alphas,f=t.alpha,d=C1e.getTintAppendFloatAlpha,v=i.roundPixels,c=a.length,p=Math.floor(c*.5);s.flush(),e.pipelines.preBatch(t);var m=s.setGameObject(t),x=s.vertexViewF32,g=s.vertexViewU32,y=s.vertexCount*s.currentShader.vertexComponentCount-1,T=0,S=t.tintFill;t.dirty&&t.updateVertices();for(var E=t.debugCallback,_=[],w=0;w<c;w+=2){var R=a[w+0],q=a[w+1],A=R*n.a+q*n.c+n.e,P=R*n.b+q*n.d+n.f;v&&(A=Math.round(A),P=Math.round(P)),x[++y]=A,x[++y]=P,x[++y]=h[w+0],x[++y]=h[w+1],x[++y]=m,x[++y]=S,g[++y]=d(o[T],i.alpha*(u[T]*f)),T++,E&&(_[w+0]=A,_[w+1]=P)}E&&E.call(t,t,c,_),s.vertexCount+=p,e.pipelines.postBatch(t)};YX.exports=R1e});var WX=l((ZZe,VX)=>{var q1e=function(){};VX.exports=q1e});var JX=l((JZe,ZX)=>{var HX=B(),KX=B();HX=XX();KX=WX();ZX.exports={renderWebGL:HX,renderCanvas:KX}});var pl=l((QZe,$X)=>{var A1e=gm(),P1e=C(),Ni=ye(),QX=Fe(),M1e=Ks(),b1e=JX(),L1e=xe(),O1e=new P1e({Extends:QX,Mixins:[Ni.AlphaSingle,Ni.BlendMode,Ni.Depth,Ni.Flip,Ni.Mask,Ni.Pipeline,Ni.Size,Ni.Texture,Ni.Transform,Ni.Visible,Ni.ScrollFactor,b1e],initialize:function(t,i,r,s,n,a,h,o,u){s===void 0&&(s="__DEFAULT"),a===void 0&&(a=2),h===void 0&&(h=!0),QX.call(this,t,"Rope"),this.anims=new A1e(this),this.points=a,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=s==="__DEFAULT",this.dirty=!1,this.horizontal=h,this._flipX=!1,this._flipY=!1,this._perp=new L1e,this.debugCallback=null,this.debugGraphic=null,this.setTexture(s,n),this.setPosition(i,r),this.setSizeToFrame(),this.initPipeline(M1e.ROPE_PIPELINE),Array.isArray(a)&&this.resizeArrays(a.length),this.setPoints(a,o,u),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(e,t){var i=this.anims.currentFrame;this.anims.update(e,t),this.anims.currentFrame!==i&&(this.updateUVs(),this.updateVertices())},play:function(e,t,i){return this.anims.play(e,t,i),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(e,t,i){return e===void 0&&(e=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(e,t,i))},setVertical:function(e,t,i){return e===void 0&&(e=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(e,t,i)):this},setTintFill:function(e){return e===void 0&&(e=!1),this.tintFill=e,this},setAlphas:function(e,t){var i=this.points.length;if(i<1)return this;var r=this.alphas;e===void 0?e=[1]:!Array.isArray(e)&&t===void 0&&(e=[e]);var s,n=0;if(t!==void 0)for(s=0;s<i;s++)n=s*2,r[n]=e,r[n+1]=t;else if(e.length===i)for(s=0;s<i;s++)n=s*2,r[n]=e[s],r[n+1]=e[s];else{var a=e[0];for(s=0;s<i;s++)n=s*2,e.length>n&&(a=e[n]),r[n]=a,e.length>n+1&&(a=e[n+1]),r[n+1]=a}return this},setColors:function(e){var t=this.points.length;if(t<1)return this;var i=this.colors;e===void 0?e=[16777215]:Array.isArray(e)||(e=[e]);var r,s=0;if(e.length===t)for(r=0;r<t;r++)s=r*2,i[s]=e[r],i[s+1]=e[r];else{var n=e[0];for(r=0;r<t;r++)s=r*2,e.length>s&&(n=e[s]),i[s]=n,e.length>s+1&&(n=e[s+1]),i[s+1]=n}return this},setPoints:function(e,t,i){if(e===void 0&&(e=2),typeof e=="number"){var r=e;r<2&&(r=2),e=[];var s,n,a;if(this.horizontal)for(a=-this.frame.halfWidth,n=this.frame.width/(r-1),s=0;s<r;s++)e.push({x:a+s*n,y:0});else for(a=-this.frame.halfHeight,n=this.frame.height/(r-1),s=0;s<r;s++)e.push({x:0,y:a+s*n})}var h=e.length,o=this.points.length;return h<1?(console.warn("Rope: Not enough points given"),this):(h===1&&(e.unshift({x:0,y:0}),h++),o!==h&&this.resizeArrays(h),this.points=e,this.updateUVs(),t!=null&&this.setColors(t),i!=null&&this.setAlphas(i),this)},updateUVs:function(){for(var e=this.uv,t=this.points.length,i=this.frame.u0,r=this.frame.v0,s=this.frame.u1,n=this.frame.v1,a=(s-i)/(t-1),h=(n-r)/(t-1),o=0;o<t;o++){var u=o*4,f,d,v,c;this.horizontal?(this._flipX?(f=s-o*a,v=s-o*a):(f=i+o*a,v=i+o*a),this._flipY?(d=n,c=r):(d=r,c=n)):(this._flipX?(f=i,v=s):(f=s,v=i),this._flipY?(d=n-o*h,c=n-o*h):(d=r+o*h,c=r+o*h)),e[u+0]=f,e[u+1]=d,e[u+2]=v,e[u+3]=c}return this},resizeArrays:function(e){var t=this.colors,i=this.alphas;this.vertices=new Float32Array(e*4),this.uv=new Float32Array(e*4),t=new Uint32Array(e*2),i=new Float32Array(e*2);for(var r=0;r<e*2;r++)t[r]=16777215,i[r]=1;return this.colors=t,this.alphas=i,this.dirty=!0,this},updateVertices:function(){var e=this._perp,t=this.points,i=this.vertices,r=t.length;if(this.dirty=!1,!(r<1)){for(var s,n=t[0],a=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,h=0;h<r;h++){var o=t[h],u=h*4;h<r-1?s=t[h+1]:s=o,e.x=s.y-n.y,e.y=-(s.x-n.x);var f=e.length();e.x/=f,e.y/=f,e.x*=a,e.y*=a,i[u]=o.x+e.x,i[u+1]=o.y+e.y,i[u+2]=o.x-e.x,i[u+3]=o.y-e.y,n=o}return this}},setDebug:function(e,t){return this.debugGraphic=e,!e&&!t?this.debugCallback=null:t?this.debugCallback=t:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(e,t,i){var r=e.debugGraphic,s=i[0],n=i[1],a=i[2],h=i[3];r.lineBetween(s,n,a,h);for(var o=4;o<t;o+=4){var u=i[o+0],f=i[o+1],d=i[o+2],v=i[o+3];r.lineBetween(s,n,u,f),r.lineBetween(a,h,d,v),r.lineBetween(a,h,u,f),r.lineBetween(u,f,d,v),s=u,n=f,a=d,h=v}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(e){return this._flipX=e,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(e){return this._flipY=e,this.updateUVs()}}});$X.exports=O1e});var Pm=l(($Ze,jX)=>{var F1e=function(e,t,i){var r=e.canvas,s=e.context,n=e.style,a=[],h=0,o=i.length;n.maxLines>0&&n.maxLines<i.length&&(o=n.maxLines),n.syncFont(r,s);for(var u=0;u<o;u++){var f=n.strokeThickness;f+=s.measureText(i[u]).width,n.wordWrap&&(f-=s.measureText(" ").width),a[u]=Math.ceil(f),h=Math.max(h,a[u])}var d=t.fontSize+n.strokeThickness,v=d*o,c=e.lineSpacing;return o>1&&(v+=c*(o-1)),{width:h,height:v,lines:o,lineWidths:a,lineSpacing:c,lineHeight:d}};jX.exports=F1e});var tV=l((jZe,eV)=>{var D1e=Te(),I1e=function(e,t,i,r){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var s=t.frame,n=s.width,a=s.height,h=D1e.getTintAppendFloatAlpha,o=e.pipelines.set(t.pipeline,t),u=o.setTexture2D(s.glTexture,t);e.pipelines.preBatch(t),o.batchTexture(t,s.glTexture,n,a,t.x,t.y,n/t.style.resolution,a/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,a,h(t.tintTopLeft,i.alpha*t._alphaTL),h(t.tintTopRight,i.alpha*t._alphaTR),h(t.tintBottomLeft,i.alpha*t._alphaBL),h(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,r,!1,u),e.pipelines.postBatch(t)}};eV.exports=I1e});var rV=l((eJe,iV)=>{var N1e=function(e,t,i,r){t.width===0||t.height===0||(i.addToRenderList(t),e.batchSprite(t,t.frame,i,r))};iV.exports=N1e});var hV=l((tJe,aV)=>{var sV=B(),nV=B();sV=tV();nV=rV();aV.exports={renderWebGL:sV,renderCanvas:nV}});var Mm=l((iJe,oV)=>{var ml=bt(),G1e=function(e){var t=ml.create(this),i=t.getContext("2d");e.syncFont(t,i);var r=i.measureText(e.testString);if("actualBoundingBoxAscent"in r){var s=r.actualBoundingBoxAscent,n=r.actualBoundingBoxDescent;return ml.remove(t),{ascent:s,descent:n,fontSize:s+n}}var a=Math.ceil(r.width*e.baselineX),h=a,o=2*h;h=h*e.baselineY|0,t.width=a,t.height=o,i.fillStyle="#f00",i.fillRect(0,0,a,o),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,h);var u={ascent:0,descent:0,fontSize:0},f=i.getImageData(0,0,a,o);if(!f)return u.ascent=h,u.descent=h+6,u.fontSize=u.ascent+u.descent,ml.remove(t),u;var d=f.data,v=d.length,c=a*4,p,m,x=0,g=!1;for(p=0;p<h;p++){for(m=0;m<c;m+=4)if(d[x+m]!==255){g=!0;break}if(!g)x+=c;else break}for(u.ascent=h-p,x=v-c,g=!1,p=o;p>h;p--){for(m=0;m<c;m+=4)if(d[x+m]!==255){g=!0;break}if(!g)x-=c;else break}return u.descent=p-h,u.fontSize=u.ascent+u.descent,ml.remove(t),u};oV.exports=G1e});var bm=l((rJe,lV)=>{var B1e=C(),U1e=we(),ar=he(),uV=Mm(),Rh={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},k1e=new B1e({initialize:function(t,i){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(i,!1,!0);var r=ar(i,"metrics",!1);r?this.metrics={ascent:ar(r,"ascent",0),descent:ar(r,"descent",0),fontSize:ar(r,"fontSize",0)}:this.metrics=uV(this)},setStyle:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1),e&&e.hasOwnProperty("fontSize")&&typeof e.fontSize=="number"&&(e.fontSize=e.fontSize.toString()+"px");for(var r in Rh){var s=i?Rh[r][1]:this[r];r==="wordWrapCallback"||r==="wordWrapCallbackScope"?this[r]=ar(e,Rh[r][0],s):this[r]=U1e(e,Rh[r][0],s)}var n=ar(e,"font",null);n!==null&&this.setFont(n,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var a=ar(e,"fill",null);return a!==null&&(this.color=a),t?this.update(!0):this.parent},syncFont:function(e,t){t.font=this._font},syncStyle:function(e,t){t.textBaseline="alphabetic",t.fillStyle=this.color,t.strokeStyle=this.stroke,t.lineWidth=this.strokeThickness,t.lineCap="round",t.lineJoin="round"},syncShadow:function(e,t){t?(e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur):(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=0,e.shadowBlur=0)},update:function(e){return e&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=uV(this)),this.parent.updateText()},setFont:function(e,t){t===void 0&&(t=!0);var i=e,r="",s="";if(typeof e!="string")i=ar(e,"fontFamily","Courier"),r=ar(e,"fontSize","16px"),s=ar(e,"fontStyle","");else{var n=e.split(" "),a=0;s=n.length>2?n[a++]:"",r=n[a++]||"16px",i=n[a++]||"Courier"}return(i!==this.fontFamily||r!==this.fontSize||s!==this.fontStyle)&&(this.fontFamily=i,this.fontSize=r,this.fontStyle=s,t&&this.update(!0)),this.parent},setFontFamily:function(e){return this.fontFamily!==e&&(this.fontFamily=e,this.update(!0)),this.parent},setFontStyle:function(e){return this.fontStyle!==e&&(this.fontStyle=e,this.update(!0)),this.parent},setFontSize:function(e){return typeof e=="number"&&(e=e.toString()+"px"),this.fontSize!==e&&(this.fontSize=e,this.update(!0)),this.parent},setTestString:function(e){return this.testString=e,this.update(!0)},setFixedSize:function(e,t){return this.fixedWidth=e,this.fixedHeight=t,e&&(this.parent.width=e),t&&(this.parent.height=t),this.update(!1)},setBackgroundColor:function(e){return this.backgroundColor=e,this.update(!1)},setFill:function(e){return this.color=e,this.update(!1)},setColor:function(e){return this.color=e,this.update(!1)},setResolution:function(e){return this.resolution=e,this.update(!1)},setStroke:function(e,t){return t===void 0&&(t=this.strokeThickness),e===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==e||this.strokeThickness!==t)&&(this.stroke=e,this.strokeThickness=t,this.update(!0)),this.parent},setShadow:function(e,t,i,r,s,n){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i="#000"),r===void 0&&(r=0),s===void 0&&(s=!1),n===void 0&&(n=!0),this.shadowOffsetX=e,this.shadowOffsetY=t,this.shadowColor=i,this.shadowBlur=r,this.shadowStroke=s,this.shadowFill=n,this.update(!1)},setShadowOffset:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.shadowOffsetX=e,this.shadowOffsetY=t,this.update(!1)},setShadowColor:function(e){return e===void 0&&(e="#000"),this.shadowColor=e,this.update(!1)},setShadowBlur:function(e){return e===void 0&&(e=0),this.shadowBlur=e,this.update(!1)},setShadowStroke:function(e){return this.shadowStroke=e,this.update(!1)},setShadowFill:function(e){return this.shadowFill=e,this.update(!1)},setWordWrapWidth:function(e,t){return t===void 0&&(t=!1),this.wordWrapWidth=e,this.wordWrapUseAdvanced=t,this.update(!1)},setWordWrapCallback:function(e,t){return t===void 0&&(t=null),this.wordWrapCallback=e,this.wordWrapCallbackScope=t,this.update(!1)},setAlign:function(e){return e===void 0&&(e="left"),this.align=e,this.update(!1)},setMaxLines:function(e){return e===void 0&&(e=0),this.maxLines=e,this.update(!1)},getTextMetrics:function(){var e=this.metrics;return{ascent:e.ascent,descent:e.descent,fontSize:e.fontSize}},toJSON:function(){var e={};for(var t in Rh)e[t]=this[t];return e.metrics=this.getTextMetrics(),e},destroy:function(){this.parent=void 0}});lV.exports=k1e});var gl=l((sJe,cV)=>{var z1e=oh(),fV=bt(),Y1e=C(),It=ye(),dV=Ye(),vV=Fe(),X1e=Pm(),oa=he(),V1e=Eu(),W1e=hV(),H1e=bm(),K1e=new Y1e({Extends:vV,Mixins:[It.Alpha,It.BlendMode,It.ComputedSize,It.Crop,It.Depth,It.Flip,It.GetBounds,It.Mask,It.Origin,It.Pipeline,It.ScrollFactor,It.Tint,It.Transform,It.Visible,W1e],initialize:function(t,i,r,s,n){i===void 0&&(i=0),r===void 0&&(r=0),vV.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(i,r),this.setOrigin(0,0),this.initPipeline(),this.canvas=fV.create(this),this.context=this.canvas.getContext("2d"),this.style=new H1e(this,n),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(s),n&&n.padding&&this.setPadding(n.padding),n&&n.lineSpacing&&this.setLineSpacing(n.lineSpacing),t.sys.game.events.on(dV.CONTEXT_RESTORED,this.onContextRestored,this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",z1e(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(e){var t=this.style;if(t.wordWrapCallback){var i=t.wordWrapCallback.call(t.wordWrapCallbackScope,e,this);return Array.isArray(i)&&(i=i.join(`
`)),i}else return t.wordWrapWidth?t.wordWrapUseAdvanced?this.advancedWordWrap(e,this.context,this.style.wordWrapWidth):this.basicWordWrap(e,this.context,this.style.wordWrapWidth):e},advancedWordWrap:function(e,t,i){for(var r="",s=e.replace(/ +/gi," ").split(this.splitRegExp),n=s.length,a=0;a<n;a++){var h=s[a],o="";h=h.replace(/^ *|\s*$/gi,"");var u=t.measureText(h).width;if(u<i){r+=h+`
`;continue}for(var f=i,d=h.split(" "),v=0;v<d.length;v++){var c=d[v],p=c+" ",m=t.measureText(p).width;if(m>f){if(v===0){for(var x=p;x.length&&(x=x.slice(0,-1),m=t.measureText(x).width,!(m<=f)););if(!x.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var g=c.substr(x.length);d[v]=g,o+=x}var y=d[v].length?v:v+1,T=d.slice(y).join(" ").replace(/[ \n]*$/gi,"");s[a+1]=T+" "+(s[a+1]||""),n=s.length;break}else o+=p,f-=m}r+=o.replace(/[ \n]*$/gi,"")+`
`}return r=r.replace(/[\s|\n]*$/gi,""),r},basicWordWrap:function(e,t,i){for(var r="",s=e.split(this.splitRegExp),n=s.length-1,a=t.measureText(" ").width,h=0;h<=n;h++){for(var o=i,u=s[h].split(" "),f=u.length-1,d=0;d<=f;d++){var v=u[d],c=t.measureText(v).width,p=c;d<f&&(p+=a),p>o&&d>0&&(r+=`
`,o=i),r+=v,d<f?(r+=" ",o-=p):o-=c}h<n&&(r+=`
`)}return r},getWrappedText:function(e){e===void 0&&(e=this._text),this.style.syncFont(this.canvas,this.context);var t=this.runWordWrap(e);return t.split(this.splitRegExp)},setText:function(e){return!e&&e!==0&&(e=""),Array.isArray(e)&&(e=e.join(`
`)),e!==this._text&&(this._text=e.toString(),this.updateText()),this},setStyle:function(e){return this.style.setStyle(e)},setFont:function(e){return this.style.setFont(e)},setFontFamily:function(e){return this.style.setFontFamily(e)},setFontSize:function(e){return this.style.setFontSize(e)},setFontStyle:function(e){return this.style.setFontStyle(e)},setFixedSize:function(e,t){return this.style.setFixedSize(e,t)},setBackgroundColor:function(e){return this.style.setBackgroundColor(e)},setFill:function(e){return this.style.setFill(e)},setColor:function(e){return this.style.setColor(e)},setStroke:function(e,t){return this.style.setStroke(e,t)},setShadow:function(e,t,i,r,s,n){return this.style.setShadow(e,t,i,r,s,n)},setShadowOffset:function(e,t){return this.style.setShadowOffset(e,t)},setShadowColor:function(e){return this.style.setShadowColor(e)},setShadowBlur:function(e){return this.style.setShadowBlur(e)},setShadowStroke:function(e){return this.style.setShadowStroke(e)},setShadowFill:function(e){return this.style.setShadowFill(e)},setWordWrapWidth:function(e,t){return this.style.setWordWrapWidth(e,t)},setWordWrapCallback:function(e,t){return this.style.setWordWrapCallback(e,t)},setAlign:function(e){return this.style.setAlign(e)},setResolution:function(e){return this.style.setResolution(e)},setLineSpacing:function(e){return this.lineSpacing=e,this.updateText()},setPadding:function(e,t,i,r){if(typeof e=="object"){var s=e,n=oa(s,"x",null);n!==null?(e=n,i=n):(e=oa(s,"left",0),i=oa(s,"right",e));var a=oa(s,"y",null);a!==null?(t=a,r=a):(t=oa(s,"top",0),r=oa(s,"bottom",t))}else e===void 0&&(e=0),t===void 0&&(t=e),i===void 0&&(i=e),r===void 0&&(r=t);return this.padding.left=e,this.padding.top=t,this.padding.right=i,this.padding.bottom=r,this.updateText()},setMaxLines:function(e){return this.style.setMaxLines(e)},updateText:function(){var e=this.canvas,t=this.context,i=this.style,r=i.resolution,s=i.metrics;i.syncFont(e,t);var n=this._text;(i.wordWrapWidth||i.wordWrapCallback)&&(n=this.runWordWrap(this._text));var a=n.split(this.splitRegExp),h=X1e(this,s,a),o=this.padding,u;i.fixedWidth===0?(this.width=h.width+o.left+o.right,u=h.width):(this.width=i.fixedWidth,u=this.width-o.left-o.right,u<h.width&&(u=h.width)),i.fixedHeight===0?this.height=h.height+o.top+o.bottom:this.height=i.fixedHeight;var f=this.width,d=this.height;this.updateDisplayOrigin(),f*=r,d*=r,f=Math.max(f,1),d=Math.max(d,1),e.width!==f||e.height!==d?(e.width=f,e.height=d,this.frame.setSize(f,d),i.syncFont(e,t)):t.clearRect(0,0,f,d),t.save(),t.scale(r,r),i.backgroundColor&&(t.fillStyle=i.backgroundColor,t.fillRect(0,0,f,d)),i.syncStyle(e,t),t.textBaseline="alphabetic",t.translate(o.left,o.top);for(var v,c,p=0;p<h.lines;p++){if(v=i.strokeThickness/2,c=i.strokeThickness/2+p*h.lineHeight+s.ascent,p>0&&(c+=h.lineSpacing*p),i.rtl)v=f-v;else if(i.align==="right")v+=u-h.lineWidths[p];else if(i.align==="center")v+=(u-h.lineWidths[p])/2;else if(i.align==="justify"){var m=.85;if(h.lineWidths[p]/h.width>=m){var x=h.width-h.lineWidths[p],g=t.measureText(" ").width,y=a[p].trim(),T=y.split(" ");x+=(a[p].length-y.length)*g;for(var S=Math.floor(x/g),E=0;S>0;)T[E]+=" ",E=(E+1)%(T.length-1||1),--S;a[p]=T.join(" ")}}this.autoRound&&(v=Math.round(v),c=Math.round(c)),i.strokeThickness&&(this.style.syncShadow(t,i.shadowStroke),t.strokeText(a[p],v,c)),i.color&&(this.style.syncShadow(t,i.shadowFill),t.fillText(a[p],v,c))}t.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(e,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var _=this.input;return _&&!_.customHitArea&&(_.hitArea.width=this.width,_.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(e){this.setText(e)}},toJSON:function(){var e=It.ToJSON(this),t={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return e.data=t,e},onContextRestored:function(){this.dirty=!0},preDestroy:function(){this.style.rtl&&V1e(this.canvas),fV.remove(this.canvas),this.texture.destroy(),this.scene.sys.game.events.off(dV.CONTEXT_RESTORED,this.onContextRestored,this)}});cV.exports=K1e});var mV=l((nJe,pV)=>{var Z1e=Te(),J1e=function(e,t,i,r){t.updateCanvas();var s=t.width,n=t.height;if(!(s===0||n===0)){i.addToRenderList(t),e.pipelines.preBatch(t);var a=Z1e.getTintAppendFloatAlpha,h=e.pipelines.set(t.pipeline,t),o=h.setTexture2D(t.fillPattern,t);h.batchTexture(t,t.fillPattern,t.displayFrame.width*t.tileScaleX,t.displayFrame.height*t.tileScaleY,t.x,t.y,s,n,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.originX*s,t.originY*n,0,0,s,n,a(t.tintTopLeft,i.alpha*t._alphaTL),a(t.tintTopRight,i.alpha*t._alphaTR),a(t.tintBottomLeft,i.alpha*t._alphaBL),a(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,t.tilePositionX%t.displayFrame.width/t.displayFrame.width,t.tilePositionY%t.displayFrame.height/t.displayFrame.height,i,r,!1,o),e.pipelines.postBatch(t)}};pV.exports=J1e});var xV=l((aJe,gV)=>{var Q1e=function(e,t,i,r){t.updateCanvas(),i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)};gV.exports=Q1e});var SV=l((hJe,EV)=>{var yV=B(),TV=B();yV=mV();TV=xV();EV.exports={renderWebGL:yV,renderCanvas:TV}});var Tl=l((oJe,qV)=>{var xl=bt(),$1e=C(),Wt=ye(),_V=Ye(),wV=Fe(),yl=Qv(),j1e=Ho(),eCe=SV(),CV=xe(),RV=8,tCe=new $1e({Extends:wV,Mixins:[Wt.Alpha,Wt.BlendMode,Wt.ComputedSize,Wt.Crop,Wt.Depth,Wt.Flip,Wt.GetBounds,Wt.Mask,Wt.Origin,Wt.Pipeline,Wt.ScrollFactor,Wt.Tint,Wt.Transform,Wt.Visible,eCe],initialize:function(t,i,r,s,n,a,h){var o=t.sys.renderer;wV.call(this,t,"TileSprite");var u=t.sys.textures.get(a),f=u.get(h);!s||!n?(s=f.width,n=f.height):(s=Math.floor(s),n=Math.floor(n)),this._tilePosition=new CV,this._tileScale=new CV(1,1),this.dirty=!1,this.renderer=o,this.canvas=xl.create(this,s,n),this.context=this.canvas.getContext("2d"),this.displayTexture=u,this.displayFrame=f,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=yl(f.width),this.potHeight=yl(f.height),this.fillCanvas=xl.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(i,r),this.setSize(s,n),this.setFrame(h),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(_V.CONTEXT_RESTORED,this.onContextRestored,this)},setTexture:function(e,t){return this.displayTexture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e){var t=this.displayTexture.get(e);return this.potWidth=yl(t.width),this.potHeight=yl(t.height),this.canvas.width=0,!t.cutWidth||!t.cutHeight?this.renderFlags&=~RV:this.renderFlags|=RV,this.displayFrame=t,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(e,t){return e!==void 0&&(this.tilePositionX=e),t!==void 0&&(this.tilePositionY=t),this},setTileScale:function(e,t){return e===void 0&&(e=this.tileScaleX),t===void 0&&(t=e),this.tileScaleX=e,this.tileScaleY=t,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var e=this.displayFrame;if(e.source.isRenderTexture||e.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var t=this.fillContext,i=this.fillCanvas,r=this.potWidth,s=this.potHeight;(!this.renderer||!this.renderer.gl)&&(r=e.cutWidth,s=e.cutHeight),t.clearRect(0,0,r,s),i.width=r,i.height=s,t.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,r,s),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=t.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var e=this.canvas;if((e.width!==this.width||e.height!==this.height)&&(e.width=this.width,e.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var t=this.context;this.scene.sys.game.config.antialias||j1e.disable(t);var i=this._tileScale.x,r=this._tileScale.y,s=this._tilePosition.x,n=this._tilePosition.y;t.clearRect(0,0,this.width,this.height),t.save(),t.scale(i,r),t.translate(-s,-n),t.fillStyle=this.fillPattern,t.fillRect(s,n,this.width/i,this.height/r),t.restore(),this.dirty=!1},onContextRestored:function(e){if(!!e){var t=e.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=e.createTexture2D(0,t.LINEAR,t.LINEAR,t.REPEAT,t.REPEAT,t.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),xl.remove(this.canvas),xl.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null,this.scene.sys.game.events.off(_V.CONTEXT_RESTORED,this.onContextRestored,this)},tilePositionX:{get:function(){return this._tilePosition.x},set:function(e){this._tilePosition.x=e,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(e){this._tilePosition.y=e,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(e){this._tileScale.x=e,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(e){this._tileScale.y=e,this.dirty=!0}}});qV.exports=tCe});var PV=l((uJe,AV)=>{var iCe=function(e,t,i,r){t.videoTexture&&(i.addToRenderList(t),t.pipeline.batchSprite(t,i,r))};AV.exports=iCe});var bV=l((lJe,MV)=>{var rCe=function(e,t,i,r){t.videoTexture&&(i.addToRenderList(t),e.batchSprite(t,t.frame,i,r))};MV.exports=rCe});var DV=l((fJe,FV)=>{var LV=B(),OV=B();LV=PV();OV=bV();FV.exports={renderWebGL:LV,renderCanvas:OV}});var Sl=l((dJe,BV)=>{var sCe=C(),nCe=Le(),Ht=ye(),_t=Vr(),El=Ye(),aCe=ji(),IV=Fe(),NV=us(),GV=vl(),hCe=DV(),oCe=Oe(),uCe=new sCe({Extends:IV,Mixins:[Ht.Alpha,Ht.BlendMode,Ht.Depth,Ht.Flip,Ht.GetBounds,Ht.Mask,Ht.Origin,Ht.Pipeline,Ht.ScrollFactor,Ht.Size,Ht.TextureCrop,Ht.Tint,Ht.Transform,Ht.Visible,hCe],initialize:function(t,i,r,s){IV.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=GV(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=oCe.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(i,r),this.initPipeline(),s&&this.changeSource(s,!1);var n=t.sys.game.events;n.on(El.PAUSE,this.globalPause,this),n.on(El.RESUME,this.globalResume,this);var a=t.sys.sound;a&&a.on(NV.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(e,t,i){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var r=this.video;if(!r)return console.warn("Video not loaded"),this;e===void 0&&(e=r.loop);var s=this.scene.sys.sound;s&&s.mute&&this.setMute(!0),isNaN(t)||(this._markerIn=t),!isNaN(i)&&i>t&&(this._markerOut=i),r.loop=e;var n=this._callbacks,a=r.play();return a!==void 0?a.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(r.addEventListener("playing",n.play,!0),r.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),r.addEventListener("ended",n.end,!0),r.addEventListener("timeupdate",n.time,!0),r.addEventListener("seeking",n.seeking,!0),r.addEventListener("seeked",n.seeked,!0),this},changeSource:function(e,t,i,r,s){t===void 0&&(t=!0);var n=this.video;n&&this.stop();var a=this.scene.sys.cache.video.get(e);return a?(this.video=a,this._cacheKey=e,this._codePaused=a.paused,this._codeMuted=a.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,a,a.videoWidth,a.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,a.videoWidth,a.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(_t.VIDEO_CREATED,this,a.videoWidth,a.videoHeight)):this.updateTexture(),a.currentTime=0,this._lastUpdate=0,t&&this.play(i,r,s)):this.video=null,this},addMarker:function(e,t,i){return!isNaN(t)&&t>=0&&!isNaN(i)&&(this.markers[e]=[t,i]),this},playMarker:function(e,t){var i=this.markers[e];return i&&this.play(t,i[0],i[1]),this},removeMarker:function(e){return delete this.markers[e],this},snapshot:function(e,t){return e===void 0&&(e=this.width),t===void 0&&(t=this.height),this.snapshotArea(0,0,this.width,this.height,e,t)},snapshotArea:function(e,t,i,r,s,n){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=this.width),r===void 0&&(r=this.height),s===void 0&&(s=i),n===void 0&&(n=r);var a=this.video,h=this.snapshotTexture;return h?(h.setSize(s,n),a&&h.context.drawImage(a,e,t,i,r,0,0,s,n)):(h=this.scene.sys.textures.createCanvas(GV(),s,n),this.snapshotTexture=h,a&&h.context.drawImage(a,e,t,i,r,0,0,s,n)),h.update()},saveSnapshotTexture:function(e){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,e):this.snapshotTexture=this.scene.sys.textures.createCanvas(e,this.width,this.height),this.snapshotTexture},loadURL:function(e,t,i,r){t===void 0&&(t="loadeddata"),i===void 0&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var s=document.createElement("video");return s.controls=!1,i&&(s.muted=!0,s.defaultMuted=!0,s.setAttribute("autoplay","autoplay")),s.setAttribute("playsinline","playsinline"),s.setAttribute("preload","auto"),r!==void 0&&s.setAttribute("crossorigin",r),s.addEventListener("error",this._callbacks.error,!0),s.src=e,s.load(),this.video=s,this},loadMediaStream:function(e,t,i){t===void 0&&(t="loadeddata"),i===void 0&&(i=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");r.controls=!1,i&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0);try{r.srcObject=e}catch(s){r.src=window.URL.createObjectURL(e)}return r.load(),this.video=r,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(_t.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(e){this.scene.sys.input.once(aCe.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(_t.VIDEO_ERROR,this,e)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(_t.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(e){this.stop(),this.emit(_t.VIDEO_ERROR,this,e)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(_t.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(_t.VIDEO_PLAY,this)},completeHandler:function(){this.emit(_t.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(_t.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var e=this.video;if(e){var t=e.currentTime;t!==this._lastUpdate&&(this._lastUpdate=t,this.updateTexture(),t>=this._markerOut&&(e.loop?(e.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=t,this.emit(_t.VIDEO_LOOP,this)):(this.emit(_t.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(_t.VIDEO_TIMEOUT,this))},updateTexture:function(){var e=this.video,t=e.videoWidth,i=e.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,e,t,i),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,t,i),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(_t.VIDEO_CREATED,this,t,i);else{var r=this.videoTextureSource;r.source!==e&&(r.source=e,r.width=t,r.height=i),r.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(e){var t=this.video;if(t){var i=t.duration;if(i!==1/0&&!isNaN(i)){var r=i*e;this.setCurrentTime(r)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(e){var t=this.video;if(t){if(typeof e=="string"){var i=e[0],r=parseFloat(e.substr(1));i==="+"?e=t.currentTime+r:i==="-"&&(e=t.currentTime-r)}t.currentTime=e,this._lastUpdate=e}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(_t.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(_t.VIDEO_SEEKED,this);var e=this.video;e&&this.updateTexture()},getProgress:function(){var e=this.video;if(e){var t=e.currentTime,i=e.duration;if(i!==1/0&&!isNaN(i))return t/i}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(e){e===void 0&&(e=!0),this._codeMuted=e;var t=this.video;return t&&(t.muted=this._systemMuted?!0:e),this},isMuted:function(){return this._codeMuted},globalMute:function(e,t){this._systemMuted=t;var i=this.video;i&&(i.muted=this._codeMuted?!0:t)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(e){e===void 0&&(e=!0);var t=this.video;return this._codePaused=e,t&&(e?t.paused||t.pause():e||t.paused&&!this._systemPaused&&t.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(e){return e===void 0&&(e=1),this.video&&(this.video.volume=nCe(e,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(e){return this.video&&(this.video.playbackRate=e),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(e){return e===void 0&&(e=!0),this.video&&(this.video.loop=e),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(e,t){return t===void 0&&(t=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,e),this._key=e,this.flipY=t,this.videoTextureSource&&this.videoTextureSource.setFlipY(t),this.videoTexture},stop:function(){var e=this.video;if(e){var t=this._callbacks;for(var i in t)e.removeEventListener(i,t[i],!0);e.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(_t.VIDEO_STOP,this),this},removeVideoElement:function(){var e=this.video;if(!!e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("autoplay"),e.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var e=this.scene.sys.game.events;e.off(El.PAUSE,this.globalPause,this),e.off(El.RESUME,this.globalResume,this);var t=this.scene.sys.sound;t&&t.off(NV.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});BV.exports=uCe});var ni=l((vJe,kV)=>{var lCe=C(),hr=ye(),UV=Fe(),fCe=Ai(),dCe=new lCe({Extends:UV,Mixins:[hr.AlphaSingle,hr.BlendMode,hr.Depth,hr.GetBounds,hr.Mask,hr.Origin,hr.Pipeline,hr.ScrollFactor,hr.Transform,hr.Visible],initialize:function(t,i,r){i===void 0&&(i="Shape"),UV.call(this,t,i),this.geom=r,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new fCe,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.isFilled=!1:(this.fillColor=e,this.fillAlpha=t,this.isFilled=!0),this},setStrokeStyle:function(e,t,i){return i===void 0&&(i=1),e===void 0?this.isStroked=!1:(this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(e){return this.closePath=e,this},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}}});kV.exports=dCe});var ua=l((cJe,zV)=>{var vCe=Te(),cCe=function(e,t,i,r,s,n){for(var a=vCe.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*r),h=i.pathData,o=i.pathIndexes,u=0;u<o.length;u+=3){var f=o[u]*2,d=o[u+1]*2,v=o[u+2]*2,c=h[f+0]-s,p=h[f+1]-n,m=h[d+0]-s,x=h[d+1]-n,g=h[v+0]-s,y=h[v+1]-n,T=t.getX(c,p),S=t.getY(c,p),E=t.getX(m,x),_=t.getY(m,x),w=t.getX(g,y),R=t.getY(g,y);e.batchTri(i,T,S,E,_,w,R,0,0,1,1,a,a,a,2)}};zV.exports=cCe});var ys=l((pJe,YV)=>{var pCe=Te(),mCe=function(e,t,i,r,s){var n=e.strokeTint,a=pCe.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*i);n.TL=a,n.TR=a,n.BL=a,n.BR=a;var h=t.pathData,o=h.length-1,u=t.lineWidth,f=u/2,d=h[0]-r,v=h[1]-s;t.closePath||(o-=2);for(var c=2;c<o;c+=2){var p=h[c]-r,m=h[c+1]-s;e.batchLine(d,v,p,m,f,f,u,c-2,t.closePath?c===o-1:!1),d=p,v=m}};YV.exports=mCe});var VV=l((mJe,XV)=>{var gCe=be(),xCe=ua(),yCe=ys(),TCe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=gCe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t._displayOriginX,o=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&xCe(s,a,t,u,h,o),t.isStroked&&yCe(s,t,u,h,o),e.pipelines.postBatch(t)};XV.exports=TCe});var Gi=l((gJe,WV)=>{var ECe=function(e,t,i,r){var s=i||t.fillColor,n=r||t.fillAlpha,a=(s&16711680)>>>16,h=(s&65280)>>>8,o=s&255;e.fillStyle="rgba("+a+","+h+","+o+","+n+")"};WV.exports=ECe});var or=l((xJe,HV)=>{var SCe=function(e,t,i,r){var s=i||t.strokeColor,n=r||t.strokeAlpha,a=(s&16711680)>>>16,h=(s&65280)>>>8,o=s&255;e.strokeStyle="rgba("+a+","+h+","+o+","+n+")",e.lineWidth=t.lineWidth};HV.exports=SCe});var JV=l((yJe,ZV)=>{var KV=yr(),_Ce=Gi(),wCe=or(),CCe=St(),RCe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(CCe(e,s,t,i,r)){var n=t.radius;s.beginPath(),s.arc(n-t.originX*(n*2),n-t.originY*(n*2),n,KV(t._startAngle),KV(t._endAngle),t.anticlockwise),t.closePath&&s.closePath(),t.isFilled&&(_Ce(s,t),s.fill()),t.isStroked&&(wCe(s,t),s.stroke()),s.restore()}};ZV.exports=RCe});var eW=l((TJe,jV)=>{var QV=B(),$V=B();QV=VV();$V=JV();jV.exports={renderWebGL:QV,renderCanvas:$V}});var Lm=l((EJe,rW)=>{var qCe=eW(),ACe=C(),tW=yr(),PCe=$i(),MCe=zr(),Ts=Oe(),iW=ni(),bCe=new ACe({Extends:iW,Mixins:[qCe],initialize:function(t,i,r,s,n,a,h,o,u){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=0),a===void 0&&(a=360),h===void 0&&(h=!1),iW.call(this,t,"Arc",new MCe(0,0,s)),this._startAngle=n,this._endAngle=a,this._anticlockwise=h,this._iterations=.01,this.setPosition(i,r);var f=this.geom.radius*2;this.setSize(f,f),o!==void 0&&this.setFillStyle(o,u),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(e){this._iterations=e,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(e){this.geom.radius=e;var t=e*2;this.setSize(t,t),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(e){this._startAngle=e,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(e){this._endAngle=e,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(e){this._anticlockwise=e,this.updateData()}},setRadius:function(e){return this.radius=e,this},setIterations:function(e){return e===void 0&&(e=.01),this.iterations=e,this},setStartAngle:function(e,t){return this._startAngle=e,t!==void 0&&(this._anticlockwise=t),this.updateData()},setEndAngle:function(e,t){return this._endAngle=e,t!==void 0&&(this._anticlockwise=t),this.updateData()},updateData:function(){var e=this._iterations,t=e,i=this.geom.radius,r=tW(this._startAngle),s=tW(this._endAngle),n=this._anticlockwise,a=i,h=i;s-=r,n?s<-Ts.PI2?s=-Ts.PI2:s>0&&(s=-Ts.PI2+s%Ts.PI2):s>Ts.PI2?s=Ts.PI2:s<0&&(s=Ts.PI2+s%Ts.PI2);for(var o=[a+Math.cos(r)*i,h+Math.sin(r)*i],u;t<1;)u=s*t+r,o.push(a+Math.cos(u)*i,h+Math.sin(u)*i),t+=e;return u=s+r,o.push(a+Math.cos(u)*i,h+Math.sin(u)*i),o.push(a+Math.cos(r)*i,h+Math.sin(r)*i),this.pathIndexes=PCe(o),this.pathData=o,this}});rW.exports=bCe});var nW=l((SJe,sW)=>{var LCe=ua(),OCe=be(),FCe=ys(),DCe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=OCe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t._displayOriginX+t._curveBounds.x,o=t._displayOriginY+t._curveBounds.y,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&LCe(s,a,t,u,h,o),t.isStroked&&FCe(s,t,u,h,o),e.pipelines.postBatch(t)};sW.exports=DCe});var hW=l((_Je,aW)=>{var ICe=Gi(),NCe=or(),GCe=St(),BCe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(GCe(e,s,t,i,r)){var n=t._displayOriginX+t._curveBounds.x,a=t._displayOriginY+t._curveBounds.y,h=t.pathData,o=h.length-1,u=h[0]-n,f=h[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(o-=2);for(var d=2;d<o;d+=2){var v=h[d]-n,c=h[d+1]-a;s.lineTo(v,c)}t.closePath&&s.closePath(),t.isFilled&&(ICe(s,t),s.fill()),t.isStroked&&(NCe(s,t),s.stroke()),s.restore()}};aW.exports=BCe});var fW=l((wJe,lW)=>{var oW=B(),uW=B();oW=nW();uW=hW();lW.exports={renderWebGL:oW,renderCanvas:uW}});var Om=l((CJe,vW)=>{var UCe=C(),kCe=fW(),zCe=$i(),YCe=Ae(),dW=ni(),XCe=new UCe({Extends:dW,Mixins:[kCe],initialize:function(t,i,r,s,n,a){i===void 0&&(i=0),r===void 0&&(r=0),dW.call(this,t,"Curve",s),this._smoothness=32,this._curveBounds=new YCe,this.closePath=!1,this.setPosition(i,r),n!==void 0&&this.setFillStyle(n,a),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(e){this._smoothness=e,this.updateData()}},setSmoothness:function(e){return this._smoothness=e,this.updateData()},updateData:function(){var e=this._curveBounds,t=this._smoothness;this.geom.getBounds(e,t),this.setSize(e.width,e.height),this.updateDisplayOrigin();for(var i=[],r=this.geom.getPoints(t),s=0;s<r.length;s++)i.push(r[s].x,r[s].y);return i.push(r[0].x,r[0].y),this.pathIndexes=zCe(i),this.pathData=i,this}});vW.exports=XCe});var pW=l((RJe,cW)=>{var VCe=ua(),WCe=be(),HCe=ys(),KCe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=WCe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t._displayOriginX,o=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&VCe(s,a,t,u,h,o),t.isStroked&&HCe(s,t,u,h,o),e.pipelines.postBatch(t)};cW.exports=KCe});var gW=l((qJe,mW)=>{var ZCe=Gi(),JCe=or(),QCe=St(),$Ce=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(QCe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,h=t.pathData,o=h.length-1,u=h[0]-n,f=h[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(o-=2);for(var d=2;d<o;d+=2){var v=h[d]-n,c=h[d+1]-a;s.lineTo(v,c)}s.closePath(),t.isFilled&&(ZCe(s,t),s.fill()),t.isStroked&&(JCe(s,t),s.stroke()),s.restore()}};mW.exports=$Ce});var EW=l((AJe,TW)=>{var xW=B(),yW=B();xW=pW();yW=gW();TW.exports={renderWebGL:xW,renderCanvas:yW}});var Fm=l((PJe,_W)=>{var jCe=C(),eRe=$i(),tRe=EW(),iRe=sa(),SW=ni(),rRe=new jCe({Extends:SW,Mixins:[tRe],initialize:function(t,i,r,s,n,a,h){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=128),SW.call(this,t,"Ellipse",new iRe(s/2,n/2,s,n)),this._smoothness=64,this.setPosition(i,r),this.width=s,this.height=n,a!==void 0&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(e){this._smoothness=e,this.updateData()}},setSize:function(e,t){return this.width=e,this.height=t,this.geom.setPosition(e/2,t/2),this.geom.setSize(e,t),this.updateData()},setSmoothness:function(e){return this._smoothness=e,this.updateData()},updateData:function(){for(var e=[],t=this.geom.getPoints(this._smoothness),i=0;i<t.length;i++)e.push(t[i].x,t[i].y);return e.push(t[0].x,t[0].y),this.pathIndexes=eRe(e),this.pathData=e,this}});_W.exports=rRe});var CW=l((MJe,wW)=>{var sRe=be(),Dm=Te(),nRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=sRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc);a.translate(-t._displayOriginX,-t._displayOriginY);var h=i.alpha*t.alpha,o=t.width,u=t.height,f=t.cellWidth,d=t.cellHeight,v=Math.ceil(o/f),c=Math.ceil(u/d),p=f,m=d,x=f-(v*f-o),g=d-(c*d-u),y,T,S=t.showCells,E=t.showAltCells,_=t.showOutline,w=0,R=0,q=0,A=0,P=0;if(_&&(p--,m--,x===f&&x--,g===d&&g--),e.pipelines.preBatch(t),S&&t.fillAlpha>0)for(y=s.fillTint,T=Dm.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*h),y.TL=T,y.TR=T,y.BL=T,y.BR=T,R=0;R<c;R++)for(E&&(q=R%2),w=0;w<v;w++){if(E&&q){q=0;continue}q++,A=w<v-1?p:x,P=R<c-1?m:g,s.batchFillRect(w*f,R*d,A,P)}if(E&&t.altFillAlpha>0)for(y=s.fillTint,T=Dm.getTintAppendFloatAlpha(t.altFillColor,t.altFillAlpha*h),y.TL=T,y.TR=T,y.BL=T,y.BR=T,R=0;R<c;R++)for(E&&(q=R%2),w=0;w<v;w++){if(E&&!q){q=1;continue}q=0,A=w<v-1?p:x,P=R<c-1?m:g,s.batchFillRect(w*f,R*d,A,P)}if(_&&t.outlineFillAlpha>0){var L=s.strokeTint,b=Dm.getTintAppendFloatAlpha(t.outlineFillColor,t.outlineFillAlpha*h);for(L.TL=b,L.TR=b,L.BL=b,L.BR=b,w=1;w<v;w++){var G=w*f;s.batchLine(G,0,G,u,1,1,1,0,!1)}for(R=1;R<c;R++){var M=R*d;s.batchLine(0,M,o,M,1,1,1,0,!1)}}e.pipelines.postBatch(t)};wW.exports=nRe});var AW=l((bJe,qW)=>{var RW=Gi(),aRe=or(),hRe=St(),oRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(hRe(e,s,t,i,r)){var n=-t._displayOriginX,a=-t._displayOriginY,h=i.alpha*t.alpha,o=t.width,u=t.height,f=t.cellWidth,d=t.cellHeight,v=Math.ceil(o/f),c=Math.ceil(u/d),p=f,m=d,x=f-(v*f-o),g=d-(c*d-u),y=t.showCells,T=t.showAltCells,S=t.showOutline,E=0,_=0,w=0,R=0,q=0;if(S&&(p--,m--,x===f&&x--,g===d&&g--),y&&t.fillAlpha>0)for(RW(s,t),_=0;_<c;_++)for(T&&(w=_%2),E=0;E<v;E++){if(T&&w){w=0;continue}w++,R=E<v-1?p:x,q=_<c-1?m:g,s.fillRect(n+E*f,a+_*d,R,q)}if(T&&t.altFillAlpha>0)for(RW(s,t,t.altFillColor,t.altFillAlpha*h),_=0;_<c;_++)for(T&&(w=_%2),E=0;E<v;E++){if(T&&!w){w=1;continue}w=0,R=E<v-1?p:x,q=_<c-1?m:g,s.fillRect(n+E*f,a+_*d,R,q)}if(S&&t.outlineFillAlpha>0){for(aRe(s,t,t.outlineFillColor,t.outlineFillAlpha*h),E=1;E<v;E++){var A=E*f;s.beginPath(),s.moveTo(A+n,a),s.lineTo(A+n,u+a),s.stroke()}for(_=1;_<c;_++){var P=_*d;s.beginPath(),s.moveTo(n,P+a),s.lineTo(n+o,P+a),s.stroke()}}s.restore()}};qW.exports=oRe});var LW=l((LJe,bW)=>{var PW=B(),MW=B();PW=CW();MW=AW();bW.exports={renderWebGL:PW,renderCanvas:MW}});var Im=l((OJe,FW)=>{var uRe=C(),OW=ni(),lRe=LW(),fRe=new uRe({Extends:OW,Mixins:[lRe],initialize:function(t,i,r,s,n,a,h,o,u,f,d){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=128),a===void 0&&(a=32),h===void 0&&(h=32),OW.call(this,t,"Grid",null),this.cellWidth=a,this.cellHeight=h,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(i,r),this.setSize(s,n),this.setFillStyle(o,u),f!==void 0&&this.setOutlineStyle(f,d),this.updateDisplayOrigin()},setFillStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.showCells=!1:(this.fillColor=e,this.fillAlpha=t,this.showCells=!0),this},setAltFillStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.showAltCells=!1:(this.altFillColor=e,this.altFillAlpha=t,this.showAltCells=!0),this},setOutlineStyle:function(e,t){return t===void 0&&(t=1),e===void 0?this.showOutline=!1:(this.outlineFillColor=e,this.outlineFillAlpha=t,this.showOutline=!0),this}});FW.exports=fRe});var IW=l((FJe,DW)=>{var dRe=be(),Nm=Te(),vRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=dRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t.width,o=t.height,u=h/2,f=h/t.projection,d=i.alpha*t.alpha;if(!!t.isFilled){var v,c,p,m,x,g,y,T,S;e.pipelines.preBatch(t),t.showTop&&(v=Nm.getTintAppendFloatAlpha(t.fillTop,d),c=a.getX(-u,-o),p=a.getY(-u,-o),m=a.getX(0,-f-o),x=a.getY(0,-f-o),g=a.getX(u,-o),y=a.getY(u,-o),T=a.getX(0,f-o),S=a.getY(0,f-o),s.batchQuad(t,c,p,m,x,g,y,T,S,0,0,1,1,v,v,v,v,2)),t.showLeft&&(v=Nm.getTintAppendFloatAlpha(t.fillLeft,d),c=a.getX(-u,0),p=a.getY(-u,0),m=a.getX(0,f),x=a.getY(0,f),g=a.getX(0,f-o),y=a.getY(0,f-o),T=a.getX(-u,-o),S=a.getY(-u,-o),s.batchQuad(t,c,p,m,x,g,y,T,S,0,0,1,1,v,v,v,v,2)),t.showRight&&(v=Nm.getTintAppendFloatAlpha(t.fillRight,d),c=a.getX(u,0),p=a.getY(u,0),m=a.getX(0,f),x=a.getY(0,f),g=a.getX(0,f-o),y=a.getY(0,f-o),T=a.getX(u,-o),S=a.getY(u,-o),s.batchQuad(t,c,p,m,x,g,y,T,S,0,0,1,1,v,v,v,v,2)),e.pipelines.postBatch(t)}};DW.exports=vRe});var GW=l((DJe,NW)=>{var Gm=Gi(),cRe=St(),pRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(cRe(e,s,t,i,r)&&t.isFilled){var n=t.width,a=t.height,h=n/2,o=n/t.projection;t.showTop&&(Gm(s,t,t.fillTop),s.beginPath(),s.moveTo(-h,-a),s.lineTo(0,-o-a),s.lineTo(h,-a),s.lineTo(h,-1),s.lineTo(0,o-1),s.lineTo(-h,-1),s.lineTo(-h,-a),s.fill()),t.showLeft&&(Gm(s,t,t.fillLeft),s.beginPath(),s.moveTo(-h,0),s.lineTo(0,o),s.lineTo(0,o-a),s.lineTo(-h,-a),s.lineTo(-h,0),s.fill()),t.showRight&&(Gm(s,t,t.fillRight),s.beginPath(),s.moveTo(h,0),s.lineTo(0,o),s.lineTo(0,o-a),s.lineTo(h,-a),s.lineTo(h,0),s.fill()),s.restore()}};NW.exports=pRe});var zW=l((IJe,kW)=>{var BW=B(),UW=B();BW=IW();UW=GW();kW.exports={renderWebGL:BW,renderCanvas:UW}});var Bm=l((NJe,XW)=>{var mRe=zW(),gRe=C(),YW=ni(),xRe=new gRe({Extends:YW,Mixins:[mRe],initialize:function(t,i,r,s,n,a,h,o){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=48),n===void 0&&(n=32),a===void 0&&(a=15658734),h===void 0&&(h=10066329),o===void 0&&(o=13421772),YW.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=a,this.fillLeft=h,this.fillRight=o,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(i,r),this.setSize(s,n),this.updateDisplayOrigin()},setProjection:function(e){return this.projection=e,this},setFaces:function(e,t,i){return e===void 0&&(e=!0),t===void 0&&(t=!0),i===void 0&&(i=!0),this.showTop=e,this.showLeft=t,this.showRight=i,this},setFillStyle:function(e,t,i){return this.fillTop=e,this.fillLeft=t,this.fillRight=i,this.isFilled=!0,this}});XW.exports=xRe});var WW=l((GJe,VW)=>{var yRe=be(),Um=Te(),TRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=yRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t.width,o=t.height,u=h/2,f=h/t.projection,d=t.isReversed,v=i.alpha*t.alpha;if(!!t.isFilled){e.pipelines.preBatch(t);var c,p,m,x,g,y,T;if(t.showTop&&d){c=Um.getTintAppendFloatAlpha(t.fillTop,v),p=a.getX(-u,-o),m=a.getY(-u,-o),x=a.getX(0,-f-o),g=a.getY(0,-f-o),y=a.getX(u,-o),T=a.getY(u,-o);var S=a.getX(0,f-o),E=a.getY(0,f-o);s.batchQuad(t,p,m,x,g,y,T,S,E,0,0,1,1,c,c,c,c,2)}t.showLeft&&(c=Um.getTintAppendFloatAlpha(t.fillLeft,v),d?(p=a.getX(-u,-o),m=a.getY(-u,-o),x=a.getX(0,f),g=a.getY(0,f),y=a.getX(0,f-o),T=a.getY(0,f-o)):(p=a.getX(-u,0),m=a.getY(-u,0),x=a.getX(0,f),g=a.getY(0,f),y=a.getX(0,f-o),T=a.getY(0,f-o)),s.batchTri(t,p,m,x,g,y,T,0,0,1,1,c,c,c,2)),t.showRight&&(c=Um.getTintAppendFloatAlpha(t.fillRight,v),d?(p=a.getX(u,-o),m=a.getY(u,-o),x=a.getX(0,f),g=a.getY(0,f),y=a.getX(0,f-o),T=a.getY(0,f-o)):(p=a.getX(u,0),m=a.getY(u,0),x=a.getX(0,f),g=a.getY(0,f),y=a.getX(0,f-o),T=a.getY(0,f-o)),s.batchTri(t,p,m,x,g,y,T,0,0,1,1,c,c,c,2)),e.pipelines.postBatch(t)}};VW.exports=TRe});var KW=l((BJe,HW)=>{var km=Gi(),ERe=St(),SRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(ERe(e,s,t,i,r)&&t.isFilled){var n=t.width,a=t.height,h=n/2,o=n/t.projection,u=t.isReversed;t.showTop&&u&&(km(s,t,t.fillTop),s.beginPath(),s.moveTo(-h,-a),s.lineTo(0,-o-a),s.lineTo(h,-a),s.lineTo(0,o-a),s.fill()),t.showLeft&&(km(s,t,t.fillLeft),s.beginPath(),u?(s.moveTo(-h,-a),s.lineTo(0,o),s.lineTo(0,o-a)):(s.moveTo(-h,0),s.lineTo(0,o),s.lineTo(0,o-a)),s.fill()),t.showRight&&(km(s,t,t.fillRight),s.beginPath(),u?(s.moveTo(h,-a),s.lineTo(0,o),s.lineTo(0,o-a)):(s.moveTo(h,0),s.lineTo(0,o),s.lineTo(0,o-a)),s.fill()),s.restore()}};HW.exports=SRe});var $W=l((UJe,QW)=>{var ZW=B(),JW=B();ZW=WW();JW=KW();QW.exports={renderWebGL:ZW,renderCanvas:JW}});var zm=l((kJe,e5)=>{var _Re=C(),wRe=$W(),jW=ni(),CRe=new _Re({Extends:jW,Mixins:[wRe],initialize:function(t,i,r,s,n,a,h,o,u){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=48),n===void 0&&(n=32),a===void 0&&(a=!1),h===void 0&&(h=15658734),o===void 0&&(o=10066329),u===void 0&&(u=13421772),jW.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=h,this.fillLeft=o,this.fillRight=u,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=a,this.isFilled=!0,this.setPosition(i,r),this.setSize(s,n),this.updateDisplayOrigin()},setProjection:function(e){return this.projection=e,this},setReversed:function(e){return this.isReversed=e,this},setFaces:function(e,t,i){return e===void 0&&(e=!0),t===void 0&&(t=!0),i===void 0&&(i=!0),this.showTop=e,this.showLeft=t,this.showRight=i,this},setFillStyle:function(e,t,i){return this.fillTop=e,this.fillLeft=t,this.fillRight=i,this.isFilled=!0,this}});e5.exports=CRe});var i5=l((zJe,t5)=>{var RRe=be(),qRe=Te(),ARe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=RRe(t,i,r);s.calcMatrix.copyFrom(n.calc);var a=t._displayOriginX,h=t._displayOriginY,o=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isStroked){var u=s.strokeTint,f=qRe.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*o);u.TL=f,u.TR=f,u.BL=f,u.BR=f;var d=t._startWidth,v=t._endWidth;s.batchLine(t.geom.x1-a,t.geom.y1-h,t.geom.x2-a,t.geom.y2-h,d,v,1,0,!1,n.sprite,n.camera)}e.pipelines.postBatch(t)};t5.exports=ARe});var s5=l((YJe,r5)=>{var PRe=or(),MRe=St(),bRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(MRe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY;t.isStroked&&(PRe(s,t),s.beginPath(),s.moveTo(t.geom.x1-n,t.geom.y1-a),s.lineTo(t.geom.x2-n,t.geom.y2-a),s.stroke()),s.restore()}};r5.exports=bRe});var o5=l((XJe,h5)=>{var n5=B(),a5=B();n5=i5();a5=s5();h5.exports={renderWebGL:n5,renderCanvas:a5}});var Ym=l((VJe,l5)=>{var LRe=C(),u5=ni(),ORe=Ai(),FRe=o5(),DRe=new LRe({Extends:u5,Mixins:[FRe],initialize:function(t,i,r,s,n,a,h,o,u){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),a===void 0&&(a=128),h===void 0&&(h=0),u5.call(this,t,"Line",new ORe(s,n,a,h));var f=Math.max(1,this.geom.right-this.geom.left),d=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(i,r),this.setSize(f,d),o!==void 0&&this.setStrokeStyle(1,o,u),this.updateDisplayOrigin()},setLineWidth:function(e,t){return t===void 0&&(t=e),this._startWidth=e,this._endWidth=t,this.lineWidth=e,this},setTo:function(e,t,i,r){return this.geom.setTo(e,t,i,r),this}});l5.exports=DRe});var d5=l((WJe,f5)=>{var IRe=ua(),NRe=be(),GRe=ys(),BRe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=NRe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t._displayOriginX,o=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&IRe(s,a,t,u,h,o),t.isStroked&&GRe(s,t,u,h,o),e.pipelines.postBatch(t)};f5.exports=BRe});var c5=l((HJe,v5)=>{var URe=Gi(),kRe=or(),zRe=St(),YRe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(zRe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,h=t.pathData,o=h.length-1,u=h[0]-n,f=h[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(o-=2);for(var d=2;d<o;d+=2){var v=h[d]-n,c=h[d+1]-a;s.lineTo(v,c)}s.closePath(),t.isFilled&&(URe(s,t),s.fill()),t.isStroked&&(kRe(s,t),s.stroke()),s.restore()}};v5.exports=YRe});var x5=l((KJe,g5)=>{var p5=B(),m5=B();p5=d5();m5=c5();g5.exports={renderWebGL:p5,renderCanvas:m5}});var Xm=l((ZJe,y5)=>{var XRe=Ae(),VRe=function(e,t){t===void 0&&(t=new XRe);for(var i=1/0,r=1/0,s=-i,n=-r,a,h=0;h<e.points.length;h++)a=e.points[h],i=Math.min(i,a.x),r=Math.min(r,a.y),s=Math.max(s,a.x),n=Math.max(n,a.y);return t.x=i,t.y=r,t.width=s-i,t.height=n-r,t};y5.exports=VRe});var _l=l((JJe,T5)=>{var WRe=function(e,t,i){for(var r=!1,s=-1,n=e.points.length-1;++s<e.points.length;n=s){var a=e.points[s].x,h=e.points[s].y,o=e.points[n].x,u=e.points[n].y;(h<=i&&i<u||u<=i&&i<h)&&t<(o-a)*(i-h)/(u-h)+a&&(r=!r)}return r};T5.exports=WRe});var Vm=l((QJe,E5)=>{var HRe=gr(),KRe=Ai(),ZRe=function(e){for(var t=e.points,i=0,r=0;r<t.length;r++){var s=t[r],n=t[(r+1)%t.length],a=new KRe(s.x,s.y,n.x,n.y);i+=HRe(a)}return i};E5.exports=ZRe});var Wm=l(($Je,S5)=>{var JRe=gr(),QRe=Ai(),$Re=Vm(),jRe=function(e,t,i,r){r===void 0&&(r=[]);var s=e.points,n=$Re(e);!t&&i>0&&(t=n/i);for(var a=0;a<t;a++)for(var h=n*(a/t),o=0,u=0;u<s.length;u++){var f=s[u],d=s[(u+1)%s.length],v=new QRe(f.x,f.y,d.x,d.y),c=JRe(v);if(h<o||h>o+c){o+=c;continue}var p=v.getPoint((h-o)/c);r.push(p);break}return r};S5.exports=jRe});var wl=l((jJe,_5)=>{var eqe=C(),tqe=_l(),iqe=Wm(),rqe=Ki(),sqe=new eqe({initialize:function(t){this.type=rqe.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(e,t){return tqe(this,e,t)},setTo:function(e){if(this.area=0,this.points=[],typeof e=="string"&&(e=e.split(" ")),!Array.isArray(e))return this;for(var t,i=Number.MAX_VALUE,r=0;r<e.length;r++)t={x:0,y:0},typeof e[r]=="number"||typeof e[r]=="string"?(t.x=parseFloat(e[r]),t.y=parseFloat(e[r+1]),r++):Array.isArray(e[r])?(t.x=e[r][0],t.y=e[r][1]):(t.x=e[r].x,t.y=e[r].y),this.points.push(t),t.y<i&&(i=t.y);return this.calculateArea(i),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var e=0,t,i,r=0;r<this.points.length-1;r++)t=this.points[r],i=this.points[r+1],e+=(i.x-t.x)*(t.y+i.y);return t=this.points[0],i=this.points[this.points.length-1],e+=(t.x-i.x)*(i.y+t.y),this.area=-e*.5,this.area},getPoints:function(e,t,i){return iqe(this,e,t,i)}});_5.exports=sqe});var Hm=l((eQe,C5)=>{var w5=function(e,t){return e[0]=t[0],e[1]=t[1],e},nqe=function(e){var t,i=[],r=e.points;for(t=0;t<r.length;t++)i.push([r[t].x,r[t].y]);var s=[];for(i.length>0&&s.push(w5([0,0],i[0])),t=0;t<i.length-1;t++){var n=i[t],a=i[t+1],h=n[0],o=n[1],u=a[0],f=a[1];s.push([.85*h+.15*u,.85*o+.15*f]),s.push([.15*h+.85*u,.15*o+.85*f])}return i.length>1&&s.push(w5([0,0],i[i.length-1])),e.setTo(s)};C5.exports=nqe});var Km=l((tQe,q5)=>{var aqe=x5(),hqe=C(),oqe=$i(),uqe=Xm(),lqe=wl(),R5=ni(),fqe=Hm(),dqe=new hqe({Extends:R5,Mixins:[aqe],initialize:function(t,i,r,s,n,a){i===void 0&&(i=0),r===void 0&&(r=0),R5.call(this,t,"Polygon",new lqe(s));var h=uqe(this.geom);this.setPosition(i,r),this.setSize(h.width,h.height),n!==void 0&&this.setFillStyle(n,a),this.updateDisplayOrigin(),this.updateData()},smooth:function(e){e===void 0&&(e=1);for(var t=0;t<e;t++)fqe(this.geom);return this.updateData()},updateData:function(){for(var e=[],t=this.geom.points,i=0;i<t.length;i++)e.push(t[i].x,t[i].y);return e.push(t[0].x,t[0].y),this.pathIndexes=oqe(e),this.pathData=e,this}});q5.exports=dqe});var P5=l((iQe,A5)=>{var vqe=be(),cqe=ys(),pqe=Te(),mqe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=vqe(t,i,r);s.calcMatrix.copyFrom(n.calc);var a=t._displayOriginX,h=t._displayOriginY,o=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isFilled){var u=s.fillTint,f=pqe.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*o);u.TL=f,u.TR=f,u.BL=f,u.BR=f,s.batchFillRect(-a,-h,t.width,t.height)}t.isStroked&&cqe(s,t,o,a,h),e.pipelines.postBatch(t)};A5.exports=mqe});var b5=l((rQe,M5)=>{var gqe=Gi(),xqe=or(),yqe=St(),Tqe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(yqe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY;t.isFilled&&(gqe(s,t),s.fillRect(-n,-a,t.width,t.height)),t.isStroked&&(xqe(s,t),s.beginPath(),s.rect(-n,-a,t.width,t.height),s.stroke()),s.restore()}};M5.exports=Tqe});var D5=l((sQe,F5)=>{var L5=B(),O5=B();L5=P5();O5=b5();F5.exports={renderWebGL:L5,renderCanvas:O5}});var Zm=l((nQe,N5)=>{var Eqe=C(),Sqe=Ae(),I5=ni(),_qe=D5(),wqe=new Eqe({Extends:I5,Mixins:[_qe],initialize:function(t,i,r,s,n,a,h){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=128),n===void 0&&(n=128),I5.call(this,t,"Rectangle",new Sqe(0,0,s,n)),this.setPosition(i,r),this.setSize(s,n),a!==void 0&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},setSize:function(e,t){return this.width=e,this.height=t,this.geom.setSize(e,t),this.updateData(),this},updateData:function(){var e=[],t=this.geom,i=this._tempLine;return t.getLineA(i),e.push(i.x1,i.y1,i.x2,i.y2),t.getLineB(i),e.push(i.x2,i.y2),t.getLineC(i),e.push(i.x2,i.y2),t.getLineD(i),e.push(i.x2,i.y2),this.pathData=e,this}});N5.exports=wqe});var B5=l((aQe,G5)=>{var Cqe=ua(),Rqe=be(),qqe=ys(),Aqe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=Rqe(t,i,r),a=s.calcMatrix.copyFrom(n.calc),h=t._displayOriginX,o=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&Cqe(s,a,t,u,h,o),t.isStroked&&qqe(s,t,u,h,o),e.pipelines.postBatch(t)};G5.exports=Aqe});var k5=l((hQe,U5)=>{var Pqe=Gi(),Mqe=or(),bqe=St(),Lqe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(bqe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,h=t.pathData,o=h.length-1,u=h[0]-n,f=h[1]-a;s.beginPath(),s.moveTo(u,f),t.closePath||(o-=2);for(var d=2;d<o;d+=2){var v=h[d]-n,c=h[d+1]-a;s.lineTo(v,c)}s.closePath(),t.isFilled&&(Pqe(s,t),s.fill()),t.isStroked&&(Mqe(s,t),s.stroke()),s.restore()}};U5.exports=Lqe});var V5=l((oQe,X5)=>{var z5=B(),Y5=B();z5=B5();Y5=k5();X5.exports={renderWebGL:z5,renderCanvas:Y5}});var Jm=l((uQe,H5)=>{var Oqe=V5(),Fqe=C(),Dqe=$i(),W5=ni(),Iqe=new Fqe({Extends:W5,Mixins:[Oqe],initialize:function(t,i,r,s,n,a,h,o){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=5),n===void 0&&(n=32),a===void 0&&(a=64),W5.call(this,t,"Star",null),this._points=s,this._innerRadius=n,this._outerRadius=a,this.setPosition(i,r),this.setSize(a*2,a*2),h!==void 0&&this.setFillStyle(h,o),this.updateDisplayOrigin(),this.updateData()},setPoints:function(e){return this._points=e,this.updateData()},setInnerRadius:function(e){return this._innerRadius=e,this.updateData()},setOuterRadius:function(e){return this._outerRadius=e,this.updateData()},points:{get:function(){return this._points},set:function(e){this._points=e,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this.updateData()}},updateData:function(){var e=[],t=this._points,i=this._innerRadius,r=this._outerRadius,s=Math.PI/2*3,n=Math.PI/t,a=r,h=r;e.push(a,h+-r);for(var o=0;o<t;o++)e.push(a+Math.cos(s)*r,h+Math.sin(s)*r),s+=n,e.push(a+Math.cos(s)*i,h+Math.sin(s)*i),s+=n;return e.push(a,h+-r),this.pathIndexes=Dqe(e),this.pathData=e,this}});H5.exports=Iqe});var la=l((lQe,K5)=>{var Nqe=function(e,t,i){var r=e.x3-e.x1,s=e.y3-e.y1,n=e.x2-e.x1,a=e.y2-e.y1,h=t-e.x1,o=i-e.y1,u=r*r+s*s,f=r*n+s*a,d=r*h+s*o,v=n*n+a*a,c=n*h+a*o,p=u*v-f*f,m=p===0?0:1/p,x=(v*d-f*c)*m,g=(u*c-f*d)*m;return x>=0&&g>=0&&x+g<1};K5.exports=Nqe});var $m=l((fQe,Z5)=>{var Gqe=$(),Qm=gr(),Bqe=function(e,t,i){i===void 0&&(i=new Gqe);var r=e.getLineA(),s=e.getLineB(),n=e.getLineC();if(t<=0||t>=1)return i.x=r.x1,i.y=r.y1,i;var a=Qm(r),h=Qm(s),o=Qm(n),u=a+h+o,f=u*t,d=0;return f<a?(d=f/a,i.x=r.x1+(r.x2-r.x1)*d,i.y=r.y1+(r.y2-r.y1)*d):f>a+h?(f-=a+h,d=f/o,i.x=n.x1+(n.x2-n.x1)*d,i.y=n.y1+(n.y2-n.y1)*d):(f-=a,d=f/h,i.x=s.x1+(s.x2-s.x1)*d,i.y=s.y1+(s.y2-s.y1)*d),i};Z5.exports=Bqe});var eg=l((dQe,J5)=>{var jm=gr(),Uqe=$(),kqe=function(e,t,i,r){r===void 0&&(r=[]);var s=e.getLineA(),n=e.getLineB(),a=e.getLineC(),h=jm(s),o=jm(n),u=jm(a),f=h+o+u;!t&&i>0&&(t=f/i);for(var d=0;d<t;d++){var v=f*(d/t),c=0,p=new Uqe;v<h?(c=v/h,p.x=s.x1+(s.x2-s.x1)*c,p.y=s.y1+(s.y2-s.y1)*c):v>h+o?(v-=h+o,c=v/u,p.x=a.x1+(a.x2-a.x1)*c,p.y=a.y1+(a.y2-a.y1)*c):(v-=h,c=v/o,p.x=n.x1+(n.x2-n.x1)*c,p.y=n.y1+(n.y2-n.y1)*c),r.push(p)}return r};J5.exports=kqe});var Es=l((vQe,Q5)=>{var zqe=C(),Yqe=la(),Xqe=$m(),Vqe=eg(),Wqe=Ki(),tg=Ai(),Hqe=Mo(),Kqe=new zqe({initialize:function(t,i,r,s,n,a){t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),a===void 0&&(a=0),this.type=Wqe.TRIANGLE,this.x1=t,this.y1=i,this.x2=r,this.y2=s,this.x3=n,this.y3=a},contains:function(e,t){return Yqe(this,e,t)},getPoint:function(e,t){return Xqe(this,e,t)},getPoints:function(e,t,i){return Vqe(this,e,t,i)},getRandomPoint:function(e){return Hqe(this,e)},setTo:function(e,t,i,r,s,n){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),this.x1=e,this.y1=t,this.x2=i,this.y2=r,this.x3=s,this.y3=n,this},getLineA:function(e){return e===void 0&&(e=new tg),e.setTo(this.x1,this.y1,this.x2,this.y2),e},getLineB:function(e){return e===void 0&&(e=new tg),e.setTo(this.x2,this.y2,this.x3,this.y3),e},getLineC:function(e){return e===void 0&&(e=new tg),e.setTo(this.x3,this.y3,this.x1,this.y1),e},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(e){var t=0;this.x1<=this.x2&&this.x1<=this.x3?t=this.x1-e:this.x2<=this.x1&&this.x2<=this.x3?t=this.x2-e:t=this.x3-e,this.x1-=t,this.x2-=t,this.x3-=t}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(e){var t=0;this.x1>=this.x2&&this.x1>=this.x3?t=this.x1-e:this.x2>=this.x1&&this.x2>=this.x3?t=this.x2-e:t=this.x3-e,this.x1-=t,this.x2-=t,this.x3-=t}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(e){var t=0;this.y1<=this.y2&&this.y1<=this.y3?t=this.y1-e:this.y2<=this.y1&&this.y2<=this.y3?t=this.y2-e:t=this.y3-e,this.y1-=t,this.y2-=t,this.y3-=t}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(e){var t=0;this.y1>=this.y2&&this.y1>=this.y3?t=this.y1-e:this.y2>=this.y1&&this.y2>=this.y3?t=this.y2-e:t=this.y3-e,this.y1-=t,this.y2-=t,this.y3-=t}}});Q5.exports=Kqe});var j5=l((cQe,$5)=>{var Zqe=be(),Jqe=ys(),Qqe=Te(),$qe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=Zqe(t,i,r);s.calcMatrix.copyFrom(n.calc);var a=t._displayOriginX,h=t._displayOriginY,o=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isFilled){var u=s.fillTint,f=Qqe.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*o);u.TL=f,u.TR=f,u.BL=f,u.BR=f;var d=t.geom.x1-a,v=t.geom.y1-h,c=t.geom.x2-a,p=t.geom.y2-h,m=t.geom.x3-a,x=t.geom.y3-h;s.batchFillTriangle(d,v,c,p,m,x,n.sprite,n.camera)}t.isStroked&&Jqe(s,t,o,a,h),e.pipelines.postBatch(t)};$5.exports=$qe});var t4=l((pQe,e4)=>{var jqe=Gi(),eAe=or(),tAe=St(),iAe=function(e,t,i,r){i.addToRenderList(t);var s=e.currentContext;if(tAe(e,s,t,i,r)){var n=t._displayOriginX,a=t._displayOriginY,h=t.geom.x1-n,o=t.geom.y1-a,u=t.geom.x2-n,f=t.geom.y2-a,d=t.geom.x3-n,v=t.geom.y3-a;s.beginPath(),s.moveTo(h,o),s.lineTo(u,f),s.lineTo(d,v),s.closePath(),t.isFilled&&(jqe(s,t),s.fill()),t.isStroked&&(eAe(s,t),s.stroke()),s.restore()}};e4.exports=iAe});var n4=l((mQe,s4)=>{var i4=B(),r4=B();i4=j5();r4=t4();s4.exports={renderWebGL:i4,renderCanvas:r4}});var ig=l((gQe,h4)=>{var rAe=C(),a4=ni(),sAe=Es(),nAe=n4(),aAe=new rAe({Extends:a4,Mixins:[nAe],initialize:function(t,i,r,s,n,a,h,o,u,f,d){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=128),a===void 0&&(a=64),h===void 0&&(h=0),o===void 0&&(o=128),u===void 0&&(u=128),a4.call(this,t,"Triangle",new sAe(s,n,a,h,o,u));var v=this.geom.right-this.geom.left,c=this.geom.bottom-this.geom.top;this.setPosition(i,r),this.setSize(v,c),f!==void 0&&this.setFillStyle(f,d),this.updateDisplayOrigin(),this.updateData()},setTo:function(e,t,i,r,s,n){return this.geom.setTo(e,t,i,r,s,n),this.updateData()},updateData:function(){var e=[],t=this.geom,i=this._tempLine;return t.getLineA(i),e.push(i.x1,i.y1,i.x2,i.y2),t.getLineB(i),e.push(i.x2,i.y2),t.getLineC(i),e.push(i.x2,i.y2),this.pathData=e,this}});h4.exports=aAe});var o4=l(()=>{var hAe=Zu(),oAe=ie();oAe.register("blitter",function(e,t,i,r){return this.displayList.add(new hAe(this.scene,e,t,i,r))})});var u4=l(()=>{var uAe=Ju(),lAe=ie();lAe.register("container",function(e,t,i){return this.displayList.add(new uAe(this.scene,e,t,i))})});var l4=l(()=>{var fAe=um(),dAe=ie();dAe.register("dom",function(e,t,i,r,s){var n=new fAe(this.scene,e,t,i,r,s);return this.displayList.add(n),n})});var f4=l(()=>{var vAe=Qu(),cAe=ie();cAe.register("dynamicBitmapText",function(e,t,i,r,s){return this.displayList.add(new vAe(this.scene,e,t,i,r,s))})});var d4=l(()=>{var pAe=lm(),mAe=ie();mAe.register("extern",function(){var e=new pAe(this.scene);return this.displayList.add(e),e})});var v4=l(()=>{var gAe=tl(),xAe=ie();xAe.register("graphics",function(e){return this.displayList.add(new gAe(this.scene,e))})});var c4=l(()=>{var yAe=sl(),TAe=ie();TAe.register("group",function(e,t){return this.updateList.add(new yAe(this.scene,e,t))})});var p4=l(()=>{var EAe=nl(),SAe=ie();SAe.register("image",function(e,t,i,r){return this.displayList.add(new EAe(this.scene,e,t,i,r))})});var m4=l(()=>{var _Ae=hl(),wAe=ie();wAe.register("layer",function(e){return this.displayList.add(new _Ae(this.scene,e))})});var g4=l(()=>{var CAe=ie(),RAe=dl();CAe.register("particles",function(e,t,i){return this.displayList.add(new RAe(this.scene,e,t,i))})});var x4=l(()=>{var qAe=ie(),AAe=qm();qAe.register("follower",function(e,t,i,r,s){var n=new AAe(this.scene,e,t,i,r,s);return this.displayList.add(n),this.updateList.add(n),n})});var y4=l(()=>{var PAe=ie(),MAe=cl();PAe.register("renderTexture",function(e,t,i,r,s,n){return this.displayList.add(new MAe(this.scene,e,t,i,r,s,n))})});var T4=l(()=>{var bAe=pl(),LAe=ie();LAe.register("rope",function(e,t,i,r,s,n,a,h){return this.displayList.add(new bAe(this.scene,e,t,i,r,s,n,a,h))})});var E4=l(()=>{var OAe=ie(),FAe=na();OAe.register("sprite",function(e,t,i,r){var s=new FAe(this.scene,e,t,i,r);return this.displayList.add(s),s})});var S4=l(()=>{var DAe=Th(),IAe=ie();IAe.register("bitmapText",function(e,t,i,r,s,n){return this.displayList.add(new DAe(this.scene,e,t,i,r,s,n))})});var _4=l(()=>{var NAe=gl(),GAe=ie();GAe.register("text",function(e,t,i,r){return this.displayList.add(new NAe(this.scene,e,t,i,r))})});var w4=l(()=>{var BAe=Tl(),UAe=ie();UAe.register("tileSprite",function(e,t,i,r,s,n){return this.displayList.add(new BAe(this.scene,e,t,i,r,s,n))})});var C4=l(()=>{var kAe=ka(),zAe=ie();zAe.register("zone",function(e,t,i,r){return this.displayList.add(new kAe(this.scene,e,t,i,r))})});var R4=l(()=>{var YAe=Sl(),XAe=ie();XAe.register("video",function(e,t,i){return this.displayList.add(new YAe(this.scene,e,t,i))})});var P4=l(()=>{var q4=Lm(),A4=ie();A4.register("arc",function(e,t,i,r,s,n,a,h){return this.displayList.add(new q4(this.scene,e,t,i,r,s,n,a,h))});A4.register("circle",function(e,t,i,r,s){return this.displayList.add(new q4(this.scene,e,t,i,0,360,!1,r,s))})});var M4=l(()=>{var VAe=ie(),WAe=Om();VAe.register("curve",function(e,t,i,r,s){return this.displayList.add(new WAe(this.scene,e,t,i,r,s))})});var b4=l(()=>{var HAe=Fm(),KAe=ie();KAe.register("ellipse",function(e,t,i,r,s,n){return this.displayList.add(new HAe(this.scene,e,t,i,r,s,n))})});var L4=l(()=>{var ZAe=ie(),JAe=Im();ZAe.register("grid",function(e,t,i,r,s,n,a,h,o,u){return this.displayList.add(new JAe(this.scene,e,t,i,r,s,n,a,h,o,u))})});var O4=l(()=>{var QAe=ie(),$Ae=Bm();QAe.register("isobox",function(e,t,i,r,s,n,a){return this.displayList.add(new $Ae(this.scene,e,t,i,r,s,n,a))})});var F4=l(()=>{var jAe=ie(),ePe=zm();jAe.register("isotriangle",function(e,t,i,r,s,n,a,h){return this.displayList.add(new ePe(this.scene,e,t,i,r,s,n,a,h))})});var D4=l(()=>{var tPe=ie(),iPe=Ym();tPe.register("line",function(e,t,i,r,s,n,a,h){return this.displayList.add(new iPe(this.scene,e,t,i,r,s,n,a,h))})});var I4=l(()=>{var rPe=ie(),sPe=Km();rPe.register("polygon",function(e,t,i,r,s){return this.displayList.add(new sPe(this.scene,e,t,i,r,s))})});var N4=l(()=>{var nPe=ie(),aPe=Zm();nPe.register("rectangle",function(e,t,i,r,s,n){return this.displayList.add(new aPe(this.scene,e,t,i,r,s,n))})});var G4=l(()=>{var hPe=Jm(),oPe=ie();oPe.register("star",function(e,t,i,r,s,n,a){return this.displayList.add(new hPe(this.scene,e,t,i,r,s,n,a))})});var B4=l(()=>{var uPe=ie(),lPe=ig();uPe.register("triangle",function(e,t,i,r,s,n,a,h,o,u){return this.displayList.add(new lPe(this.scene,e,t,i,r,s,n,a,h,o,u))})});var k4=l(()=>{var fPe=Zu(),dPe=mt(),vPe=Me(),U4=we();vPe.register("blitter",function(e,t){e===void 0&&(e={});var i=U4(e,"key",null),r=U4(e,"frame",null),s=new fPe(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),dPe(this.scene,s,e),s})});var z4=l(()=>{var cPe=mt(),pPe=Ju(),mPe=Me(),rg=we();mPe.register("container",function(e,t){e===void 0&&(e={});var i=rg(e,"x",0),r=rg(e,"y",0),s=rg(e,"children",null),n=new pPe(this.scene,i,r,s);return t!==void 0&&(e.add=t),cPe(this.scene,n,e),n})});var Y4=l(()=>{var gPe=Qu(),xPe=mt(),yPe=Me(),sg=we();yPe.register("dynamicBitmapText",function(e,t){e===void 0&&(e={});var i=sg(e,"font",""),r=sg(e,"text",""),s=sg(e,"size",!1),n=new gPe(this.scene,0,0,i,r,s);return t!==void 0&&(e.add=t),xPe(this.scene,n,e),n})});var X4=l(()=>{var TPe=Me(),EPe=tl();TPe.register("graphics",function(e,t){e===void 0&&(e={}),t!==void 0&&(e.add=t);var i=new EPe(this.scene,e);return e.add&&this.scene.sys.displayList.add(i),i})});var V4=l(()=>{var SPe=Me(),_Pe=sl();SPe.register("group",function(e){return new _Pe(this.scene,null,e)})});var H4=l(()=>{var wPe=mt(),CPe=Me(),W4=we(),RPe=nl();CPe.register("image",function(e,t){e===void 0&&(e={});var i=W4(e,"key",null),r=W4(e,"frame",null),s=new RPe(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),wPe(this.scene,s,e),s})});var K4=l(()=>{var qPe=mt(),APe=hl(),PPe=Me(),MPe=we();PPe.register("layer",function(e,t){e===void 0&&(e={});var i=MPe(e,"children",null),r=new APe(this.scene,i);return t!==void 0&&(e.add=t),qPe(this.scene,r,e),r})});var Q4=l(()=>{var bPe=Me(),Z4=we(),J4=z(),LPe=dl();bPe.register("particles",function(e,t){e===void 0&&(e={});var i=Z4(e,"key",null),r=Z4(e,"frame",null),s=J4(e,"emitters",null),n=new LPe(this.scene,i,r,s);t!==void 0&&(e.add=t);var a=J4(e,"add",!1);return a?this.displayList.add(n):this.updateList.add(n),n})});var $4=l(()=>{var OPe=mt(),FPe=Me(),fa=we(),DPe=cl();FPe.register("renderTexture",function(e,t){e===void 0&&(e={});var i=fa(e,"x",0),r=fa(e,"y",0),s=fa(e,"width",32),n=fa(e,"height",32),a=fa(e,"key",void 0),h=fa(e,"frame",void 0),o=new DPe(this.scene,i,r,s,n,a,h);return t!==void 0&&(e.add=t),OPe(this.scene,o,e),o})});var j4=l(()=>{var IPe=mt(),NPe=Me(),ng=we(),ag=he(),GPe=pl();NPe.register("rope",function(e,t){e===void 0&&(e={});var i=ng(e,"key",null),r=ng(e,"frame",null),s=ng(e,"horizontal",!0),n=ag(e,"points",void 0),a=ag(e,"colors",void 0),h=ag(e,"alphas",void 0),o=new GPe(this.scene,0,0,i,r,n,s,a,h);return t!==void 0&&(e.add=t),IPe(this.scene,o,e),e.add||this.updateList.add(o),o})});var tH=l(()=>{var BPe=mt(),UPe=im(),kPe=Me(),eH=we(),zPe=na();kPe.register("sprite",function(e,t){e===void 0&&(e={});var i=eH(e,"key",null),r=eH(e,"frame",null),s=new zPe(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),BPe(this.scene,s,e),UPe(s,e),s})});var sH=l(()=>{var YPe=Th(),XPe=mt(),VPe=Me(),iH=we(),rH=he();VPe.register("bitmapText",function(e,t){e===void 0&&(e={});var i=rH(e,"font",""),r=iH(e,"text",""),s=iH(e,"size",!1),n=rH(e,"align",0),a=new YPe(this.scene,0,0,i,r,s,n);return t!==void 0&&(e.add=t),XPe(this.scene,a,e),a})});var nH=l(()=>{var WPe=mt(),HPe=Me(),qh=we(),KPe=gl();HPe.register("text",function(e,t){e===void 0&&(e={});var i=qh(e,"text",""),r=qh(e,"style",null),s=qh(e,"padding",null);s!==null&&(r.padding=s);var n=new KPe(this.scene,0,0,i,r);return t!==void 0&&(e.add=t),WPe(this.scene,n,e),n.autoRound=qh(e,"autoRound",!0),n.resolution=qh(e,"resolution",1),n})});var aH=l(()=>{var ZPe=mt(),JPe=Me(),da=we(),QPe=Tl();JPe.register("tileSprite",function(e,t){e===void 0&&(e={});var i=da(e,"x",0),r=da(e,"y",0),s=da(e,"width",512),n=da(e,"height",512),a=da(e,"key",""),h=da(e,"frame",""),o=new QPe(this.scene,i,r,s,n,a,h);return t!==void 0&&(e.add=t),ZPe(this.scene,o,e),o})});var hH=l(()=>{var $Pe=Me(),Cl=we(),jPe=ka();$Pe.register("zone",function(e){var t=Cl(e,"x",0),i=Cl(e,"y",0),r=Cl(e,"width",1),s=Cl(e,"height",r);return new jPe(this.scene,t,i,r,s)})});var oH=l(()=>{var eMe=mt(),tMe=Me(),iMe=we(),rMe=Sl();tMe.register("video",function(e,t){e===void 0&&(e={});var i=iMe(e,"key",null),r=new rMe(this.scene,0,0,i);return t!==void 0&&(e.add=t),eMe(this.scene,r,e),e.add||this.updateList.add(r),r})});var hg=l((ije,uH)=>{var sMe=function(e,t,i){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(t))return e[t]=i,!0;if(t.indexOf(".")!==-1){for(var r=t.split("."),s=e,n=e,a=0;a<r.length;a++)if(s.hasOwnProperty(r[a]))n=s,s=s[r[a]];else return!1;return n[r[r.length-1]]=i,!0}return!1};uH.exports=sMe});var fH=l((rje,lH)=>{var nMe=be(),aMe=function(e,t,i,r){if(!!t.shader){if(i.addToRenderList(t),e.pipelines.clear(),t.renderToTexture)t.load(),t.flush();else{var s=nMe(t,i,r).calc;(e.width!==t._rendererWidth||e.height!==t._rendererHeight)&&t.projOrtho(0,e.width,e.height,0),t.load(s.matrix),t.flush()}e.pipelines.rebind()}};lH.exports=aMe});var vH=l((sje,dH)=>{var hMe=function(){};dH.exports=hMe});var gH=l((nje,mH)=>{var cH=B(),pH=B();cH=fH();pH=vH();mH.exports={renderWebGL:cH,renderCanvas:pH}});var Rl=l((aje,xH)=>{var oMe=C(),Ss=ye(),og=Fe(),br=z(),uMe=ze(),lMe=hg(),fMe=gH(),ug=xt(),dMe=new oMe({Extends:og,Mixins:[Ss.ComputedSize,Ss.Depth,Ss.GetBounds,Ss.Mask,Ss.Origin,Ss.ScrollFactor,Ss.Transform,Ss.Visible,fMe],initialize:function(t,i,r,s,n,a,h,o){r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=128),a===void 0&&(a=128),og.call(this,t,"Shader"),this.blendMode=-1,this.shader;var u=t.sys.renderer;this.renderer=u,this.gl=u.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=u.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new ug,this._tempMatrix2=new ug,this._tempMatrix3=new ug,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=u.width,this._rendererHeight=u.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(r,s),this.setSize(n,a),this.setOrigin(.5,.5),this.setShader(i,h,o)},willRender:function(e){return this.renderToTexture?!0:!(og.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&e.id)},setRenderToTexture:function(e,t){if(t===void 0&&(t=!1),!this.renderToTexture){var i=this.width,r=this.height,s=this.renderer;this.glTexture=s.createTextureFromSource(null,i,r,0),this.glTexture.flipY=t,this.framebuffer=s.createFramebuffer(i,r,this.glTexture,!1),this._rendererWidth=i,this._rendererHeight=r,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),e&&(this.texture=this.scene.sys.textures.addGLTexture(e,this.glTexture,i,r))}return this.shader&&(s.pipelines.clear(),this.load(),this.flush(),s.pipelines.rebind()),this},setShader:function(e,t,i){if(t===void 0&&(t=[]),typeof e=="string"){var r=this.scene.sys.cache.shader;if(!r.has(e))return console.warn("Shader missing: "+e),this;this.shader=r.get(e)}else this.shader=e;var s=this.gl,n=this.renderer;this.program&&s.deleteProgram(this.program);var a=n.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);s.uniformMatrix4fv(s.getUniformLocation(a,"uViewMatrix"),!1,this.viewMatrix),s.uniformMatrix4fv(s.getUniformLocation(a,"uProjectionMatrix"),!1,this.projectionMatrix),s.uniform2f(s.getUniformLocation(a,"uResolution"),this.width,this.height),this.program=a;var h=new Date,o={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[h.getFullYear(),h.getMonth(),h.getDate(),h.getHours()*60*60+h.getMinutes()*60+h.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=uMe(!0,{},this.shader.uniforms,o):this.uniforms=o;for(var u=0;u<4;u++)t[u]&&this.setSampler2D("iChannel"+u,t[u],u,i);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(e){return this.pointer=e,this},projOrtho:function(e,t,i,r){var s=-1e3,n=1e3,a=1/(e-t),h=1/(i-r),o=1/(s-n),u=this.projectionMatrix;u[0]=-2*a,u[5]=-2*h,u[10]=2*o,u[12]=(e+t)*a,u[13]=(r+i)*h,u[14]=(n+s)*o;var f=this.program,d=this.gl,v=this.renderer;v.setProgram(f),d.uniformMatrix4fv(d.getUniformLocation(f,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=t,this._rendererHeight=i},initUniforms:function(){var e=this.gl,t=this.renderer.glFuncMap,i=this.program;this._textureCount=0;for(var r in this.uniforms){var s=this.uniforms[r],n=s.type,a=t[n];s.uniformLocation=e.getUniformLocation(i,r),n!=="sampler2D"&&(s.glMatrix=a.matrix,s.glValueLength=a.length,s.glFunc=a.func)}},setSampler2DBuffer:function(e,t,i,r,s,n){s===void 0&&(s=0),n===void 0&&(n={});var a=this.uniforms[e];return a.value=t,n.width=i,n.height=r,a.textureData=n,this._textureCount=s,this.initSampler2D(a),this},setSampler2D:function(e,t,i,r){i===void 0&&(i=0);var s=this.scene.sys.textures;if(s.exists(t)){var n=s.getFrame(t);if(n.glTexture&&n.glTexture.isRenderTexture)return this.setSampler2DBuffer(e,n.glTexture,n.width,n.height,i,r);var a=this.uniforms[e],h=n.source;a.textureKey=t,a.source=h.image,a.value=n.glTexture,h.isGLTexture&&(r||(r={}),r.width=h.width,r.height=h.height),r&&(a.textureData=r),this._textureCount=i,this.initSampler2D(a)}return this},setUniform:function(e,t){return lMe(this.uniforms,e,t),this},getUniform:function(e){return br(this.uniforms,e,null)},setChannel0:function(e,t){return this.setSampler2D("iChannel0",e,0,t)},setChannel1:function(e,t){return this.setSampler2D("iChannel1",e,1,t)},setChannel2:function(e,t){return this.setSampler2D("iChannel2",e,2,t)},setChannel3:function(e,t){return this.setSampler2D("iChannel3",e,3,t)},initSampler2D:function(e){if(!!e.value){var t=this.gl;t.activeTexture(t.TEXTURE0+this._textureCount),t.bindTexture(t.TEXTURE_2D,e.value);var i=e.textureData;if(i&&!e.value.isRenderTexture){var r=t[br(i,"magFilter","linear").toUpperCase()],s=t[br(i,"minFilter","linear").toUpperCase()],n=t[br(i,"wrapS","repeat").toUpperCase()],a=t[br(i,"wrapT","repeat").toUpperCase()],h=t[br(i,"format","rgba").toUpperCase()];if(i.repeat&&(n=t.REPEAT,a=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var o=br(i,"width",512),u=br(i,"height",2),f=br(i,"border",0);t.texImage2D(t.TEXTURE_2D,0,h,o,u,f,h,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,h,t.RGBA,t.UNSIGNED_BYTE,e.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,a)}this.renderer.setProgram(this.program),t.uniform1i(e.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var e=this.gl,t=this.uniforms,i,r,s,n,a,h=0;for(var o in t)i=t[o],s=i.glFunc,r=i.glValueLength,n=i.uniformLocation,a=i.value,a!==null&&(r===1?i.glMatrix?s.call(e,n,i.transpose,a):s.call(e,n,a):r===2?s.call(e,n,a.x,a.y):r===3?s.call(e,n,a.x,a.y,a.z):r===4?s.call(e,n,a.x,a.y,a.z,a.w):i.type==="sampler2D"&&(e.activeTexture(e.TEXTURE0+h),e.bindTexture(e.TEXTURE_2D,a),e.uniform1i(n,h),h++))},load:function(e){var t=this.gl,i=this.width,r=this.height,s=this.renderer,n=this.program,a=this.viewMatrix;if(!this.renderToTexture){var h=-this._displayOriginX,o=-this._displayOriginY;a[0]=e[0],a[1]=e[1],a[4]=e[2],a[5]=e[3],a[8]=e[4],a[9]=e[5],a[12]=a[0]*h+a[4]*o,a[13]=a[1]*h+a[5]*o}t.useProgram(n),t.uniformMatrix4fv(t.getUniformLocation(n,"uViewMatrix"),!1,a),t.uniform2f(t.getUniformLocation(n,"uResolution"),this.width,this.height);var u=this.uniforms,f=u.resolution;f.value.x=i,f.value.y=r,u.time.value=s.game.loop.getDuration();var d=this.pointer;if(d){var v=u.mouse,c=d.x/i,p=1-d.y/r;v.value.x=c.toFixed(2),v.value.y=p.toFixed(2)}this.syncUniforms()},flush:function(){var e=this.width,t=this.height,i=this.program,r=this.gl,s=this.vertexBuffer,n=this.renderer,a=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(n.setFramebuffer(this.framebuffer),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)),r.bindBuffer(r.ARRAY_BUFFER,s);var h=r.getAttribLocation(i,"inPosition");h!==-1&&(r.enableVertexAttribArray(h),r.vertexAttribPointer(h,2,r.FLOAT,!1,a,0));var o=this.vertexViewF32;o[3]=t,o[4]=e,o[5]=t,o[8]=e,o[9]=t,o[10]=e;var u=6;r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,u*a)),r.drawArrays(r.TRIANGLES,0,u),this.renderToTexture&&n.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var e=this.gl;e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});xH.exports=dMe});var va=l((hje,yH)=>{var vMe=C(),cMe=Ae(),pMe=xe();function lg(e,t,i,r){var s=e-i,n=t-r,a=s*s+n*n;return Math.sqrt(a)}var mMe=new vMe({initialize:function(t,i,r){this.vertex1=t,this.vertex2=i,this.vertex3=r,this.bounds=new cMe,this._inCenter=new pMe},getInCenter:function(e){e===void 0&&(e=!0);var t=this.vertex1,i=this.vertex2,r=this.vertex3,s,n,a,h,o,u;e?(s=t.x,n=t.y,a=i.x,h=i.y,o=r.x,u=r.y):(s=t.vx,n=t.vy,a=i.vx,h=i.vy,o=r.vx,u=r.vy);var f=lg(o,u,a,h),d=lg(s,n,o,u),v=lg(a,h,s,n),c=f+d+v;return this._inCenter.set((s*f+a*d+o*v)/c,(n*f+h*d+u*v)/c)},contains:function(e,t,i){var r=this.vertex1,s=this.vertex2,n=this.vertex3,a=r.vx,h=r.vy,o=s.vx,u=s.vy,f=n.vx,d=n.vy;if(i){var v=i.a,c=i.b,p=i.c,m=i.d,x=i.e,g=i.f;a=r.vx*v+r.vy*p+x,h=r.vx*c+r.vy*m+g,o=s.vx*v+s.vy*p+x,u=s.vx*c+s.vy*m+g,f=n.vx*v+n.vy*p+x,d=n.vx*c+n.vy*m+g}var y=f-a,T=d-h,S=o-a,E=u-h,_=e-a,w=t-h,R=y*y+T*T,q=y*S+T*E,A=y*_+T*w,P=S*S+E*E,L=S*_+E*w,b=R*P-q*q,G=b===0?0:1/b,M=(P*A-q*L)*G,D=(R*L-q*A)*G;return M>=0&&D>=0&&M+D<1},isCounterClockwise:function(e){var t=this.vertex1,i=this.vertex2,r=this.vertex3,s=(i.vx-t.vx)*(r.vy-t.vy)-(i.vy-t.vy)*(r.vx-t.vx);return e<=0?s>=0:s<0},load:function(e,t,i,r,s){return i=this.vertex1.load(e,t,i,r,s),i=this.vertex2.load(e,t,i,r,s),i=this.vertex3.load(e,t,i,r,s),i},transformCoordinatesLocal:function(e,t,i,r){return this.vertex1.transformCoordinatesLocal(e,t,i,r),this.vertex2.transformCoordinatesLocal(e,t,i,r),this.vertex3.transformCoordinatesLocal(e,t,i,r),this},updateBounds:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3,r=this.bounds;return r.x=Math.min(e.vx,t.vx,i.vx),r.y=Math.min(e.vy,t.vy,i.vy),r.width=Math.max(e.vx,t.vx,i.vx)-r.x,r.height=Math.max(e.vy,t.vy,i.vy)-r.y,this},isInView:function(e,t,i,r,s,n,a,h,o,u,f){var d=this.vertex1.update(s,n,a,h,o,u,f,r),v=this.vertex2.update(s,n,a,h,o,u,f,r),c=this.vertex3.update(s,n,a,h,o,u,f,r);if(d.ta<=0&&v.ta<=0&&c.ta<=0||t&&!this.isCounterClockwise(i))return!1;var p=this.bounds;p.x=Math.min(d.tx,v.tx,c.tx),p.y=Math.min(d.ty,v.ty,c.ty),p.width=Math.max(d.tx,v.tx,c.tx)-p.x,p.height=Math.max(d.ty,v.ty,c.ty)-p.y;var m=e.x+e.width,x=e.y+e.height;return p.width<=0||p.height<=0||e.width<=0||e.height<=0?!1:!(p.right<e.x||p.bottom<e.y||p.x>m||p.y>x)},translate:function(e,t){t===void 0&&(t=0);var i=this.vertex1,r=this.vertex2,s=this.vertex3;return i.x+=e,i.y+=t,r.x+=e,r.y+=t,s.x+=e,s.y+=t,this},x:{get:function(){return this.getInCenter().x},set:function(e){var t=this.getInCenter();this.translate(e-t.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(e){var t=this.getInCenter();this.translate(0,e-t.y)}},alpha:{get:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3;return(e.alpha+t.alpha+i.alpha)/3},set:function(e){this.vertex1.alpha=e,this.vertex2.alpha=e,this.vertex3.alpha=e}},depth:{get:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3;return(e.vz+t.vz+i.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});yH.exports=mMe});var ca=l((oje,EH)=>{var gMe=C(),xMe=Te(),TH=pi(),yMe=new gMe({Extends:TH,initialize:function(t,i,r,s,n,a,h,o,u,f){a===void 0&&(a=16777215),h===void 0&&(h=1),o===void 0&&(o=0),u===void 0&&(u=0),f===void 0&&(f=0),TH.call(this,t,i,r),this.vx=0,this.vy=0,this.vz=0,this.nx=o,this.ny=u,this.nz=f,this.u=s,this.v=n,this.color=a,this.alpha=h,this.tx=0,this.ty=0,this.ta=0},setUVs:function(e,t){return this.u=e,this.v=t,this},transformCoordinatesLocal:function(e,t,i,r){var s=this.x,n=this.y,a=this.z,h=e.val,o=s*h[0]+n*h[4]+a*h[8]+h[12],u=s*h[1]+n*h[5]+a*h[9]+h[13],f=s*h[2]+n*h[6]+a*h[10]+h[14],d=s*h[3]+n*h[7]+a*h[11]+h[15];this.vx=o/d*t,this.vy=-(u/d)*i,r<=0?this.vz=f/d:this.vz=-(f/d)},update:function(e,t,i,r,s,n,a,h){var o=this.vx*e+this.vy*i+s,u=this.vx*t+this.vy*r+n;return a&&(o=Math.round(o),u=Math.round(u)),this.tx=o,this.ty=u,this.ta=this.alpha*h,this},load:function(e,t,i,r,s){return e[++i]=this.tx,e[++i]=this.ty,e[++i]=this.u,e[++i]=this.v,e[++i]=r,e[++i]=s,t[++i]=xMe.getTintAppendFloatAlpha(this.color,this.ta),i}});EH.exports=yMe});var fg=l((uje,_H)=>{var TMe=va(),SH=ca(),EMe=function(e,t,i,r,s,n,a){if(r===void 0&&(r=!1),n===void 0&&(n=16777215),a===void 0&&(a=1),e.length!==t.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var h={faces:[],vertices:[]},o,u,f,d,v,c,p,m,x,g,y,T=r?3:2,S=Array.isArray(n),E=Array.isArray(a);if(Array.isArray(i)&&i.length>0)for(o=0;o<i.length;o++){var _=i[o],w=i[o]*2,R=i[o]*T;u=e[R],f=e[R+1],d=r?e[R+2]:0,v=t[w],c=t[w+1],p=S?n[_]:n,m=E?a[_]:a,x=0,g=0,y=0,s&&(x=s[R],g=s[R+1],y=r?s[R+2]:0),h.vertices.push(new SH(u,f,d,v,c,p,m,x,g,y))}else{var q=0,A=0;for(o=0;o<e.length;o+=T)u=e[o],f=e[o+1],d=r?e[o+2]:0,v=t[q],c=t[q+1],p=S?n[A]:n,m=E?a[A]:a,x=0,g=0,y=0,s&&(x=s[o],g=s[o+1],y=r?s[o+2]:0),h.vertices.push(new SH(u,f,d,v,c,p,m,x,g,y)),q+=2,A++}for(o=0;o<h.vertices.length;o+=3){var P=h.vertices[o],L=h.vertices[o+1],b=h.vertices[o+2];h.faces.push(new TMe(P,L,b))}return h};_H.exports=EMe});var vg=l((lje,qH)=>{var SMe=va(),_Me=Er(),RH=pi(),dg=ca(),wH=new RH,CH=new RH,ql=new _Me,wMe=function(e,t,i,r,s,n,a,h,o,u){i===void 0&&(i=1),r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=0),a===void 0&&(a=0),h===void 0&&(h=0),o===void 0&&(o=0),u===void 0&&(u=!0);var f={faces:[],verts:[]},d=e.materials;wH.set(r,s,n),CH.set(a,h,o),ql.fromRotationXYTranslation(CH,wH,u);for(var v=0;v<e.models.length;v++)for(var c=e.models[v],p=c.vertices,m=c.textureCoords,x=c.faces,g=0;g<x.length;g++){var y=x[g],T=y.vertices[0],S=y.vertices[1],E=y.vertices[2],_=p[T.vertexIndex],w=p[S.vertexIndex],R=p[E.vertexIndex],q=T.textureCoordsIndex,A=S.textureCoordsIndex,P=E.textureCoordsIndex,L=q===-1?{u:0,v:1}:m[q],b=A===-1?{u:0,v:0}:m[A],G=P===-1?{u:1,v:1}:m[P],M=16777215;y.material!==""&&d[y.material]&&(M=d[y.material]);var D=new dg(_.x*i,_.y*i,_.z*i,L.u,L.v,M).transformMat4(ql),I=new dg(w.x*i,w.y*i,w.z*i,b.u,b.v,M).transformMat4(ql),F=new dg(R.x*i,R.y*i,R.z*i,G.u,G.v,M).transformMat4(ql);f.verts.push(D,I,F),f.faces.push(new SMe(D,I,F))}return t&&(t.faces=t.faces.concat(f.faces),t.vertices=t.vertices.concat(f.verts)),f};qH.exports=wMe});var PH=l((fje,AH)=>{var CMe=be(),RMe=function(e,t,i,r){var s=t.faces,n=s.length;if(n!==0){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline,t),h=CMe(t,i,r).calc,o=a.setGameObject(t),u=a.vertexViewF32,f=a.vertexViewU32,d=a.vertexCount*a.currentShader.vertexComponentCount-1,v=t.tintFill,c=[],p=t.debugCallback,m=h.a,x=h.b,g=h.c,y=h.d,T=h.e,S=h.f,E=t.viewPosition.z,_=t.hideCCW,w=i.roundPixels,R=i.alpha*t.alpha,q=0;e.pipelines.preBatch(t);for(var A=0;A<n;A++){var P=s[A];!P.isInView(i,_,E,R,m,x,g,y,T,S,w)||(a.shouldFlush(3)&&(a.flush(),d=0),d=P.load(u,f,d,o,v),q++,a.vertexCount+=3,p&&c.push(P))}t.totalFrame+=q,p&&p.call(t,t,c),e.pipelines.postBatch(t)}};AH.exports=RMe});var bH=l((dje,MH)=>{var qMe=function(){};MH.exports=qMe});var DH=l((vje,FH)=>{var LH=B(),OH=B();LH=PH();OH=bH();FH.exports={renderWebGL:LH,renderCanvas:OH}});var Al=l((cje,GH)=>{var AMe=C(),ur=ye(),PMe=yr(),MMe=va(),IH=Fe(),bMe=fg(),LMe=vg(),OMe=be(),cg=Er(),FMe=DH(),NH=vs(),pa=pi(),DMe=ca(),IMe=new AMe({Extends:IH,Mixins:[ur.AlphaSingle,ur.BlendMode,ur.Depth,ur.Mask,ur.Pipeline,ur.Size,ur.Texture,ur.Transform,ur.Visible,ur.ScrollFactor,FMe],initialize:function(t,i,r,s,n,a,h,o,u,f,d,v){i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s="__WHITE"),IH.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new pa,this.modelScale=new pa(1,1,1),this.modelRotation=new pa,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new cg,this.viewPosition=new pa,this.viewMatrix=new cg,this.projectionMatrix=new cg,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var c=t.sys.renderer;this.setPosition(i,r),this.setTexture(s,n),this.setSize(c.width,c.height),this.initPipeline(),this.setPerspective(c.width,c.height),a&&this.addVertices(a,h,o,u,f,d,v)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(e){return this.viewPosition.addScale(pa.LEFT,e),this.dirtyCache[10]=1,this},panY:function(e){return this.viewPosition.y+=pa.DOWN.y*e,this.dirtyCache[10]=1,this},panZ:function(e){return this.viewPosition.z+=e,this.dirtyCache[10]=1,this},setPerspective:function(e,t,i,r,s){return i===void 0&&(i=45),r===void 0&&(r=.01),s===void 0&&(s=1e3),this.projectionMatrix.perspective(PMe(i),e/t,r,s),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(e,t,i,r){return e===void 0&&(e=this.scene.sys.renderer.getAspectRatio()),t===void 0&&(t=1),i===void 0&&(i=-1e3),r===void 0&&(r=1e3),this.projectionMatrix.ortho(-e,e,-t,t,i,r),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(e){e.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(e,t,i,r,s,n,a,h,o){var u=this.scene.sys.cache.obj.get(e);return u&&LMe(u,this,t,i,r,s,n,a,h,o),this},sortByDepth:function(e,t){return e.depth-t.depth},depthSort:function(){return NH(this.faces,this.sortByDepth),this},addVertex:function(e,t,i,r,s,n,a){var h=new DMe(e,t,i,r,s,n,a);return this.vertices.push(h),h},addFace:function(e,t,i){var r=new MMe(e,t,i);return this.faces.push(r),this.dirtyCache[9]=-1,r},addVertices:function(e,t,i,r,s,n,a){var h=bMe(e,t,i,r,s,n,a);return h&&(this.faces=this.faces.concat(h.faces),this.vertices=this.vertices.concat(h.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(e){return this.faces[e]},getFaceAt:function(e,t,i){i===void 0&&(i=this.scene.sys.cameras.main);for(var r=OMe(this,i).calc,s=this.faces,n=[],a=0;a<s.length;a++){var h=s[a];h.contains(e,t,r)&&n.push(h)}return NH(n,this.sortByDepth)},setDebug:function(e,t){return this.debugGraphic=e,!e&&!t?this.debugCallback=null:t?this.debugCallback=t:this.debugCallback=this.renderDebug,this},isDirty:function(){var e=this.modelPosition,t=this.modelRotation,i=this.modelScale,r=this.dirtyCache,s=e.x,n=e.y,a=e.z,h=t.x,o=t.y,u=t.z,f=i.x,d=i.y,v=i.z,c=this.getFaceCount(),p=r[0],m=r[1],x=r[2],g=r[3],y=r[4],T=r[5],S=r[6],E=r[7],_=r[8],w=r[9];return r[0]=s,r[1]=n,r[2]=a,r[3]=h,r[4]=o,r[5]=u,r[6]=f,r[7]=d,r[8]=v,r[9]=c,p!==s||m!==n||x!==a||g!==h||y!==o||T!==u||S!==f||E!==d||_!==v||w!==c},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var e=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!e[10]&&!this.isDirty())){var t=this.width,i=this.height,r=this.viewMatrix,s=this.viewPosition;e[10]&&(r.identity(),r.translate(s),r.invert(),e[10]=0);var n=this.transformMatrix;n.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var a=s.z,h=this.faces,o=0;o<h.length;o++)h[o].transformCoordinatesLocal(n,t,i,a);this.depthSort()}},renderDebug:function(e,t){for(var i=e.debugGraphic,r=0;r<t.length;r++){var s=t[r],n=s.vertex1.tx,a=s.vertex1.ty,h=s.vertex2.tx,o=s.vertex2.ty,u=s.vertex3.tx,f=s.vertex3.ty;i.strokeTriangle(n,a,h,o,u,f)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});GH.exports=IMe});var UH=l((pje,BH)=>{var NMe=be(),GMe=function(e,t,i,r){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),n=NMe(t,i,r).calc,a=t.width,h=t.height,o=-t._radius,u=-t._radius,f=o+a,d=u+h,v=n.getX(0,0),c=n.getY(0,0),p=n.getX(o,u),m=n.getY(o,u),x=n.getX(o,d),g=n.getY(o,d),y=n.getX(f,d),T=n.getY(f,d),S=n.getX(f,u),E=n.getY(f,u);e.pipelines.preBatch(t),s.batchPointLight(t,i,p,m,x,g,y,T,S,E,v,c),e.pipelines.postBatch(t)};BH.exports=GMe});var YH=l((mje,zH)=>{var kH=B(),BMe=B();kH=UH();zH.exports={renderWebGL:kH,renderCanvas:BMe}});var Ah=l((gje,VH)=>{var UMe=C(),Lr=ye(),XH=Fe(),kMe=No(),zMe=Ks(),YMe=YH(),XMe=new UMe({Extends:XH,Mixins:[Lr.AlphaSingle,Lr.BlendMode,Lr.Depth,Lr.GetBounds,Lr.Mask,Lr.Pipeline,Lr.ScrollFactor,Lr.Transform,Lr.Visible,YMe],initialize:function(t,i,r,s,n,a,h){s===void 0&&(s=16777215),n===void 0&&(n=128),a===void 0&&(a=1),h===void 0&&(h=.1),XH.call(this,t,"PointLight"),this.initPipeline(zMe.POINTLIGHT_PIPELINE),this.setPosition(i,r),this.color=kMe(s),this.intensity=a,this.attenuation=h,this.width=n*2,this.height=n*2,this._radius=n},radius:{get:function(){return this._radius},set:function(e){this._radius=e,this.width=e*2,this.height=e*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});VH.exports=XMe});var WH=l(()=>{var VMe=Rl(),WMe=ie();WMe.register("shader",function(e,t,i,r,s,n,a){return this.displayList.add(new VMe(this.scene,e,t,i,r,s,n,a))})});var HH=l(()=>{var HMe=Al(),KMe=ie();KMe.register("mesh",function(e,t,i,r,s,n,a,h,o,u,f){return this.displayList.add(new HMe(this.scene,e,t,i,r,s,n,a,h,o,u,f))})});var KH=l(()=>{var ZMe=ie(),JMe=Ah();ZMe.register("pointlight",function(e,t,i,r,s,n){return this.displayList.add(new JMe(this.scene,e,t,i,r,s,n))})});var ZH=l(()=>{var QMe=mt(),$Me=Me(),Ph=we(),jMe=Rl();$Me.register("shader",function(e,t){e===void 0&&(e={});var i=Ph(e,"key",null),r=Ph(e,"x",0),s=Ph(e,"y",0),n=Ph(e,"width",128),a=Ph(e,"height",128),h=new jMe(this.scene,i,r,s,n,a);return t!==void 0&&(e.add=t),QMe(this.scene,h,e),h})});var QH=l(()=>{var ebe=mt(),tbe=Me(),JH=we(),ln=he(),ibe=Al();tbe.register("mesh",function(e,t){e===void 0&&(e={});var i=JH(e,"key",null),r=JH(e,"frame",null),s=ln(e,"vertices",[]),n=ln(e,"uvs",[]),a=ln(e,"indicies",[]),h=ln(e,"containsZ",!1),o=ln(e,"normals",[]),u=ln(e,"colors",16777215),f=ln(e,"alphas",1),d=new ibe(this.scene,0,0,i,r,s,n,a,h,o,u,f);return t!==void 0&&(e.add=t),ebe(this.scene,d,e),d})});var $H=l(()=>{var rbe=mt(),sbe=Me(),Pl=we(),nbe=Ah();sbe.register("pointlight",function(e,t){e===void 0&&(e={});var i=Pl(e,"color",16777215),r=Pl(e,"radius",128),s=Pl(e,"intensity",1),n=Pl(e,"attenuation",.1),a=new nbe(this.scene,0,0,i,r,s,n);return t!==void 0&&(e.add=t),rbe(this.scene,a,e),a})});var mg=l((Mje,t6)=>{var jH=zr(),abe=C(),e6=ye(),hbe=yu(),obe=Te(),pg=new abe({Extends:jH,Mixins:[e6.ScrollFactor,e6.Visible],initialize:function(t,i,r,s,n,a,h){jH.call(this,t,i,r),this.color=new hbe(s,n,a),this.intensity=h,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(e){return!(pg.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&e.id)},setColor:function(e){var t=obe.getFloatsFromUintRGB(e);return this.color.set(t[0],t[1],t[2]),this},setIntensity:function(e){return this.intensity=e,this},setRadius:function(e){return this.radius=e,this}});pg.RENDER_MASK=15;t6.exports=pg});var Ml=l((bje,i6)=>{var ube=function(e,t){var i=t.width/2,r=t.height/2,s=Math.abs(e.x-t.x-i),n=Math.abs(e.y-t.y-r),a=i+e.radius,h=r+e.radius;if(s>a||n>h)return!1;if(s<=i||n<=r)return!0;var o=s-i,u=n-r,f=o*o,d=u*u,v=e.radius*e.radius;return f+d<=v};i6.exports=ube});var gg=l((Lje,s6)=>{var lbe=Ml(),fbe=C(),dbe=Wr(),vbe=mg(),cbe=Ah(),pbe=yu(),mbe=Zs(),gbe=vs(),r6=Te(),xbe=new fbe({initialize:function(){this.lights=[],this.ambientColor=new pbe(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(e,t,i,r,s,n){return this.systems.displayList.add(new cbe(this.scene,e,t,i,r,s,n))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(e){for(var t=this.lights,i=e.worldView,r=[],s=0;s<t.length;s++){var n=t[s];n.willRender(e)&&lbe(n,i)&&r.push({light:n,distance:dbe(n.x,n.y,i.centerX,i.centerY)})}return r.length>this.maxLights&&(gbe(r,this.sortByDistance),r=r.slice(0,this.maxLights)),this.visibleLights=r.length,r},sortByDistance:function(e,t){return e.distance>=t.distance},setAmbientColor:function(e){var t=r6.getFloatsFromUintRGB(e);return this.ambientColor.set(t[0],t[1],t[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(e,t,i,r,s){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=128),r===void 0&&(r=16777215),s===void 0&&(s=1);var n=r6.getFloatsFromUintRGB(r),a=new vbe(e,t,i,n[0],n[1],n[2],s);return this.lights.push(a),a},removeLight:function(e){var t=this.lights.indexOf(e);return t>=0&&mbe(this.lights,t),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});s6.exports=xbe});var o6=l((Oje,h6)=>{var ybe=C(),n6=gg(),Tbe=vt(),xg=Ne(),a6=new ybe({Extends:n6,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(xg.BOOT,this.boot,this),n6.call(this)},boot:function(){var e=this.systems.events;e.on(xg.SHUTDOWN,this.shutdown,this),e.on(xg.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});Tbe.register("LightsPlugin",a6,"lights");h6.exports=a6});var l6=l((Fje,u6)=>{var ai={Events:Vr(),DisplayList:cz(),GameObjectCreator:Me(),GameObjectFactory:ie(),UpdateList:Rz(),Components:ye(),GetCalcMatrix:be(),BuildGameObject:mt(),BuildGameObjectAnimation:im(),GameObject:Fe(),BitmapText:Th(),Blitter:Zu(),Bob:nm(),Container:Ju(),DOMElement:um(),DynamicBitmapText:Qu(),Extern:lm(),Graphics:tl(),Group:sl(),Image:nl(),Layer:hl(),Particles:EX(),PathFollower:qm(),RenderTexture:cl(),RetroFont:zX(),Rope:pl(),Sprite:na(),Text:gl(),GetTextSize:Pm(),MeasureText:Mm(),TextStyle:bm(),TileSprite:Tl(),Zone:ka(),Video:Sl(),Shape:ni(),Arc:Lm(),Curve:Om(),Ellipse:Fm(),Grid:Im(),IsoBox:Bm(),IsoTriangle:zm(),Line:Ym(),Polygon:Km(),Rectangle:Zm(),Star:Jm(),Triangle:ig(),Factories:{Blitter:o4(),Container:u4(),DOMElement:l4(),DynamicBitmapText:f4(),Extern:d4(),Graphics:v4(),Group:c4(),Image:p4(),Layer:m4(),Particles:g4(),PathFollower:x4(),RenderTexture:y4(),Rope:T4(),Sprite:E4(),StaticBitmapText:S4(),Text:_4(),TileSprite:w4(),Zone:C4(),Video:R4(),Arc:P4(),Curve:M4(),Ellipse:b4(),Grid:L4(),IsoBox:O4(),IsoTriangle:F4(),Line:D4(),Polygon:I4(),Rectangle:N4(),Star:G4(),Triangle:B4()},Creators:{Blitter:k4(),Container:z4(),DynamicBitmapText:Y4(),Graphics:X4(),Group:V4(),Image:H4(),Layer:K4(),Particles:Q4(),RenderTexture:$4(),Rope:j4(),Sprite:tH(),StaticBitmapText:sH(),Text:nH(),TileSprite:aH(),Zone:hH(),Video:oH()}};ai.Shader=Rl(),ai.Mesh=Al(),ai.PointLight=Ah(),ai.Factories.Shader=WH(),ai.Factories.Mesh=HH(),ai.Factories.PointLight=KH(),ai.Creators.Shader=ZH(),ai.Creators.Mesh=QH(),ai.Creators.PointLight=$H(),ai.Light=mg(),ai.LightsManager=gg(),ai.LightsPlugin=o6();u6.exports=ai});var d6=l((Dje,f6)=>{var Ebe=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};f6.exports=Ebe});var c6=l((Ije,v6)=>{var Sbe=zr(),_be=function(e){return new Sbe(e.x,e.y,e.radius)};v6.exports=_be});var m6=l((Nje,p6)=>{var wbe=kr(),Cbe=function(e,t){return wbe(e,t.x,t.y)};p6.exports=Cbe});var x6=l((Gje,g6)=>{var bl=kr(),Rbe=function(e,t){return bl(e,t.x,t.y)&&bl(e,t.right,t.y)&&bl(e,t.x,t.bottom)&&bl(e,t.right,t.bottom)};g6.exports=Rbe});var T6=l((Bje,y6)=>{var qbe=function(e,t){return t.setTo(e.x,e.y,e.radius)};y6.exports=qbe});var S6=l((Uje,E6)=>{var Abe=function(e,t){return e.x===t.x&&e.y===t.y&&e.radius===t.radius};E6.exports=Abe});var w6=l((kje,_6)=>{var Pbe=Ae(),Mbe=function(e,t){return t===void 0&&(t=new Pbe),t.x=e.left,t.y=e.top,t.width=e.diameter,t.height=e.diameter,t};_6.exports=Mbe});var R6=l((zje,C6)=>{var bbe=function(e,t,i){return e.x+=t,e.y+=i,e};C6.exports=bbe});var A6=l((Yje,q6)=>{var Lbe=function(e,t){return e.x+=t.x,e.y+=t.y,e};q6.exports=Lbe});var M6=l((Xje,P6)=>{var wt=zr();wt.Area=d6();wt.Circumference=bd();wt.CircumferencePoint=co();wt.Clone=c6();wt.Contains=kr();wt.ContainsPoint=m6();wt.ContainsRect=x6();wt.CopyFrom=T6();wt.Equals=S6();wt.GetBounds=w6();wt.GetPoint=Md();wt.GetPoints=Ld();wt.Offset=R6();wt.OffsetPoint=A6();wt.Random=po();P6.exports=wt});var L6=l((Vje,b6)=>{var Obe=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};b6.exports=Obe});var F6=l((Wje,O6)=>{var Fbe=sa(),Dbe=function(e){return new Fbe(e.x,e.y,e.width,e.height)};O6.exports=Dbe});var I6=l((Hje,D6)=>{var Ibe=ra(),Nbe=function(e,t){return Ibe(e,t.x,t.y)};D6.exports=Nbe});var G6=l((Kje,N6)=>{var Ll=ra(),Gbe=function(e,t){return Ll(e,t.x,t.y)&&Ll(e,t.right,t.y)&&Ll(e,t.x,t.bottom)&&Ll(e,t.right,t.bottom)};N6.exports=Gbe});var U6=l((Zje,B6)=>{var Bbe=function(e,t){return t.setTo(e.x,e.y,e.width,e.height)};B6.exports=Bbe});var z6=l((Jje,k6)=>{var Ube=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};k6.exports=Ube});var X6=l((Qje,Y6)=>{var kbe=Ae(),zbe=function(e,t){return t===void 0&&(t=new kbe),t.x=e.left,t.y=e.top,t.width=e.width,t.height=e.height,t};Y6.exports=zbe});var W6=l(($je,V6)=>{var Ybe=function(e,t,i){return e.x+=t,e.y+=i,e};V6.exports=Ybe});var K6=l((jje,H6)=>{var Xbe=function(e,t){return e.x+=t.x,e.y+=t.y,e};H6.exports=Xbe});var J6=l((eet,Z6)=>{var Ct=sa();Ct.Area=L6();Ct.Circumference=dm();Ct.CircumferencePoint=ju();Ct.Clone=F6();Ct.Contains=ra();Ct.ContainsPoint=I6();Ct.ContainsRect=G6();Ct.CopyFrom=U6();Ct.Equals=z6();Ct.GetBounds=X6();Ct.GetPoint=fm();Ct.GetPoints=vm();Ct.Offset=W6();Ct.OffsetPoint=K6();Ct.Random=Po();Z6.exports=Ct});var yg=l((tet,Q6)=>{var Vbe=Wr(),Wbe=function(e,t){return Vbe(e.x,e.y,t.x,t.y)<=e.radius+t.radius};Q6.exports=Wbe});var j6=l((iet,$6)=>{var ma=$(),Hbe=yg(),Kbe=function(e,t,i){if(i===void 0&&(i=[]),Hbe(e,t)){var r=e.x,s=e.y,n=e.radius,a=t.x,h=t.y,o=t.radius,u,f,d,v,c;if(s===h)c=(o*o-n*n-a*a+r*r)/(2*(r-a)),u=1,f=-2*h,d=a*a+c*c-2*a*c+h*h-o*o,v=f*f-4*u*d,v===0?i.push(new ma(c,-f/(2*u))):v>0&&(i.push(new ma(c,(-f+Math.sqrt(v))/(2*u))),i.push(new ma(c,(-f-Math.sqrt(v))/(2*u))));else{var p=(r-a)/(s-h),m=(o*o-n*n-a*a+r*r-h*h+s*s)/(2*(s-h));u=p*p+1,f=2*s*p-2*m*p-2*r,d=r*r+s*s+m*m-n*n-2*s*m,v=f*f-4*u*d,v===0?(c=-f/(2*u),i.push(new ma(c,m-c*p))):v>0&&(c=(-f+Math.sqrt(v))/(2*u),i.push(new ma(c,m-c*p)),c=(-f-Math.sqrt(v))/(2*u),i.push(new ma(c,m-c*p)))}}return i};$6.exports=Kbe});var Ol=l((ret,e9)=>{var Tg=kr(),Zbe=$(),Jbe=new Zbe,Qbe=function(e,t,i){if(i===void 0&&(i=Jbe),Tg(t,e.x1,e.y1))return i.x=e.x1,i.y=e.y1,!0;if(Tg(t,e.x2,e.y2))return i.x=e.x2,i.y=e.y2,!0;var r=e.x2-e.x1,s=e.y2-e.y1,n=t.x-e.x1,a=t.y-e.y1,h=r*r+s*s,o=r,u=s;if(h>0){var f=(n*r+a*s)/h;o*=f,u*=f}i.x=e.x1+o,i.y=e.y1+u;var d=o*o+u*u;return d<=h&&o*r+u*s>=0&&Tg(t,i.x,i.y)};e9.exports=Qbe});var Fl=l((set,t9)=>{var Eg=$(),$be=Ol(),jbe=function(e,t,i){if(i===void 0&&(i=[]),$be(e,t)){var r=e.x1,s=e.y1,n=e.x2,a=e.y2,h=t.x,o=t.y,u=t.radius,f=n-r,d=a-s,v=r-h,c=s-o,p=f*f+d*d,m=2*(f*v+d*c),x=v*v+c*c-u*u,g=m*m-4*p*x,y,T;if(g===0){var S=-m/(2*p);y=r+S*f,T=s+S*d,S>=0&&S<=1&&i.push(new Eg(y,T))}else if(g>0){var E=(-m-Math.sqrt(g))/(2*p);y=r+E*f,T=s+E*d,E>=0&&E<=1&&i.push(new Eg(y,T));var _=(-m+Math.sqrt(g))/(2*p);y=r+_*f,T=s+_*d,_>=0&&_<=1&&i.push(new Eg(y,T))}}return i};t9.exports=jbe});var r9=l((net,i9)=>{var Dl=Fl(),eLe=Ml(),tLe=function(e,t,i){if(i===void 0&&(i=[]),eLe(e,t)){var r=t.getLineA(),s=t.getLineB(),n=t.getLineC(),a=t.getLineD();Dl(r,e,i),Dl(s,e,i),Dl(n,e,i),Dl(a,e,i)}return i};i9.exports=tLe});var Sg=l((aet,s9)=>{var iLe=pi(),rLe=function(e,t,i){var r=e.x1,s=e.y1,n=e.x2,a=e.y2,h=t.x1,o=t.y1,u=t.x2,f=t.y2,d=n-r,v=a-s,c=u-h,p=f-o,m=p*d-c*v;if(d===0||m===0)return!1;var x=(d*(o-s)+v*(r-h))/(c*v-p*d),g=(h+c*x-r)/d;return g<0||x<0||x>1?null:(i===void 0&&(i=new iLe),i.set(r+d*g,s+v*g,g))};s9.exports=rLe});var _g=l((het,h9)=>{var a9=pi(),sLe=Sg(),nLe=Ai(),n9=new nLe,Il=new a9,aLe=function(e,t,i){i===void 0&&(i=new a9);var r=!1;i.set(),Il.set();for(var s=t[0],n=1;n<t.length;n++){var a=t[n];n9.setTo(s.x,s.y,a.x,a.y),s=a,sLe(e,n9,Il)&&(!r||Il.z<i.z)&&(i.copy(Il),r=!0)}return r?i:null};h9.exports=aLe});var wg=l((oet,o9)=>{var hLe=pi(),oLe=th(),uLe=_g(),ga=new hLe,lLe=function(e,t,i){i===void 0&&(i=new oLe),Array.isArray(t)||(t=[t]);var r=!1;i.set(),ga.set();for(var s=0;s<t.length;s++)uLe(e,t[s].points,ga)&&(!r||ga.z<i.z)&&(i.set(ga.x,ga.y,ga.z,s),r=!0);return r?i:null};o9.exports=lLe});var fn=l((uet,u9)=>{var fLe=$(),dLe=function(e,t,i){i===void 0&&(i=new fLe);var r=e.x1,s=e.y1,n=e.x2,a=e.y2,h=t.x1,o=t.y1,u=t.x2,f=t.y2,d=(u-h)*(s-o)-(f-o)*(r-h),v=(n-r)*(s-o)-(a-s)*(r-h),c=(f-o)*(n-r)-(u-h)*(a-s);if(c===0)return!1;var p=d/c,m=v/c;return p>=0&&p<=1&&m>=0&&m<=1?(i.x=r+p*(n-r),i.y=s+p*(a-s),!0):!1};u9.exports=dLe});var Cg=l((fet,l9)=>{var vLe=function(e,t){var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=t.x,h=t.y,o=t.right,u=t.bottom,f=0;if(i>=a&&i<=o&&r>=h&&r<=u||s>=a&&s<=o&&n>=h&&n<=u)return!0;if(i<a&&s>=a){if(f=r+(n-r)*(a-i)/(s-i),f>h&&f<=u)return!0}else if(i>o&&s<=o&&(f=r+(n-r)*(o-i)/(s-i),f>=h&&f<=u))return!0;if(r<h&&n>=h){if(f=i+(s-i)*(h-r)/(n-r),f>=a&&f<=o)return!0}else if(r>u&&n<=u&&(f=i+(s-i)*(u-r)/(n-r),f>=a&&f<=o))return!0;return!1};l9.exports=vLe});var Bl=l((det,f9)=>{var Nl=$(),Gl=fn(),cLe=Cg(),pLe=function(e,t,i){if(i===void 0&&(i=[]),cLe(e,t))for(var r=t.getLineA(),s=t.getLineB(),n=t.getLineC(),a=t.getLineD(),h=[new Nl,new Nl,new Nl,new Nl],o=[Gl(r,e,h[0]),Gl(s,e,h[1]),Gl(n,e,h[2]),Gl(a,e,h[3])],u=0;u<4;u++)o[u]&&i.push(h[u]);return i};f9.exports=pLe});var c9=l((vet,v9)=>{var mLe=th(),gLe=wg(),xLe=Ai(),d9=new xLe;function Rg(e,t,i,r,s){var n=Math.cos(e),a=Math.sin(e);d9.setTo(t,i,t+n,i+a);var h=gLe(d9,r);h&&s.push(new mLe(h.x,h.y,e,h.w))}function yLe(e,t){return e.z-t.z}var TLe=function(e,t,i){Array.isArray(i)||(i=[i]);for(var r=[],s=[],n=0;n<i.length;n++)for(var a=i[n].points,h=0;h<a.length;h++){var o=Math.atan2(a[h].y-t,a[h].x-e);s.indexOf(o)===-1&&(Rg(o,e,t,i,r),Rg(o-1e-5,e,t,i,r),Rg(o+1e-5,e,t,i,r),s.push(o))}return r.sort(yLe)};v9.exports=TLe});var Mh=l((cet,p9)=>{var ELe=function(e,t){return e.width<=0||e.height<=0||t.width<=0||t.height<=0?!1:!(e.right<t.x||e.bottom<t.y||e.x>t.right||e.y>t.bottom)};p9.exports=ELe});var g9=l((pet,m9)=>{var SLe=Ae(),_Le=Mh(),wLe=function(e,t,i){return i===void 0&&(i=new SLe),_Le(e,t)&&(i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i.width=Math.min(e.right,t.right)-i.x,i.height=Math.min(e.bottom,t.bottom)-i.y),i};m9.exports=wLe});var y9=l((met,x9)=>{var Ul=Bl(),CLe=Mh(),RLe=function(e,t,i){if(i===void 0&&(i=[]),CLe(e,t)){var r=e.getLineA(),s=e.getLineB(),n=e.getLineC(),a=e.getLineD();Ul(r,t,i),Ul(s,t,i),Ul(n,t,i),Ul(a,t,i)}return i};x9.exports=RLe});var kl=l((get,T9)=>{var qLe=function(e,t,i,r){i===void 0&&(i=!1),r===void 0&&(r=[]);for(var s=e.x3-e.x1,n=e.y3-e.y1,a=e.x2-e.x1,h=e.y2-e.y1,o=s*s+n*n,u=s*a+n*h,f=a*a+h*h,d=o*f-u*u,v=d===0?0:1/d,c,p,m,x,g,y,T=e.x1,S=e.y1,E=0;E<t.length&&(m=t[E].x-T,x=t[E].y-S,g=s*m+n*x,y=a*m+h*x,c=(f*g-u*y)*v,p=(o*y-u*g)*v,!(c>=0&&p>=0&&c+p<1&&(r.push({x:t[E].x,y:t[E].y}),i)));E++);return r};T9.exports=qLe});var qg=l((xet,E9)=>{var ALe=function(e,t){return t===void 0&&(t=[]),t.push({x:e.x,y:e.y}),t.push({x:e.right,y:e.y}),t.push({x:e.right,y:e.bottom}),t.push({x:e.x,y:e.bottom}),t};E9.exports=ALe});var Ag=l((yet,S9)=>{var yi=fn(),xa=Yr(),PLe=kl(),MLe=qg(),bLe=function(e,t){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var i=t.getLineA(),r=t.getLineB(),s=t.getLineC();if(xa(e,i.x1,i.y1)||xa(e,i.x2,i.y2)||xa(e,r.x1,r.y1)||xa(e,r.x2,r.y2)||xa(e,s.x1,s.y1)||xa(e,s.x2,s.y2))return!0;var n=e.getLineA(),a=e.getLineB(),h=e.getLineC(),o=e.getLineD();if(yi(i,n)||yi(i,a)||yi(i,h)||yi(i,o)||yi(r,n)||yi(r,a)||yi(r,h)||yi(r,o)||yi(s,n)||yi(s,a)||yi(s,h)||yi(s,o))return!0;var u=MLe(e),f=PLe(t,u,!0);return f.length>0};S9.exports=bLe});var w9=l((Tet,_9)=>{var LLe=Ag(),Pg=Bl(),OLe=function(e,t,i){if(i===void 0&&(i=[]),LLe(e,t)){var r=t.getLineA(),s=t.getLineB(),n=t.getLineC();Pg(r,e,i),Pg(s,e,i),Pg(n,e,i)}return i};_9.exports=OLe});var bg=l((Eet,C9)=>{var Mg=Ol(),FLe=la(),DLe=function(e,t){return e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top?!1:!!(FLe(e,t.x,t.y)||Mg(e.getLineA(),t)||Mg(e.getLineB(),t)||Mg(e.getLineC(),t))};C9.exports=DLe});var q9=l((Set,R9)=>{var Lg=Fl(),ILe=bg(),NLe=function(e,t,i){if(i===void 0&&(i=[]),ILe(e,t)){var r=e.getLineA(),s=e.getLineB(),n=e.getLineC();Lg(r,t,i),Lg(s,t,i),Lg(n,t,i)}return i};R9.exports=NLe});var Fg=l((_et,A9)=>{var Og=fn(),GLe=function(e,t){return!!(e.contains(t.x1,t.y1)||e.contains(t.x2,t.y2)||Og(e.getLineA(),t)||Og(e.getLineB(),t)||Og(e.getLineC(),t))};A9.exports=GLe});var Ng=l((wet,P9)=>{var Dg=$(),BLe=Fg(),Ig=fn(),ULe=function(e,t,i){if(i===void 0&&(i=[]),BLe(e,t))for(var r=e.getLineA(),s=e.getLineB(),n=e.getLineC(),a=[new Dg,new Dg,new Dg],h=[Ig(r,t,a[0]),Ig(s,t,a[1]),Ig(n,t,a[2])],o=0;o<3;o++)h[o]&&i.push(a[o]);return i};P9.exports=ULe});var Gg=l((Cet,M9)=>{var kLe=function(e,t){return t===void 0&&(t=[]),t.push({x:e.x1,y:e.y1}),t.push({x:e.x2,y:e.y2}),t.push({x:e.x3,y:e.y3}),t};M9.exports=kLe});var Bg=l((Ret,O9)=>{var b9=kl(),L9=Gg(),Or=fn(),zLe=function(e,t){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var i=e.getLineA(),r=e.getLineB(),s=e.getLineC(),n=t.getLineA(),a=t.getLineB(),h=t.getLineC();if(Or(i,n)||Or(i,a)||Or(i,h)||Or(r,n)||Or(r,a)||Or(r,h)||Or(s,n)||Or(s,a)||Or(s,h))return!0;var o=L9(e),u=b9(t,o,!0);return u.length>0||(o=L9(t),u=b9(e,o,!0),u.length>0)};O9.exports=zLe});var D9=l((qet,F9)=>{var YLe=Bg(),Ug=Ng(),XLe=function(e,t,i){if(i===void 0&&(i=[]),YLe(e,t)){var r=t.getLineA(),s=t.getLineB(),n=t.getLineC();Ug(e,r,i),Ug(e,s,i),Ug(e,n,i)}return i};F9.exports=XLe});var kg=l((Aet,I9)=>{var VLe=function(e,t,i){i===void 0&&(i=1);var r=t.x1,s=t.y1,n=t.x2,a=t.y2,h=e.x,o=e.y,u=(n-r)*(n-r)+(a-s)*(a-s);if(u===0)return!1;var f=((h-r)*(n-r)+(o-s)*(a-s))/u;if(f<0)return Math.sqrt((r-h)*(r-h)+(s-o)*(s-o))<=i;if(f>=0&&f<=1){var d=((s-o)*(n-r)-(r-h)*(a-s))/u;return Math.abs(d)*Math.sqrt(u)<=i}else return Math.sqrt((n-h)*(n-h)+(a-o)*(a-o))<=i};I9.exports=VLe});var G9=l((Pet,N9)=>{var WLe=kg(),HLe=function(e,t){if(!WLe(e,t))return!1;var i=Math.min(t.x1,t.x2),r=Math.max(t.x1,t.x2),s=Math.min(t.y1,t.y2),n=Math.max(t.y1,t.y2);return e.x>=i&&e.x<=r&&e.y>=s&&e.y<=n};N9.exports=HLe});var U9=l((Met,B9)=>{var KLe=function(e,t,i,r,s,n){return n===void 0&&(n=0),!(t>e.right+n||i<e.left-n||r>e.bottom+n||s<e.top-n)};B9.exports=KLe});var z9=l((bet,k9)=>{k9.exports={CircleToCircle:yg(),CircleToRectangle:Ml(),GetCircleToCircle:j6(),GetCircleToRectangle:r9(),GetLineToCircle:Fl(),GetLineToLine:Sg(),GetLineToPoints:_g(),GetLineToPolygon:wg(),GetLineToRectangle:Bl(),GetRaysFromPointToPolygon:c9(),GetRectangleIntersection:g9(),GetRectangleToRectangle:y9(),GetRectangleToTriangle:w9(),GetTriangleToCircle:q9(),GetTriangleToLine:Ng(),GetTriangleToTriangle:D9(),LineToCircle:Ol(),LineToLine:fn(),LineToRectangle:Cg(),PointToLine:kg(),PointToLineSegment:G9(),RectangleToRectangle:Mh(),RectangleToTriangle:Ag(),RectangleToValues:U9(),TriangleToCircle:bg(),TriangleToLine:Fg(),TriangleToTriangle:Bg()}});var dn=l((Let,Y9)=>{var ZLe=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};Y9.exports=ZLe});var V9=l((Oet,X9)=>{var JLe=function(e,t,i){var r=t-(e.x1+e.x2)/2,s=i-(e.y1+e.y2)/2;return e.x1+=r,e.y1+=s,e.x2+=r,e.y2+=s,e};X9.exports=JLe});var H9=l((Fet,W9)=>{var QLe=Ai(),$Le=function(e){return new QLe(e.x1,e.y1,e.x2,e.y2)};W9.exports=$Le});var Z9=l((Det,K9)=>{var jLe=function(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2)};K9.exports=jLe});var Q9=l((Iet,J9)=>{var eOe=function(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2};J9.exports=eOe});var j9=l((Net,$9)=>{var tOe=gr(),iOe=function(e,t,i){i===void 0&&(i=t);var r=tOe(e),s=e.x2-e.x1,n=e.y2-e.y1;return t&&(e.x1=e.x1-s/r*t,e.y1=e.y1-n/r*t),i&&(e.x2=e.x2+s/r*i,e.y2=e.y2+n/r*i),e};$9.exports=iOe});var r8=l((Get,i8)=>{var e8=Xv(),rOe=gs(),t8=$(),sOe=function(e,t,i,r,s){r===void 0&&(r=0),s===void 0&&(s=[]);var n=[],a=e.x1,h=e.y1,o=e.x2-a,u=e.y2-h,f=rOe(t,s),d,v,c=i-1;for(d=0;d<c;d++)v=f(d/c),n.push(new t8(a+o*v,h+u*v));if(v=f(1),n.push(new t8(a+o*v,h+u*v)),r>0){var p=n[0],m=[p];for(d=1;d<n.length-1;d++){var x=n[d];e8(p,x)>=r&&(m.push(x),p=x)}var g=n[n.length-1];return e8(p,g)<r&&m.pop(),m.push(g),m}else return n};i8.exports=sOe});var n8=l((Bet,s8)=>{var nOe=$(),aOe=function(e,t){return t===void 0&&(t=new nOe),t.x=(e.x1+e.x2)/2,t.y=(e.y1+e.y2)/2,t};s8.exports=aOe});var h8=l((Uet,a8)=>{var hOe=$(),oOe=function(e,t,i){i===void 0&&(i=new hOe);var r=e.x1,s=e.y1,n=e.x2,a=e.y2,h=(n-r)*(n-r)+(a-s)*(a-s);if(h===0)return i;var o=((t.x-r)*(n-r)+(t.y-s)*(a-s))/h;return i.x=r+o*(n-r),i.y=s+o*(a-s),i};a8.exports=oOe});var u8=l((ket,o8)=>{var uOe=Oe(),lOe=dn(),fOe=$(),dOe=function(e,t){t===void 0&&(t=new fOe);var i=lOe(e)-uOe.TAU;return t.x=Math.cos(i),t.y=Math.sin(i),t};o8.exports=dOe});var f8=l((zet,l8)=>{var vOe=function(e,t){var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=(s-i)*(s-i)+(n-r)*(n-r);if(a===0)return!1;var h=((r-t.y)*(s-i)-(i-t.x)*(n-r))/a;return Math.abs(h)*Math.sqrt(a)};l8.exports=vOe});var v8=l((Yet,d8)=>{var cOe=function(e){return Math.abs(e.y1-e.y2)};d8.exports=cOe});var zg=l((Xet,c8)=>{var pOe=Oe(),mOe=Xr(),gOe=dn(),xOe=function(e){var t=gOe(e)-pOe.TAU;return mOe(t,-Math.PI,Math.PI)};c8.exports=xOe});var m8=l((Vet,p8)=>{var yOe=Oe(),TOe=dn(),EOe=function(e){return Math.cos(TOe(e)-yOe.TAU)};p8.exports=EOe});var x8=l((Wet,g8)=>{var SOe=Oe(),_Oe=dn(),wOe=function(e){return Math.sin(_Oe(e)-SOe.TAU)};g8.exports=wOe});var T8=l((Het,y8)=>{var COe=function(e,t,i){return e.x1+=t,e.y1+=i,e.x2+=t,e.y2+=i,e};y8.exports=COe});var S8=l((Ket,E8)=>{var ROe=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};E8.exports=ROe});var w8=l((Zet,_8)=>{var qOe=dn(),AOe=zg(),POe=function(e,t){return 2*AOe(t)-Math.PI-qOe(e)};_8.exports=POe});var zl=l((Jet,C8)=>{var MOe=function(e,t,i,r){var s=Math.cos(r),n=Math.sin(r),a=e.x1-t,h=e.y1-i;return e.x1=a*s-h*n+t,e.y1=a*n+h*s+i,a=e.x2-t,h=e.y2-i,e.x2=a*s-h*n+t,e.y2=a*n+h*s+i,e};C8.exports=MOe});var q8=l((Qet,R8)=>{var bOe=zl(),LOe=function(e,t){var i=(e.x1+e.x2)/2,r=(e.y1+e.y2)/2;return bOe(e,i,r,t)};R8.exports=LOe});var P8=l(($et,A8)=>{var OOe=zl(),FOe=function(e,t,i){return OOe(e,t.x,t.y,i)};A8.exports=FOe});var b8=l((jet,M8)=>{var DOe=function(e,t,i,r,s){return e.x1=t,e.y1=i,e.x2=t+Math.cos(r)*s,e.y2=i+Math.sin(r)*s,e};M8.exports=DOe});var O8=l((ett,L8)=>{var IOe=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};L8.exports=IOe});var D8=l((ttt,F8)=>{var NOe=function(e){return Math.abs(e.x1-e.x2)};F8.exports=NOe});var N8=l((itt,I8)=>{var de=Ai();de.Angle=dn();de.BresenhamPoints=ev();de.CenterOn=V9();de.Clone=H9();de.CopyFrom=Z9();de.Equals=Q9();de.Extend=j9();de.GetEasedPoints=r8();de.GetMidPoint=n8();de.GetNearestPoint=h8();de.GetNormal=u8();de.GetPoint=Nd();de.GetPoints=go();de.GetShortestDistance=f8();de.Height=v8();de.Length=gr();de.NormalAngle=zg();de.NormalX=m8();de.NormalY=x8();de.Offset=T8();de.PerpSlope=S8();de.Random=xo();de.ReflectAngle=w8();de.Rotate=q8();de.RotateAroundPoint=P8();de.RotateAroundXY=zl();de.SetToAngle=b8();de.Slope=O8();de.Width=D8();I8.exports=de});var Y8=l((rtt,z8)=>{var G8=va(),He=z(),GOe=Er(),k8=pi(),ya=ca(),B8=new k8,U8=new k8,vn=new GOe,BOe=function(e){var t=He(e,"mesh"),i=He(e,"texture",null),r=He(e,"frame"),s=He(e,"width",1),n=He(e,"height",s),a=He(e,"widthSegments",1),h=He(e,"heightSegments",a),o=He(e,"x",0),u=He(e,"y",0),f=He(e,"z",0),d=He(e,"rotateX",0),v=He(e,"rotateY",0),c=He(e,"rotateZ",0),p=He(e,"zIsUp",!0),m=He(e,"isOrtho",t?t.dirtyCache[11]:!1),x=He(e,"colors",[16777215]),g=He(e,"alphas",[1]),y=He(e,"tile",!1),T=He(e,"flipY",!1),S=He(e,"width",null),E={faces:[],verts:[]};if(B8.set(o,u,f),U8.set(d,v,c),vn.fromRotationXYTranslation(U8,B8,p),!i&&t)i=t.texture;else if(t&&typeof i=="string")i=t.scene.sys.textures.get(i);else return E;var _=i.get(r);!S&&m&&i&&t&&(s=_.width/t.height,n=_.height/t.height);var w=s/2,R=n/2,q=Math.floor(a),A=Math.floor(h),P=q+1,L=A+1,b=s/q,G=n/A,M=[],D=[],I,F,O=0,K=1,H=0,Y=1;_&&(O=_.u0,K=_.u1,T?(H=_.v1,Y=_.v0):(H=_.v0,Y=_.v1));var ee=K-O,U=Y-H;for(F=0;F<L;F++){var J=F*G-R;for(I=0;I<P;I++){var st=I*b-w;D.push(st,-J);var ve=O+ee*(I/q),gt=H+U*(F/A);M.push(ve,gt)}}Array.isArray(x)||(x=[x]),Array.isArray(g)||(g=[g]);var _e=0,nt=0;for(F=0;F<A;F++)for(I=0;I<q;I++){var Ze=(I+P*F)*2,te=(I+P*(F+1))*2,Ue=(I+1+P*(F+1))*2,qe=(I+1+P*F)*2,Pt=x[nt],ut=g[_e],oe=new ya(D[Ze],D[Ze+1],0,M[Ze],M[Ze+1],Pt,ut).transformMat4(vn),ke=new ya(D[te],D[te+1],0,M[te],M[te+1],Pt,ut).transformMat4(vn),lt=new ya(D[qe],D[qe+1],0,M[qe],M[qe+1],Pt,ut).transformMat4(vn),X=new ya(D[te],D[te+1],0,M[te],M[te+1],Pt,ut).transformMat4(vn),V=new ya(D[Ue],D[Ue+1],0,M[Ue],M[Ue+1],Pt,ut).transformMat4(vn),Z=new ya(D[qe],D[qe+1],0,M[qe],M[qe+1],Pt,ut).transformMat4(vn);y&&(oe.setUVs(O,Y),ke.setUVs(O,H),lt.setUVs(K,Y),X.setUVs(O,H),V.setUVs(K,H),Z.setUVs(K,Y)),nt++,nt===x.length&&(nt=0),_e++,_e===g.length&&(_e=0),E.verts.push(oe,ke,lt,X,V,Z),E.faces.push(new G8(oe,ke,lt),new G8(X,V,Z))}return t&&(t.faces=t.faces.concat(E.faces),t.vertices=t.vertices.concat(E.verts)),E};z8.exports=BOe});var Xg=l((stt,W8)=>{var X8=!0,V8="untitled",Lh="",Yg="";function UOe(e){var t=e.indexOf("#");return t>-1?e.substring(0,t):e}function bh(e){return e.models.length===0&&e.models.push({faces:[],name:V8,textureCoords:[],vertexNormals:[],vertices:[]}),Lh="",e.models[e.models.length-1]}function kOe(e,t){var i=e.length>=2?e[1]:V8;t.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),Lh=""}function zOe(e){e.length===2&&(Lh=e[1])}function YOe(e,t){var i=e.length,r=i>=2?parseFloat(e[1]):0,s=i>=3?parseFloat(e[2]):0,n=i>=4?parseFloat(e[3]):0;bh(t).vertices.push({x:r,y:s,z:n})}function XOe(e,t){var i=e.length,r=i>=2?parseFloat(e[1]):0,s=i>=3?parseFloat(e[2]):0,n=i>=4?parseFloat(e[3]):0;isNaN(r)&&(r=0),isNaN(s)&&(s=0),isNaN(n)&&(n=0),X8&&(s=1-s),bh(t).textureCoords.push({u:r,v:s,w:n})}function VOe(e,t){var i=e.length,r=i>=2?parseFloat(e[1]):0,s=i>=3?parseFloat(e[2]):0,n=i>=4?parseFloat(e[3]):0;bh(t).vertexNormals.push({x:r,y:s,z:n})}function WOe(e,t){var i=e.length-1;if(!(i<3)){for(var r={group:Lh,material:Yg,vertices:[]},s=0;s<i;s++){var n=e[s+1],a=n.split("/"),h=a.length;if(!(h<1||h>3)){var o=0,u=0,f=0;o=parseInt(a[0],10),h>1&&a[1]!==""&&(u=parseInt(a[1],10)),h>2&&(f=parseInt(a[2],10)),o!==0&&(o<0&&(o=bh(t).vertices.length+1+o),u-=1,o-=1,f-=1,r.vertices.push({textureCoordsIndex:u,vertexIndex:o,vertexNormalIndex:f}))}}bh(t).faces.push(r)}}function HOe(e,t){e.length>=2&&t.materialLibraries.push(e[1])}function KOe(e){e.length>=2&&(Yg=e[1])}var ZOe=function(e,t){t===void 0&&(t=!0),X8=t;var i={materials:{},materialLibraries:[],models:[]};Lh="",Yg="";for(var r=e.split(`
`),s=0;s<r.length;s++){var n=UOe(r[s]),a=n.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"o":kOe(a,i);break;case"g":zOe(a);break;case"v":YOe(a,i);break;case"vt":XOe(a,i);break;case"vn":VOe(a,i);break;case"f":WOe(a,i);break;case"mtllib":HOe(a,i);break;case"usemtl":KOe(a);break}}return i};W8.exports=ZOe});var Vg=l((ntt,H8)=>{var JOe=qn(),QOe=function(e){for(var t={},i=e.split(`
`),r="",s=0;s<i.length;s++){var n=i[s].trim();if(!(n.indexOf("#")===0||n==="")){var a=n.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":{r=a[1];break}case"kd":{var h=Math.floor(a[1]*255),o=a.length>=2?Math.floor(a[2]*255):h,u=a.length>=3?Math.floor(a[3]*255):h;t[r]=JOe(h,o,u);break}}}}return t};H8.exports=QOe});var Z8=l((att,K8)=>{var $Oe=function(e,t,i,r){var s,n;if(i===void 0&&r===void 0){var a=e.getInCenter();s=a.x,n=a.y}var h=Math.cos(t),o=Math.sin(t),u=e.vertex1,f=e.vertex2,d=e.vertex3,v=u.x-s,c=u.y-n;u.set(v*h-c*o+s,v*o+c*h+n),v=f.x-s,c=f.y-n,f.set(v*h-c*o+s,v*o+c*h+n),v=d.x-s,c=d.y-n,d.set(v*h-c*o+s,v*o+c*h+n)};K8.exports=$Oe});var Q8=l((htt,J8)=>{var jOe={Face:va(),GenerateGridVerts:Y8(),GenerateObjVerts:vg(),GenerateVerts:fg(),ParseObj:Xg(),ParseObjMaterial:Vg(),RotateFace:Z8(),Vertex:ca()};J8.exports=jOe});var j8=l((ott,$8)=>{var eFe=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};$8.exports=eFe});var t7=l((utt,e7)=>{var tFe=$(),iFe=function(e){return new tFe(e.x,e.y)};e7.exports=iFe});var r7=l((ltt,i7)=>{var rFe=function(e,t){return t.setTo(e.x,e.y)};i7.exports=rFe});var n7=l((ftt,s7)=>{var sFe=function(e,t){return e.x===t.x&&e.y===t.y};s7.exports=sFe});var h7=l((dtt,a7)=>{var nFe=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};a7.exports=nFe});var u7=l((vtt,o7)=>{var aFe=$(),hFe=function(e,t){if(t===void 0&&(t=new aFe),!Array.isArray(e))throw new Error("GetCentroid points argument must be an array");var i=e.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(i===1)t.x=e[0].x,t.y=e[0].y;else{for(var r=0;r<i;r++)t.x+=e[r].x,t.y+=e[r].y;t.x/=i,t.y/=i}return t};o7.exports=hFe});var Wg=l((ctt,l7)=>{var oFe=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};l7.exports=oFe});var Hg=l((ptt,f7)=>{var uFe=function(e){return e.x*e.x+e.y*e.y};f7.exports=uFe});var v7=l((mtt,d7)=>{var lFe=Ae(),fFe=function(e,t){t===void 0&&(t=new lFe);for(var i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,a=0;a<e.length;a++){var h=e[a];h.x>i&&(i=h.x),h.x<r&&(r=h.x),h.y>s&&(s=h.y),h.y<n&&(n=h.y)}return t.x=r,t.y=n,t.width=i-r,t.height=s-n,t};d7.exports=fFe});var p7=l((gtt,c7)=>{var dFe=$(),vFe=function(e,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=new dFe),r.x=e.x+(t.x-e.x)*i,r.y=e.y+(t.y-e.y)*i,r};c7.exports=vFe});var g7=l((xtt,m7)=>{var cFe=function(e){return e.setTo(e.y,e.x)};m7.exports=cFe});var y7=l((ytt,x7)=>{var pFe=$(),mFe=function(e,t){return t===void 0&&(t=new pFe),t.setTo(-e.x,-e.y)};x7.exports=mFe});var E7=l((Ttt,T7)=>{var gFe=$(),xFe=Hg(),yFe=function(e,t,i){i===void 0&&(i=new gFe);var r=e.x*t.x+e.y*t.y,s=r/xFe(t);return s!==0&&(i.x=s*t.x,i.y=s*t.y),i};T7.exports=yFe});var _7=l((Ett,S7)=>{var TFe=$(),EFe=function(e,t,i){i===void 0&&(i=new TFe);var r=e.x*t.x+e.y*t.y;return r!==0&&(i.x=r*t.x,i.y=r*t.y),i};S7.exports=EFe});var C7=l((Stt,w7)=>{var SFe=Wg(),_Fe=function(e,t){if(e.x!==0||e.y!==0){var i=SFe(e);e.x/=i,e.y/=i}return e.x*=t,e.y*=t,e};w7.exports=_Fe});var q7=l((_tt,R7)=>{var Rt=$();Rt.Ceil=j8();Rt.Clone=t7();Rt.CopyFrom=r7();Rt.Equals=n7();Rt.Floor=h7();Rt.GetCentroid=u7();Rt.GetMagnitude=Wg();Rt.GetMagnitudeSq=Hg();Rt.GetRectangleFromPoints=v7();Rt.Interpolate=p7();Rt.Invert=g7();Rt.Negative=y7();Rt.Project=E7();Rt.ProjectUnit=_7();Rt.SetMagnitude=C7();R7.exports=Rt});var P7=l((wtt,A7)=>{var wFe=wl(),CFe=function(e){return new wFe(e.points)};A7.exports=CFe});var b7=l((Ctt,M7)=>{var RFe=_l(),qFe=function(e,t){return RFe(e,t.x,t.y)};M7.exports=qFe});var O7=l((Rtt,L7)=>{var AFe=function(e,t){t===void 0&&(t=[]);for(var i=0;i<e.points.length;i++)t.push(e.points[i].x),t.push(e.points[i].y);return t};L7.exports=AFe});var D7=l((qtt,F7)=>{var PFe=function(e){return e.points.reverse(),e};F7.exports=PFe});var N7=l((Att,I7)=>{function MFe(e,t){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r}function bFe(e,t,i){var r=t.x,s=t.y,n=i.x-r,a=i.y-s;if(n!==0||a!==0){var h=((e.x-r)*n+(e.y-s)*a)/(n*n+a*a);h>1?(r=i.x,s=i.y):h>0&&(r+=n*h,s+=a*h)}return n=e.x-r,a=e.y-s,n*n+a*a}function LFe(e,t){for(var i=e[0],r=[i],s,n=1,a=e.length;n<a;n++)s=e[n],MFe(s,i)>t&&(r.push(s),i=s);return i!==s&&r.push(s),r}function Kg(e,t,i,r,s){for(var n=r,a,h=t+1;h<i;h++){var o=bFe(e[h],e[t],e[i]);o>n&&(a=h,n=o)}n>r&&(a-t>1&&Kg(e,t,a,r,s),s.push(e[a]),i-a>1&&Kg(e,a,i,r,s))}function OFe(e,t){var i=e.length-1,r=[e[0]];return Kg(e,0,i,t,r),r.push(e[i]),r}var FFe=function(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);var r=e.points;if(r.length>2){var s=t*t;i||(r=LFe(r,s)),e.setTo(OFe(r,s))}return e};I7.exports=FFe});var B7=l((Ptt,G7)=>{var DFe=function(e,t,i){for(var r=e.points,s=0;s<r.length;s++)r[s].x+=t,r[s].y+=i;return e};G7.exports=DFe});var k7=l((Mtt,U7)=>{var hi=wl();hi.Clone=P7();hi.Contains=_l();hi.ContainsPoint=b7();hi.Earcut=$i();hi.GetAABB=Xm();hi.GetNumberArray=O7();hi.GetPoints=Wm();hi.Perimeter=Vm();hi.Reverse=D7();hi.Simplify=N7();hi.Smooth=Hm();hi.Translate=B7();U7.exports=hi});var Y7=l((btt,z7)=>{var IFe=function(e){return e.width*e.height};z7.exports=IFe});var V7=l((Ltt,X7)=>{var NFe=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};X7.exports=NFe});var H7=l((Ott,W7)=>{var GFe=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};W7.exports=GFe});var Z7=l((Ftt,K7)=>{var BFe=Ae(),UFe=function(e){return new BFe(e.x,e.y,e.width,e.height)};K7.exports=UFe});var Q7=l((Dtt,J7)=>{var kFe=Yr(),zFe=function(e,t){return kFe(e,t.x,t.y)};J7.exports=zFe});var Zg=l((Itt,$7)=>{var YFe=function(e,t){return t.width*t.height>e.width*e.height?!1:t.x>e.x&&t.x<e.right&&t.right>e.x&&t.right<e.right&&t.y>e.y&&t.y<e.bottom&&t.bottom>e.y&&t.bottom<e.bottom};$7.exports=YFe});var eK=l((Ntt,j7)=>{var XFe=function(e,t){return t.setTo(e.x,e.y,e.width,e.height)};j7.exports=XFe});var iK=l((Gtt,tK)=>{var VFe=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};tK.exports=VFe});var Yl=l((Btt,rK)=>{var WFe=function(e){return e.height===0?NaN:e.width/e.height};rK.exports=WFe});var aK=l((Utt,nK)=>{var sK=Yl(),HFe=function(e,t){var i=sK(e);return i<sK(t)?e.setSize(t.height*i,t.height):e.setSize(t.width,t.width/i),e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)};nK.exports=HFe});var uK=l((ktt,oK)=>{var hK=Yl(),KFe=function(e,t){var i=hK(e);return i>hK(t)?e.setSize(t.height*i,t.height):e.setSize(t.width,t.width/i),e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)};oK.exports=KFe});var fK=l((ztt,lK)=>{var ZFe=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};lK.exports=ZFe});var vK=l((Ytt,dK)=>{var JFe=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};dK.exports=JFe});var mK=l((Xtt,pK)=>{var QFe=Ae(),cK=Oe(),$Fe=function(e,t){if(t===void 0&&(t=new QFe),e.length===0)return t;for(var i=Number.MAX_VALUE,r=Number.MAX_VALUE,s=cK.MIN_SAFE_INTEGER,n=cK.MIN_SAFE_INTEGER,a,h,o,u=0;u<e.length;u++)a=e[u],Array.isArray(a)?(h=a[0],o=a[1]):(h=a.x,o=a.y),i=Math.min(i,h),r=Math.min(r,o),s=Math.max(s,h),n=Math.max(n,o);return t.x=i,t.y=r,t.width=s-i,t.height=n-r,t};pK.exports=$Fe});var xK=l((Vtt,gK)=>{var jFe=Ae(),e2e=function(e,t,i,r,s){return s===void 0&&(s=new jFe),s.setTo(Math.min(e,i),Math.min(t,r),Math.abs(e-i),Math.abs(t-r))};gK.exports=e2e});var TK=l((Wtt,yK)=>{var t2e=$(),i2e=function(e,t){return t===void 0&&(t=new t2e),t.x=e.centerX,t.y=e.centerY,t};yK.exports=i2e});var SK=l((Htt,EK)=>{var r2e=$(),s2e=function(e,t){return t===void 0&&(t=new r2e),t.x=e.width,t.y=e.height,t};EK.exports=s2e});var wK=l((Ktt,_K)=>{var n2e=Bo(),a2e=function(e,t,i){var r=e.centerX,s=e.centerY;return e.setSize(e.width+t*2,e.height+i*2),n2e(e,r,s)};_K.exports=a2e});var RK=l((Ztt,CK)=>{var h2e=Ae(),o2e=Mh(),u2e=function(e,t,i){return i===void 0&&(i=new h2e),o2e(e,t)?(i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i.width=Math.min(e.right,t.right)-i.x,i.height=Math.min(e.bottom,t.bottom)-i.y):i.setEmpty(),i};CK.exports=u2e});var AK=l((Jtt,qK)=>{var l2e=function(e,t){for(var i=e.x,r=e.right,s=e.y,n=e.bottom,a=0;a<t.length;a++)i=Math.min(i,t[a].x),r=Math.max(r,t[a].x),s=Math.min(s,t[a].y),n=Math.max(n,t[a].y);return e.x=i,e.y=s,e.width=r-i,e.height=n-s,e};qK.exports=l2e});var MK=l((Qtt,PK)=>{var f2e=function(e,t){var i=Math.min(e.x,t.x),r=Math.max(e.right,t.right);e.x=i,e.width=r-i;var s=Math.min(e.y,t.y),n=Math.max(e.bottom,t.bottom);return e.y=s,e.height=n-s,e};PK.exports=f2e});var LK=l(($tt,bK)=>{var d2e=function(e,t,i){var r=Math.min(e.x,t),s=Math.max(e.right,t);e.x=r,e.width=s-r;var n=Math.min(e.y,i),a=Math.max(e.bottom,i);return e.y=n,e.height=a-n,e};bK.exports=d2e});var FK=l((jtt,OK)=>{var v2e=function(e,t,i){return e.x+=t,e.y+=i,e};OK.exports=v2e});var IK=l((eit,DK)=>{var c2e=function(e,t){return e.x+=t.x,e.y+=t.y,e};DK.exports=c2e});var GK=l((tit,NK)=>{var p2e=function(e,t){return e.x<t.right&&e.right>t.x&&e.y<t.bottom&&e.bottom>t.y};NK.exports=p2e});var UK=l((iit,BK)=>{var m2e=$(),g2e=yr(),x2e=function(e,t,i){i===void 0&&(i=new m2e),t=g2e(t);var r=Math.sin(t),s=Math.cos(t),n=s>0?e.width/2:e.width/-2,a=r>0?e.height/2:e.height/-2;return Math.abs(n*r)<Math.abs(a*s)?a=n*r/s:n=a*s/r,i.x=n+e.centerX,i.y=a+e.centerY,i};BK.exports=x2e});var zK=l((rit,kK)=>{var y2e=$o(),T2e=Zg(),E2e=$(),S2e=function(e,t,i){if(i===void 0&&(i=new E2e),T2e(e,t))switch(y2e(0,3)){case 0:i.x=e.x+Math.random()*(t.right-e.x),i.y=e.y+Math.random()*(t.top-e.y);break;case 1:i.x=t.x+Math.random()*(e.right-t.x),i.y=t.bottom+Math.random()*(e.bottom-t.bottom);break;case 2:i.x=e.x+Math.random()*(t.x-e.x),i.y=t.y+Math.random()*(e.bottom-t.y);break;case 3:i.x=t.right+Math.random()*(e.right-t.right),i.y=e.y+Math.random()*(t.bottom-e.y);break}return i};kK.exports=S2e});var XK=l((sit,YK)=>{var _2e=function(e,t){return e.width===t.width&&e.height===t.height};YK.exports=_2e});var WK=l((nit,VK)=>{var w2e=function(e,t,i){return i===void 0&&(i=t),e.width*=t,e.height*=i,e};VK.exports=w2e});var KK=l((ait,HK)=>{var j=Ae();j.Area=Y7();j.Ceil=V7();j.CeilAll=H7();j.CenterOn=Bo();j.Clone=Z7();j.Contains=Yr();j.ContainsPoint=Q7();j.ContainsRect=Zg();j.CopyFrom=eK();j.Decompose=qg();j.Equals=iK();j.FitInside=aK();j.FitOutside=uK();j.Floor=fK();j.FloorAll=vK();j.FromPoints=mK();j.FromXY=xK();j.GetAspectRatio=Yl();j.GetCenter=TK();j.GetPoint=mo();j.GetPoints=Id();j.GetSize=SK();j.Inflate=wK();j.Intersection=RK();j.MarchingAnts=jd();j.MergePoints=AK();j.MergeRect=MK();j.MergeXY=LK();j.Offset=FK();j.OffsetPoint=IK();j.Overlaps=GK();j.Perimeter=Ia();j.PerimeterPoint=UK();j.Random=To();j.RandomOutside=zK();j.SameDimensions=XK();j.Scale=WK();j.Union=am();HK.exports=j});var JK=l((hit,ZK)=>{var C2e=function(e){var t=e.x1,i=e.y1,r=e.x2,s=e.y2,n=e.x3,a=e.y3;return Math.abs(((n-t)*(s-i)-(r-t)*(a-i))/2)};ZK.exports=C2e});var $K=l((oit,QK)=>{var R2e=Es(),q2e=function(e,t,i){var r=i*(Math.sqrt(3)/2),s=e,n=t,a=e+i/2,h=t+r,o=e-i/2,u=t+r;return new R2e(s,n,a,h,o,u)};QK.exports=q2e});var eZ=l((uit,jK)=>{var A2e=$i(),P2e=Es(),M2e=function(e,t,i,r,s){t===void 0&&(t=null),i===void 0&&(i=1),r===void 0&&(r=1),s===void 0&&(s=[]);for(var n=A2e(e,t),a,h,o,u,f,d,v,c,p,m=0;m<n.length;m+=3)a=n[m],h=n[m+1],o=n[m+2],u=e[a*2]*i,f=e[a*2+1]*r,d=e[h*2]*i,v=e[h*2+1]*r,c=e[o*2]*i,p=e[o*2+1]*r,s.push(new P2e(u,f,d,v,c,p));return s};jK.exports=M2e});var iZ=l((lit,tZ)=>{var b2e=Es(),L2e=function(e,t,i,r){r===void 0&&(r=i);var s=e,n=t,a=e,h=t-r,o=e+i,u=t;return new b2e(s,n,a,h,o,u)};tZ.exports=L2e});var Jg=l((fit,rZ)=>{var O2e=$(),F2e=function(e,t){return t===void 0&&(t=new O2e),t.x=(e.x1+e.x2+e.x3)/3,t.y=(e.y1+e.y2+e.y3)/3,t};rZ.exports=F2e});var Qg=l((dit,sZ)=>{var D2e=function(e,t,i){return e.x1+=t,e.y1+=i,e.x2+=t,e.y2+=i,e.x3+=t,e.y3+=i,e};sZ.exports=D2e});var aZ=l((vit,nZ)=>{var I2e=Jg(),N2e=Qg(),G2e=function(e,t,i,r){r===void 0&&(r=I2e);var s=r(e),n=t-s.x,a=i-s.y;return N2e(e,n,a)};nZ.exports=G2e});var oZ=l((cit,hZ)=>{var B2e=xe();function $g(e,t,i,r){return e*r-t*i}var U2e=function(e,t){t===void 0&&(t=new B2e);var i=e.x3,r=e.y3,s=e.x1-i,n=e.y1-r,a=e.x2-i,h=e.y2-r,o=2*$g(s,n,a,h),u=$g(n,s*s+n*n,h,a*a+h*h),f=$g(s,s*s+n*n,a,a*a+h*h);return t.x=i-u/o,t.y=r+f/o,t};hZ.exports=U2e});var lZ=l((pit,uZ)=>{var k2e=zr(),z2e=function(e,t){t===void 0&&(t=new k2e);var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=e.x3,h=e.y3,o=s-i,u=n-r,f=a-i,d=h-r,v=o*(i+s)+u*(r+n),c=f*(i+a)+d*(r+h),p=2*(o*(h-n)-u*(a-s)),m,x;if(Math.abs(p)<1e-6){var g=Math.min(i,s,a),y=Math.min(r,n,h);m=(Math.max(i,s,a)-g)*.5,x=(Math.max(r,n,h)-y)*.5,t.x=g+m,t.y=y+x,t.radius=Math.sqrt(m*m+x*x)}else t.x=(d*v-u*c)/p,t.y=(o*c-f*v)/p,m=t.x-i,x=t.y-r,t.radius=Math.sqrt(m*m+x*x);return t};uZ.exports=z2e});var dZ=l((mit,fZ)=>{var Y2e=Es(),X2e=function(e){return new Y2e(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};fZ.exports=X2e});var cZ=l((git,vZ)=>{var V2e=la(),W2e=function(e,t){return V2e(e,t.x,t.y)};vZ.exports=W2e});var mZ=l((xit,pZ)=>{var H2e=function(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};pZ.exports=H2e});var xZ=l((yit,gZ)=>{var K2e=function(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2&&e.x3===t.x3&&e.y3===t.y3};gZ.exports=K2e});var e0=l((Tit,yZ)=>{var Z2e=$();function jg(e,t,i,r){var s=e-i,n=t-r,a=s*s+n*n;return Math.sqrt(a)}var J2e=function(e,t){t===void 0&&(t=new Z2e);var i=e.x1,r=e.y1,s=e.x2,n=e.y2,a=e.x3,h=e.y3,o=jg(a,h,s,n),u=jg(i,r,a,h),f=jg(s,n,i,r),d=o+u+f;return t.x=(i*o+s*u+a*f)/d,t.y=(r*o+n*u+h*f)/d,t};yZ.exports=J2e});var EZ=l((Eit,TZ)=>{var t0=gr(),Q2e=function(e){var t=e.getLineA(),i=e.getLineB(),r=e.getLineC();return t0(t)+t0(i)+t0(r)};TZ.exports=Q2e});var Xl=l((Sit,SZ)=>{var $2e=function(e,t,i,r){var s=Math.cos(r),n=Math.sin(r),a=e.x1-t,h=e.y1-i;return e.x1=a*s-h*n+t,e.y1=a*n+h*s+i,a=e.x2-t,h=e.y2-i,e.x2=a*s-h*n+t,e.y2=a*n+h*s+i,a=e.x3-t,h=e.y3-i,e.x3=a*s-h*n+t,e.y3=a*n+h*s+i,e};SZ.exports=$2e});var wZ=l((_it,_Z)=>{var j2e=Xl(),eDe=e0(),tDe=function(e,t){var i=eDe(e);return j2e(e,i.x,i.y,t)};_Z.exports=tDe});var RZ=l((wit,CZ)=>{var iDe=Xl(),rDe=function(e,t,i){return iDe(e,t.x,t.y,i)};CZ.exports=rDe});var AZ=l((Cit,qZ)=>{var Re=Es();Re.Area=JK();Re.BuildEquilateral=$K();Re.BuildFromPolygon=eZ();Re.BuildRight=iZ();Re.CenterOn=aZ();Re.Centroid=Jg();Re.CircumCenter=oZ();Re.CircumCircle=lZ();Re.Clone=dZ();Re.Contains=la();Re.ContainsArray=kl();Re.ContainsPoint=cZ();Re.CopyFrom=mZ();Re.Decompose=Gg();Re.Equals=xZ();Re.GetPoint=$m();Re.GetPoints=eg();Re.InCenter=e0();Re.Perimeter=EZ();Re.Offset=Qg();Re.Random=Mo();Re.Rotate=wZ();Re.RotateAroundPoint=RZ();Re.RotateAroundXY=Xl();qZ.exports=Re});var MZ=l((Rit,PZ)=>{var sDe=Ki(),nDe=ze(),i0={Circle:M6(),Ellipse:J6(),Intersects:z9(),Line:N8(),Mesh:Q8(),Point:q7(),Polygon:k7(),Rectangle:KK(),Triangle:AZ()};i0=nDe(!1,i0,sDe);PZ.exports=i0});var r0=l((qit,bZ)=>{var aDe=function(e,t){return function(i,r,s,n){var a=e.getPixelAlpha(r,s,n.texture.key,n.frame.name);return a&&a>=t}};bZ.exports=aDe});var s0=l((Ait,LZ)=>{var hDe=function(e,t,i){return{gameObject:e,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:t,hitAreaCallback:i,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};LZ.exports=hDe});var n0=l((Pit,OZ)=>{var oDe=C(),uDe=new oDe({initialize:function(t,i){this.pad=t,this.events=t.events,this.index=i,this.value=0,this.threshold=.1},update:function(e){this.value=e},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});OZ.exports=uDe});var DZ=l((Mit,FZ)=>{FZ.exports="down"});var NZ=l((bit,IZ)=>{IZ.exports="up"});var BZ=l((Lit,GZ)=>{GZ.exports="connected"});var kZ=l((Oit,UZ)=>{UZ.exports="disconnected"});var YZ=l((Fit,zZ)=>{zZ.exports="down"});var VZ=l((Dit,XZ)=>{XZ.exports="up"});var Vl=l((Iit,WZ)=>{WZ.exports={BUTTON_DOWN:DZ(),BUTTON_UP:NZ(),CONNECTED:BZ(),DISCONNECTED:kZ(),GAMEPAD_BUTTON_DOWN:YZ(),GAMEPAD_BUTTON_UP:VZ()}});var a0=l((Nit,HZ)=>{var lDe=C(),Wl=Vl(),fDe=new lDe({initialize:function(t,i){this.pad=t,this.events=t.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function(e){this.value=e;var t=this.pad,i=this.index;e>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(Wl.BUTTON_DOWN,t,this,e),this.pad.emit(Wl.GAMEPAD_BUTTON_DOWN,i,e,this)):this.pressed&&(this.pressed=!1,this.events.emit(Wl.BUTTON_UP,t,this,e),this.pad.emit(Wl.GAMEPAD_BUTTON_UP,i,e,this))},destroy:function(){this.pad=null,this.events=null}});HZ.exports=fDe});var h0=l((Git,JZ)=>{var dDe=n0(),vDe=a0(),cDe=C(),KZ=ue(),ZZ=xe(),pDe=new cDe({Extends:KZ,initialize:function(t,i){KZ.call(this),this.manager=t,this.pad=i,this.id=i.id,this.index=i.index;for(var r=[],s=0;s<i.buttons.length;s++)r.push(new vDe(this,s));this.buttons=r;var n=[];for(s=0;s<i.axes.length;s++)n.push(new dDe(this,s));this.axes=n,this.vibration=i.vibrationActuator;var a={value:0,pressed:!1};this._LCLeft=r[14]?r[14]:a,this._LCRight=r[15]?r[15]:a,this._LCTop=r[12]?r[12]:a,this._LCBottom=r[13]?r[13]:a,this._RCLeft=r[2]?r[2]:a,this._RCRight=r[1]?r[1]:a,this._RCTop=r[3]?r[3]:a,this._RCBottom=r[0]?r[0]:a,this._FBLeftTop=r[4]?r[4]:a,this._FBLeftBottom=r[6]?r[6]:a,this._FBRightTop=r[5]?r[5]:a,this._FBRightBottom=r[7]?r[7]:a;var h={value:0};this._HAxisLeft=n[0]?n[0]:h,this._VAxisLeft=n[1]?n[1]:h,this._HAxisRight=n[2]?n[2]:h,this._VAxisRight=n[3]?n[3]:h,this.leftStick=new ZZ,this.rightStick=new ZZ,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(e){return this.axes[e].getValue()},setAxisThreshold:function(e){for(var t=0;t<this.axes.length;t++)this.axes[t].threshold=e},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(e){return this.buttons[e].value},isButtonDown:function(e){return this.buttons[e].pressed},update:function(e){if(!(e.timestamp<this._created)){var t,i=this.buttons,r=e.buttons,s=i.length;for(t=0;t<s;t++)i[t].update(r[t].value);var n=this.axes,a=e.axes;for(s=n.length,t=0;t<s;t++)n[t].update(a[t]);s>=2&&(this.leftStick.set(n[0].getValue(),n[1].getValue()),s>=4&&this.rightStick.set(n[2].getValue(),n[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var e;for(e=0;e<this.buttons.length;e++)this.buttons[e].destroy();for(e=0;e<this.axes.length;e++)this.axes[e].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});JZ.exports=pDe});var Fh=l((Bit,QZ)=>{var mDe=he(),Fr={},Oh={};Oh.register=function(e,t,i,r,s){Fr[e]={plugin:t,mapping:i,settingsKey:r,configKey:s}};Oh.getPlugin=function(e){return Fr[e]};Oh.install=function(e){var t=e.scene.sys,i=t.settings.input,r=t.game.config;for(var s in Fr){var n=Fr[s].plugin,a=Fr[s].mapping,h=Fr[s].settingsKey,o=Fr[s].configKey;mDe(i,h,r[o])&&(e[a]=new n(e))}};Oh.remove=function(e){Fr.hasOwnProperty(e)&&delete Fr[e]};QZ.exports=Oh});var sJ=l((Uit,rJ)=>{var gDe=C(),$Z=ue(),jZ=Vl(),eJ=h0(),tJ=he(),xDe=Fh(),Ta=ji(),iJ=new gDe({Extends:$Z,initialize:function(t){$Z.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(Ta.BOOT,this.boot,this),t.pluginEvents.on(Ta.START,this.start,this)},boot:function(){var e=this.scene.sys.game,t=this.settings.input,i=e.config;this.enabled=tJ(t,"gamepad",i.inputGamepad)&&e.device.input.gamepads,this.target=tJ(t,"gamepad.target",i.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(Ta.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(Ta.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var e=this,t=this.target,i=function(r){r.defaultPrevented||!e.isActive()||(e.refreshPads(),e.queue.push(r))};this.onGamepadHandler=i,t.addEventListener("gamepadconnected",i,!1),t.addEventListener("gamepaddisconnected",i,!1),this.sceneInputPlugin.pluginEvents.on(Ta.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(Ta.UPDATE,this.update);for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].removeAllListeners()},disconnectAll:function(){for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].pad.connected=!1},refreshPads:function(){var e=navigator.getGamepads();if(!e)this.disconnectAll();else for(var t=this.gamepads,i=0;i<e.length;i++){var r=e[i];if(!!r){var s=r.id,n=r.index,a=t[n];if(a)a.id!==s?(a.destroy(),t[n]=new eJ(this,r)):a.update(r);else{var h=new eJ(this,r);t[n]=h,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=h):this._pad3=h:this._pad2=h:this._pad1=h}}}},getAll:function(){for(var e=[],t=this.gamepads,i=0;i<t.length;i++)t[i]&&e.push(t[i]);return e},getPad:function(e){for(var t=this.gamepads,i=0;i<t.length;i++)if(t[i]&&t[i].index===e)return t[i]},update:function(){if(!!this.enabled){this.refreshPads();var e=this.queue.length;if(e!==0)for(var t=this.queue.splice(0,e),i=0;i<e;i++){var r=t[i],s=this.getPad(r.gamepad.index);r.type==="gamepadconnected"?this.emit(jZ.CONNECTED,s,r):r.type==="gamepaddisconnected"&&this.emit(jZ.DISCONNECTED,s,r)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var e=0;e<this.gamepads.length;e++)this.gamepads[e]&&this.gamepads[e].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});xDe.register("GamepadPlugin",iJ,"gamepad","gamepad","inputGamepad");rJ.exports=iJ});var aJ=l((kit,nJ)=>{nJ.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}});var oJ=l((zit,hJ)=>{hJ.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}});var lJ=l((Yit,uJ)=>{uJ.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}});var dJ=l((Xit,fJ)=>{fJ.exports={DUALSHOCK_4:aJ(),SNES_USB:oJ(),XBOX_360:lJ()}});var cJ=l((Vit,vJ)=>{vJ.exports={Axis:n0(),Button:a0(),Events:Vl(),Gamepad:h0(),GamepadPlugin:sJ(),Configs:dJ()}});var TJ=l((Wit,yJ)=>{var yDe=zr(),TDe=kr(),EDe=C(),_s=Cu(),pJ=s0(),SDe=r0(),_De=Wr(),wDe=sa(),CDe=ra(),W=ji(),o0=ue(),ws=z(),Ea=Ki(),RDe=Fh(),qDe=ae(),ADe=vt(),mJ=Ae(),gJ=Yr(),Kt=Ne(),PDe=Es(),MDe=la(),xJ=new EDe({Extends:o0,initialize:function(t){o0.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new o0,this.enabled=!0,this.displayList,this.cameras,RDe.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var i={cancelled:!1};this._eventContainer={stopPropagation:function(){i.cancelled=!0}},this._eventData=i,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(Kt.BOOT,this.boot,this),t.sys.events.on(Kt.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(Kt.DESTROY,this.destroy,this),this.pluginEvents.emit(W.BOOT)},start:function(){var e=this.systems.events;e.on(Kt.TRANSITION_START,this.transitionIn,this),e.on(Kt.TRANSITION_OUT,this.transitionOut,this),e.on(Kt.TRANSITION_COMPLETE,this.transitionComplete,this),e.on(Kt.PRE_UPDATE,this.preUpdate,this),e.once(Kt.SHUTDOWN,this.shutdown,this),this.manager.events.on(W.GAME_OUT,this.onGameOut,this),this.manager.events.on(W.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(W.START)},onGameOver:function(e){this.isActive()&&this.emit(W.GAME_OVER,e.timeStamp,e)},onGameOut:function(e){this.isActive()&&this.emit(W.GAME_OUT,e.timeStamp,e)},preUpdate:function(){this.pluginEvents.emit(W.PRE_UPDATE);var e=this._pendingRemoval,t=this._pendingInsertion,i=e.length,r=t.length;if(!(i===0&&r===0)){for(var s=this._list,n=0;n<i;n++){var a=e[n],h=s.indexOf(a);h>-1&&(s.splice(h,1),this.clear(a,!0))}e.length=0,this._pendingRemoval.length=0,this._list=s.concat(t.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(e,t){if(!this.isActive())return!1;if(this.pluginEvents.emit(W.UPDATE,e,t),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var i,r=this.manager,s=r.pointers,n=r.pointersTotal;for(i=0;i<n;i++)s[i].updateMotion();if(this._list.length===0)return!1;var a=this.pollRate;if(a===-1)return!1;if(a>0)if(this._pollTimer-=t,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var h=!1;for(i=0;i<n;i++){var o=0,u=s[i];this._tempZones=[],this._temp=this.hitTestPointer(u),this.sortGameObjects(this._temp,u),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),o+=this.processOverOutEvents(u),this.getDragState(u)===2&&this.processDragThresholdEvent(u,e),o>0&&(h=!0)}return h},update:function(e,t){if(!this.isActive())return!1;for(var i=t.length,r=!1,s=0;s<i;s++){var n=0,a=t[s];switch(this._tempZones=[],this._temp=this.hitTestPointer(a),this.sortGameObjects(this._temp,a),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),e){case _s.MOUSE_DOWN:n+=this.processDragDownEvent(a),n+=this.processDownEvents(a),n+=this.processOverOutEvents(a);break;case _s.MOUSE_UP:n+=this.processDragUpEvent(a),n+=this.processUpEvents(a),n+=this.processOverOutEvents(a);break;case _s.TOUCH_START:n+=this.processDragDownEvent(a),n+=this.processDownEvents(a),n+=this.processOverEvents(a);break;case _s.TOUCH_END:case _s.TOUCH_CANCEL:n+=this.processDragUpEvent(a),n+=this.processUpEvents(a),n+=this.processOutEvents(a);break;case _s.MOUSE_MOVE:case _s.TOUCH_MOVE:n+=this.processDragMoveEvent(a),n+=this.processMoveEvents(a),n+=this.processOverOutEvents(a);break;case _s.MOUSE_WHEEL:n+=this.processWheelEvent(a);break}n>0&&(r=!0)}return this._updatedThisFrame=!0,r},clear:function(e,t){t===void 0&&(t=!1);var i=e.input;if(!!i){t||this.queueForRemoval(e),i.gameObject=void 0,i.target=void 0,i.hitArea=void 0,i.hitAreaCallback=void 0,i.callbackContext=void 0,e.input=null;var r=this._draggable.indexOf(e);return r>-1&&this._draggable.splice(r,1),r=this._drag[0].indexOf(e),r>-1&&this._drag[0].splice(r,1),r=this._over[0].indexOf(e),r>-1&&(this._over[0].splice(r,1),this.manager.resetCursor(i)),e}},disable:function(e){e.input.enabled=!1},enable:function(e,t,i,r){return r===void 0&&(r=!1),e.input?e.input.enabled=!0:this.setHitArea(e,t,i),e.input&&r&&!e.input.dropZone&&(e.input.dropZone=r),this},hitTestPointer:function(e){for(var t=this.cameras.getCamerasBelowPointer(e),i=0;i<t.length;i++){for(var r=t[i],s=this.manager.hitTest(e,this._list,r),n=0;n<s.length;n++){var a=s[n];a.input.dropZone&&this._tempZones.push(a)}if(s.length>0)return e.camera=r,s}return e.camera=t[0],[]},processDownEvents:function(e){var t=0,i=this._temp,r=this._eventData,s=this._eventContainer;r.cancelled=!1;for(var n=!1,a=0;a<i.length;a++){var h=i[a];if(!!h.input){if(t++,h.emit(W.GAMEOBJECT_POINTER_DOWN,e,h.input.localX,h.input.localY,s),r.cancelled||!h.input){n=!0;break}if(this.emit(W.GAMEOBJECT_DOWN,e,h,s),r.cancelled||!h.input){n=!0;break}}}return!n&&this.manager&&(e.downElement===this.manager.game.canvas?this.emit(W.POINTER_DOWN,e,i):this.emit(W.POINTER_DOWN_OUTSIDE,e)),t},getDragState:function(e){return this._dragState[e.id]},setDragState:function(e,t){this._dragState[e.id]=t},processDragThresholdEvent:function(e,t){var i=!1,r=this.dragTimeThreshold,s=this.dragDistanceThreshold;if((s>0&&_De(e.x,e.y,e.downX,e.downY)>=s||r>0&&t>=e.downTime+r)&&(i=!0),i)return this.setDragState(e,3),this.processDragStartList(e)},processDragStartList:function(e){if(this.getDragState(e)!==3)return 0;for(var t=this._drag[e.id],i=0;i<t.length;i++){var r=t[i],s=r.input;s.dragState=2,s.dragStartX=r.x,s.dragStartY=r.y,s.dragStartXGlobal=e.worldX,s.dragStartYGlobal=e.worldY,s.dragX=s.dragStartXGlobal-s.dragStartX,s.dragY=s.dragStartYGlobal-s.dragStartY,r.emit(W.GAMEOBJECT_DRAG_START,e,s.dragX,s.dragY),this.emit(W.DRAG_START,e,r)}return this.setDragState(e,4),t.length},processDragDownEvent:function(e){var t=this._temp;if(this._draggable.length===0||t.length===0||!e.primaryDown||this.getDragState(e)!==0)return 0;this.setDragState(e,1);for(var i=[],r=0;r<t.length;r++){var s=t[r];s.input.draggable&&s.input.dragState===0&&i.push(s)}return i.length===0?(this.setDragState(e,0),0):(i.length>1&&(this.sortGameObjects(i,e),this.topOnly&&i.splice(1)),this._drag[e.id]=i,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(e,3),this.processDragStartList(e)):(this.setDragState(e,2),0))},processDragMoveEvent:function(e){if(this.getDragState(e)===2&&this.processDragThresholdEvent(e,this.manager.game.loop.now),this.getDragState(e)!==4)return 0;for(var t=this._tempZones,i=this._drag[e.id],r=0;r<i.length;r++){var s=i[r],n=s.input,a=n.target;if(a){var h=t.indexOf(a);h===0?(s.emit(W.GAMEOBJECT_DRAG_OVER,e,a),this.emit(W.DRAG_OVER,e,s,a)):h>0?(s.emit(W.GAMEOBJECT_DRAG_LEAVE,e,a),this.emit(W.DRAG_LEAVE,e,s,a),n.target=t[0],a=n.target,s.emit(W.GAMEOBJECT_DRAG_ENTER,e,a),this.emit(W.DRAG_ENTER,e,s,a)):(s.emit(W.GAMEOBJECT_DRAG_LEAVE,e,a),this.emit(W.DRAG_LEAVE,e,s,a),t[0]?(n.target=t[0],a=n.target,s.emit(W.GAMEOBJECT_DRAG_ENTER,e,a),this.emit(W.DRAG_ENTER,e,s,a)):n.target=null)}else!a&&t[0]&&(n.target=t[0],a=n.target,s.emit(W.GAMEOBJECT_DRAG_ENTER,e,a),this.emit(W.DRAG_ENTER,e,s,a));var o,u;if(!s.parentContainer)o=e.worldX-n.dragX,u=e.worldY-n.dragY;else{var f=e.worldX-n.dragStartXGlobal,d=e.worldY-n.dragStartYGlobal,v=s.getParentRotation(),c=f*Math.cos(v)+d*Math.sin(v),p=d*Math.cos(v)-f*Math.sin(v);c*=1/s.parentContainer.scaleX,p*=1/s.parentContainer.scaleY,o=c+n.dragStartX,u=p+n.dragStartY}s.emit(W.GAMEOBJECT_DRAG,e,o,u),this.emit(W.DRAG,e,s,o,u)}return i.length},processDragUpEvent:function(e){for(var t=this._drag[e.id],i=0;i<t.length;i++){var r=t[i],s=r.input;if(s&&s.dragState===2){s.dragState=0,s.dragX=s.localX-r.displayOriginX,s.dragY=s.localY-r.displayOriginY;var n=!1,a=s.target;a&&(r.emit(W.GAMEOBJECT_DROP,e,a),this.emit(W.DROP,e,r,a),s.target=null,n=!0),r.input&&(r.emit(W.GAMEOBJECT_DRAG_END,e,s.dragX,s.dragY,n),this.emit(W.DRAG_END,e,r,n))}}return this.setDragState(e,0),t.splice(0),0},processMoveEvents:function(e){var t=0,i=this._temp,r=this._eventData,s=this._eventContainer;r.cancelled=!1;for(var n=!1,a=0;a<i.length;a++){var h=i[a];if(!!h.input){if(t++,h.emit(W.GAMEOBJECT_POINTER_MOVE,e,h.input.localX,h.input.localY,s),r.cancelled||!h.input){n=!0;break}if(this.emit(W.GAMEOBJECT_MOVE,e,h,s),r.cancelled||!h.input){n=!0;break}if(this.topOnly)break}}return n||this.emit(W.POINTER_MOVE,e,i),t},processWheelEvent:function(e){var t=0,i=this._temp,r=this._eventData,s=this._eventContainer;r.cancelled=!1;for(var n=!1,a=e.deltaX,h=e.deltaY,o=e.deltaZ,u=0;u<i.length;u++){var f=i[u];if(!!f.input){if(t++,f.emit(W.GAMEOBJECT_POINTER_WHEEL,e,a,h,o,s),r.cancelled||!f.input){n=!0;break}if(this.emit(W.GAMEOBJECT_WHEEL,e,f,a,h,o,s),r.cancelled||!f.input){n=!0;break}}}return n||this.emit(W.POINTER_WHEEL,e,i,a,h,o),t},processOverEvents:function(e){var t=this._temp,i=0,r=t.length,s=[];if(r>0){var n=this.manager,a=this._eventData,h=this._eventContainer;a.cancelled=!1;for(var o=!1,u=0;u<r;u++){var f=t[u];if(!!f.input){if(s.push(f),n.setCursor(f.input),f.emit(W.GAMEOBJECT_POINTER_OVER,e,f.input.localX,f.input.localY,h),i++,a.cancelled||!f.input){o=!0;break}if(this.emit(W.GAMEOBJECT_OVER,e,f,h),a.cancelled||!f.input){o=!0;break}}}o||this.emit(W.POINTER_OVER,e,s)}return this._over[e.id]=s,i},processOutEvents:function(e){var t=this._over[e.id],i=0,r=t.length;if(r>0){var s=this.manager,n=this._eventData,a=this._eventContainer;n.cancelled=!1;var h=!1;this.sortGameObjects(t,e);for(var o=0;o<r;o++){var u=t[o];if(u=t[o],!!u.input){if(s.resetCursor(u.input),u.emit(W.GAMEOBJECT_POINTER_OUT,e,a),i++,n.cancelled||!u.input){h=!0;break}if(this.emit(W.GAMEOBJECT_OUT,e,u,a),n.cancelled||!u.input){h=!0;break}h||this.emit(W.POINTER_OUT,e,t)}}this._over[e.id]=[]}return i},processOverOutEvents:function(e){var t=this._temp,i,r,s=[],n=[],a=[],h=this._over[e.id],o=this._drag[e.id],u=this.manager;for(i=0;i<h.length;i++)r=h[i],t.indexOf(r)===-1&&o.indexOf(r)===-1?s.push(r):a.push(r);for(i=0;i<t.length;i++)r=t[i],h.indexOf(r)===-1&&n.push(r);var f=s.length,d=0,v=this._eventData,c=this._eventContainer;v.cancelled=!1;var p=!1;if(f>0){for(this.sortGameObjects(s,e),i=0;i<f;i++)if(r=s[i],!!r.input){if(u.resetCursor(r.input),r.emit(W.GAMEOBJECT_POINTER_OUT,e,c),d++,v.cancelled||!r.input){p=!0;break}if(this.emit(W.GAMEOBJECT_OUT,e,r,c),v.cancelled||!r.input){p=!0;break}}p||this.emit(W.POINTER_OUT,e,s)}if(f=n.length,v.cancelled=!1,p=!1,f>0){for(this.sortGameObjects(n,e),i=0;i<f;i++)if(r=n[i],!!r.input){if(u.setCursor(r.input),r.emit(W.GAMEOBJECT_POINTER_OVER,e,r.input.localX,r.input.localY,c),d++,v.cancelled||!r.input){p=!0;break}if(this.emit(W.GAMEOBJECT_OVER,e,r,c),v.cancelled||!r.input){p=!0;break}}p||this.emit(W.POINTER_OVER,e,n)}return h=a.concat(n),this._over[e.id]=this.sortGameObjects(h,e),d},processUpEvents:function(e){var t=this._temp,i=this._eventData,r=this._eventContainer;i.cancelled=!1;for(var s=!1,n=0;n<t.length;n++){var a=t[n];if(!!a.input){if(a.emit(W.GAMEOBJECT_POINTER_UP,e,a.input.localX,a.input.localY,r),i.cancelled||!a.input){s=!0;break}if(this.emit(W.GAMEOBJECT_UP,e,a,r),i.cancelled||!a.input){s=!0;break}}}return!s&&this.manager&&(e.upElement===this.manager.game.canvas?this.emit(W.POINTER_UP,e,t):this.emit(W.POINTER_UP_OUTSIDE,e)),t.length},queueForInsertion:function(e){return this._pendingInsertion.indexOf(e)===-1&&this._list.indexOf(e)===-1&&this._pendingInsertion.push(e),this},queueForRemoval:function(e){return this._pendingRemoval.push(e),this},setDraggable:function(e,t){t===void 0&&(t=!0),Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];r.input.draggable=t;var s=this._draggable.indexOf(r);t&&s===-1?this._draggable.push(r):!t&&s>-1&&this._draggable.splice(s,1)}return this},makePixelPerfect:function(e){e===void 0&&(e=1);var t=this.systems.textures;return SDe(t,e)},setHitArea:function(e,t,i){if(t===void 0)return this.setHitAreaFromTexture(e);Array.isArray(e)||(e=[e]);var r=!1,s=!1,n=!1,a=!1,h=!1,o=!0;if(qDe(t)){var u=t;t=ws(u,"hitArea",null),i=ws(u,"hitAreaCallback",null),r=ws(u,"draggable",!1),s=ws(u,"dropZone",!1),n=ws(u,"cursor",!1),a=ws(u,"useHandCursor",!1),h=ws(u,"pixelPerfect",!1);var f=ws(u,"alphaTolerance",1);h&&(t={},i=this.makePixelPerfect(f)),(!t||!i)&&(this.setHitAreaFromTexture(e),o=!1)}else typeof t=="function"&&!i&&(i=t,t={});for(var d=0;d<e.length;d++){var v=e[d];if(h&&v.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var c=v.input?v.input:pJ(v,t,i);c.customHitArea=o,c.dropZone=s,c.cursor=a?"pointer":n,v.input=c,r&&this.setDraggable(v),this.queueForInsertion(v)}return this},setHitAreaCircle:function(e,t,i,r,s){s===void 0&&(s=TDe);var n=new yDe(t,i,r);return this.setHitArea(e,n,s)},setHitAreaEllipse:function(e,t,i,r,s,n){n===void 0&&(n=CDe);var a=new wDe(t,i,r,s);return this.setHitArea(e,a,n)},setHitAreaFromTexture:function(e,t){t===void 0&&(t=gJ),Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i],s=r.frame,n=0,a=0;if(r.width?(n=r.width,a=r.height):s&&(n=s.realWidth,a=s.realHeight),r.type==="Container"&&(n===0||a===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}n!==0&&a!==0&&(r.input=pJ(r,new mJ(0,0,n,a),t),this.queueForInsertion(r))}return this},setHitAreaRectangle:function(e,t,i,r,s,n){n===void 0&&(n=gJ);var a=new mJ(t,i,r,s);return this.setHitArea(e,a,n)},setHitAreaTriangle:function(e,t,i,r,s,n,a,h){h===void 0&&(h=MDe);var o=new PDe(t,i,r,s,n,a);return this.setHitArea(e,o,h)},enableDebug:function(e,t){t===void 0&&(t=65280);var i=e.input;if(!i||!i.hitArea)return this;var r=i.hitArea,s=r.type,n=i.hitAreaDebug,a=this.systems.add,h=this.systems.updateList;n&&(h.remove(n),n.destroy(),n=null);var o=0,u=0;switch(s){case Ea.CIRCLE:n=a.arc(0,0,r.radius),o=r.x-r.radius,u=r.y-r.radius;break;case Ea.ELLIPSE:n=a.ellipse(0,0,r.width,r.height),o=r.x-r.width/2,u=r.y-r.height/2;break;case Ea.LINE:n=a.line(0,0,r.x1,r.y1,r.x2,r.y2);break;case Ea.POLYGON:n=a.polygon(0,0,r.points);break;case Ea.RECTANGLE:n=a.rectangle(0,0,r.width,r.height),o=r.x,u=r.y;break;case Ea.TRIANGLE:n=a.triangle(0,0,r.x1,r.y1,r.x2,r.y2,r.x3,r.y3);break}return n&&(n.isFilled=!1,n.preUpdate=function(){n.setStrokeStyle(1/e.scale,t),n.setDisplayOrigin(e.displayOriginX,e.displayOriginY);var f=e.x,d=e.y,v=e.rotation,c=e.scaleX,p=e.scaleY;if(e.parentContainer){var m=e.getWorldTransformMatrix();f=m.tx,d=m.ty,v=m.rotation,c=m.scaleX,p=m.scaleY}n.setRotation(v),n.setScale(c,p),n.setPosition(f+o,d+u),n.setScrollFactor(e.scrollFactorX,e.scrollFactorY),n.setDepth(e.depth)},h.add(n),i.hitAreaDebug=n),this},removeDebug:function(e){var t=e.input;if(t&&t.hitAreaDebug){var i=t.hitAreaDebug;this.systems.updateList.remove(i),i.destroy(),t.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(e){return this.pollRate=e,this._pollTimer=0,this},setGlobalTopOnly:function(e){return this.manager.globalTopOnly=e,this},setTopOnly:function(e){return this.topOnly=e,this},sortGameObjects:function(e,t){if(e.length<2)return e;var i=t.camera.renderList;return e.sort(function(r,s){return i.indexOf(s)-i.indexOf(r)})},sortDropZones:function(e){return e.length<2?e:(this.scene.sys.depthSort(),e.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(e,t){if(!e.parentContainer&&!t.parentContainer)return this.displayList.getIndex(t)-this.displayList.getIndex(e);if(e.parentContainer===t.parentContainer)return t.parentContainer.getIndex(t)-e.parentContainer.getIndex(e);if(e.parentContainer===t)return-1;if(t.parentContainer===e)return 1;for(var i=e.getIndexList(),r=t.getIndexList(),s=Math.min(i.length,r.length),n=0;n<s;n++){var a=i[n],h=r[n];if(a!==h)return h-a}return r.length-i.length;return 0},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(e){return this.manager.addPointer(e)},setDefaultCursor:function(e){return this.manager.setDefaultCursor(e),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(W.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var e=0;e<10;e++)this._drag[e]=[],this._over[e]=[];this.removeAllListeners();var t=this.manager;t.canvas.style.cursor=t.defaultCursor;var i=this.systems.events;i.off(Kt.TRANSITION_START,this.transitionIn,this),i.off(Kt.TRANSITION_OUT,this.transitionOut,this),i.off(Kt.TRANSITION_COMPLETE,this.transitionComplete,this),i.off(Kt.PRE_UPDATE,this.preUpdate,this),t.events.off(W.GAME_OUT,this.onGameOut,this),t.events.off(W.GAME_OVER,this.onGameOver,this),i.off(Kt.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(W.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(Kt.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});ADe.register("InputPlugin",xJ,"input");yJ.exports=xJ});var SJ=l((Hit,EJ)=>{EJ.exports="keydown"});var wJ=l((Kit,_J)=>{_J.exports="keyup"});var RJ=l((Zit,CJ)=>{CJ.exports="keycombomatch"});var AJ=l((Jit,qJ)=>{qJ.exports="down"});var MJ=l((Qit,PJ)=>{PJ.exports="keydown-"});var LJ=l(($it,bJ)=>{bJ.exports="keyup-"});var FJ=l((jit,OJ)=>{OJ.exports="up"});var Dh=l((ert,DJ)=>{DJ.exports={ANY_KEY_DOWN:SJ(),ANY_KEY_UP:wJ(),COMBO_MATCH:RJ(),DOWN:AJ(),KEY_DOWN:MJ(),KEY_UP:LJ(),UP:FJ()}});var l0=l((trt,NJ)=>{var bDe=C(),IJ=ue(),u0=Dh(),LDe=new bDe({Extends:IJ,initialize:function(t,i){IJ.call(this),this.plugin=t,this.keyCode=i,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(e){return this.emitOnRepeat=e,this},onDown:function(e){this.originalEvent=e,this.enabled&&(this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.location=e.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(u0.DOWN,this,e):(this.isDown=!0,this.isUp=!1,this.timeDown=e.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(u0.DOWN,this,e)))},onUp:function(e){this.originalEvent=e,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=e.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(u0.UP,this,e))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});NJ.exports=LDe});var f0=l((irt,GJ)=>{var ODe=function(e,t){return t.timeLastMatched=e.timeStamp,t.index++,t.index===t.size?!0:(t.current=t.keyCodes[t.index],!1)};GJ.exports=ODe});var d0=l((rrt,UJ)=>{var BJ=f0(),FDe=function(e,t){if(t.matched)return!0;var i=!1,r=!1;if(e.keyCode===t.current)if(t.index>0&&t.maxKeyDelay>0){var s=t.timeLastMatched+t.maxKeyDelay;e.timeStamp<=s&&(r=!0,i=BJ(e,t))}else r=!0,i=BJ(e,t);return!r&&t.resetOnWrongKey&&(t.index=0,t.current=t.keyCodes[0]),i&&(t.timeLastMatched=e.timeStamp,t.matched=!0,t.timeMatched=e.timeStamp),i};UJ.exports=FDe});var v0=l((srt,kJ)=>{var DDe=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};kJ.exports=DDe});var p0=l((nrt,zJ)=>{var IDe=C(),c0=Dh(),Hl=z(),NDe=d0(),GDe=v0(),BDe=new IDe({initialize:function(t,i,r){if(r===void 0&&(r={}),i.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var s=0;s<i.length;s++){var n=i[s];typeof n=="string"?this.keyCodes.push(n.toUpperCase().charCodeAt(0)):typeof n=="number"?this.keyCodes.push(n):n.hasOwnProperty("keyCode")&&this.keyCodes.push(n.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=Hl(r,"resetOnWrongKey",!0),this.maxKeyDelay=Hl(r,"maxKeyDelay",0),this.resetOnMatch=Hl(r,"resetOnMatch",!1),this.deleteOnMatch=Hl(r,"deleteOnMatch",!1);var a=this,h=function(o){if(!(a.matched||!a.enabled)){var u=NDe(o,a);u&&(a.manager.emit(c0.COMBO_MATCH,a,o),a.resetOnMatch?GDe(a):a.deleteOnMatch&&a.destroy())}};this.onKeyDown=h,this.manager.on(c0.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(c0.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});zJ.exports=BDe});var WJ=l((art,VJ)=>{var YJ=fh(),XJ={};for(m0 in YJ)XJ[YJ[m0]]=m0;var m0;VJ.exports=XJ});var $J=l((hrt,QJ)=>{var UDe=C(),HJ=ue(),Kl=Dh(),KJ=Ye(),ZJ=he(),Sa=ji(),kDe=Fh(),g0=l0(),Cs=fh(),zDe=p0(),Zl=WJ(),Jl=Ne(),YDe=ja(),JJ=new UDe({Extends:HJ,initialize:function(t){HJ.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(Sa.BOOT,this.boot,this),t.pluginEvents.on(Sa.START,this.start,this)},boot:function(){var e=this.settings.input;this.enabled=ZJ(e,"keyboard",!0);var t=ZJ(e,"keyboard.capture",null);t&&this.addCaptures(t),this.sceneInputPlugin.pluginEvents.once(Sa.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(Sa.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(Sa.SHUTDOWN,this.shutdown,this),this.game.events.on(KJ.BLUR,this.resetKeys,this),this.scene.sys.events.on(Jl.PAUSE,this.resetKeys,this),this.scene.sys.events.on(Jl.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(e){return this.manager.addCapture(e),this},removeCapture:function(e){return this.manager.removeCapture(e),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:Cs.UP,down:Cs.DOWN,left:Cs.LEFT,right:Cs.RIGHT,space:Cs.SPACE,shift:Cs.SHIFT})},addKeys:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1);var r={};if(typeof e=="string"){e=e.split(",");for(var s=0;s<e.length;s++){var n=e[s].trim();n&&(r[n]=this.addKey(n,t,i))}}else for(var a in e)r[a]=this.addKey(e[a],t,i);return r},addKey:function(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1);var r=this.keys;if(e instanceof g0){var s=r.indexOf(e);return s>-1?r[s]=e:r[e.keyCode]=e,t&&this.addCapture(e.keyCode),e.setEmitOnRepeat(i),e}return typeof e=="string"&&(e=Cs[e.toUpperCase()]),r[e]||(r[e]=new g0(this,e),t&&this.addCapture(e),r[e].setEmitOnRepeat(i)),r[e]},removeKey:function(e,t){t===void 0&&(t=!1);var i=this.keys,r;if(e instanceof g0){var s=i.indexOf(e);s>-1&&(r=this.keys[s],this.keys[s]=void 0)}else typeof e=="string"&&(e=Cs[e.toUpperCase()]);return i[e]&&(r=i[e],i[e]=void 0),r&&(r.plugin=null,t&&r.destroy()),this},removeAllKeys:function(e){for(var t=this.keys,i=0;i<t.length;i++){var r=t[i];r&&(t[i]=void 0,e&&r.destroy())}return this},createCombo:function(e,t){return new zDe(this,e,t)},checkDown:function(e,t){if(t===void 0&&(t=0),this.enabled&&e.isDown){var i=YDe(this.time-e.timeDown,t);if(i>e._tick)return e._tick=i,!0}return!1},update:function(){var e=this.manager.queue,t=e.length;if(!(!this.isActive()||t===0))for(var i=this.keys,r=0;r<t;r++){var s=e[r],n=s.keyCode,a=i[n],h=!1;s.cancelled===void 0&&(s.cancelled=0,s.stopImmediatePropagation=function(){s.cancelled=1},s.stopPropagation=function(){s.cancelled=-1}),s.cancelled!==-1&&(n===this.prevCode&&s.timeStamp===this.prevTime&&s.type===this.prevType||(this.prevCode=n,this.prevTime=s.timeStamp,this.prevType=s.type,s.type==="keydown"?(a&&(h=a.isDown,a.onDown(s)),!s.cancelled&&(!a||!h)&&(Zl[n]&&this.emit(Kl.KEY_DOWN+Zl[n],s),s.cancelled||this.emit(Kl.ANY_KEY_DOWN,s))):(a&&a.onUp(s),s.cancelled||(Zl[n]&&this.emit(Kl.KEY_UP+Zl[n],s),s.cancelled||this.emit(Kl.ANY_KEY_UP,s))),s.cancelled===1&&(s.cancelled=0)))}},resetKeys:function(){for(var e=this.keys,t=0;t<e.length;t++)e[t]&&e[t].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(Sa.MANAGER_PROCESS,this.update,this),this.game.events.off(KJ.BLUR,this.resetKeys),this.scene.sys.events.off(Jl.PAUSE,this.resetKeys,this),this.scene.sys.events.off(Jl.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var e=this.keys,t=0;t<e.length;t++)e[t]&&e[t].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});kDe.register("KeyboardPlugin",JJ,"keyboard","keyboard","inputKeyboard");QJ.exports=JJ});var eQ=l((ort,jJ)=>{var XDe=function(e){return e._justDown?(e._justDown=!1,!0):!1};jJ.exports=XDe});var iQ=l((urt,tQ)=>{var VDe=function(e){return e._justUp?(e._justUp=!1,!0):!1};tQ.exports=VDe});var sQ=l((lrt,rQ)=>{var WDe=function(e,t){t===void 0&&(t=50);var i=e.plugin.game.loop.time-e.timeDown;return e.isDown&&i<t};rQ.exports=WDe});var aQ=l((frt,nQ)=>{var HDe=function(e,t){t===void 0&&(t=50);var i=e.plugin.game.loop.time-e.timeUp;return e.isUp&&i<t};nQ.exports=HDe});var oQ=l((drt,hQ)=>{hQ.exports={Events:Dh(),KeyboardManager:Ep(),KeyboardPlugin:$J(),Key:l0(),KeyCodes:fh(),KeyCombo:p0(),AdvanceKeyCombo:f0(),ProcessKeyCombo:d0(),ResetKeyCombo:v0(),JustDown:eQ(),JustUp:iQ(),DownDuration:sQ(),UpDuration:aQ()}});var lQ=l((vrt,uQ)=>{uQ.exports={MouseManager:Sp()}});var dQ=l((crt,fQ)=>{fQ.exports={TouchManager:Cp()}});var cQ=l((prt,vQ)=>{var KDe=Cu(),ZDe=ze(),x0={CreatePixelPerfectHandler:r0(),CreateInteractiveObject:s0(),Events:ji(),Gamepad:cJ(),InputManager:Rp(),InputPlugin:TJ(),InputPluginCache:Fh(),Keyboard:oQ(),Mouse:lQ(),Pointer:wp(),Touch:dQ()};x0=ZDe(!1,x0,KDe);vQ.exports=x0});var Ie=l((mrt,pQ)=>{var JDe={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};pQ.exports=JDe});var Ih=l((grt,mQ)=>{var QDe=function(e,t){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:t+e.url:!1};mQ.exports=QDe});var Nh=l((xrt,gQ)=>{var $De=function(e,t,i,r,s,n){return e===void 0&&(e=""),t===void 0&&(t=!0),i===void 0&&(i=""),r===void 0&&(r=""),s===void 0&&(s=0),n===void 0&&(n=!1),{responseType:e,async:t,user:i,password:r,timeout:s,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:n}};gQ.exports=$De});var Ql=l((yrt,xQ)=>{var jDe=ze(),eIe=Nh(),tIe=function(e,t){var i=e===void 0?eIe():jDe({},e);if(t)for(var r in t)t[r]!==void 0&&(i[r]=t[r]);return i};xQ.exports=tIe});var y0=l((Trt,yQ)=>{var iIe=Ql(),rIe=function(e,t){var i=iIe(t,e.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",e.src,i.async,i.user,i.password),r.responseType=e.xhrSettings.responseType,r.timeout=i.timeout,i.headers)for(var s in i.headers)r.setRequestHeader(s,i.headers[s]);return i.header&&i.headerValue&&r.setRequestHeader(i.header,i.headerValue),i.requestedWith&&r.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&r.overrideMimeType(i.overrideMimeType),i.withCredentials&&(r.withCredentials=!0),r.onload=e.onLoad.bind(e,r),r.onerror=e.onError.bind(e,r),r.onprogress=e.onProgress.bind(e),r.send(),r};yQ.exports=rIe});var Ke=l((Ert,TQ)=>{var sIe=C(),Rs=Ie(),T0=nn(),Dr=z(),nIe=Ih(),aIe=Ql(),hIe=y0(),oIe=Nh(),E0=new sIe({initialize:function(t,i){this.loader=t,this.cache=Dr(i,"cache",!1),this.type=Dr(i,"type",!1),this.key=Dr(i,"key",!1);var r=this.key;if(t.prefix&&t.prefix!==""&&(this.key=t.prefix+r),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var s=Dr(i,"url");s===void 0?s=t.path+r+"."+Dr(i,"extension",""):typeof s=="string"&&!s.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(s=t.path+s),this.url=s,this.src="",this.xhrSettings=oIe(Dr(i,"responseType",void 0)),Dr(i,"xhrSettings",!1)&&(this.xhrSettings=aIe(this.xhrSettings,Dr(i,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?Rs.FILE_POPULATED:Rs.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=Dr(i,"config",{}),this.multiFile,this.linkFile},setLink:function(e){this.linkFile=e,e.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===Rs.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=Rs.FILE_LOADING,this.src=nIe(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=hIe(this,this.loader.xhr))},onLoad:function(e,t){var i=e.responseURL&&(e.responseURL.indexOf("file://")===0||e.responseURL.indexOf("capacitor://")===0),r=i&&t.target.status===0,s=!(t.target&&t.target.status!==200)||r;e.readyState===4&&e.status>=400&&e.status<=599&&(s=!1),this.state=Rs.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,s)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(e){e.lengthComputable&&(this.bytesLoaded=e.loaded,this.bytesTotal=e.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(T0.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=Rs.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=Rs.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=Rs.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(e){e===void 0&&(e=this.data);var t=this.key,i=this.type;this.loader.emit(T0.FILE_COMPLETE,t,i,e),this.loader.emit(T0.FILE_KEY_COMPLETE+i+"-"+t,t,i,e),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});E0.createObjectURL=function(e,t,i){if(typeof URL=="function")e.src=URL.createObjectURL(t);else{var r=new FileReader;r.onload=function(){e.removeAttribute("crossOrigin"),e.src="data:"+(t.type||i)+";base64,"+r.result.split(",")[1]},r.onerror=e.onerror,r.readAsDataURL(t)}};E0.revokeObjectURL=function(e){typeof URL=="function"&&URL.revokeObjectURL(e.src)};TQ.exports=E0});var lr=l((Srt,wQ)=>{var uIe=C(),S0=Ie(),EQ=Ke(),lIe=se(),Gh=z(),SQ=he(),_Q=ae(),_0=new uIe({Extends:EQ,initialize:function(t,i,r,s,n){var a="json";if(_Q(i)){var h=i;i=Gh(h,"key"),r=Gh(h,"url"),s=Gh(h,"xhrSettings"),a=Gh(h,"extension",a),n=Gh(h,"dataKey",n)}var o={type:"json",cache:t.cacheManager.json,extension:a,responseType:"text",key:i,url:r,xhrSettings:s,config:n};EQ.call(this,t,o),_Q(r)&&(n?this.data=SQ(r,n):this.data=r,this.state=S0.FILE_POPULATED)},onProcess:function(){if(this.state!==S0.FILE_POPULATED){this.state=S0.FILE_PROCESSING;try{var e=JSON.parse(this.xhrLoader.responseText)}catch(i){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),i}var t=this.config;typeof t=="string"?this.data=SQ(e,t,e):this.data=e}this.onProcessComplete()}});lIe.register("json",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new _0(this,e[s]));else this.addFile(new _0(this,e,t,r,i));return this});wQ.exports=_0});var RQ=l((_rt,CQ)=>{var fIe=C(),dIe=se(),w0=lr(),vIe=nn(),C0=new fIe({Extends:w0,initialize:function(t,i,r,s,n){w0.call(this,t,i,r,s,n),this.type="animationJSON"},onProcess:function(){this.loader.once(vIe.POST_PROCESS,this.onLoadComplete,this),w0.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});dIe.register("animation",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new C0(this,e[s]));else this.addFile(new C0(this,e,t,r,i));return this});CQ.exports=C0});var Ir=l((wrt,AQ)=>{var cIe=C(),qQ=Ie(),Bh=Ke(),pIe=se(),_a=z(),mIe=ae(),R0=new cIe({Extends:Bh,initialize:function e(t,i,r,s,n){var a="png",h;if(mIe(i)){var o=i;i=_a(o,"key"),r=_a(o,"url"),h=_a(o,"normalMap"),s=_a(o,"xhrSettings"),a=_a(o,"extension",a),n=_a(o,"frameConfig")}Array.isArray(r)&&(h=r[1],r=r[0]);var u={type:"image",cache:t.textureManager,extension:a,responseType:"blob",key:i,url:r,xhrSettings:s,config:n};if(Bh.call(this,t,u),h){var f=new e(t,this.key,h,s,n);f.type="normalMap",this.setLink(f),t.addFile(f)}},onProcess:function(){this.state=qQ.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){Bh.revokeObjectURL(e.data),e.onProcessComplete()},this.data.onerror=function(){Bh.revokeObjectURL(e.data),e.onProcessError()},Bh.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var e,t=this.linkFile;t&&t.state===qQ.FILE_COMPLETE?(this.type==="image"?e=this.cache.addImage(this.key,this.data,t.data):e=this.cache.addImage(t.key,t.data,this.data),this.pendingDestroy(e),t.pendingDestroy(e)):t||(e=this.cache.addImage(this.key,this.data),this.pendingDestroy(e))}});pIe.register("image",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new R0(this,e[r]));else this.addFile(new R0(this,e,t,i));return this});AQ.exports=R0});var Bi=l((Crt,PQ)=>{var gIe=C(),xIe=new gIe({initialize:function(t,i,r,s){var n=[];s.forEach(function(h){h&&n.push(h)}),this.loader=t,this.type=i,this.key=r,this.multiKeyIndex=t.multiKeyIndex++,this.files=n,this.complete=!1,this.pending=n.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var a=0;a<n.length;a++)n[a].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(e){return this.files.push(e),e.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(e){var t=this.files.indexOf(e);t!==-1&&this.pending--},onFileFailed:function(e){var t=this.files.indexOf(e);t!==-1&&this.failed++}});PQ.exports=xIe});var OQ=l((Rrt,LQ)=>{var yIe=C(),TIe=se(),qs=z(),MQ=Ir(),EIe=ae(),bQ=lr(),q0=Bi(),A0=new yIe({Extends:q0,initialize:function(t,i,r,s,n,a){var h,o;if(EIe(i)){var u=i;i=qs(u,"key"),h=new MQ(t,{key:i,url:qs(u,"textureURL"),extension:qs(u,"textureExtension","png"),normalMap:qs(u,"normalMap"),xhrSettings:qs(u,"textureXhrSettings")}),o=new bQ(t,{key:i,url:qs(u,"atlasURL"),extension:qs(u,"atlasExtension","json"),xhrSettings:qs(u,"atlasXhrSettings")})}else h=new MQ(t,i,r,n),o=new bQ(t,i,s,a);h.linkFile?q0.call(this,t,"atlasjson",i,[h,o,h.linkFile]):q0.call(this,t,"atlasjson",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i),t.addToCache(),this.complete=!0}}});TIe.register("aseprite",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new A0(this,e[a]),this.addFile(n.files);else n=new A0(this,e,t,i,r,s),this.addFile(n.files);return this});LQ.exports=A0});var NQ=l((qrt,IQ)=>{var SIe=C(),_Ie=se(),As=z(),FQ=Ir(),wIe=ae(),DQ=lr(),P0=Bi(),M0=new SIe({Extends:P0,initialize:function(t,i,r,s,n,a){var h,o;if(wIe(i)){var u=i;i=As(u,"key"),h=new FQ(t,{key:i,url:As(u,"textureURL"),extension:As(u,"textureExtension","png"),normalMap:As(u,"normalMap"),xhrSettings:As(u,"textureXhrSettings")}),o=new DQ(t,{key:i,url:As(u,"atlasURL"),extension:As(u,"atlasExtension","json"),xhrSettings:As(u,"atlasXhrSettings")})}else h=new FQ(t,i,r,n),o=new DQ(t,i,s,a);h.linkFile?P0.call(this,t,"atlasjson",i,[h,o,h.linkFile]):P0.call(this,t,"atlasjson",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});_Ie.register("atlas",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new M0(this,e[a]),this.addFile(n.files);else n=new M0(this,e,t,i,r,s),this.addFile(n.files);return this});IQ.exports=M0});var jl=l((Art,BQ)=>{var CIe=C(),RIe=Ie(),GQ=Ke(),qIe=se(),$l=z(),AIe=ae(),PIe=pp(),b0=new CIe({Extends:GQ,initialize:function(t,i,r,s){var n="xml";if(AIe(i)){var a=i;i=$l(a,"key"),r=$l(a,"url"),s=$l(a,"xhrSettings"),n=$l(a,"extension",n)}var h={type:"xml",cache:t.cacheManager.xml,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};GQ.call(this,t,h)},onProcess:function(){this.state=RIe.FILE_PROCESSING,this.data=PIe(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});qIe.register("xml",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new b0(this,e[r]));else this.addFile(new b0(this,e,t,i));return this});BQ.exports=b0});var YQ=l((Prt,zQ)=>{var MIe=C(),bIe=se(),Ps=z(),UQ=Ir(),LIe=ae(),L0=Bi(),kQ=jl(),O0=new MIe({Extends:L0,initialize:function(t,i,r,s,n,a){var h,o;if(LIe(i)){var u=i;i=Ps(u,"key"),h=new UQ(t,{key:i,url:Ps(u,"textureURL"),extension:Ps(u,"textureExtension","png"),normalMap:Ps(u,"normalMap"),xhrSettings:Ps(u,"textureXhrSettings")}),o=new kQ(t,{key:i,url:Ps(u,"atlasURL"),extension:Ps(u,"atlasExtension","xml"),xhrSettings:Ps(u,"atlasXhrSettings")})}else h=new UQ(t,i,r,n),o=new kQ(t,i,s,a);h.linkFile?L0.call(this,t,"atlasxml",i,[h,o,h.linkFile]):L0.call(this,t,"atlasxml",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});bIe.register("atlasXML",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new O0(this,e[a]),this.addFile(n.files);else n=new O0(this,e,t,i,r,s),this.addFile(n.files);return this});zQ.exports=O0});var F0=l((Mrt,WQ)=>{var OIe=C(),FIe=nn(),XQ=Ke(),VQ=z(),DIe=Ih(),IIe=ae(),NIe=new OIe({Extends:XQ,initialize:function(t,i,r,s){if(IIe(i)){var n=i;i=VQ(n,"key"),s=VQ(n,"config",s)}var a={type:"audio",cache:t.cacheManager.audio,extension:r.type,key:i,url:r.url,config:s};XQ.call(this,t,a),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var e=0;e<this.data.length;e++){var t=this.data[e];t.oncanplaythrough=null,t.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(e){var t=e.target;t.oncanplaythrough=null,t.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(FIe.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var e=this.config&&this.config.instances||1;this.filesTotal=e,this.filesLoaded=0,this.percentComplete=0;for(var t=0;t<e;t++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+t).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(t=0;t<this.data.length;t++)i=this.data[t],i.src=DIe(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});WQ.exports=NIe});var D0=l((brt,ZQ)=>{var GIe=C(),BIe=Ie(),HQ=Ke(),UIe=se(),cn=z(),kIe=F0(),KQ=ae(),pn=new GIe({Extends:HQ,initialize:function(t,i,r,s,n){if(KQ(i)){var a=i;i=cn(a,"key"),s=cn(a,"xhrSettings"),n=cn(a,"context",n)}var h={type:"audio",cache:t.cacheManager.audio,extension:r.type,responseType:"arraybuffer",key:i,url:r.url,xhrSettings:s,config:{context:n}};HQ.call(this,t,h)},onProcess:function(){this.state=BIe.FILE_PROCESSING;var e=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(t){e.data=t,e.onProcessComplete()},function(t){console.error("Error decoding audio: "+e.key+" - ",t?t.message:null),e.onProcessError()}),this.config.context=null}});pn.create=function(e,t,i,r,s){var n=e.systems.game,a=n.config.audio,h=n.device.audio;KQ(t)&&(i=cn(t,"url",[]),r=cn(t,"config",{}));var o=pn.getAudioURL(n,i);return o?h.webAudio&&!a.disableWebAudio?new pn(e,t,o,s,n.sound.context):new kIe(e,t,o,r):null};pn.getAudioURL=function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=cn(t[i],"url",t[i]);if(r.indexOf("blob:")===0||r.indexOf("data:")===0)return{url:r,type:""};var s=r.match(/\.([a-zA-Z0-9]+)($|\?)/);if(s=cn(t[i],"type",s?s[1]:"").toLowerCase(),e.device.audio[s])return{url:r,type:s}}return null};UIe.register("audio",function(e,t,i,r){var s=this.systems.game,n=s.config.audio,a=s.device.audio;if(n.noAudio||!a.webAudio&&!a.audioData)return this;var h;if(Array.isArray(e))for(var o=0;o<e.length;o++)h=pn.create(this,e[o]),h&&this.addFile(h);else h=pn.create(this,e,t,i,r),h&&this.addFile(h);return this});ZQ.exports=pn});var jQ=l(()=>{var JQ=D0(),zIe=C(),YIe=se(),Ms=z(),XIe=ae(),QQ=lr(),I0=Bi(),$Q=new zIe({Extends:I0,initialize:function(t,i,r,s,n,a,h){if(XIe(i)){var o=i;i=Ms(o,"key"),r=Ms(o,"jsonURL"),s=Ms(o,"audioURL"),n=Ms(o,"audioConfig"),a=Ms(o,"audioXhrSettings"),h=Ms(o,"jsonXhrSettings")}var u;if(!s)u=new QQ(t,i,r,h),I0.call(this,t,"audiosprite",i,[u]),this.config.resourceLoad=!0,this.config.audioConfig=n,this.config.audioXhrSettings=a;else{var f=JQ.create(t,i,s,n,a);f&&(u=new QQ(t,i,r,h),I0.call(this,t,"audiosprite",i,[f,u]),this.config.resourceLoad=!1)}},onFileComplete:function(e){var t=this.files.indexOf(e);if(t!==-1&&(this.pending--,this.config.resourceLoad&&e.type==="json"&&e.data.hasOwnProperty("resources"))){var i=e.data.resources,r=Ms(this.config,"audioConfig"),s=Ms(this.config,"audioXhrSettings"),n=JQ.create(this.loader,e.key,i,r,s);n&&(this.addToMultiFile(n),this.loader.addFile(n))}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache(),t.addToCache(),this.complete=!0}}});YIe.register("audioSprite",function(e,t,i,r,s,n){var a=this.systems.game,h=a.config.audio,o=a.device.audio;if(h&&h.noAudio||!o.webAudio&&!o.audioData)return this;var u;if(Array.isArray(e))for(var f=0;f<e.length;f++)u=new $Q(this,e[f]),u.files&&this.addFile(u.files);else u=new $Q(this,e,t,i,r,s,n),u.files&&this.addFile(u.files);return this})});var i$=l((Frt,t$)=>{var VIe=C(),WIe=Ie(),e$=Ke(),HIe=se(),Uh=z(),KIe=ae(),N0=new VIe({Extends:e$,initialize:function(t,i,r,s,n){var a="bin";if(KIe(i)){var h=i;i=Uh(h,"key"),r=Uh(h,"url"),s=Uh(h,"xhrSettings"),a=Uh(h,"extension",a),n=Uh(h,"dataType",n)}var o={type:"binary",cache:t.cacheManager.binary,extension:a,responseType:"arraybuffer",key:i,url:r,xhrSettings:s,config:{dataType:n}};e$.call(this,t,o)},onProcess:function(){this.state=WIe.FILE_PROCESSING;var e=this.config.dataType;this.data=e?new e(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});HIe.register("binary",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new N0(this,e[s]));else this.addFile(new N0(this,e,t,r,i));return this});t$.exports=N0});var a$=l((Drt,n$)=>{var ZIe=C(),JIe=se(),bs=z(),r$=Ir(),QIe=ae(),G0=Bi(),$Ie=Ku(),s$=jl(),B0=new ZIe({Extends:G0,initialize:function(t,i,r,s,n,a){var h,o;if(QIe(i)){var u=i;i=bs(u,"key"),h=new r$(t,{key:i,url:bs(u,"textureURL"),extension:bs(u,"textureExtension","png"),normalMap:bs(u,"normalMap"),xhrSettings:bs(u,"textureXhrSettings")}),o=new s$(t,{key:i,url:bs(u,"fontDataURL"),extension:bs(u,"fontDataExtension","xml"),xhrSettings:bs(u,"fontDataXhrSettings")})}else h=new r$(t,i,r,n),o=new s$(t,i,s,a);h.linkFile?G0.call(this,t,"bitmapfont",i,[h,o,h.linkFile]):G0.call(this,t,"bitmapfont",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache(),t.pendingDestroy();var i=e.cache.get(e.key),r=$Ie(t.data,e.cache.getFrame(e.key),0,0,i);this.loader.cacheManager.bitmapFont.add(e.key,{data:r,texture:e.key,frame:null}),this.complete=!0}}});JIe.register("bitmapFont",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new B0(this,e[a]),this.addFile(n.files);else n=new B0(this,e,t,i,r,s),this.addFile(n.files);return this});n$.exports=B0});var u$=l((Irt,o$)=>{var jIe=C(),eNe=Ie(),h$=Ke(),tNe=se(),ef=z(),iNe=ae(),U0=new jIe({Extends:h$,initialize:function(t,i,r,s){var n="css";if(iNe(i)){var a=i;i=ef(a,"key"),r=ef(a,"url"),s=ef(a,"xhrSettings"),n=ef(a,"extension",n)}var h={type:"script",cache:!1,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};h$.call(this,t,h)},onProcess:function(){this.state=eNe.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});tNe.register("css",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new U0(this,e[r]));else this.addFile(new U0(this,e,t,i));return this});o$.exports=U0});var d$=l((Nrt,f$)=>{var rNe=C(),sNe=Ie(),l$=Ke(),nNe=se(),kh=z(),aNe=ae(),tf=ep(),k0=new rNe({Extends:l$,initialize:function(t,i,r,s,n){var a="glsl";if(aNe(i)){var h=i;i=kh(h,"key"),r=kh(h,"url"),s=kh(h,"shaderType","fragment"),n=kh(h,"xhrSettings"),a=kh(h,"extension",a)}else s===void 0&&(s="fragment");var o={type:"glsl",cache:t.cacheManager.shader,extension:a,responseType:"text",key:i,url:r,config:{shaderType:s},xhrSettings:n};l$.call(this,t,o)},onProcess:function(){this.state=sNe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.split(`
`),t=this.extractBlock(e,0);if(t)for(;t;){var i=this.getShaderName(t.header),r=this.getShaderType(t.header),s=this.getShaderUniforms(t.header),n=t.shader;if(this.cache.has(i)){var a=this.cache.get(i);r==="fragment"?a.fragmentSrc=n:a.vertexSrc=n,a.uniforms||(a.uniforms=s)}else r==="fragment"?this.cache.add(i,new tf(i,n,"",s)):this.cache.add(i,new tf(i,"",n,s));t=this.extractBlock(e,t.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new tf(this.key,this.data)):this.cache.add(this.key,new tf(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if(i.substring(0,5)==="name:")return i.substring(5).trim()}return this.key},getShaderType:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if(i.substring(0,5)==="type:")return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(e){for(var t={},i=0;i<e.length;i++){var r=e[i].trim();if(r.substring(0,8)==="uniform."){var s=r.indexOf(":");if(s){var n=r.substring(8,s);try{t[n]=JSON.parse(r.substring(s+1))}catch(a){console.warn("Invalid uniform JSON: "+n)}}}}return t},extractBlock:function(e,t){for(var i=-1,r=-1,s=-1,n=!1,a=!1,h=[],o=[],u=t;u<e.length;u++){var f=e[u].trim();if(f==="---")if(i===-1)i=u,n=!0;else if(n)r=u,n=!1,a=!0;else{a=!1;break}else n?h.push(f):a&&(o.push(f),s=u)}return!n&&r!==-1?{header:h,shader:o.join(`
`),offset:s}:null}});nNe.register("glsl",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new k0(this,e[s]));else this.addFile(new k0(this,e,t,i,r));return this});f$.exports=k0});var p$=l((Grt,c$)=>{var hNe=C(),oNe=Ie(),v$=Ke(),uNe=se(),rf=z(),lNe=ae(),z0=new hNe({Extends:v$,initialize:function(t,i,r,s){var n="html";if(lNe(i)){var a=i;i=rf(a,"key"),r=rf(a,"url"),s=rf(a,"xhrSettings"),n=rf(a,"extension",n)}var h={type:"text",cache:t.cacheManager.html,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};v$.call(this,t,h)},onProcess:function(){this.state=oNe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});uNe.register("html",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new z0(this,e[r]));else this.addFile(new z0(this,e,t,i));return this});c$.exports=z0});var x$=l((Brt,g$)=>{var fNe=C(),m$=Ie(),zh=Ke(),dNe=se(),wa=z(),vNe=ae(),Y0=new fNe({Extends:zh,initialize:function(t,i,r,s,n,a){s===void 0&&(s=512),n===void 0&&(n=512);var h="html";if(vNe(i)){var o=i;i=wa(o,"key"),r=wa(o,"url"),a=wa(o,"xhrSettings"),h=wa(o,"extension",h),s=wa(o,"width",s),n=wa(o,"height",n)}var u={type:"html",cache:t.textureManager,extension:h,responseType:"text",key:i,url:r,xhrSettings:a,config:{width:s,height:n}};zh.call(this,t,u)},onProcess:function(){this.state=m$.FILE_PROCESSING;var e=this.config.width,t=this.config.height,i=[];i.push('<svg width="'+e+'px" height="'+t+'px" viewBox="0 0 '+e+" "+t+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>");var r=[i.join(`
`)],s=this;try{var n=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(a){s.state=m$.FILE_ERRORED,s.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){zh.revokeObjectURL(s.data),s.onProcessComplete()},this.data.onerror=function(){zh.revokeObjectURL(s.data),s.onProcessError()},zh.createObjectURL(this.data,n,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});dNe.register("htmlTexture",function(e,t,i,r,s){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new Y0(this,e[n]));else this.addFile(new Y0(this,e,t,i,r,s));return this});g$.exports=Y0});var S$=l((Urt,E$)=>{var cNe=C(),pNe=se(),Ti=z(),y$=Ir(),mNe=ae(),gNe=lr(),T$=Bi(),X0=new cNe({Extends:T$,initialize:function(t,i,r,s,n,a,h){if(mNe(i)){var o=i;i=Ti(o,"key"),Ti(o,"url",!1)?r=Ti(o,"url"):r=Ti(o,"atlasURL"),a=Ti(o,"xhrSettings"),s=Ti(o,"path"),n=Ti(o,"baseURL"),h=Ti(o,"textureXhrSettings")}var u=new gNe(t,i,r,a);T$.call(this,t,"multiatlas",i,[u]),this.config.path=s,this.config.baseURL=n,this.config.textureXhrSettings=h},onFileComplete:function(e){var t=this.files.indexOf(e);if(t!==-1&&(this.pending--,e.type==="json"&&e.data.hasOwnProperty("textures"))){var i=e.data.textures,r=this.config,s=this.loader,n=s.baseURL,a=s.path,h=s.prefix,o=Ti(r,"baseURL",this.baseURL),u=Ti(r,"path",this.path),f=Ti(r,"prefix",this.prefix),d=Ti(r,"textureXhrSettings");s.setBaseURL(o),s.setPath(u),s.setPrefix(f);for(var v=0;v<i.length;v++){var c=i[v].image,p="MA"+this.multiKeyIndex+"_"+c,m=new y$(s,p,c,d);if(this.addToMultiFile(m),s.addFile(m),i[v].normalMap){var x=new y$(s,p,i[v].normalMap,d);x.type="normalMap",m.setLink(x),this.addToMultiFile(x),s.addFile(x)}}s.setBaseURL(n),s.setPath(a),s.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var e=this.files[0],t=[],i=[],r=[],s=1;s<this.files.length;s++){var n=this.files[s];if(n.type!=="normalMap")for(var a=n.key.indexOf("_"),h=n.key.substr(a+1),o=n.data,u=0;u<e.data.textures.length;u++){var f=e.data.textures[u];if(f.image===h){i.push(o),t.push(f),n.linkFile&&r.push(n.linkFile.data);break}}}for(r.length===0&&(r=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,t,r),this.complete=!0,s=0;s<this.files.length;s++)this.files[s].pendingDestroy()}}});pNe.register("multiatlas",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new X0(this,e[a]),this.addFile(n.files);else n=new X0(this,e,t,i,r,s),this.addFile(n.files);return this});E$.exports=X0});var W0=l((krt,w$)=>{var xNe=C(),yNe=Ie(),_$=Ke(),TNe=se(),sf=z(),ENe=ae(),V0=new xNe({Extends:_$,initialize:function(t,i,r,s){var n="js";if(ENe(i)){var a=i;i=sf(a,"key"),r=sf(a,"url"),s=sf(a,"xhrSettings"),n=sf(a,"extension",n)}var h={type:"script",cache:!1,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};_$.call(this,t,h)},onProcess:function(){this.state=yNe.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});TNe.register("script",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new V0(this,e[r]));else this.addFile(new V0(this,e,t,i));return this});w$.exports=V0});var q$=l((zrt,R$)=>{var SNe=C(),_Ne=se(),nf=z(),wNe=ae(),C$=Bi(),CNe=W0(),H0=new SNe({Extends:C$,initialize:function(t,i,r,s){var n="js",a=[];if(wNe(i)){var h=i;i=nf(h,"key"),r=nf(h,"url"),s=nf(h,"xhrSettings"),n=nf(h,"extension",n)}Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++){var u=new CNe(t,{key:i+"_"+o.toString(),url:r[o],extension:n,xhrSettings:s});u.onProcess=function(){this.onProcessComplete()},a.push(u)}C$.call(this,t,"scripts",i,a)},addToCache:function(){if(this.isReadyToProcess()){for(var e=0;e<this.files.length;e++){var t=this.files[e];t.data=document.createElement("script"),t.data.language="javascript",t.data.type="text/javascript",t.data.defer=!1,t.data.text=t.xhrLoader.responseText,document.head.appendChild(t.data)}this.complete=!0}}});_Ne.register("scripts",function(e,t,i){var r;if(Array.isArray(e))for(var s=0;s<e.length;s++)r=new H0(this,e[s]),this.addFile(r.files);else r=new H0(this,e,t,i),this.addFile(r.files);return this});R$.exports=H0});var af=l((Yrt,P$)=>{var RNe=C(),qNe=Ie(),A$=Ke(),ANe=se(),Ca=z(),PNe=ae(),K0=new RNe({Extends:A$,initialize:function(t,i,r,s){var n="text",a="txt",h=t.cacheManager.text;if(PNe(i)){var o=i;i=Ca(o,"key"),r=Ca(o,"url"),s=Ca(o,"xhrSettings"),a=Ca(o,"extension",a),n=Ca(o,"type",n),h=Ca(o,"cache",h)}var u={type:n,cache:h,extension:a,responseType:"text",key:i,url:r,xhrSettings:s};A$.call(this,t,u)},onProcess:function(){this.state=qNe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});ANe.register("text",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new K0(this,e[r]));else this.addFile(new K0(this,e,t,i));return this});P$.exports=K0});var L$=l((Xrt,b$)=>{var MNe=C(),bNe=se(),Ls=z(),LNe=ae(),M$=Bi(),ONe=Xg(),FNe=Vg(),hf=af(),Z0=new MNe({Extends:M$,initialize:function(t,i,r,s,n,a){var h,o,u=t.cacheManager.obj;if(LNe(i)){var f=i;i=Ls(f,"key"),h=new hf(t,{key:i,type:"obj",cache:u,url:Ls(f,"url"),extension:Ls(f,"extension","obj"),xhrSettings:Ls(f,"xhrSettings"),config:{flipUV:Ls(f,"flipUV",n)}}),s=Ls(f,"matURL"),s&&(o=new hf(t,{key:i,type:"mat",cache:u,url:s,extension:Ls(f,"matExtension","mat"),xhrSettings:Ls(f,"xhrSettings")}))}else h=new hf(t,{key:i,url:r,type:"obj",cache:u,extension:"obj",xhrSettings:a,config:{flipUV:n}}),s&&(o=new hf(t,{key:i,url:s,type:"mat",cache:u,extension:"mat",xhrSettings:a}));M$.call(this,t,"obj",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=ONe(e.data,e.config.flipUV);t&&(i.materials=FNe(t.data)),e.cache.add(e.key,i),this.complete=!0}}});bNe.register("obj",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new Z0(this,e[a]),this.addFile(n.files);else n=new Z0(this,e,t,i,r,s),this.addFile(n.files);return this});b$.exports=Z0});var I$=l((Vrt,D$)=>{var DNe=C(),O$=Ie(),INe=se(),F$=lr(),J0=new DNe({Extends:F$,initialize:function(t,i,r,s,n){F$.call(this,t,i,r,s,n),this.type="packfile"},onProcess:function(){this.state!==O$.FILE_POPULATED&&(this.state=O$.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});INe.register("pack",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new J0(this,e[s]));else this.addFile(new J0(this,e,t,r,i));return this});D$.exports=J0});var B$=l((Wrt,G$)=>{var NNe=C(),Q0=Ie(),N$=Ke(),GNe=se(),Os=z(),BNe=ae(),$0=new NNe({Extends:N$,initialize:function(t,i,r,s,n,a){var h="js";if(BNe(i)){var o=i;i=Os(o,"key"),r=Os(o,"url"),a=Os(o,"xhrSettings"),h=Os(o,"extension",h),s=Os(o,"start"),n=Os(o,"mapping")}var u={type:"plugin",cache:!1,extension:h,responseType:"text",key:i,url:r,xhrSettings:a,config:{start:s,mapping:n}};N$.call(this,t,u),typeof r=="function"&&(this.data=r,this.state=Q0.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,t=this.config,i=Os(t,"start",!1),r=Os(t,"mapping",null);if(this.state===Q0.FILE_POPULATED)e.install(this.key,this.data,i,r);else{this.state=Q0.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var s=e.install(this.key,window[this.key],i,r);(i||r)&&(this.loader.systems[r]=s,this.loader.scene[r]=s)}this.onProcessComplete()}});GNe.register("plugin",function(e,t,i,r,s){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new $0(this,e[n]));else this.addFile(new $0(this,e,t,i,r,s));return this});G$.exports=$0});var z$=l((Hrt,k$)=>{var UNe=C(),kNe=Ie(),U$=Ke(),zNe=se(),of=z(),YNe=ae(),j0=new UNe({Extends:U$,initialize:function(t,i,r,s){var n="js";if(YNe(i)){var a=i;i=of(a,"key"),r=of(a,"url"),s=of(a,"xhrSettings"),n=of(a,"extension",n)}var h={type:"text",extension:n,responseType:"text",key:i,url:r,xhrSettings:s};U$.call(this,t,h)},onProcess:function(){this.state=kNe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),t=eval;this.loader.sceneManager.add(this.key,t(e)),this.complete=!0}});zNe.register("sceneFile",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new j0(this,e[r]));else this.addFile(new j0(this,e,t,i));return this});k$.exports=j0});var V$=l((Krt,X$)=>{var XNe=C(),ex=Ie(),Y$=Ke(),VNe=se(),Fs=z(),WNe=ae(),tx=new XNe({Extends:Y$,initialize:function(t,i,r,s,n,a){var h="js";if(WNe(i)){var o=i;i=Fs(o,"key"),r=Fs(o,"url"),a=Fs(o,"xhrSettings"),h=Fs(o,"extension",h),s=Fs(o,"systemKey"),n=Fs(o,"sceneKey")}var u={type:"scenePlugin",cache:!1,extension:h,responseType:"text",key:i,url:r,xhrSettings:a,config:{systemKey:s,sceneKey:n}};Y$.call(this,t,u),typeof r=="function"&&(this.data=r,this.state=ex.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,t=this.config,i=this.key,r=Fs(t,"systemKey",i),s=Fs(t,"sceneKey",i);this.state===ex.FILE_POPULATED?e.installScenePlugin(r,this.data,s,this.loader.scene,!0):(this.state=ex.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),e.installScenePlugin(r,window[this.key],s,this.loader.scene,!0)),this.onProcessComplete()}});VNe.register("scenePlugin",function(e,t,i,r,s){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new tx(this,e[n]));else this.addFile(new tx(this,e,t,i,r,s));return this});X$.exports=tx});var K$=l((Zrt,H$)=>{var HNe=C(),KNe=se(),W$=Ir(),ix=new HNe({Extends:W$,initialize:function(t,i,r,s,n){W$.call(this,t,i,r,n,s),this.type="spritesheet"},addToCache:function(){var e=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(e)}});KNe.register("spritesheet",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new ix(this,e[s]));else this.addFile(new ix(this,e,t,i,r));return this});H$.exports=ix});var J$=l((Jrt,Z$)=>{var ZNe=C(),JNe=Ie(),Yh=Ke(),QNe=se(),Ds=z(),$Ne=ae(),rx=new ZNe({Extends:Yh,initialize:function(t,i,r,s,n){var a="svg";if($Ne(i)){var h=i;i=Ds(h,"key"),r=Ds(h,"url"),s=Ds(h,"svgConfig",{}),n=Ds(h,"xhrSettings"),a=Ds(h,"extension",a)}var o={type:"svg",cache:t.textureManager,extension:a,responseType:"text",key:i,url:r,xhrSettings:n,config:{width:Ds(s,"width"),height:Ds(s,"height"),scale:Ds(s,"scale")}};Yh.call(this,t,o)},onProcess:function(){this.state=JNe.FILE_PROCESSING;var e=this.xhrLoader.responseText,t=[e],i=this.config.width,r=this.config.height,s=this.config.scale;e:if(i&&r||s){var n=null,a=new DOMParser;n=a.parseFromString(e,"text/xml");var h=n.getElementsByTagName("svg")[0],o=h.hasAttribute("viewBox"),u=parseFloat(h.getAttribute("width")),f=parseFloat(h.getAttribute("height"));if(!o&&u&&f)h.setAttribute("viewBox","0  0 "+u+" "+f);else if(o&&!u&&!f){var d=h.getAttribute("viewBox").split(/\s+|,/);u=d[2],f=d[3]}if(s)if(u&&f)i=u*s,r=f*s;else break e;h.setAttribute("width",i.toString()+"px"),h.setAttribute("height",r.toString()+"px"),t=[new XMLSerializer().serializeToString(h)]}try{var v=new window.Blob(t,{type:"image/svg+xml;charset=utf-8"})}catch(m){this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var c=this,p=!1;this.data.onload=function(){p||Yh.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){p?c.onProcessError():(p=!0,Yh.revokeObjectURL(c.data),c.data.src="data:image/svg+xml,"+encodeURIComponent(t.join("")))},Yh.createObjectURL(this.data,v,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});QNe.register("svg",function(e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new rx(this,e[s]));else this.addFile(new rx(this,e,t,i,r));return this});Z$.exports=rx});var uf=l((Qrt,Q$)=>{Q$.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}});var ej=l(($rt,j$)=>{var jNe=C(),eGe=Ie(),$$=Ke(),tGe=se(),lf=z(),iGe=ae(),rGe=uf(),sx=new jNe({Extends:$$,initialize:function(t,i,r,s){var n="csv";if(iGe(i)){var a=i;i=lf(a,"key"),r=lf(a,"url"),s=lf(a,"xhrSettings"),n=lf(a,"extension",n)}var h={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:n,responseType:"text",key:i,url:r,xhrSettings:s};$$.call(this,t,h),this.tilemapFormat=rGe.CSV},onProcess:function(){this.state=eGe.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});tGe.register("tilemapCSV",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new sx(this,e[r]));else this.addFile(new sx(this,e,t,i));return this});j$.exports=sx});var rj=l((jrt,ij)=>{var sGe=C(),nGe=se(),tj=lr(),aGe=uf(),nx=new sGe({Extends:tj,initialize:function(t,i,r,s){tj.call(this,t,i,r,s),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var e={format:aGe.WELTMEISTER,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});nGe.register("tilemapImpact",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new nx(this,e[r]));else this.addFile(new nx(this,e,t,i));return this});ij.exports=nx});var aj=l((est,nj)=>{var hGe=C(),oGe=se(),sj=lr(),uGe=uf(),ax=new hGe({Extends:sj,initialize:function(t,i,r,s){sj.call(this,t,i,r,s),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var e={format:uGe.TILED_JSON,data:this.data};this.cache.add(this.key,e),this.pendingDestroy(e)}});oGe.register("tilemapTiledJSON",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new ax(this,e[r]));else this.addFile(new ax(this,e,t,i));return this});nj.exports=ax});var lj=l((tst,uj)=>{var lGe=C(),fGe=se(),Is=z(),hj=Ir(),dGe=ae(),hx=Bi(),oj=af(),ox=new lGe({Extends:hx,initialize:function(t,i,r,s,n,a){var h,o;if(dGe(i)){var u=i;i=Is(u,"key"),h=new hj(t,{key:i,url:Is(u,"textureURL"),extension:Is(u,"textureExtension","png"),normalMap:Is(u,"normalMap"),xhrSettings:Is(u,"textureXhrSettings")}),o=new oj(t,{key:i,url:Is(u,"atlasURL"),extension:Is(u,"atlasExtension","txt"),xhrSettings:Is(u,"atlasXhrSettings")})}else h=new hj(t,i,r,n),o=new oj(t,i,s,a);h.linkFile?hx.call(this,t,"unityatlas",i,[h,o,h.linkFile]):hx.call(this,t,"unityatlas",i,[h,o])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(e.key,e.data,t.data,i),t.pendingDestroy(),this.complete=!0}}});fGe.register("unityAtlas",function(e,t,i,r,s){var n;if(Array.isArray(e))for(var a=0;a<e.length;a++)n=new ox(this,e[a]),this.addFile(n.files);else n=new ox(this,e,t,i,r,s),this.addFile(n.files);return this});uj.exports=ox});var dj=l((ist,fj)=>{var vGe=C(),cGe=Ie(),Xh=Ke(),pGe=se(),mGe=Ih(),Ns=z(),gGe=ae(),mn=new vGe({Extends:Xh,initialize:function(t,i,r,s,n,a,h){s===void 0&&(s="loadeddata"),n===void 0&&(n=!1),a===void 0&&(a=!1),s!=="loadeddata"&&s!=="canplay"&&s!=="canplaythrough"&&(s="loadeddata");var o={type:"video",cache:t.cacheManager.video,extension:r.type,responseType:"blob",key:i,url:r.url,xhrSettings:h,config:{loadEvent:s,asBlob:n,noAudio:a}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),Xh.call(this,t,o)},onProcess:function(){if(this.state=cGe.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var e=this.createVideoElement();this.data=e;var t=this;this.data.onloadeddata=function(){t.onProcessComplete()},this.data.onerror=function(){Xh.revokeObjectURL(t.data),t.onProcessError()},Xh.createObjectURL(e,this.xhrLoader.response,""),e.load()},createVideoElement:function(){var e=document.createElement("video");return e.controls=!1,e.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(e.muted=!0,e.defaultMuted=!0,e.setAttribute("autoplay","autoplay")),e.setAttribute("playsinline","playsinline"),e.setAttribute("preload","auto"),e},onVideoLoadHandler:function(e){var t=e.target;t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),t.removeEventListener("error",this.onErrorCallback,!0),this.data=t,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(e){var t=e.target;t&&(t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),t.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var e=this.config.loadEvent;if(this.config.asBlob)Xh.prototype.load.call(this);else{this.percentComplete=0;var t=this.createVideoElement();t.addEventListener(e,this.onLoadCallback,!0),t.addEventListener("error",this.onErrorCallback,!0),t.src=mGe(this,this.loader.baseURL),t.load()}}});mn.create=function(e,t,i,r,s,n,a){var h=e.systems.game;gGe(t)&&(i=Ns(t,"url",[]),r=Ns(t,"loadEvent","loadeddata"),s=Ns(t,"asBlob",!1),n=Ns(t,"noAudio",!1),a=Ns(t,"xhrSettings"),t=Ns(t,"key"));var o=mn.getVideoURL(h,i);if(o)return new mn(e,t,o,r,s,n,a)};mn.getVideoURL=function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=Ns(t[i],"url",t[i]);if(r.indexOf("blob:")===0)return{url:r,type:""};var s;if(r.indexOf("data:")===0?s=r.split(",")[0].match(/\/(.*?);/):s=r.match(/\.([a-zA-Z0-9]+)($|\?)/),s=Ns(t[i],"type",s?s[1]:"").toLowerCase(),e.device.video[s])return{url:r,type:s}}return null};pGe.register("video",function(e,t,i,r,s,n){var a;if(Array.isArray(e))for(var h=0;h<e.length;h++)a=mn.create(this,e[h]),a&&this.addFile(a);else a=mn.create(this,e,t,i,r,s,n),a&&this.addFile(a);return this});fj.exports=mn});var cj=l((rst,vj)=>{vj.exports={AnimationJSONFile:RQ(),AsepriteFile:OQ(),AtlasJSONFile:NQ(),AtlasXMLFile:YQ(),AudioFile:D0(),AudioSpriteFile:jQ(),BinaryFile:i$(),BitmapFontFile:a$(),CSSFile:u$(),GLSLFile:d$(),HTML5AudioFile:F0(),HTMLFile:p$(),HTMLTextureFile:x$(),ImageFile:Ir(),JSONFile:lr(),MultiAtlasFile:S$(),MultiScriptFile:q$(),OBJFile:L$(),PackFile:I$(),PluginFile:B$(),SceneFile:z$(),ScenePluginFile:V$(),ScriptFile:W0(),SpriteSheetFile:K$(),SVGFile:J$(),TextFile:af(),TilemapCSVFile:ej(),TilemapImpactFile:rj(),TilemapJSONFile:aj(),UnityAtlasFile:lj(),VideoFile:dj(),XMLFile:jl()}});var xj=l((sst,gj)=>{var xGe=C(),Nt=Ie(),ff=rl(),pj=ue(),gn=nn(),yGe=se(),it=z(),TGe=vt(),fr=Ne(),EGe=Nh(),mj=new xGe({Extends:pj,initialize:function(t){pj.call(this);var i=t.sys.game.config,r=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,yGe.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(it(r,"baseURL",i.loaderBaseURL)),this.setPath(it(r,"path",i.loaderPath)),this.setPrefix(it(r,"prefix",i.loaderPrefix)),this.maxParallelDownloads=it(r,"maxParallelDownloads",i.loaderMaxParallelDownloads),this.xhr=EGe(it(r,"responseType",i.loaderResponseType),it(r,"async",i.loaderAsync),it(r,"user",i.loaderUser),it(r,"password",i.loaderPassword),it(r,"timeout",i.loaderTimeout),it(r,"withCredentials",i.loaderWithCredentials)),this.crossOrigin=it(r,"crossOrigin",i.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new ff,this.inflight=new ff,this.queue=new ff,this._deleteQueue=new ff,this.totalFailed=0,this.totalComplete=0,this.state=Nt.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(fr.BOOT,this.boot,this),t.sys.events.on(fr.START,this.pluginStart,this)},boot:function(){this.systems.events.once(fr.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(fr.SHUTDOWN,this.shutdown,this)},setBaseURL:function(e){return e===void 0&&(e=""),e!==""&&e.substr(-1)!=="/"&&(e=e.concat("/")),this.baseURL=e,this},setPath:function(e){return e===void 0&&(e=""),e!==""&&e.substr(-1)!=="/"&&(e=e.concat("/")),this.path=e,this},setPrefix:function(e){return e===void 0&&(e=""),this.prefix=e,this},setCORS:function(e){return this.crossOrigin=e,this},addFile:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];this.keyExists(i)||(this.list.set(i),this.emit(gn.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(e){var t=e.hasCacheConflict();return t||this.list.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1}),!t&&this.isLoading()&&(this.inflight.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1}),this.queue.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1})),t},addPack:function(e,t){t&&e.hasOwnProperty(t)&&(e={packKey:e[t]});var i=0,r=this.baseURL,s=this.path,n=this.prefix;for(var a in e)if(!!Object.prototype.hasOwnProperty.call(e,a)){var h=e[a],o=it(h,"baseURL",r),u=it(h,"path",s),f=it(h,"prefix",n),d=it(h,"files",null),v=it(h,"defaultType","void");if(Array.isArray(d)){this.setBaseURL(o),this.setPath(u),this.setPrefix(f);for(var c=0;c<d.length;c++){var p=d[c],m=p.hasOwnProperty("type")?p.type:v;this[m]&&(this[m](p),i++)}}}return this.setBaseURL(r),this.setPath(s),this.setPrefix(n),i>0},isLoading:function(){return this.state===Nt.LOADER_LOADING||this.state===Nt.LOADER_PROCESSING},isReady:function(){return this.state===Nt.LOADER_IDLE||this.state===Nt.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(gn.START,this),this.list.size===0?this.loadComplete():(this.state=Nt.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(fr.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(gn.PROGRESS,this.progress)},update:function(){this.state===Nt.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(e){if((e.state===Nt.FILE_POPULATED||e.state===Nt.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(e),this.list.delete(e),e.crossOrigin||(e.crossOrigin=this.crossOrigin),e.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(e,t){!this.inflight||(this.inflight.delete(e),this.updateProgress(),t?(this.totalComplete++,this.queue.set(e),this.emit(gn.FILE_LOAD,e),e.onProcess()):(this.totalFailed++,this._deleteQueue.set(e),this.emit(gn.FILE_LOAD_ERROR,e),this.fileProcessComplete(e)))},fileProcessComplete:function(e){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(e.state===Nt.FILE_ERRORED?e.multiFile&&e.multiFile.onFileFailed(e):e.state===Nt.FILE_COMPLETE&&(e.multiFile?e.multiFile.isReadyToProcess()&&e.multiFile.addToCache():e.addToCache()),this.queue.delete(e),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(gn.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=Nt.LOADER_COMPLETE,this.systems.events.off(fr.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(gn.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(e){this._deleteQueue.set(e)},saveJSON:function(e,t){return this.save(JSON.stringify(e),t)},save:function(e,t,i){t===void 0&&(t="file.json"),i===void 0&&(i="application/json");var r=new Blob([e],{type:i}),s=URL.createObjectURL(r),n=document.createElement("a");return n.download=t,n.textContent="Download "+t,n.href=s,n.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var e=this.systems.game.config,t=this.systems.settings.loader;this.setBaseURL(it(t,"baseURL",e.loaderBaseURL)),this.setPath(it(t,"path",e.loaderPath)),this.setPrefix(it(t,"prefix",e.loaderPrefix)),this.state=Nt.LOADER_IDLE},shutdown:function(){this.reset(),this.state=Nt.LOADER_SHUTDOWN,this.systems.events.off(fr.UPDATE,this.update,this),this.systems.events.off(fr.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=Nt.LOADER_DESTROYED,this.systems.events.off(fr.UPDATE,this.update,this),this.systems.events.off(fr.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});TGe.register("Loader",mj,"load");gj.exports=mj});var Tj=l((nst,yj)=>{var SGe=Ie(),_Ge=ze(),ux={Events:nn(),FileTypes:cj(),File:Ke(),FileTypesManager:se(),GetURL:Ih(),LoaderPlugin:xj(),MergeXHRSettings:Ql(),MultiFile:Bi(),XHRLoader:y0(),XHRSettings:Nh()};ux=_Ge(!1,ux,SGe);yj.exports=ux});var lx=l((ast,Ej)=>{var wGe=C(),CGe=new wGe({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});Ej.exports=CGe});var wj=l((hst,_j)=>{var Sj=lx(),RGe=C(),qGe=Ne(),AGe=new RGe({Extends:Sj,initialize:function(t,i,r){Sj.call(this,i),this.scene=t,this.systems=t.sys,this.pluginKey=r,t.sys.events.once(qGe.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});_j.exports=AGe});var Rj=l((ost,Cj)=>{Cj.exports={BasePlugin:lx(),DefaultPlugins:ru(),PluginCache:vt(),PluginManager:qp(),ScenePlugin:wj()}});var Aj=l((ust,qj)=>{qj.exports={CanvasRenderer:vc(),GetBlendModes:fc(),SetTransform:St()}});var Mj=l((lst,Pj)=>{Pj.exports={Canvas:lc(),WebGL:zc()}});var Lj=l((fst,bj)=>{bj.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)});var Fj=l((dst,Oj)=>{var PGe=C(),MGe=lu(),df=z(),bGe=Lj(),LGe=Ic(),fx=Qi(),OGe=new PGe({Extends:fx,initialize:function(t){t.renderTarget=df(t,"renderTarget",1),t.fragShader=df(t,"fragShader",bGe),t.vertShader=df(t,"vertShader",LGe),t.attributes=df(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],fx.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new MGe,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){fx.prototype.boot.call(this);var e=this.manager.UTILITY_PIPELINE;this.fullFrame1=e.fullFrame1,this.fullFrame2=e.fullFrame2,this.halfFrame1=e.halfFrame1,this.halfFrame2=e.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(e){this.bindAndDraw(e)},copyFrame:function(e,t,i,r,s){this.manager.copyFrame(e,t,i,r,s)},copyToGame:function(e){this.manager.copyToGame(e)},drawFrame:function(e,t,i){this.manager.drawFrame(e,t,i,this.colorMatrix)},blendFrames:function(e,t,i,r,s){this.manager.blendFrames(e,t,i,r,s)},blendFramesAdditive:function(e,t,i,r,s){this.manager.blendFramesAdditive(e,t,i,r,s)},clearFrame:function(e,t){this.manager.clearFrame(e,t)},blitFrame:function(e,t,i,r,s,n){this.manager.blitFrame(e,t,i,r,s,n)},copyFrameRect:function(e,t,i,r,s,n,a,h){this.manager.copyFrameRect(e,t,i,r,s,n,a,h)},bindAndDraw:function(e,t,i,r,s){i===void 0&&(i=!0),r===void 0&&(r=!0);var n=this.gl,a=this.renderer;this.bind(s),this.set1i("uMainSampler",0),t?(n.viewport(0,0,t.width,t.height),n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t.texture,0),i&&(r?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT))):(a.popFramebuffer(!1,!1,!1),a.currentFramebuffer||n.viewport(0,0,a.width,a.height)),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),t?(n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null)):a.resetTextures()}});Oj.exports=OGe});var Ij=l((vst,Dj)=>{var FGe=Ks(),DGe=ze(),dx={BitmapMaskPipeline:xc(),Events:cc(),GraphicsPipeline:Cc(),LightPipeline:bc(),MultiPipeline:Gn(),PointLightPipeline:Oc(),PostFXPipeline:Fj(),RopePipeline:Fc(),SinglePipeline:Dc(),UtilityPipeline:Gc()};dx=DGe(!1,dx,FGe);Dj.exports=dx});var Gj=l((cst,Nj)=>{var IGe=In(),NGe=ze(),vx={PipelineManager:Uc(),Pipelines:Ij(),RenderTarget:ih(),Utils:Te(),WebGLPipeline:Qi(),WebGLRenderer:Yc(),WebGLShader:mc()};vx=NGe(!1,vx,IGe);Nj.exports=vx});var Uj=l((pst,Bj)=>{Bj.exports={Canvas:Aj(),Events:Hs(),Snapshot:Mj(),WebGL:Gj()}});var zj=l((mst,kj)=>{var vf=ze(),cf=Tu(),Nr={Center:up(),Events:Mn(),Orientation:lp(),ScaleManager:Pp(),ScaleModes:fp(),Zoom:dp()};Nr=vf(!1,Nr,cf.CENTER);Nr=vf(!1,Nr,cf.ORIENTATION);Nr=vf(!1,Nr,cf.SCALE_MODE);Nr=vf(!1,Nr,cf.ZOOM);kj.exports=Nr});var Vj=l((gst,Xj)=>{var GGe=Le(),BGe=C(),Ei=Ne(),Ui=z(),UGe=vt(),Yj=new BGe({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(Ei.BOOT,this.boot,this),t.sys.events.on(Ei.START,this.pluginStart,this)},boot:function(){this.systems.events.once(Ei.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(Ei.SHUTDOWN,this.shutdown,this)},start:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",e,t),this},restart:function(e){var t=this.key;return this.manager.queueOp("stop",t),this.manager.queueOp("start",t,e),this},transition:function(e){e===void 0&&(e={});var t=Ui(e,"target",!1),i=this.manager.getScene(t);if(!t||!this.checkValidTransition(i))return!1;var r=Ui(e,"duration",1e3);this._elapsed=0,this._target=i,this._duration=r,this._willSleep=Ui(e,"sleep",!1),this._willRemove=Ui(e,"remove",!1);var s=Ui(e,"onUpdate",null);s&&(this._onUpdate=s,this._onUpdateScope=Ui(e,"onUpdateScope",this.scene));var n=Ui(e,"allowInput",!1);this.settings.transitionAllowInput=n;var a=i.sys.settings;return a.isTransition=!0,a.transitionFrom=this.scene,a.transitionDuration=r,a.transitionAllowInput=n,Ui(e,"moveAbove",!1)?this.manager.moveAbove(this.key,t):Ui(e,"moveBelow",!1)&&this.manager.moveBelow(this.key,t),i.sys.isSleeping()?i.sys.wake(Ui(e,"data")):this.manager.start(t,Ui(e,"data")),this.systems.events.emit(Ei.TRANSITION_OUT,i,r),this.systems.events.on(Ei.UPDATE,this.step,this),!0},checkValidTransition:function(e){return!(!e||e.sys.isActive()||e.sys.isTransitioning()||e===this.scene||this.systems.isTransitioning())},step:function(e,t){this._elapsed+=t,this.transitionProgress=GGe(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var e=this._target.sys,t=this._target.sys.settings;this.systems.events.off(Ei.UPDATE,this.step,this),e.events.emit(Ei.TRANSITION_COMPLETE,this.scene),t.isTransition=!1,t.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(e,t,i,r){return this.manager.add(e,t,i,r)},launch:function(e,t){return e&&e!==this.key&&this.manager.queueOp("start",e,t),this},run:function(e,t){return e&&e!==this.key&&this.manager.queueOp("run",e,t),this},pause:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("pause",e,t),this},resume:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("resume",e,t),this},sleep:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("sleep",e,t),this},wake:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("wake",e,t),this},switch:function(e){return e!==this.key&&this.manager.queueOp("switch",this.key,e),this},stop:function(e,t){return e===void 0&&(e=this.key),this.manager.queueOp("stop",e,t),this},setActive:function(e,t,i){t===void 0&&(t=this.key);var r=this.manager.getScene(t);return r&&r.sys.setActive(e,i),this},setVisible:function(e,t){t===void 0&&(t=this.key);var i=this.manager.getScene(t);return i&&i.sys.setVisible(e),this},isSleeping:function(e){return e===void 0&&(e=this.key),this.manager.isSleeping(e)},isActive:function(e){return e===void 0&&(e=this.key),this.manager.isActive(e)},isPaused:function(e){return e===void 0&&(e=this.key),this.manager.isPaused(e)},isVisible:function(e){return e===void 0&&(e=this.key),this.manager.isVisible(e)},swapPosition:function(e,t){return t===void 0&&(t=this.key),e!==t&&this.manager.swapPosition(e,t),this},moveAbove:function(e,t){return t===void 0&&(t=this.key),e!==t&&this.manager.moveAbove(e,t),this},moveBelow:function(e,t){return t===void 0&&(t=this.key),e!==t&&this.manager.moveBelow(e,t),this},remove:function(e){return e===void 0&&(e=this.key),this.manager.remove(e),this},moveUp:function(e){return e===void 0&&(e=this.key),this.manager.moveUp(e),this},moveDown:function(e){return e===void 0&&(e=this.key),this.manager.moveDown(e),this},bringToTop:function(e){return e===void 0&&(e=this.key),this.manager.bringToTop(e),this},sendToBack:function(e){return e===void 0&&(e=this.key),this.manager.sendToBack(e),this},get:function(e){return this.manager.getScene(e)},getIndex:function(e){return e===void 0&&(e=this.key),this.manager.getIndex(e)},shutdown:function(){var e=this.systems.events;e.off(Ei.SHUTDOWN,this.shutdown,this),e.off(Ei.POST_UPDATE,this.step,this),e.off(Ei.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(Ei.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});UGe.register("ScenePlugin",Yj,"scenePlugin");Xj.exports=Yj});var Hj=l((xst,Wj)=>{var kGe=vh(),zGe=ze(),cx={Events:Ne(),GetPhysicsPlugins:Mp(),GetScenePlugins:bp(),SceneManager:Np(),ScenePlugin:Vj(),Settings:Fp(),Systems:Du()};cx=zGe(!1,cx,kGe);Wj.exports=cx});var $j=l((yst,Qj)=>{var YGe=Jp();function gf(e){var t=[".left",".top",".right",".bottom"];if(!(this instanceof gf))return new gf(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}gf.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!mf(e,t))return i;for(var s=[],n,a,h,o;t;){for(n=0,a=t.children.length;n<a;n++)h=t.children[n],o=t.leaf?r(h):h,mf(e,o)&&(t.leaf?i.push(h):mx(e,o)?this._all(h,i):s.push(h));t=s.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!mf(e,t))return!1;for(var r=[],s,n,a,h;t;){for(s=0,n=t.children.length;s<n;s++)if(a=t.children[s],h=t.leaf?i(a):a,mf(e,h)){if(t.leaf||mx(e,h))return!0;r.push(a)}t=r.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=r;else if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=qa([]),this},remove:function(e,t){if(!e)return this;for(var i=this.data,r=this.toBBox(e),s=[],n=[],a,h,o,u;i||s.length;){if(i||(i=s.pop(),h=s[s.length-1],a=n.pop(),u=!0),i.leaf&&(o=XGe(e,i.children,t),o!==-1))return i.children.splice(o,1),s.push(i),this._condense(s),this;!u&&!i.leaf&&mx(i,r)?(s.push(i),n.push(a),a=0,h=i,i=i.children[0]):h?(a++,i=h.children[a],u=!1):i=null}return this},toBBox:function(e){return e},compareMinX:Kj,compareMinY:Zj,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s=i-t+1,n=this._maxEntries,a;if(s<=n)return a=qa(e.slice(t,i+1)),Ra(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(n)),n=Math.ceil(s/Math.pow(n,r-1))),a=qa([]),a.leaf=!1,a.height=r;var h=Math.ceil(s/n),o=h*Math.ceil(Math.sqrt(n)),u,f,d,v;for(Jj(e,t,i,o,this.compareMinX),u=t;u<=i;u+=o)for(d=Math.min(u+o-1,i),Jj(e,u,d,h,this.compareMinY),f=u;f<=d;f+=h)v=Math.min(f+h-1,d),a.children.push(this._build(e,f,v,r-1));return Ra(a,this.toBBox),a},_chooseSubtree:function(e,t,i,r){for(var s,n,a,h,o,u,f,d;r.push(t),!(t.leaf||r.length-1===i);){for(f=d=1/0,s=0,n=t.children.length;s<n;s++)a=t.children[s],o=px(a),u=VGe(e,a)-o,u<d?(d=u,f=o<f?o:f,h=a):u===d&&o<f&&(f=o,h=a);t=h||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),n=[],a=this._chooseSubtree(s,this.data,t,n);for(a.children.push(e),Wh(a,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),a=qa(i.children.splice(n,i.children.length-n));a.height=i.height,a.leaf=i.leaf,Ra(i,this.toBBox),Ra(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(e,t){this.data=qa([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Ra(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,n,a,h,o,u,f;for(o=u=1/0,r=t;r<=i-t;r++)s=Vh(e,0,r,this.toBBox),n=Vh(e,r,i,this.toBBox),a=WGe(s,n),h=px(s)+px(n),a<o?(o=a,f=r,u=h<u?h:u):a===o&&h<u&&(u=h,f=r);return f},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:Kj,s=e.leaf?this.compareMinY:Zj,n=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,s);n<a&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s=this.toBBox,n=Vh(e,0,t,s),a=Vh(e,i-t,i,s),h=pf(n)+pf(a),o,u;for(o=t;o<i-t;o++)u=e.children[o],Wh(n,e.leaf?s(u):u),h+=pf(n);for(o=i-t-1;o>=t;o--)u=e.children[o],Wh(a,e.leaf?s(u):u),h+=pf(a);return h},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)Wh(t[r],e)},_condense:function(e){for(var t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Ra(e[t],this.toBBox)},compareMinX:function(e,t){return e.left-t.left},compareMinY:function(e,t){return e.top-t.top},toBBox:function(e){return{minX:e.left,minY:e.top,maxX:e.right,maxY:e.bottom}}};function XGe(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function Ra(e,t){Vh(e,0,e.children.length,t,e)}function Vh(e,t,i,r,s){s||(s=qa(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n=t,a;n<i;n++)a=e.children[n],Wh(s,e.leaf?r(a):a);return s}function Wh(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Kj(e,t){return e.minX-t.minX}function Zj(e,t){return e.minY-t.minY}function px(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function pf(e){return e.maxX-e.minX+(e.maxY-e.minY)}function VGe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function WGe(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function mx(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function mf(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function qa(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Jj(e,t,i,r,s){for(var n=[t,i],a;n.length;)i=n.pop(),t=n.pop(),!(i-t<=r)&&(a=t+Math.ceil((i-t)/r/2)*r,YGe(e,a,t,i,s),n.push(t,a,a,i))}Qj.exports=gf});var eee=l((Tst,jj)=>{jj.exports={Events:$p(),List:ta(),Map:Rn(),ProcessQueue:jp(),RTree:$j(),Set:rl(),Size:Ap()}});var iee=l((Est,tee)=>{var HGe={LINEAR:0,NEAREST:1};tee.exports=HGe});var nee=l((Sst,see)=>{var KGe=ze(),ree=iee(),gx={CanvasTexture:kp(),Events:Dn(),FilterMode:ree,Frame:Hn(),Parsers:zp(),Texture:Nu(),TextureManager:Yp(),TextureSource:Gp()};gx=KGe(!1,gx,ree);see.exports=gx});var xx=l((_st,aee)=>{var ZGe=C(),Gr=z(),JGe=new ZGe({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(e){return this.delay=Gr(e,"delay",0),this.repeat=Gr(e,"repeat",0),this.loop=Gr(e,"loop",!1),this.callback=Gr(e,"callback",void 0),this.callbackScope=Gr(e,"callbackScope",this.callback),this.args=Gr(e,"args",[]),this.timeScale=Gr(e,"timeScale",1),this.startAt=Gr(e,"startAt",0),this.paused=Gr(e,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var e=this.delay+this.delay*this.repeat,t=this.elapsed+this.delay*(this.repeat-this.repeatCount);return t/e}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(e){e===void 0&&(e=!1),this.elapsed=this.delay,this.hasDispatched=!e,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});aee.exports=JGe});var lee=l((wst,uee)=>{var QGe=C(),$Ge=vt(),dr=Ne(),hee=xx(),yx=tn(),oee=new QGe({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(dr.BOOT,this.boot,this),t.sys.events.on(dr.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(dr.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(dr.PRE_UPDATE,this.preUpdate,this),e.on(dr.UPDATE,this.update,this),e.once(dr.SHUTDOWN,this.shutdown,this)},addEvent:function(e){var t;return e instanceof hee?(t=e,this.removeEvent(t),t.elapsed=t.startAt,t.hasDispatched=!1,t.repeatCount=t.repeat===-1||t.loop?999999999999:t.repeat):t=new hee(e),this._pendingInsertion.push(t),t},delayedCall:function(e,t,i,r){return this.addEvent({delay:e,callback:t,args:i,callbackScope:r})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];yx(this._pendingRemoval,i),yx(this._pendingInsertion,i),yx(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var e=this._pendingRemoval.length,t=this._pendingInsertion.length;if(!(e===0&&t===0)){var i,r;for(i=0;i<e;i++){r=this._pendingRemoval[i];var s=this._active.indexOf(r);s>-1&&this._active.splice(s,1),r.destroy()}for(i=0;i<t;i++)r=this._pendingInsertion[i],this._active.push(r);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(e,t){if(this.now=e,!this.paused){t*=this.timeScale;for(var i=0;i<this._active.length;i++){var r=this._active[i];if(!r.paused&&(r.elapsed+=t*r.timeScale,r.elapsed>=r.delay)){var s=r.elapsed-r.delay;r.elapsed=r.delay,!r.hasDispatched&&r.callback&&(r.hasDispatched=!0,r.callback.apply(r.callbackScope,r.args)),r.repeatCount>0?(r.repeatCount--,r.elapsed=s,r.hasDispatched=!1):this._pendingRemoval.push(r)}}}},shutdown:function(){var e;for(e=0;e<this._pendingInsertion.length;e++)this._pendingInsertion[e].destroy();for(e=0;e<this._active.length;e++)this._active[e].destroy();for(e=0;e<this._pendingRemoval.length;e++)this._pendingRemoval[e].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var t=this.systems.events;t.off(dr.PRE_UPDATE,this.preUpdate,this),t.off(dr.UPDATE,this.update,this),t.off(dr.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(dr.START,this.start,this),this.scene=null,this.systems=null}});$Ge.register("Clock",oee,"time");uee.exports=oee});var dee=l((Cst,fee)=>{fee.exports={Clock:lee(),TimerEvent:xx()}});var Hh=l((Rst,vee)=>{var jGe=function(e,t,i){var r;if(e.hasOwnProperty(t)){var s=typeof e[t];s==="function"?r=function(n,a,h,o,u,f){return e[t](n,a,h,o,u,f)}:r=function(){return e[t]}}else typeof i=="function"?r=i:r=function(){return i};return r};vee.exports=jGe});var pee=l((qst,cee)=>{cee.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]});var Tx=l((Ast,mee)=>{var eBe=pee(),tBe=function(e){var t,i=[];if(e.hasOwnProperty("props"))for(t in e.props)t.substr(0,1)!=="_"&&i.push({key:t,value:e.props[t]});else for(t in e)eBe.indexOf(t)===-1&&t.substr(0,1)!=="_"&&i.push({key:t,value:e[t]});return i};mee.exports=tBe});var xf=l((Pst,gee)=>{var iBe=he(),rBe=function(e){var t=iBe(e,"targets",null);return t===null||(typeof t=="function"&&(t=t.call()),Array.isArray(t)||(t=[t])),t};gee.exports=rBe});var Ex=l((Mst,xee)=>{var sBe=he(),nBe=function(e){var t=sBe(e,"tweens",null);return t===null?[]:(typeof t=="function"&&(t=t.call()),Array.isArray(t)||(t=[t]),t)};xee.exports=nBe});var yf=l((bst,See)=>{function yee(e){return!!e.getActive&&typeof e.getActive=="function"}function Tee(e){return!!e.getStart&&typeof e.getStart=="function"}function Eee(e){return!!e.getEnd&&typeof e.getEnd=="function"}function aBe(e){return Tee(e)||Eee(e)||yee(e)}var Kh=function(e,t){var i,r=function(p,m,x){return x},s=function(p,m,x){return x},n=null,a=typeof t;if(a==="number")r=function(){return t};else if(a==="string"){var h=t[0],o=parseFloat(t.substr(2));switch(h){case"+":r=function(p,m,x){return x+o};break;case"-":r=function(p,m,x){return x-o};break;case"*":r=function(p,m,x){return x*o};break;case"/":r=function(p,m,x){return x/o};break;default:r=function(){return parseFloat(t)}}}else if(a==="function")r=t;else if(a==="object")if(aBe(t))yee(t)&&(n=t.getActive),Eee(t)&&(r=t.getEnd),Tee(t)&&(s=t.getStart);else if(t.hasOwnProperty("value"))i=Kh(e,t.value);else{var u=t.hasOwnProperty("to"),f=t.hasOwnProperty("from"),d=t.hasOwnProperty("start");if(u&&(f||d)){if(i=Kh(e,t.to),d){var v=Kh(e,t.start);i.getActive=v.getEnd}if(f){var c=Kh(e,t.from);i.getStart=c.getEnd}}}return i||(i={getActive:n,getEnd:r,getStart:s}),i};See.exports=Kh});var Tf=l((Lst,_ee)=>{var hBe={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};_ee.exports=hBe});var Cee=l((Ost,wee)=>{wee.exports="complete"});var qee=l((Fst,Ree)=>{Ree.exports="loop"});var Pee=l((Dst,Aee)=>{Aee.exports="pause"});var bee=l((Ist,Mee)=>{Mee.exports="resume"});var Oee=l((Nst,Lee)=>{Lee.exports="start"});var Dee=l((Gst,Fee)=>{Fee.exports="update"});var Nee=l((Bst,Iee)=>{Iee.exports="active"});var Bee=l((Ust,Gee)=>{Gee.exports="complete"});var kee=l((kst,Uee)=>{Uee.exports="loop"});var Yee=l((zst,zee)=>{zee.exports="repeat"});var Vee=l((Yst,Xee)=>{Xee.exports="start"});var Hee=l((Xst,Wee)=>{Wee.exports="stop"});var Zee=l((Vst,Kee)=>{Kee.exports="update"});var Qee=l((Wst,Jee)=>{Jee.exports="yoyo"});var Ef=l((Hst,$ee)=>{$ee.exports={TIMELINE_COMPLETE:Cee(),TIMELINE_LOOP:qee(),TIMELINE_PAUSE:Pee(),TIMELINE_RESUME:bee(),TIMELINE_START:Oee(),TIMELINE_UPDATE:Dee(),TWEEN_ACTIVE:Nee(),TWEEN_COMPLETE:Bee(),TWEEN_LOOP:kee(),TWEEN_REPEAT:Yee(),TWEEN_START:Vee(),TWEEN_STOP:Hee(),TWEEN_UPDATE:Zee(),TWEEN_YOYO:Qee()}});var Sf=l((Kst,tte)=>{var oBe=C(),jee=ue(),oi=Ef(),uBe=Me(),lBe=ie(),k=_n(),fBe=Oe(),ete=new oBe({Extends:jee,initialize:function(t,i,r){jee.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=i,this.totalData=i.length,this.targets=r,this.totalTargets=r.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=k.PENDING_ADD,this._pausedState=k.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(e){return e===void 0&&(e=0),this.data[e].current},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===k.ACTIVE},isPaused:function(){return this.state===k.PAUSED},hasTarget:function(e){return this.targets.indexOf(e)!==-1},updateTo:function(e,t,i){i===void 0&&(i=!1);for(var r=0;r<this.totalData;r++){var s=this.data[r];s.key===e&&(s.end=t,i&&(s.start=s.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===k.ACTIVE?this.seek(0):this.state===k.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===k.PENDING_ADD?this:this.play()},calcDuration:function(){for(var e=0,t=fBe.MAX_SAFE_INTEGER,i=this.data,r=0;r<this.totalData;r++){var s=i[r];s.t1=s.duration+s.hold,s.yoyo&&(s.t1+=s.duration),s.t2=s.t1+s.repeatDelay,s.totalDuration=s.delay+s.t1,s.repeat===-1?s.totalDuration+=s.t2*999999999999:s.repeat>0&&(s.totalDuration+=s.t2*s.repeat),s.totalDuration>e&&(e=s.totalDuration),s.delay<t&&(t=s.delay)}this.duration=Math.max(e,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=t},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=k.PENDING_ADD,this._pausedState=k.INIT,!1;for(var e=this.data,t=this.totalTargets,i=0;i<this.totalData;i++){var r=e[i],s=r.target,n=r.gen,a=r.key,h=r.index;r.delay=n.delay(s,a,0,h,t,this),r.duration=Math.max(n.duration(s,a,0,h,t,this),.001),r.hold=n.hold(s,a,0,h,t,this),r.repeat=n.repeat(s,a,0,h,t,this),r.repeatDelay=n.repeatDelay(s,a,0,h,t,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=k.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(oi.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=k.LOOP_DELAY):(this.state=k.ACTIVE,this.dispatchTweenEvent(oi.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=k.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=k.PENDING_REMOVE,this.dispatchTweenEvent(oi.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===k.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=k.PAUSED,this)},play:function(e){e===void 0&&(e=!1);var t=this.state;return t===k.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=k.ACTIVE,this):t===k.ACTIVE||t===k.PENDING_ADD&&this._pausedState===k.PENDING_ADD?this:!this.parentIsTimeline&&(t===k.PENDING_REMOVE||t===k.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(e),this.calculatedOffset===0?this.state=k.ACTIVE:(this.countdown=this.calculatedOffset,this.state=k.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(e),this.state=k.ACTIVE,this.makeActive()),this)},resetTweenData:function(e){for(var t=this.data,i=this.totalData,r=this.totalTargets,s=0;s<i;s++){var n=t[s],a=n.target,h=n.key,o=n.index;n.progress=0,n.elapsed=0,n.repeatCounter=n.repeat===-1?999999999999:n.repeat,e?(n.start=n.getStartValue(a,h,n.start,o,r,this),n.end=n.getEndValue(a,h,n.end,o,r,this),n.current=n.start,n.state=k.PLAYING_FORWARD):n.state=k.PENDING_RENDER,n.delay>0&&(n.elapsed=n.delay,n.state=k.DELAY),n.getActiveValue&&(a[h]=n.getActiveValue(n.target,n.key,n.start))}},resume:function(){return this.state===k.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(e,t){t===void 0&&(t=16.6),this.state===k.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var i=this.data,r=this.totalTargets,s=0;s<this.totalData;s++){var n=i[s],a=n.target,h=n.gen,o=n.key,u=n.index;n.progress=0,n.elapsed=0,n.repeatCounter=n.repeat===-1?999999999999:n.repeat,n.delay=h.delay(a,o,0,u,r,this),n.duration=Math.max(h.duration(a,o,0,u,r,this),.001),n.hold=h.hold(a,o,0,u,r,this),n.repeat=h.repeat(a,o,0,u,r,this),n.repeatDelay=h.repeatDelay(a,o,0,u,r,this),n.current=n.start,n.state=k.PLAYING_FORWARD,this.updateTweenData(this,n,0,u,r),n.delay>0&&(n.elapsed=n.delay,n.state=k.DELAY)}this.calcDuration();var f=!1;this.state===k.PAUSED&&(f=!0,this.state=k.ACTIVE),this.isSeeking=!0;do this.update(0,t);while(this.totalProgress<e);return this.isSeeking=!1,f&&(this.state=k.PAUSED),this},setCallback:function(e,t,i,r){return this.callbacks[e]={func:t,scope:r,params:[this,null].concat(i)},this},complete:function(e){return e===void 0&&(e=0),e?(this.state=k.COMPLETE_DELAY,this.countdown=e):(this.state=k.PENDING_REMOVE,this.dispatchTweenEvent(oi.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(e){return this.state===k.ACTIVE&&e!==void 0&&this.seek(e),this.state!==k.REMOVED&&((this.state===k.PAUSED||this.state===k.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(oi.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=k.PENDING_REMOVE),this},update:function(e,t){if(this.state===k.PAUSED)return!1;switch(this.useFrames&&(t=1*this.parent.timeScale),t*=this.timeScale,this.elapsed+=t,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=t,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case k.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=t,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(oi.TWEEN_START,this.callbacks.onStart)));for(var i=!1,r=0;r<this.totalData;r++){var s=this.data[r];this.updateTweenData(this,s,t)&&(i=!0)}i||this.nextState();break;case k.LOOP_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=k.ACTIVE,this.dispatchTweenEvent(oi.TWEEN_LOOP,this.callbacks.onLoop));break;case k.OFFSET_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=k.ACTIVE);break;case k.COMPLETE_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=k.PENDING_REMOVE,this.dispatchTweenEvent(oi.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===k.PENDING_REMOVE},dispatchTweenDataEvent:function(e,t,i){this.isSeeking||(this.emit(e,this,i.key,i.target,i.current,i.previous),t&&(t.params[1]=i.target,t.func.apply(t.scope,t.params)))},dispatchTweenEvent:function(e,t){this.isSeeking||(this.emit(e,this,this.targets),t&&(t.params[1]=this.targets,t.func.apply(t.scope,t.params)))},setStateFromEnd:function(e,t,i){return t.yoyo?(t.elapsed=i,t.progress=i/t.duration,t.flipX&&t.target.toggleFlipX(),t.flipY&&t.target.toggleFlipY(),this.dispatchTweenDataEvent(oi.TWEEN_YOYO,e.callbacks.onYoyo,t),t.start=t.getStartValue(t.target,t.key,t.start,t.index,e.totalTargets,e),k.PLAYING_BACKWARD):t.repeatCounter>0?(t.repeatCounter--,t.elapsed=i,t.progress=i/t.duration,t.flipX&&t.target.toggleFlipX(),t.flipY&&t.target.toggleFlipY(),t.start=t.getStartValue(t.target,t.key,t.start,t.index,e.totalTargets,e),t.end=t.getEndValue(t.target,t.key,t.start,t.index,e.totalTargets,e),t.repeatDelay>0?(t.elapsed=t.repeatDelay-i,t.current=t.start,t.target[t.key]=t.current,k.REPEAT_DELAY):(this.dispatchTweenDataEvent(oi.TWEEN_REPEAT,e.callbacks.onRepeat,t),k.PLAYING_FORWARD)):k.COMPLETE},setStateFromStart:function(e,t,i){return t.repeatCounter>0?(t.repeatCounter--,t.elapsed=i,t.progress=i/t.duration,t.flipX&&t.target.toggleFlipX(),t.flipY&&t.target.toggleFlipY(),t.end=t.getEndValue(t.target,t.key,t.start,t.index,e.totalTargets,e),t.repeatDelay>0?(t.elapsed=t.repeatDelay-i,t.current=t.start,t.target[t.key]=t.current,k.REPEAT_DELAY):(this.dispatchTweenDataEvent(oi.TWEEN_REPEAT,e.callbacks.onRepeat,t),k.PLAYING_FORWARD)):k.COMPLETE},updateTweenData:function(e,t,i){var r=t.target;switch(t.state){case k.PLAYING_FORWARD:case k.PLAYING_BACKWARD:if(!r){t.state=k.COMPLETE;break}var s=t.elapsed,n=t.duration,a=0;s+=i,s>n&&(a=s-n,s=n);var h=t.state===k.PLAYING_FORWARD,o=s/n;if(t.elapsed=s,t.progress=o,t.previous=t.current,o===1)h?(t.current=t.end,r[t.key]=t.end,t.hold>0?(t.elapsed=t.hold-a,t.state=k.HOLD_DELAY):t.state=this.setStateFromEnd(e,t,a)):(t.current=t.start,r[t.key]=t.start,t.state=this.setStateFromStart(e,t,a));else{var u=h?t.ease(o):t.ease(1-o);t.current=t.start+(t.end-t.start)*u,r[t.key]=t.current}this.dispatchTweenDataEvent(oi.TWEEN_UPDATE,e.callbacks.onUpdate,t);break;case k.DELAY:t.elapsed-=i,t.elapsed<=0&&(t.elapsed=Math.abs(t.elapsed),t.state=k.PENDING_RENDER);break;case k.REPEAT_DELAY:t.elapsed-=i,t.elapsed<=0&&(t.elapsed=Math.abs(t.elapsed),t.state=k.PLAYING_FORWARD,this.dispatchTweenDataEvent(oi.TWEEN_REPEAT,e.callbacks.onRepeat,t));break;case k.HOLD_DELAY:t.elapsed-=i,t.elapsed<=0&&(t.state=this.setStateFromEnd(e,t,Math.abs(t.elapsed)));break;case k.PENDING_RENDER:r?(t.start=t.getStartValue(r,t.key,r[t.key],t.index,e.totalTargets,e),t.end=t.getEndValue(r,t.key,t.start,t.index,e.totalTargets,e),t.current=t.start,r[t.key]=t.start,t.state=k.PLAYING_FORWARD):t.state=k.COMPLETE;break}return t.state!==k.COMPLETE}});ete.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"];lBe.register("tween",function(e){return this.scene.sys.tweens.add(e)});uBe.register("tween",function(e){return this.scene.sys.tweens.create(e)});tte.exports=ete});var _f=l((Zst,ite)=>{var dBe=function(e,t,i,r,s,n,a,h,o,u,f,d,v,c,p){return{target:e,index:t,key:i,getActiveValue:n,getEndValue:r,getStartValue:s,ease:a,duration:0,totalDuration:0,delay:0,yoyo:u,hold:0,repeat:0,repeatDelay:0,flipX:c,flipY:p,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:h,duration:o,hold:f,repeat:d,repeatDelay:v},state:0}};ite.exports=dBe});var _x=l((Jst,ste)=>{var vBe=Tf(),wf=we(),Sx=Sn(),cBe=gs(),Zh=Hh(),Gs=he(),pBe=yf(),rte=Sf(),mBe=_f(),gBe=function(e,t,i){i===void 0&&(i=vBe);var r=Gs(t,"from",0),s=Gs(t,"to",1),n=[{value:r}],a=Zh(t,"delay",i.delay),h=Zh(t,"duration",i.duration),o=Gs(t,"easeParams",i.easeParams),u=cBe(Gs(t,"ease",i.ease),o),f=Zh(t,"hold",i.hold),d=Zh(t,"repeat",i.repeat),v=Zh(t,"repeatDelay",i.repeatDelay),c=Sx(t,"yoyo",i.yoyo),p=[],m=pBe("value",s),x=mBe(n[0],0,"value",m.getEnd,m.getStart,m.getActive,u,a,h,c,f,d,v,!1,!1);x.start=r,x.current=r,x.to=s,p.push(x);var g=new rte(e,p,n);g.offset=wf(t,"offset",null),g.completeDelay=wf(t,"completeDelay",0),g.loop=Math.round(wf(t,"loop",0)),g.loopDelay=Math.round(wf(t,"loopDelay",0)),g.paused=Sx(t,"paused",!1),g.useFrames=Sx(t,"useFrames",!1);for(var y=Gs(t,"callbackScope",g),T=rte.TYPES,S=0;S<T.length;S++){var E=T[S],_=Gs(t,E,!1);if(_){var w=Gs(t,E+"Scope",y),R=Gs(t,E+"Params",[]);g.setCallback(E,_,R,w)}}return g};ste.exports=gBe});var wx=l((Qst,nte)=>{var xBe=gs(),Cf=he(),yBe=Oe(),TBe=function(e,t){t===void 0&&(t={});var i,r=Cf(t,"start",0),s=Cf(t,"ease",null),n=Cf(t,"grid",null),a=Cf(t,"from",0),h=a==="first",o=a==="center",u=a==="last",f=typeof a=="number",d=Array.isArray(e),v=parseFloat(d?e[0]:e),c=d?parseFloat(e[1]):0,p=Math.max(v,c);if(d&&(r+=v),n){var m=n[0],x=n[1],g=0,y=0,T=0,S=0,E=[];u?(g=m-1,y=x-1):f?(g=a%m,y=Math.floor(a/m)):o&&(g=(m-1)/2,y=(x-1)/2);for(var _=yBe.MIN_SAFE_INTEGER,w=0;w<x;w++){E[w]=[];for(var R=0;R<m;R++){T=g-R,S=y-w;var q=Math.sqrt(T*T+S*S);q>_&&(_=q),E[w][R]=q}}}var A=s?xBe(s):null;return n?i=function(P,L,b,G){var M=0,D=G%m,I=Math.floor(G/m);D>=0&&D<m&&I>=0&&I<x&&(M=E[I][D]);var F;if(d){var O=c-v;A?F=M/_*O*A(M/_):F=M/_*O}else A?F=M*v*A(M/_):F=M*v;return F+r}:i=function(P,L,b,G,M){M--;var D;h?D=G:o?D=Math.abs(M/2-G):u?D=M-G:f&&(D=Math.abs(a-G));var I;if(d){var F;o?F=(c-v)/M*(D*2):F=(c-v)/M*D,A?I=F*A(D/M):I=F}else A?I=M*p*A(D/M):I=D*v;return I+r},i};nte.exports=TBe});var Jh=l(($st,ote)=>{var EBe=Tf(),Rf=we(),Bs=Sn(),ate=gs(),vr=Hh(),SBe=Tx(),_Be=xf(),Us=he(),wBe=yf(),hte=Sf(),CBe=_f(),RBe=function(e,t,i){i===void 0&&(i=EBe);for(var r=i.targets?i.targets:_Be(t),s=SBe(t),n=vr(t,"delay",i.delay),a=vr(t,"duration",i.duration),h=Us(t,"easeParams",i.easeParams),o=ate(Us(t,"ease",i.ease),h),u=vr(t,"hold",i.hold),f=vr(t,"repeat",i.repeat),d=vr(t,"repeatDelay",i.repeatDelay),v=Bs(t,"yoyo",i.yoyo),c=Bs(t,"flipX",i.flipX),p=Bs(t,"flipY",i.flipY),m=[],x=0;x<s.length;x++)for(var g=s[x].key,y=s[x].value,T=0;T<r.length;T++){var S=wBe(g,y),E=CBe(r[T],T,g,S.getEnd,S.getStart,S.getActive,ate(Us(y,"ease",o),Us(y,"easeParams",h)),vr(y,"delay",n),vr(y,"duration",a),Bs(y,"yoyo",v),vr(y,"hold",u),vr(y,"repeat",f),vr(y,"repeatDelay",d),Bs(y,"flipX",c),Bs(y,"flipY",p));m.push(E)}var _=new hte(e,m,r);_.offset=Rf(t,"offset",null),_.completeDelay=Rf(t,"completeDelay",0),_.loop=Math.round(Rf(t,"loop",0)),_.loopDelay=Math.round(Rf(t,"loopDelay",0)),_.paused=Bs(t,"paused",!1),_.useFrames=Bs(t,"useFrames",!1);for(var w=Us(t,"callbackScope",_),R=hte.TYPES,q=0;q<R.length;q++){var A=R[q],P=Us(t,A,!1);if(P){var L=Us(t,A+"Scope",w),b=Us(t,A+"Params",[]);_.setCallback(A,P,b,L)}}return _};ote.exports=RBe});var Rx=l((jst,lte)=>{var qBe=C(),ute=ue(),ks=Ef(),ABe=Jh(),Be=_n(),Cx=new qBe({Extends:ute,initialize:function(t){ute.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=Be.PENDING_ADD,this._pausedState=Be.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(e,t){this.emit(e,this),t&&t.func.apply(t.scope,t.params)},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===Be.ACTIVE},add:function(e){return this.queue(ABe(this,e))},queue:function(e){return this.isPlaying()||(e.parent=this,e.parentIsTimeline=!0,this.data.push(e),this.totalData=this.data.length),this},hasOffset:function(e){return e.offset!==null},isOffsetAbsolute:function(e){return typeof e=="number"},isOffsetRelative:function(e){var t=typeof e;if(t==="string"){var i=e[0];if(i==="-"||i==="+")return!0}return!1},getRelativeOffset:function(e,t){var i=e[0],r=parseFloat(e.substr(2)),s=t;switch(i){case"+":s+=r;break;case"-":s-=r;break}return Math.max(0,s)},calcDuration:function(){for(var e=0,t=0,i=0,r=0;r<this.totalData;r++){var s=this.data[r];s.init(),this.hasOffset(s)?this.isOffsetAbsolute(s.offset)?(s.calculatedOffset=s.offset,s.offset===0&&(i=0)):this.isOffsetRelative(s.offset)&&(s.calculatedOffset=this.getRelativeOffset(s.offset,e)):s.calculatedOffset=i,e=s.totalDuration+s.calculatedOffset,t+=s.totalDuration,i+=s.totalDuration}this.duration=t,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=Be.PAUSED,!1):!0},resetTweens:function(e){for(var t=0;t<this.totalData;t++){var i=this.data[t];i.play(e)}},setCallback:function(e,t,i,r){return Cx.TYPES.indexOf(e)!==-1&&(this.callbacks[e]={func:t,scope:r,params:[this].concat(i)}),this},makeActive:function(e){return this.manager.makeActive(e)},play:function(){if(this.state!==Be.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=Be.ACTIVE;this.dispatchTimelineEvent(ks.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=Be.LOOP_DELAY):(this.state=Be.ACTIVE,this.dispatchTimelineEvent(ks.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=Be.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=Be.PENDING_REMOVE,this.dispatchTimelineEvent(ks.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(e,t){if(this.state!==Be.PAUSED){switch(this.useFrames&&(t=1*this.manager.timeScale),t*=this.timeScale,this.elapsed+=t,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=t,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case Be.ACTIVE:for(var i=this.totalData,r=0;r<this.totalData;r++){var s=this.data[r];s.update(e,t)&&i--}this.dispatchTimelineEvent(ks.TIMELINE_UPDATE,this.callbacks.onUpdate),i===0&&this.nextState();break;case Be.LOOP_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=Be.ACTIVE,this.dispatchTimelineEvent(ks.TIMELINE_LOOP,this.callbacks.onLoop));break;case Be.COMPLETE_DELAY:this.countdown-=t,this.countdown<=0&&(this.state=Be.PENDING_REMOVE,this.dispatchTimelineEvent(ks.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===Be.PENDING_REMOVE}},stop:function(){this.state=Be.PENDING_REMOVE},pause:function(){if(this.state!==Be.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=Be.PAUSED,this.emit(ks.TIMELINE_PAUSE,this),this},resume:function(){return this.state===Be.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(ks.TIMELINE_RESUME,this)),this},hasTarget:function(e){for(var t=0;t<this.data.length;t++)if(this.data[t].hasTarget(e))return!0;return!1},destroy:function(){for(var e=0;e<this.data.length;e++)this.data[e].stop()}});Cx.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"];lte.exports=Cx});var qx=l((ent,fte)=>{var PBe=hs(),MBe=Tf(),qf=we(),Qh=Sn(),bBe=gs(),$h=Hh(),LBe=xf(),OBe=Ex(),ot=he(),FBe=Rx(),DBe=Jh(),IBe=function(e,t){var i=new FBe(e);i.completeDelay=qf(t,"completeDelay",0),i.loop=Math.round(qf(t,"loop",0)),i.loopDelay=Math.round(qf(t,"loopDelay",0)),i.paused=Qh(t,"paused",!1),i.useFrames=Qh(t,"useFrames",!1);var r=ot(t,"callbackScope",i),s=ot(t,"onStart",!1);if(s){var n=ot(t,"onStartScope",r),a=ot(t,"onStartParams",[]);i.setCallback("onStart",s,a,n)}var h=ot(t,"onUpdate",!1);if(h){var o=ot(t,"onUpdateScope",r),u=ot(t,"onUpdateParams",[]);i.setCallback("onUpdate",h,u,o)}var f=ot(t,"onLoop",!1);if(f){var d=ot(t,"onLoopScope",r),v=ot(t,"onLoopParams",[]);i.setCallback("onLoop",f,v,d)}var c=ot(t,"onYoyo",!1);if(c){var p=ot(t,"onYoyoScope",r),m=ot(t,"onYoyoParams",[]);i.setCallback("onYoyo",c,m,p)}var x=ot(t,"onComplete",!1);if(x){var g=ot(t,"onCompleteScope",r),y=ot(t,"onCompleteParams",[]);i.setCallback("onComplete",x,y,g)}var T=OBe(t);if(T.length===0)return i.paused=!0,i;var S=PBe(MBe);S.targets=LBe(t);var E=qf(t,"totalDuration",0);E>0?S.duration=Math.floor(E/T.length):S.duration=$h(t,"duration",S.duration),S.delay=$h(t,"delay",S.delay),S.easeParams=ot(t,"easeParams",S.easeParams),S.ease=bBe(ot(t,"ease",S.ease),S.easeParams),S.hold=$h(t,"hold",S.hold),S.repeat=$h(t,"repeat",S.repeat),S.repeatDelay=$h(t,"repeatDelay",S.repeatDelay),S.yoyo=Qh(t,"yoyo",S.yoyo),S.flipX=Qh(t,"flipX",S.flipX),S.flipY=Qh(t,"flipY",S.flipY);for(var _=0;_<T.length;_++)i.queue(DBe(i,T[_],S));return i};fte.exports=IBe});var vte=l((tnt,dte)=>{dte.exports={GetBoolean:Sn(),GetEaseFunction:gs(),GetNewValue:Hh(),GetProps:Tx(),GetTargets:xf(),GetTweens:Ex(),GetValueOp:yf(),NumberTweenBuilder:_x(),StaggerBuilder:wx(),TimelineBuilder:qx(),TweenBuilder:Jh()}});var xte=l((int,gte)=>{var Af=tn(),NBe=C(),GBe=_x(),BBe=vt(),cr=Ne(),UBe=wx(),cte=qx(),jh=_n(),pte=Jh(),mte=new NBe({initialize:function(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(cr.BOOT,this.boot,this),t.sys.events.on(cr.START,this.start,this)},boot:function(){this.systems.events.once(cr.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(cr.PRE_UPDATE,this.preUpdate,this),e.on(cr.UPDATE,this.update,this),e.once(cr.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(e){return cte(this,e)},timeline:function(e){var t=cte(this,e);return t.paused||(this._add.push(t),this._toProcess++),t},create:function(e){return pte(this,e)},add:function(e){var t=pte(this,e);return this._add.push(t),this._toProcess++,t},existing:function(e){return this._add.push(e),this._toProcess++,this},addCounter:function(e){var t=GBe(this,e);return this._add.push(t),this._toProcess++,t},stagger:function(e,t){return UBe(e,t)},preUpdate:function(){if(this._toProcess!==0){var e=this._destroy,t=this._active,i=this._pending,r,s;for(r=0;r<e.length;r++){s=e[r];var n=t.indexOf(s);n===-1?(n=i.indexOf(s),n>-1&&(s.state=jh.REMOVED,i.splice(n,1))):(s.state=jh.REMOVED,t.splice(n,1))}for(e.length=0,e=this._add,r=0;r<e.length;r++)s=e[r],s.state===jh.PENDING_ADD&&(s.init()?(s.play(),this._active.push(s)):this._pending.push(s));e.length=0,this._toProcess=0}},update:function(e,t){var i=this._active,r;t*=this.timeScale;for(var s=0;s<i.length;s++)r=i[s],r.update(e,t)&&(this._destroy.push(r),this._toProcess++)},remove:function(e){return Af(this._add,e),Af(this._pending,e),Af(this._active,e),Af(this._destroy,e),e.state=jh.REMOVED,this},makeActive:function(e){if(this._add.indexOf(e)!==-1||this._active.indexOf(e)!==-1)return this;var t=this._pending.indexOf(e);return t!==-1&&this._pending.splice(t,1),this._add.push(e),e.state=jh.PENDING_ADD,this._toProcess++,this},each:function(e,t){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var s in this.list)i[0]=this.list[s],e.apply(t,i)},getAllTweens:function(){for(var e=this._active,t=[],i=0;i<e.length;i++)t.push(e[i]);return t},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(e,t){t===void 0&&(t=!1);var i=this._active,r,s=[],n,a;for(Array.isArray(e)||(e=[e]),n=0;n<i.length;n++)for(r=i[n],a=0;a<e.length;a++)r.hasTarget(e[a])&&s.push(r);if(t)for(i=this._pending,n=0;n<i.length;n++)for(r=i[n],a=0;a<e.length;a++)r.hasTarget(e[a])&&s.push(r);return s},isTweening:function(e){for(var t=this._active,i,r=0;r<t.length;r++)if(i=t[r],i.hasTarget(e)&&i.isPlaying())return!0;return!1},killAll:function(){for(var e=this.getAllTweens(),t=0;t<e.length;t++)e[t].stop();return this},killTweensOf:function(e){for(var t=this.getTweensOf(e),i=0;i<t.length;i++)t[i].stop();return this},pauseAll:function(){for(var e=this._active,t=0;t<e.length;t++)e[t].pause();return this},resumeAll:function(){for(var e=this._active,t=0;t<e.length;t++)e[t].resume();return this},setGlobalTimeScale:function(e){return this.timeScale=e,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var e=this.systems.events;e.off(cr.PRE_UPDATE,this.preUpdate,this),e.off(cr.UPDATE,this.update,this),e.off(cr.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(cr.START,this.start,this),this.scene=null,this.systems=null}});BBe.register("TweenManager",mte,"tweens");gte.exports=mte});var Tte=l((rnt,yte)=>{var kBe=_n(),zBe=ze(),Ax={Builders:vte(),Events:Ef(),TweenManager:xte(),Tween:Sf(),TweenData:_f(),Timeline:Rx()};Ax=zBe(!1,Ax,kBe);yte.exports=Ax});var Ste=l((snt,Ete)=>{var Pf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",YBe=function(e,t){for(var i=new Uint8Array(e),r=i.length,s=t?"data:"+t+";base64,":"",n=0;n<r;n+=3)s+=Pf[i[n]>>2],s+=Pf[(i[n]&3)<<4|i[n+1]>>4],s+=Pf[(i[n+1]&15)<<2|i[n+2]>>6],s+=Pf[i[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};Ete.exports=YBe});var wte=l((nnt,_te)=>{_te.exports={ArrayBufferToBase64:Ste(),Base64ToArrayBuffer:Hp()}});var Rte=l((ant,Cte)=>{var XBe=he(),VBe=Le(),WBe=function(e,t,i,r,s){s===void 0&&(s=i);var n=XBe(e,t,s);return VBe(n,i,r)};Cte.exports=WBe});var Ate=l((hnt,qte)=>{var HBe=function(e,t){for(var i=0;i<t.length;i++)if(!e.hasOwnProperty(t[i]))return!1;return!0};qte.exports=HBe});var Mte=l((ont,Pte)=>{var KBe=hs(),ZBe=function(e,t){var i=KBe(e);for(var r in t)i.hasOwnProperty(r)&&(i[r]=t[r]);return i};Pte.exports=ZBe});var Lte=l((unt,bte)=>{var JBe=ol(),QBe=function(e,t){for(var i={},r=0;r<t.length;r++){var s=t[r];JBe(e,s)&&(i[s]=e[s])}return i};bte.exports=QBe});var Fte=l((lnt,Ote)=>{Ote.exports={Clone:hs(),DeepCopy:_o(),Extend:ze(),GetAdvancedValue:we(),GetFastValue:z(),GetMinMaxValue:Rte(),GetValue:he(),HasAll:Ate(),HasAny:wm(),HasValue:ol(),IsPlainObject:ae(),Merge:Lp(),MergeRight:Mte(),Pick:Lte(),SetValue:hg()}});var Ite=l((fnt,Dte)=>{var $Be=function(e,t){return e.replace(/%([0-9]+)/g,function(i,r){return t[Number(r)-1]})};Dte.exports=$Be});var Gte=l((dnt,Nte)=>{var jBe=function(e,t){return t===0?e.slice(1):e.slice(0,t-1)+e.slice(t)};Nte.exports=jBe});var Ute=l((vnt,Bte)=>{var eUe=function(e){return e.split("").reverse().join("")};Bte.exports=eUe});var zte=l((cnt,kte)=>{kte.exports={Format:Ite(),Pad:wu(),RemoveAt:Gte(),Reverse:Ute(),UppercaseFirst:Fu(),UUID:vl()}});var Xte=l((pnt,Yte)=>{Yte.exports={Array:Hu(),Base64:wte(),Objects:Fte(),String:zte(),NOOP:B()}});var jte=l((no,Nf)=>{(function(e,t){"use strict";var i="1.0.2",r="",s="?",n="function",a="undefined",h="object",o="string",u="major",f="model",d="name",v="type",c="vendor",p="version",m="architecture",x="console",g="mobile",y="tablet",T="smarttv",S="wearable",E="embedded",_=255,w="Amazon",R="Apple",q="ASUS",A="BlackBerry",P="Browser",L="Chrome",b="Edge",G="Firefox",M="Google",D="Huawei",I="LG",F="Microsoft",O="Motorola",K="Opera",H="Samsung",Y="Sony",ee="Xiaomi",U="Zebra",J="Facebook",st=function(X,V){var Z={};for(var pe in X)V[pe]&&V[pe].length%2===0?Z[pe]=V[pe].concat(X[pe]):Z[pe]=X[pe];return Z},ve=function(X){for(var V={},Z=0;Z<X.length;Z++)V[X[Z].toUpperCase()]=X[Z];return V},gt=function(X,V){return typeof X===o?_e(V).indexOf(_e(X))!==-1:!1},_e=function(X){return X.toLowerCase()},nt=function(X){return typeof X===o?X.replace(/[^\d\.]/g,r).split(".")[0]:t},Ze=function(X,V){if(typeof X===o)return X=X.replace(/^\s\s*/,r).replace(/\s\s*$/,r),typeof V===a?X:X.substring(0,_)},te=function(X,V){for(var Z=0,pe,Q,zi,ce,Oa,Yi;Z<V.length&&!Oa;){var fy=V[Z],dy=V[Z+1];for(pe=Q=0;pe<fy.length&&!Oa;)if(Oa=fy[pe++].exec(X),Oa)for(zi=0;zi<dy.length;zi++)Yi=Oa[++Q],ce=dy[zi],typeof ce===h&&ce.length>0?ce.length===2?typeof ce[1]==n?this[ce[0]]=ce[1].call(this,Yi):this[ce[0]]=ce[1]:ce.length===3?typeof ce[1]===n&&!(ce[1].exec&&ce[1].test)?this[ce[0]]=Yi?ce[1].call(this,Yi,ce[2]):t:this[ce[0]]=Yi?Yi.replace(ce[1],ce[2]):t:ce.length===4&&(this[ce[0]]=Yi?ce[3].call(this,Yi.replace(ce[1],ce[2])):t):this[ce]=Yi||t;Z+=2}},Ue=function(X,V){for(var Z in V)if(typeof V[Z]===h&&V[Z].length>0){for(var pe=0;pe<V[Z].length;pe++)if(gt(V[Z][pe],X))return Z===s?t:Z}else if(gt(V[Z],X))return Z===s?t:Z;return X},qe={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Pt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ut={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,K+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,K]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+P]],[/\bqbcore\/([\w\.]+)/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+P],p],[/\bfocus\/([\w\.]+)/i],[p,[d,G+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,K+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,K+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+P]],[/fxios\/([-\w\.]+)/i],[p,[d,G]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+P]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+P],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,J],p],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,L+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,L+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+P]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,Ue,qe]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,G+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,_e]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,r,_e]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,_e]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[c,H],[v,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[c,H],[v,g]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[c,R],[v,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[c,R],[v,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[c,D],[v,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[f,[c,D],[v,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[c,ee],[v,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[c,ee],[v,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[c,"OPPO"],[v,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[c,"Vivo"],[v,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[c,"Realme"],[v,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[c,O],[v,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[c,O],[v,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[c,I],[v,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[c,I],[v,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[c,"Lenovo"],[v,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[c,"Nokia"],[v,g]],[/(pixel c)\b/i],[f,[c,M],[v,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[c,M],[v,g]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[c,Y],[v,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[c,Y],[v,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[c,"OnePlus"],[v,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[c,w],[v,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[c,w],[v,g]],[/(playbook);[-\w\),; ]+(rim)/i],[f,c,[v,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[c,A],[v,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[c,q],[v,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[c,q],[v,g]],[/(nexus 9)/i],[f,[c,"HTC"],[v,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[c,[f,/_/g," "],[v,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[c,"Acer"],[v,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[c,"Meizu"],[v,g]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[c,"Sharp"],[v,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,f,[v,g]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,f,[v,y]],[/(surface duo)/i],[f,[c,F],[v,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[c,"Fairphone"],[v,g]],[/(u304aa)/i],[f,[c,"AT&T"],[v,g]],[/\bsie-(\w*)/i],[f,[c,"Siemens"],[v,g]],[/\b(rct\w+) b/i],[f,[c,"RCA"],[v,y]],[/\b(venue[\d ]{2,7}) b/i],[f,[c,"Dell"],[v,y]],[/\b(q(?:mv|ta)\w+) b/i],[f,[c,"Verizon"],[v,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[c,"Barnes & Noble"],[v,y]],[/\b(tm\d{3}\w+) b/i],[f,[c,"NuVision"],[v,y]],[/\b(k88) b/i],[f,[c,"ZTE"],[v,y]],[/\b(nx\d{3}j) b/i],[f,[c,"ZTE"],[v,g]],[/\b(gen\d{3}) b.+49h/i],[f,[c,"Swiss"],[v,g]],[/\b(zur\d{3}) b/i],[f,[c,"Swiss"],[v,y]],[/\b((zeki)?tb.*\b) b/i],[f,[c,"Zeki"],[v,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],f,[v,y]],[/\b(ns-?\w{0,9}) b/i],[f,[c,"Insignia"],[v,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[c,"NextBook"],[v,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],f,[v,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],f,[v,g]],[/\b(ph-1) /i],[f,[c,"Essential"],[v,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[c,"Envizen"],[v,y]],[/\b(trio[-\w\. ]+) b/i],[f,[c,"MachSpeed"],[v,y]],[/\btu_(1491) b/i],[f,[c,"Rotor"],[v,y]],[/(shield[\w ]+) b/i],[f,[c,"Nvidia"],[v,y]],[/(sprint) (\w+)/i],[c,f,[v,g]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[c,F],[v,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[c,U],[v,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[c,U],[v,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,f,[v,x]],[/droid.+; (shield) bui/i],[f,[c,"Nvidia"],[v,x]],[/(playstation [345portablevi]+)/i],[f,[c,Y],[v,x]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[c,F],[v,x]],[/smart-tv.+(samsung)/i],[c,[v,T]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[c,H],[v,T]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,I],[v,T]],[/(apple) ?tv/i],[c,[f,R+" TV"],[v,T]],[/crkey/i],[[f,L+"cast"],[c,M],[v,T]],[/droid.+aft(\w)( bui|\))/i],[f,[c,w],[v,T]],[/\(dtv[\);].+(aquos)/i],[f,[c,"Sharp"],[v,T]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[c,Ze],[f,Ze],[v,T]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[v,T]],[/((pebble))app/i],[c,f,[v,S]],[/droid.+; (glass) \d/i],[f,[c,M],[v,S]],[/droid.+; (wt63?0{2,3})\)/i],[f,[c,U],[v,S]],[/(quest( 2)?)/i],[f,[c,J],[v,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[v,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[v,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[v,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[v,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[v,g]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,b+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,Ue,Pt]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,Ue,Pt]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,G+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[d,L+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,p]]},oe=function(X,V){if(typeof X===h&&(V=X,X=t),!(this instanceof oe))return new oe(X,V).getResult();var Z=X||(typeof e!==a&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:r),pe=V?st(ut,V):ut;return this.getBrowser=function(){var Q={};return Q[d]=t,Q[p]=t,te.call(Q,Z,pe.browser),Q.major=nt(Q.version),Q},this.getCPU=function(){var Q={};return Q[m]=t,te.call(Q,Z,pe.cpu),Q},this.getDevice=function(){var Q={};return Q[c]=t,Q[f]=t,Q[v]=t,te.call(Q,Z,pe.device),Q},this.getEngine=function(){var Q={};return Q[d]=t,Q[p]=t,te.call(Q,Z,pe.engine),Q},this.getOS=function(){var Q={};return Q[d]=t,Q[p]=t,te.call(Q,Z,pe.os),Q},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Z},this.setUA=function(Q){return Z=typeof Q===o&&Q.length>_?Ze(Q,_):Q,this},this.setUA(Z),this};oe.VERSION=i,oe.BROWSER=ve([d,p,u]),oe.CPU=ve([m]),oe.DEVICE=ve([f,c,v,x,g,T,y,S,E]),oe.ENGINE=oe.OS=ve([d,p]),typeof no!==a?(typeof Nf!==a&&Nf.exports&&(no=Nf.exports=oe),no.UAParser=oe):typeof define===n&&define.amd?define(function(){return oe}):typeof e!==a&&(e.UAParser=oe);var ke=typeof e!==a&&(e.jQuery||e.Zepto);if(ke&&!ke.ua){var lt=new oe;ke.ua=lt.getResult(),ke.ua.get=function(){return lt.getUA()},ke.ua.set=function(X){lt.setUA(X);var V=lt.getResult();for(var Z in V)ke.ua[Z]=V[Z]}}})(typeof window=="object"?window:no)});var tUe=Jt(),iUe=ze(),Mf={Actions:iv(),Cache:kC(),Cameras:lP(),Core:xF(),Class:C(),Create:LF(),Data:NF(),Display:q2(),DOM:k2(),Events:H2(),Game:HU(),GameObjects:l6(),Geom:MZ(),Input:cQ(),Loader:Tj(),Math:iu(),Plugins:Rj(),Renderer:Uj(),Scale:zj(),Scene:Dp(),Scenes:Hj(),Structs:eee(),Textures:nee(),Time:dee(),Tweens:Tte(),Utils:Xte()};Mf=iUe(!1,Mf,tUe);var Aa=Mf;window.Phaser=Mf;function bf(e){let t=Math.floor(e.length/2),i=[...e].sort((r,s)=>r-s);return e.length%2!==0?i[t]:(i[t-1]+i[t])/2}function Vte(e){let t=bf(e);return 1.4826*bf(e.map(i=>Math.abs(i-t)))}var Wte=400,eo=class extends Phaser.Scene{constructor(){super({key:"TitleScene"})}preload(){this.load.image("cursor","assets/cursor.png"),this.load.image("mouse","assets/mouse.jpg"),this.load.image("touchscreen","assets/touchscreen.jpg"),this.load.image("trackball","assets/trackball.jpg"),this.load.image("trackpad","assets/trackpad.jpg"),this.load.image("y","assets/check.png"),this.load.image("n","assets/x.png")}create(){let i=this.game.config.height/2;this.frame_times=Array(Wte).fill(0),this.i=0;let r=a=>{s.disableInteractive(),n.disableInteractive(),this.scale.startFullscreen(),this.tweens.addCounter({from:255,to:0,duration:2e3,onUpdate:h=>{let o=Math.floor(h.getValue());this.cameras.main.setAlpha(o/255)},onComplete:()=>{let h=this.frame_times.map((d,v,c)=>d-c[v-1]).slice(1),o=1e3/bf(h),u=!0;isFinite(o)||(console.warn("Not enough time to guess a refresh rate, defaulting to 60 Hz."),o=60,u=!1),console.log(`median: ${o}`),this.game.user_config.hand=a,this.game.user_config.refresh_rate_est=o,this.game.user_config.refresh_rate_measured=u,this.input.mouse.requestPointerLock();let f={has_api:!1,charging:!1};navigator.getBattery?navigator.getBattery().then(d=>{f.has_api=!0,f.charging=d.charging,this.game.user_config.battery=f,this.scene.start("MainScene")}):(this.game.user_config.battery=f,this.scene.start("MainScene"))}})};this.add.rectangle(i-6,i+100,6,500,16777215),this.add.rexBBCodeText(i,120,`If using a laptop,
please plug into a wall outlet
before continuing for best performance.`,{fontFamily:"Verdana",fontStyle:"bold",fontSize:40,color:"#dddddd",stroke:"#444444",strokeThickness:6,align:"center",backgroundColor:"#460000",padding:{left:5,right:5,top:5,bottom:5}}).setOrigin(.5,.5),this.add.text(i,270,`Select one option below to start
 (will enter fullscreen).`,{fontFamily:"Verdana",fontSize:32,color:"#bbbbbb",stroke:"#444444",strokeThickness:2,align:"center"}).setOrigin(.5,.5);let s=this.add.text(i-250,i+100,`Click this side
if using the mouse
with your left hand.`,{fontFamily:"Verdana",fontSize:32,color:"#dddddd",stroke:"#444444",strokeThickness:2,align:"center"}).setOrigin(.5,.5).setInteractive().once("pointerdown",()=>{r("left")}),n=this.add.text(i+250,i+100,`Click this side
if using the mouse
with your right hand.`,{fontFamily:"Verdana",fontSize:32,color:"#dddddd",stroke:"#444444",strokeThickness:2,align:"center"}).setOrigin(.5,.5).setInteractive().once("pointerdown",()=>{r("right")})}update(){this.frame_times[this.i]=this.game.loop.now,this.i++,this.i%=Wte}};var rUe=Phaser.Utils.Objects.GetValue;function Hte(e,t,i,r,s){var n=e.add.rexBBCodeText(t,i,r,s);return n.typing=e.plugins.get("rexTextTypingPlugin").add(n,rUe(s,"type",void 0)),n.start=function(a,h){return h!==void 0&&this.typing.setTypeSpeed(h),this.typing.start(a),this},n}function Kte(e){let t=new Object;for(let i=0;i<e.length;i++)t[e[i]]=i+1;return Object.freeze(t),t}var sUe=16777215,nUe=8832474,Px=642574;var aUe=20;var Pa=class extends Phaser.GameObjects.Container{constructor(t,i,r,s=!0,n=!1){let a=t.add.circle(0,-100,aUe,Px),h=t.add.circle(0,100,8,nUe,s),o=t.add.circle(0,100,15,sUe);a.visible=!1;let u=t.add.image(0,100,"cursor").setOrigin(0,0).setScale(.2),f=[a,h,o,u];super(t,i,r,f);let d=0,v=-100,c=Phaser.Math.DegToRad(270-6),p=200*Math.cos(c),m=200*Math.sin(c)+100;t.add.existing(this),this.tl1=t.tweens.timeline({loop:-1,loopDelay:0,paused:!0,tweens:[{targets:a,y:-100,ease:"Linear",duration:200,onStart:()=>{o.visible=!1},onComplete:()=>{o.visible=!0}},{offset:600,targets:u,x:d,y:v-50,ease:"Power2",duration:300},{offset:600,targets:h,x:n?p:d,y:n?m:v,ease:"Power2",duration:300,onStart:()=>{this.counter=0},onComplete:()=>{this.counter=0}},{offset:1400,targets:u,x:0,y:100,ease:"Power2",duration:100,onStart:()=>{o.visible=!0},onComplete:()=>{o.visible=!0}},{offset:1400,targets:h,x:0,y:100,ease:"Power2",duration:100,onComplete:()=>{this.counter=0}},{offset:2e3,targets:a,y:-100,ease:"Linear",duration:200,onStart:()=>{a.fillColor=Px,a.visible=!0},onComplete:()=>{a.fillColor==Px,a.visible=!0}},{offset:2e3+200,targets:u,x:d,y:v-50,ease:"Power2",duration:300,onStart:()=>{o.visible=!1},onComplete:()=>{o.visible=!1}},{offset:2e3+200,targets:h,x:n?p:d,y:n?m:v,ease:"Power2",duration:300,onStart:()=>{this.counter=0},onComplete:()=>{this.counter=0}},{offset:2900,targets:u,x:0,y:100,ease:"Power2",duration:100,onStart:()=>{a.visible=!1,o.visible=!0},onComplete:()=>{a.visible=!1,o.visible=!0}},{offset:2900,targets:h,x:0,y:100,ease:"Power2",duration:100,onComplete:()=>{a.visible=!1,o.visible=!0}}]})}play(){this.tl1.play(),this.tl1.resume()}stop(){this.tl1.pause()}};function Mx(e,t){var i={};for(var r in e)i[r]=e[r];for(var r in t)i[r]=t[r];return i}function bx(e,t,i){return Math.min(Math.max(e,t),i)}function Lf(e,t){let i=Math.abs(e-t)%360,r=i>180?360-i:i,s=e-t>=0&&e-t<=180||e-t<=-180&&e-t>=-360?-1:1;return r*s}function Of(e=25,t=7,i=!1){let r=i?1:20,s=45,n=[];n.push({trial_type:"instruct_basic"});for(let u=0;u<r;u++)n.push({trial_type:"practice_basic",is_clamped:!1,clamp_angle:0,is_cursor_vis:!0,show_feedback:!0,target_angle:s,target_type:1});n.push({trial_type:"instruct_clamp"});var a=[NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN];for(let u=0;u<e;u++){var h=[];let f=!1;for(;!f;){f=!0,h=[1,2,3,4,5,6,7,8],h=h.sort(()=>Math.random()-.5),full_order=a.concat(h);let d=[];d=full_order.map(function(v){return v%2==0});for(var o=1;o<d.length-2;o++)d[o]==d[o+1]&&d[o]==d[o+2]&&(f=!1)}for(var o=0;o<h.length;o++)n.push({trial_type:"clamp",is_clamped:!0,clamp_angle:o%2==0?t:-1*t,is_cursor_vis:!0,show_feedback:!0,target_angle:s,target_type:Math.ceil(h[o]/2)});a=h}return n}var Zte=16777215,hUe=642574;var oUe=16711680,Lx=6710886;var Ox=10934762,Jte=15,to=8,uUe=10;var ki=300,io=30,Qte=1;var Fx={},Gt=Kte(["INSTRUCT","PRETRIAL","MOVING","SIDE","QUESTIONS","POSTTRIAL","END"]),Ff={reached_away:1,late_start:2,slow_reach:4,wiggly_reach:8,returned_to_center:16,early_start:32};var ro=class extends Phaser.Scene{constructor(){super({key:"MainScene"}),this._state=Gt.INSTRUCT,this.entering=!0,this.all_data={practice_basic:[],clamp:[]}}create(){let t=this.game.config,i=this.game.user_config;this.cameras.main.setBounds(-t.width/2,-t.height/2,t.width,t.height);let r=t.height,s=r/2;this.trial_counter=0,this.entering=!0,this.state=Gt.INSTRUCT,this.rts=[],this.movets=[],this.is_debug=i.debug,this.is_debug?(this.trials=Of(4,i.clamp_size,!0),this.typing_speed=1):(this.trials=Of(15,i.clamp_size,!1),this.typing_speed=1),this.user_cursor=this.add.circle(io,io,to,Ox),this.fake_cursor=this.add.circle(0,0,to,Ox).setVisible(!1),this.dbg_cursor=this.add.circle(0,0,to,oUe,1).setVisible(!1),this.center=this.add.circle(0,0,15,Zte),this.origin=new Phaser.Geom.Circle(0,0,uUe),this.endpoint_cursor=this.add.circle(0,0,to,Ox),this.endpoint_cursor.visible=!1,this.darkener=this.add.rectangle(0,0,r,r,0).setAlpha(1),this.other_warns=this.add.rexBBCodeText(0,0,"",{fontFamily:"Verdana",fontStyle:"bold",fontSize:50,color:"#ffffff",align:"center",stroke:"#444444",backgroundColor:"#000000",strokeThickness:4}).setOrigin(.5,.5).setVisible(!1),this.instructions=Hte(this,-400,-s+50,"",{fontFamily:"Verdana",fontSize:20,wrap:{mode:"word",width:800}}).setVisible(!1),this.start_txt=this.add.text(0,s-100,"Click the mouse button to continue.",{fontFamily:"Verdana",fontSize:50,align:"center"}).setOrigin(.5,.5).setVisible(!1),this.debug_txt=this.add.text(-s,-s,""),this.progress=this.add.text(s,-s,"").setOrigin(1,0),this.tmp_counter=1,this.total_len=this.trials.length-2,this.examples={basic:new Pa(this,0,200,!0,!1).setVisible(!1),clamp:new Pa(this,0,200,!0,!0).setVisible(!1)},this.raw_x=io,this.raw_y=io,this.next_trial();let n=Phaser.Math.DegToRad(270),a=ki*Math.cos(n),h=ki*Math.sin(n);this.target=this.add.circle(a,h,10,Lx),this.target.visible=!1,this.input.on("pointerdown",()=>{this.state!==Gt.END&&(this.scale.startFullscreen(),this.time.delayedCall(300,()=>{this.input.mouse.requestPointerLock()}))}),this.input.on("pointerlockchange",()=>{console.log("oh no, this does not work")}),this.ptr_cb=o=>{if(this.input.mouse.locked){let u="getCoalescedEvents"in o,f="altitudeAngle"in o,d=u&&f?o.getCoalescedEvents():[o];for(let v of d){let c=v.movementX*Qte,p=v.movementY*Qte;this.raw_x+=c,this.raw_y+=p,this.raw_x=bx(this.raw_x,-s,s),this.raw_y=bx(this.raw_y,-s,s);let m=Math.sqrt(Math.pow(this.raw_x,2)+Math.pow(this.raw_y,2)),x=Phaser.Math.RadToDeg(Phaser.Math.Angle.Normalize(Math.atan2(this.raw_y,this.raw_x))),g=this.raw_x,y=this.raw_y;this.dbg_cursor.setPosition(g,y),this.cursor_angle=x,this.user_cursor.x=g,this.user_cursor.y=y,this.extent=m;let T=Phaser.Math.DegToRad(this.current_trial.clamp_angle+this.current_trial.target_angle);this.fake_cursor.x=m*Math.cos(T),this.fake_cursor.y=m*Math.sin(T),this.state===Gt.MOVING&&this.movement_data.push({evt_time:v.timeStamp,raw_x:this.raw_x,raw_y:this.raw_y,cursor_x:g,cursor_y:y,cursor_extent:m,cursor_angle:x}),this.state===Gt.POSTTRIAL&&(this.current_trial.is_clamped?(this.endpoint_cursor.x=ki*Math.cos(T),this.endpoint_cursor.y=ki*Math.sin(T)):(this.endpoint_cursor.x=ki*Math.cos(Phaser.Math.DegToRad(this.endpoint_angle)),this.endpoint_cursor.y=ki*Math.sin(Phaser.Math.DegToRad(this.endpoint_angle))))}}},document.addEventListener("pointermove",this.ptr_cb,{passive:!0,capture:!0}),Fx.instruct_basic=`You will control a circular cursor with your mouse, and try to bring it to the target. Hold that cursor in the circle at the center of the screen to start a trial.

        A target will show up on the screen and you should try to quickly move straight toward the target. Try to hit the very center of the target! 

        Always quickly shoot your mouse straight through the target. 


        See the example below. We show the system cursor to illustrate the mouse position, but it will never be visible when you are doing the task.`,Fx.instruct_clamp=`In this section, two things will be different. First, the target may not appear! Your cue to start moving will be that the starting circle will disappear. 

            When that happens, just move in the same direction as you have been moving before! Try to make a quick, straight line movement to the location the target used to be. 


            Finally, the cursor will now be broken. It will move in a straight line toward the target, but it will always land slightly off of the center.

            You will see the cursor follow this path no matter where you actually move your mouse. You can ignore the cursor. 

            Instead, try to move your mouse straight to the very center of the target, even though the cursor is broken. The cursor will always be offset but you can ignore that and keep reaching straight towards the target.


            Remember to make fast, straight movements toward the center of the target. Always try to hit the center of the target!`}update(){let t=this.current_trial;switch(this.state){case Gt.INSTRUCT:if(this.entering){this.entering=!1;let n=t.trial_type;this.instructions.visible=!0,this.darkener.visible=!0,this.instructions.start(Fx[n],this.typing_speed),n==="instruct_basic"?(this.examples.basic.visible=!0,this.examples.basic.play()):(n==="instruct_clamp"||n==="break")&&(this.examples.clamp.visible=!0,this.examples.clamp.play()),this.instructions.typing.once("complete",()=>{this.start_txt.visible=!0,this.input.once("pointerdown",()=>{this.examples.basic.stop(),this.examples.basic.visible=!1,this.examples.clamp.stop(),this.examples.clamp.visible=!1,this.next_trial(),this.darkener.visible=!1,this.instructions.visible=!1,this.instructions.text="",this.start_txt.visible=!1})})}break;case Gt.PRETRIAL:this.entering&&(this.origin.visible=!0,this.center.visible=!0,this.entering=!1,this.target.visible=!1,this.target_outer.visible=!1,this.hold_val=500,this.hold_t=this.hold_val,this.user_cursor.visible=!0,this.t_ref=window.performance.now()),Phaser.Geom.Circle.ContainsPoint(this.origin,this.user_cursor)?(this.hold_t-=this.game.loop.delta,this.hold_t<=0&&(this.inter_trial_interval=window.performance.now()-this.t_ref,this.raw_x=0,this.raw_y=0,this.extent=0,this.user_cursor.x=0,this.user_cursor.y=0,this.state=Gt.MOVING,this.movement_data=[])):this.hold_t=this.hold_val;break;case Gt.MOVING:if(this.entering){this.entering=!1,this.reference_time=this.game.loop.now,this.last_frame_time=this.game.loop.now,this.dropped_frame_count=0,this.dts=[],this.movement_data.splice(0,0,{evt_time:this.reference_time,raw_x:0,raw_y:0,cursor_x:0,cursor_y:0,cursor_extent:0,cursor_angle:0}),this.center.visible=!1;var i=Phaser.Math.DegToRad(this.current_trial.target_angle);this.target.x=ki*Math.cos(i),this.target.y=ki*Math.sin(i),this.target.fillColor=hUe,Jte=10;let n=Math.sqrt(Math.pow(this.user_cursor.x,2)+Math.pow(this.user_cursor.y,2));switch(this.current_trial.target_type){case 1:this.target.visible=!0;break;case 2:this.target.visible=n<ki/6;break;case 3:this.target.visible=n>=5*ki/6}this.user_cursor.visible=t.is_cursor_vis;let a=0;t.is_clamped&&(this.user_cursor.visible=!1,this.fake_cursor.visible=t.is_cursor_vis)}else{let n=1/this.game.user_config.refresh_rate_est*1e3,a=this.game.loop.now-this.last_frame_time;this.dropped_frame_count+=a>1.5*n,this.dts.push(a),this.last_frame_time=this.game.loop.now}Math.sqrt(Math.pow(this.user_cursor.x,2)+Math.pow(this.user_cursor.y,2))>=.98*ki&&(this.state=Gt.POSTTRIAL,this.user_cursor.visible=!1,this.fake_cursor.visible=!1,this.endpoint_angle=this.cursor_angle);break;case Gt.POSTTRIAL:if(this.entering){this.entering=!1;let n={movement_data:this.movement_data,ref_time:this.reference_time,trial_number:this.trial_counter++,target_size_radius:Jte,cursor_size_radius:to,iti:this.inter_trial_interval,hold_time:this.hold_val,dropped_frame_count:this.dropped_frame_count},a=Mx(t,n);console.log("Combo Data: "+a);let h=500,o=0,u=n.movement_data[1],f=n.movement_data[n.movement_data.length-1],d=t.target_angle,v=this.movement_data.filter(S=>S.cursor_extent>15).map(S=>S.cursor_angle),c=v.slice(-1),p=v.map(S=>Lf(S,c)),m=null,x=null;if(f&&n.movement_data.length>2){var r=n.movement_data.findIndex(function(S){return S.cursor_extent>=15});m=n.movement_data[r].evt_time-this.reference_time,x=f.evt_time-n.movement_data[r].evt_time}console.log(m),m!==null&&(this.rts.push(m),this.movets.push(x));let g=!1,y=1e3,T=0;Math.abs(Lf(f.cursor_angle,d))>=30&&(T|=Ff.reached_away,g||(g=!0,this.other_warns.text=`[b]Make reaches toward
the target.[/b]`)),m>=1e3&&(T|=Ff.late_start,g||(g=!0,this.other_warns.text=`[b]Please start the
reach sooner.[/b]`)),x>=300&&(T|=Ff.slow_reach,g||(g=!0,this.other_warns.text=`[b]Please move quickly
 through the target.[/b]`)),Vte(p)>10&&(T|=Ff.wiggly_reach,g||(g=!0,this.other_warns.text=`[b]Please make [color=yellow]straight[/color]
reaches toward the target.[/b]`)),g?(h+=y,this.other_warns.visible=!0,this.target.visible=!1,this.center.fillColor=Lx,this.time.delayedCall(y,()=>{this.other_warns.visible=!1})):this.endpoint_cursor.visible=this.current_trial.show_feedback,a.delay_time=h,a.reaction_time=m,a.reach_time=x,this.time.delayedCall(o,()=>{this.time.delayedCall(h,()=>{a.any_punishment=g,a.punish_types=T,this.all_data[t.trial_type].push(a),this.tmp_counter++,this.raw_x=this.raw_y=this.user_cursor.x=this.user_cursor.y=io,this.user_cursor.visible=!0,this.target.visible=!1,this.target_outer.visible=!1,this.endpoint_cursor.visible=!1,this.tweens.add({targets:this.user_cursor,scale:{from:0,to:1},ease:"Elastic",easeParams:[5,.5],duration:800,onComplete:()=>{this.center.fillColor=Lx,this.next_trial()}})})})}break;case Gt.END:this.entering&&(this.entering=!1,this.input.mouse.releasePointerLock(),document.removeEventListener("pointermove",this.ptr_cb,{passive:!0,capture:!0}),this.tweens.addCounter({from:255,to:0,duration:2e3,onUpdate:n=>{let a=Math.floor(n.getValue());this.cameras.main.setAlpha(a/255)},onComplete:()=>{this.scene.start("EndScene",this.all_data)}}));break}}get state(){return this._state}set state(t){this.entering=!0,this._state=t}next_trial(){this.tmp_counter>this.total_len?this.progress.visible=!1:this.progress.text=`${this.tmp_counter} / ${this.total_len}`,this.current_trial=this.trials.shift();let t=this.current_trial,i="";t!==void 0&&(i=t.trial_type),t===void 0||this.trials.length<1&&i.startsWith("break")?this.state=Gt.END:i.startsWith("instruct_")||i.startsWith("break")?this.state=Gt.INSTRUCT:i.startsWith("practice")||i.startsWith("clamp")?(this.state=Gt.PRETRIAL,this.center.fillColor=Zte,this.target.visible=!1,this.target_outer.visible=!1):console.error("Oh no, wrong next_trial.")}};function $te(e,t){return fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e,(i,r)=>r&&r.toFixed?Number(r.toFixed(3)):r)}).then(function(i){return i.status!==200?console.log("There was an issue: "+i.status):console.log("No issues ;)"),i}).catch(function(i){return console.log("Fetch err: ",i),500})}function lUe(e){return $te(e,"/.netlify/functions/mailgun")}function fUe(e){return $te(e,"/.netlify/functions/faunadb")}function Df(e){return[lUe(e),fUe(e)]}var so=class extends Phaser.Scene{constructor(){super({key:"EndScene"})}create(t){let i=this.game.config.height,r=i/2,s=this.game.user_config.id,n=this.game.user_config.is_sona;this.scale.stopFullscreen();let a=n?".":` (will redirect within
10 seconds after selection).`,h=this.add.text(r,100,`Last question!
Select which input device
you used${a}`,{fontFamily:"Verdana",fontSize:20,align:"center"}).setOrigin(.5,.5),o="https://google.com/?cc=";this.game.user_config.is_prolific?o="https://app.prolific.co/submissions/complete?cc=":n&&(o=`https://yale.sona-systems.com/webstudy_credit.aspx?experiment_id=1479&credit_token=762ab607160043e58dd4ba6e9e1b288d&survey_code=${s}`);function u(m){let x={config:m.game.user_config,data:t};if(!n)window.removeEventListener("beforeunload",If),Promise.all(Df(x)).then(g=>{window.location.href=o+"8E059F9A"});else{h.visible=!1,m.add.text(r,r-100,`Click here to download
the debriefing.`,{fontFamily:"Verdana",fontStyle:"bold",fontSize:40,color:"#dddddd",stroke:"#444444",strokeThickness:4,align:"center"}).setOrigin(.5,.5).setInteractive().on("pointerdown",()=>{let y=document.createElement("a");y.href="./assets/actlab_debrief.pdf",y.target="_blank",y.download="actlab_debrief.pdf",y.click()});let g=m.add.text(r,r+100,`Click here to get SONA credit.
(Will take a moment to redirect)`,{fontFamily:"Verdana",fontStyle:"bold",fontSize:40,color:"#00ff00",stroke:"#444444",strokeThickness:4,align:"center"}).setOrigin(.5,.5).setInteractive().once("pointerdown",()=>{g.text="Redirecting now...",window.removeEventListener("beforeunload",If),Promise.all(Df(x)).then(y=>{window.location.href=o})})}}function f(m){m.tweens.add({targets:[d,c,p,v],scale:{from:1,to:0},duration:500})}let d=this.add.image(i*.3,i*.3,"mouse").setInteractive().setOrigin(.5,.5);d.on("pointerdown",()=>{this.game.user_config.device="mouse",f(this),u(this)});let v=this.add.image(i*.3,i*.7,"touchscreen").setInteractive().setOrigin(.5,.5);v.on("pointerdown",()=>{this.game.user_config.device="touchscreen",f(this),u(this)});let c=this.add.image(i*.7,i*.3,"trackball").setInteractive().setOrigin(.5,.5);c.on("pointerdown",()=>{this.game.user_config.device="trackball",f(this),u(this)});let p=this.add.image(i*.7,i*.7,"trackpad").setInteractive().setOrigin(.5,.5);p.on("pointerdown",()=>{this.game.user_config.device="trackpad",f(this),u(this)})}};var ase=vse(jte());var dUe=Phaser.Renderer.WebGL.Utils,vUe=function(e,t,i,r){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var s=t.frame,n=s.width,a=s.height,h=dUe.getTintAppendFloatAlpha,o=e.pipelines.set(t.pipeline,t),u=o.setTexture2D(s.glTexture,t);e.pipelines.preBatch(t),o.batchTexture(t,s.glTexture,n,a,t.x,t.y,n/t.style.resolution,a/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,a,h(t.tintTopLeft,i.alpha*t._alphaTL),h(t.tintTopRight,i.alpha*t._alphaTR),h(t.tintBottomLeft,i.alpha*t._alphaBL),h(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,r,!1,u),e.pipelines.postBatch(t)}},eie=vUe;var cUe=function(e,t,i,r){t.width===0||t.height===0||(i.addToRenderList(t),e.batchSprite(t,t.frame,i,r))},tie=cUe;var iie={renderWebGL:eie,renderCanvas:tie};var Gf=Phaser.Display.Canvas.CanvasPool,pUe=function(e){var t=Gf.create(this),i=t.getContext("2d");e.syncFont(t,i);var r=i.measureText(e.testString);if("actualBoundingBoxAscent"in r){var s=r.actualBoundingBoxAscent,n=r.actualBoundingBoxDescent,u={ascent:s,descent:n,fontSize:s+n};return Gf.remove(t),u}var a=Math.ceil(r.width*e.baselineX),h=a,o=2*h;h=h*e.baselineY|0,t.width=a,t.height=o,i.fillStyle="#f00",i.fillRect(0,0,a,o),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,h);var u={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,a,o))return u.ascent=h,u.descent=h+6,u.fontSize=u.ascent+u.descent,Gf.remove(t),u;var f=i.getImageData(0,0,a,o).data,d=f.length,v=a*4,c,p,m=0,x=!1;for(c=0;c<h;c++){for(p=0;p<v;p+=4)if(f[m+p]!==255){x=!0;break}if(!x)m+=v;else break}for(u.ascent=h-c,m=d-v,x=!1,c=o;c>h;c--){for(p=0;p<v;p+=4)if(f[m+p]!==255){x=!0;break}if(!x)m-=v;else break}return u.descent=c-h,u.fontSize=u.ascent+u.descent,Gf.remove(t),u},Dx=pUe;var mUe={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/},le=mUe;var gUe=Phaser.Utils.String.Pad,xUe=function(e,t,i){if(e==null)return e;switch(typeof e){case"string":return e;case"number":return`#${gUe(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,i);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e;default:return e}},rt=xUe;var yUe=Phaser.Utils.Objects.GetAdvancedValue,Zt=Phaser.Utils.Objects.GetValue,Ix={backgroundColor:["backgroundColor",null,rt],backgroundColor2:["backgroundColor2",null,rt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,rt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",rt],stroke:["stroke","#fff",rt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",rt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",rt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]},Nx=class{constructor(t,i){this.parent=t,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(i,!1,!0);var r=Zt(i,"metrics",!1);r?this.metrics={ascent:Zt(r,"ascent",0),descent:Zt(r,"descent",0),fontSize:Zt(r,"fontSize",0)}:this.metrics=Dx(this)}get canvas(){return this.parent.canvasText.canvas}get context(){return this.parent.canvasText.context}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==le.NO_WRAP&&this.wrapWidth===0}setStyle(t,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!1),t&&t.hasOwnProperty("wrap")){var s=t.wrap;if(s.hasOwnProperty("mode")){var n=s.mode;typeof n=="string"&&(s.mode=rie[n])}else s.hasOwnProperty("width")&&(s.mode=1)}t&&t.rtl&&r&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");for(var a in Ix){var h=Ix[a],o=h[0],u=r?h[1]:this[a],f=h[2];if(a==="wrapCallback"||a==="wrapCallbackScope")this[a]=Zt(t,o,u);else{var d=yUe(t,o,u);f&&(d=f(d)),this[a]=d}}var v=Zt(t,"font",null);v===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=v;var c=Zt(t,"fill",null);c!==null&&(this.color=rt(c));var p=Zt(t,"images",void 0);return p&&this.parent.addImage(p),i?this.update(!0):this.parent}syncFont(t,i){i.font=this._font}syncStyle(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"}syncShadow(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=Dx(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Zt(t,"fontFamily","Courier"),this.fontSize=Zt(t,"fontSize","16px"),this.fontStyle=Zt(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,i,r){return r===void 0&&(r=!0),this.backgroundColor=rt(t,this.canvas,this.context),this.backgroundColor2=rt(i,this.canvas,this.context),this.backgroundHorizontalGradient=r,this.update(!1)}setBackgroundStrokeColor(t,i){return this.backgroundStrokeColor=rt(t,this.canvas,this.context),this.backgroundStrokeLineWidth=i,this.update(!1)}setBackgroundCornerRadius(t,i){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=i,this.update(!1)}setFill(t){return this.color=rt(t,this.canvas,this.context),this.update(!1)}setColor(t){return this.color=rt(t,this.canvas,this.context),this.update(!1)}setStroke(t,i){return t===void 0?this.strokeThickness=0:(i===void 0&&(i=this.strokeThickness),this.stroke=rt(t,this.canvas,this.context),this.strokeThickness=i),this.update(!0)}setShadow(t,i,r,s,n,a){return t===void 0&&(t=0),i===void 0&&(i=0),r===void 0&&(r="#000"),s===void 0&&(s=0),n===void 0&&(n=!1),a===void 0&&(a=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=rt(r,this.canvas,this.context),this.shadowBlur=s,this.shadowStroke=n,this.shadowFill=a,this.update(!1)}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=rt(t,this.canvas,this.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,i,r){return t===void 0&&(t="#000"),i===void 0&&(i=0),r===void 0&&(r=0),this.underlineColor=rt(t,this.canvas,this.context),this.underlineThickness=i,this.underlineOffset=r,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=rt(t,this.canvas,this.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=rie[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,i){return t===void 0&&(t="left"),i===void 0&&(i="top"),this.halign=t,this.valign=i,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,i){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=Zt(i,"fontFamily",this.fontFamily),this.fontSize=Zt(i,"fontSize",this.fontSize),this.fontStyle=Zt(i,"fontStyle",this.fontStyle)),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={};for(var i in Ix)t[i]=this[i];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}},tat={left:le.hleft,center:le.hcenter,right:le.hright},iat={top:le.vtop,center:le.vcenter,bottom:le.vbottom},rie={none:le.NO_WRAP,word:le.WORD_WRAP,char:le.CHAR_WRAP,character:le.CHAR_WRAP},Bf=Nx;var Gx=Phaser.Display.Canvas.CanvasPool,TUe=function(e,t,i){i===void 0&&(i={});var r=Gx.create(this),s=r.getContext("2d");e.syncFont(r,s);var n=s.measureText(t),a=Math.ceil(n.width*e.baselineX),h=a,o=2*h;if(h=h*e.baselineY|0,r.width=a,r.height=o,s.fillStyle="#f00",s.fillRect(0,0,a,o),s.font=e._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(e.testString,0,h),i.left=0,a===0||o===0||!s.getImageData(0,0,a,o))return Gx.remove(r),i;for(var u=s.getImageData(0,0,a,o).data,f=!1,d=0;d<a;d++){for(var v=0;v<o;v++){var c=(v*a+d)*4;if(u[c]!==255){i.left=d,f=!0;break}}if(f)break}return Gx.remove(r),i},sie=TUe;var zs=Phaser.Utils.Objects.GetValue,Bx=class{constructor(t,i,r,s,n){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,i,r,s,n)}setTo(t,i,r,s,n){return this.setPosition(t,i),this.setRadius(n),this.setSize(r,s),this}setPosition(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.x=t,this.y=i,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,i){return this.width=t,this.height=i,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var i,r;typeof t=="number"?(i=t,r=t):(i=zs(t,"x",0),r=zs(t,"y",0));var s=this.cornerRadius;s.tl=Uf(zs(t,"tl",void 0),i,r),s.tr=Uf(zs(t,"tr",void 0),i,r),s.bl=Uf(zs(t,"bl",void 0),i,r),s.br=Uf(zs(t,"br",void 0),i,r)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){kf(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){kf(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){kf(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){kf(this.cornerRadius.br,t)}},Uf=function(e,t,i){return e===void 0?{x:t,y:i}:typeof e=="number"?{x:e,y:e}:e},kf=function(e,t){typeof t=="number"?(e.x=t,e.y=t):(e.x=zs(t,"x",0),e.y=zs(t,"y",0))},nie=Bx;var Yf=Phaser.Math.DegToRad,aie=Yf(0),hie=Yf(90),oie=Yf(180),uie=Yf(270),EUe=function(e,t,i,r,s,n,a){var h=new nie(t,i,r,s,n),o=h.minWidth,u=h.minHeight,f=r>=o?1:r/o,d=s>=u?1:s/u,v=h.cornerRadius,c,p,m,x,g;e.save(),e.beginPath(),e.translate(t,i),c=v.br,p=c.x*f,m=c.y*d,x=r-p,g=s-m,e.moveTo(r,g),p>0&&m>0?zf(e,x,g,p,m,aie,hie,a):(e.lineTo(r,s),e.lineTo(x,s)),c=v.bl,p=c.x*f,m=c.y*d,x=p,g=s-m,e.lineTo(p,s),p>0&&m>0?zf(e,x,g,p,m,hie,oie,a):(e.lineTo(0,s),e.lineTo(0,g)),c=v.tl,p=c.x*f,m=c.y*d,x=p,g=m,e.lineTo(0,g),p>0&&m>0?zf(e,x,g,p,m,oie,uie,a):(e.lineTo(0,0),e.lineTo(x,0)),c=v.tr,p=c.x*f,m=c.y*d,x=r-p,g=m,e.lineTo(x,0),p>0&&m>0?zf(e,x,g,p,m,uie,aie,a):(e.lineTo(r,0),e.lineTo(r,g)),e.closePath(),e.restore()},zf=function(e,t,i,r,s,n,a,h){if(h==null)e.ellipse(t,i,r,s,0,n,a);else{h+=1;for(var o,u,f,d=(a-n)/h,v=0;v<=h;v++)f=n+d*v,o=t+r*Math.cos(f),u=i+s*Math.sin(f),e.lineTo(o,u)}},lie=EUe;var SUe=function(e,t,i,r,s,n,a,h,o,u,f,d,v){if(lie(t,i,r,s,n,a,v),h!=null){if(f!=null){var c;d?c=t.createLinearGradient(0,0,s,0):c=t.createLinearGradient(0,0,0,n),c.addColorStop(0,h),c.addColorStop(1,f),h=c}t.fillStyle=h,t.fill()}o!=null&&u>0&&(t.strokeStyle=o,t.lineWidth=u,t.stroke())},fie=SUe;var _Ue=function(e,t,i,r,s,n,a,h){if(!(t==null&&i==null)){var o=e.canvas.width,u=e.canvas.height;i==null&&(r=0);var f=r/2;o-=r,u-=r,fie(e.canvas,e.context,f,f,o,u,s,t,i,r,n,a,h)}},die=_Ue;var vie={draw(e,t,i,r){var s=this.penManager;this.hitAreaManager.clear();var n=this.context;n.save();var a=this.defaultStyle;this.clear(),die(this,a.backgroundColor,a.backgroundStrokeColor,a.backgroundStrokeLineWidth,a.backgroundCornerRadius,a.backgroundColor2,a.backgroundHorizontalGradient,a.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var h=a.halign,o=a.valign,u,f=a.lineHeight,d=s.lines,v=d.length,c=a.maxLines,p,m,x;c>0&&v>c?(p=c,o==="center"?m=Math.floor((v-p)/2):o==="bottom"?m=v-p:m=0):(p=v,m=0),x=m+p;var g,y,T=this.rtl,S=T?this.parent.width:void 0;o==="center"?y=Math.max((r-p*f)/2,0):o==="bottom"?y=Math.max(r-p*f-2,0):y=0,y+=t;for(var E=m;E<x;E++)if(u=s.getLineWidth(E),u!==0){for(var _=d[E],w=_.length,R=h,q=0;q<w;q++){var A=_[q].prop.align;if(A!==void 0){R=A;break}}R==="center"?g=(i-u)/2:R==="right"?g=T?0:i-u:g=T?i-u:0,g+=e;for(var q=0;q<w;q++)this.drawPen(_[q],g,y,S)}n.restore()},drawPen(e,t,i,r){t+=e.x,i+=e.y+(e.prop.y||0),r!==void 0&&(t=r-t);var s=this.canvas,n=this.context;n.save();var a=this.parser.propToContextStyle(this.defaultStyle,e.prop);a.buildFont(),a.syncFont(s,n),a.syncStyle(s,n),a.underlineThickness>0&&e.width>0&&this.drawUnderline(t,i,e.width,a),e.isTextPen&&this.drawText(t,i,e.text,a),e.isImagePen&&this.drawImage(t,i,e.prop.img,a),n.restore(),e.hasAreaMarker&&e.width>0&&this.hitAreaManager.add(e.prop.area,t,i-this.startYOffset,e.width,this.defaultStyle.lineHeight)},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawUnderline(e,t,i,r){t+=r.underlineOffset-r.underlineThickness/2,this.autoRound&&(e=Math.round(e),t=Math.round(t));var s=this.context,n=s.lineCap;s.lineCap="butt",s.strokeStyle=r.underlineColor,s.lineWidth=r.underlineThickness,s.beginPath(),s.moveTo(e,t),s.lineTo(e+i,t),s.stroke(),s.lineCap=n},drawText(e,t,i,r){this.autoRound&&(e=Math.round(e),t=Math.round(t));var s=this.context;r.stroke&&r.stroke!=="none"&&r.strokeThickness>0&&(r.syncShadow(s,r.shadowStroke),s.strokeText(i,e,t)),r.color&&r.color!=="none"&&(r.syncShadow(s,r.shadowFill),s.fillText(i,e,t))},drawImage(e,t,i,r){t-=this.startYOffset,this.parent.imageManager.draw(i,this.context,e,t,this.autoRound)}};var Ux=class{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}},cie=Ux;var Br=cie;var xn=Phaser.Utils.Objects.GetValue,wUe=le.NO_NEWLINE,pie=le.RAW_NEWLINE,kx=class{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=xn(t,"text",""),this.x=xn(t,"x",0),this.y=xn(t,"y",0),this.width=xn(t,"width",0);var i=xn(t,"prop",null);i===null&&(i={}),this.prop=i,this.newLineMode=xn(t,"newLineMode",0),this.startIndex=xn(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===pie&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==wUe&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===pie&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}},mie=kx;var CUe=function(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t];return e},gie=CUe;var RUe=function(e,t){var i=Array.isArray(e);if(t===void 0?t=i?[]:{}:gie(t),i){t.length=e.length;for(var r=0,s=e.length;r<s;r++)t[r]=e[r]}else for(var n in e)t[n]=e[n];return t},Ma=RUe;var qUe=function(){},xie=qUe;var Xf=Phaser.Utils.Objects.GetFastValue,yie=le.NO_NEWLINE,AUe=le.WRAPPED_NEWLINE,PUe=new Br,MUe=new Br,ao=class{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=Xf(t,"pensPool",PUe),this.LinesPool=Xf(t,"linesPool",MUe),this.tagToText=Xf(t,"tagToText",xie),this.tagToTextScope=Xf(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,i=this.lines.length;t<i;t++)this.lines[t].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,i,r,s,n,a){var h=this.PensPool.pop();return h==null&&(h=new mie),yn.text=t,yn.x=i,yn.y=r,yn.width=s,yn.prop=n,yn.newLineMode=a,h.resetFromJSON(yn),this.addPen(h),this}addImagePen(t,i,r,s){return this.addTextPen("",t,i,r,s,yie),this}addNewLinePen(){var t=this.lastPen,i=t?t.lastX:0,r=t?t.y:0,s=t?Ma(t.prop):null;return this.addTextPen("",i,r,0,s,AUe),this}addPen(t){var i=this.lastPen;i==null?t.startIndex=0:t.startIndex=i.endIndex,this.pens.push(t);var r=this.lastLine;r==null&&(r=this.LinesPool.pop()||[],this.lines.push(r)),r.push(t),t.newLineMode!==yie&&(r=this.LinesPool.pop()||[],this.lines.push(r)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new ao),t.clear();for(var i=0,r=this.lines.length;i<r;i++)for(var s=this.lines[i],n=0,a=s.length;n<a;n++){var h=s[n];t.addPen(h.text,h.x,h.y,h.width,Ma(h.prop),h.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var i=this.lines[t];return i&&i[0]?i[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var i,r=!1,s;for(i=t;i>=0&&(s=this.lines[i],r=s!=null&&s.length>0,!r);i--);if(!r)return 0;var n=s[s.length-1];return n.endIndex}getLineWidth(t){var i=this.lines[t];if(!i)return 0;var r=i[i.length-1];if(r==null)return 0;var s=r.lastX;return s}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,i=0,r=0,s=this.lines.length;r<s;r++)t=this.getLineWidth(r),t>i&&(i=t);return this.maxLinesWidth=i,i}getLineWidths(){for(var t=[],i=0,r=this.lines.length;i<r;i++)t.push(this.getLineWidth(i));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",i=this.pens,r=0,s=i.length;r<s;r++)t+=i[r].plainText;return t}get rawTextLength(){for(var t=0,i=this.pens,r=0,s=this.pens.length;r<s;r++)t+=i[r].rawTextLength;return t}getSliceTagText(t,i,r){if(t===void 0&&(t=0),i===void 0){var s=this.lastPen;if(s==null)return"";i=s.endIndex}r===void 0&&(r=!1);for(var n="",a,h,o,u,f,d,v,c,p=0,m=this.pens.length;p<m&&(h=this.pens[p],f=h.endIndex,!(!(f<=t)&&(h=this.pens[p],o=r?h.wrapText:h.plainText,v=h.prop,u=h.startIndex,d=u>=t&&f<=i,d||(o=o.substring(t-u,i-u)),this.tagToTextScope?n+=this.tagToText.call(this.tagToTextScope,o,v,c):n+=this.tagToText(o,v,c),c=v,f>=i)));p++);return n}get length(){return this.lines.length}set length(t){this.clear()}},yn={},Tie=ao;var bUe=Phaser.Geom.Rectangle,Eie=new Br,zx=class{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return Eie.pushMultiple(this.hitAreas),this}add(t,i,r,s,n){var a=Eie.pop();return a===null?a=new bUe(i,r,s,n):a.setTo(i,r,s,n),a.key=t,this.hitAreas.push(a),this}getFirst(t,i){for(var r=0,s=this.hitAreas.length;r<s;r++){var n=this.hitAreas[r];if(n.contains(t,i))return n}return null}drawBounds(t,i,r){i===void 0&&(i=16777215),r&&t.save().scaleCanvas(r.scaleX,r.scaleY).rotateCanvas(r.rotation).translateCanvas(r.x,r.y);for(var s=0,n=this.hitAreas.length;s<n;s++){var a=this.hitAreas[s];t.lineStyle(1,i).strokeRect(a.x,a.y,a.width,a.height)}return r&&t.restore(),this}},Sie=zx;var LUe=function(){this.parent.on("pointerdown",OUe,this).on("pointerup",FUe,this).on("pointermove",Yx,this).on("pointerover",Yx,this).on("pointerout",function(e,t){Yx.call(this,e,null,null,t)},this)},OUe=function(e,t,i,r){var s=this.hitAreaManager.getFirst(t,i);s!==null&&ho.call(this,"areadown",s.key,e,t,i)},FUe=function(e,t,i,r){var s=this.hitAreaManager.getFirst(t,i);s!==null&&ho.call(this,"areaup",s.key,e,t,i)},Yx=function(e,t,i,r){if(t===null){this.lastHitAreaKey!==null&&ho.call(this,"areaout",this.lastHitAreaKey,e),this.lastHitAreaKey=null;return}var s=this.hitAreaManager.getFirst(t,i),n=s?s.key:null;this.lastHitAreaKey!==n&&(this.lastHitAreaKey!==null&&ho.call(this,"areaout",this.lastHitAreaKey,e),n!==null&&ho.call(this,"areaover",n,e,t,i),this.lastHitAreaKey=n)},ho=function(e,t,i,r,s){this.parent.emit(`${e}-${t}`,i,r,s),this.parent.emit(e,t,i,r,s)},_ie=LUe;var Xx=new Br,wie=function(e){!e||Xx.push(e)},Cie=function(e){!e||Xx.pushMultiple(e)},Ur=function(e,t,i){var r=Xx.pop();return r===null&&(r={}),r.text=e,r.width=t,r.newLineMode=i,r};var DUe=le.NO_NEWLINE,IUe=le.RAW_NEWLINE,Vx=le.WRAPPED_NEWLINE,Rie=le.NO_WRAP,NUe=le.WORD_WRAP,GUe=le.CHAR_WRAP,BUe=le.SPLITREGEXP,qie=function(e,t,i,r,s){r<=0&&(i=Rie);var n=[];if(!e||!e.length)return n;for(var a=i===Rie,h=i===NUe,o=e.split(BUe),u,f,d,v=0,c=o.length;v<c;v++){if(u=o[v],d=v===c-1?DUe:IUe,a){var p=t(u);n.push(Ur(u,p,d));continue}if(f=v===0?r-s:r,u.length<=100){var p=t(u);if(p<=f){n.push(Ur(u,p,d));continue}}var m,x;h?(m=u.split(" "),x=m[m.length-1]==="",x&&(m.length-=1)):m=u;for(var g,y,T,S="",E=0,_,w=h?t(" "):void 0,R=0,q=m.length;R<q;R++){if(g=m[R],y=t(g),T=R===q-1,h&&(!T||x)&&(g+=" ",y+=w),h&&y>r){S!==""?n.push(Ur(S,E,Vx)):R===0&&s>0&&n.push(Ur("",0,Vx)),n.push(...qie(g,t,GUe,r,0));var A=n.pop();S=A.text,E=A.width,wie(A),S===" "&&(S="",E=0);continue}_=E+y,_>f?(n.push(Ur(S,E,Vx)),S=g,E=y,f=r):(S+=g,E=_),T&&n.push(Ur(S,E,d))}}return n},Aie=qie;var Vf=Phaser.Utils.Objects.GetValue,UUe=le.NO_WRAP,kUe=le.NO_NEWLINE,Wf=class{constructor(t){this.parent=t.parent,this.context=Vf(t,"context",null),this.canvas=this.context.canvas,this.parser=Vf(t,"parser",null),this.defaultStyle=Vf(t,"style",null),this.autoRound=!0,this.pensPool=Vf(t,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new Sie,this.lastHitAreaKey=null;var i=this.context;this.getTextWidth=function(r){return i.measureText(r).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(t,i,r,s,n){if(n===void 0&&(n=this.penManager),n.clear(),t==="")return n;var a=this.parent.style;if(a.isWrapFitMode){var h=this.parent.padding;r=a.fixedWidth-h.left-h.right}for(var o=this.canvas,u=this.context,f=function(G){return u.measureText(G).width},d=0,v=0,c=a.wrapCallback,p=a.wrapCallbackScope,m=!0,x,g,y,T=this.parser.splitText(t),S,E,_=0,w=T.length;_<w;_++)if(S=this.parser.tagTextToProp(T[_],g),x=S.plainText,g=S.prop,g.img){var R=this.imageManager.getOuterWidth(g.img);r>0&&i!==UUe&&r<d+R&&(n.addNewLinePen(),v+=s,d=0),n.addImagePen(d,v,R,Ma(g)),d+=R}else if(x!==""){if(u.save(),y=this.parser.propToContextStyle(this.defaultStyle,g),y.buildFont(),y.syncFont(o,u),y.syncStyle(o,u),!c)E=Aie(x,f,i,r,d);else{E=c.call(p,x,f,r,d),typeof E=="string"&&(E=E.split(`
`));for(var P,q=0,A=E.length;q<A;q++)P=E[q],typeof P=="string"?E[q]=Ur(P,f(P),q<A-1?2:0):m=!1}for(var P,q=0,A=E.length;q<A;q++)P=E[q],n.addTextPen(P.text,d,v,P.width,Ma(g),P.newLineMode),P.newLineMode!==kUe?(d=0,v+=s):d+=P.width;m&&Cie(E),E=null,u.restore()}for(var _=0,w=this.lines.length;_<w;_++){var L=this.lines[_],b=L[L.length-1];b&&(b.width+=this.parser.getStrokeThinkness(this.defaultStyle,b.prop))}return n}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,i=this.defaultStyle.maxLines;return i>0&&t>i&&(t=i),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,i=this.defaultStyle.lineHeight*t;return t>0&&(i-=this.defaultStyle.lineSpacing),i}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new Tie({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,i,r){var s;if(t==null)s=this.penManager.plainText;else{var n,a=this.parser.splitText(t,1);s="";for(var h=0,o=a.length;h<o;h++)s+=a[h]}return(i!=null||r!=null)&&(i==null&&(i=0),r==null&&(r=s.length),s=s.substring(i,r)),s}getPenManager(t,i){if(t===void 0)return this.copyPenManager(i,this.penManager);i===void 0&&(i=this.newPenManager());var r=this.defaultStyle;return this.updatePenManager(t,r.wrapMode,r.wrapWidth,r.lineHeight,i),i}getText(t,i,r,s){if(t==null)return this.penManager.getSliceTagText(i,r,s);var n=this.tmpPenManager,a=this.defaultStyle;return this.updatePenManager(t,a.wrapMode,a.wrapWidth,a.lineHeight,n),n.getSliceTagText(i,r,s)}copyPenManager(t,i){return i===void 0&&(i=this.penManager),i.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}},zUe={setInteractive:_ie};Object.assign(Wf.prototype,vie,zUe);var Pie=Wf;var Wx=Phaser.Utils.Objects.GetValue,YUe=function(e,t){t===void 0&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var i=t.key,r=t.frame,s=t.width,n=t.height;if(s===void 0||n===void 0){var a=this.textureManager.getFrame(i,r),h=a?a.cutWidth:0,o=a?a.cutHeight:0;s===void 0&&n===void 0?(s=h,n=o):s===void 0?s=h*(n/o):n===void 0&&(n=o*(s/h))}this.images[e]={key:i,frame:r,width:s,height:n,y:Wx(t,"y",0),left:Wx(t,"left",0),right:Wx(t,"right",0)}},Hf=YUe;var XUe=function(e,t,i,r,s){var n=this.get(e);i+=n.left,r+=n.y,s&&(i=Math.round(i),r=Math.round(r));var a=this.textureManager.getFrame(n.key,n.frame);t.drawImage(a.source.image,a.cutX,a.cutY,a.cutWidth,a.cutHeight,i,r,n.width,n.height)},Mie=XUe;var Kf=class{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,i){if(typeof t=="string")Hf.call(this,t,i);else if(Array.isArray(t))for(var r=t,s=0,n=r.length;s<n;s++)Hf.call(this,r[s]);else{var r=t;for(var t in r)Hf.call(this,t,r[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var i=this.get(t);return i?i.width+i.left+i.right:0}getFrame(t){var i=this.get(t);return i?this.textureManager.getFrame(i.key,i.frame):void 0}hasTexture(t){return!!this.getFrame(t)}},VUe={draw:Mie};Object.assign(Kf.prototype,VUe);var bie=Kf;var WUe=function(e,t,i,r,s,n,a){var h=e.sys.textures,o=e.renderer;r===void 0&&(r=0),s===void 0&&(s=0),n===void 0&&(n=t.width),a===void 0&&(a=t.height);var u;h.exists(i)?u=h.get(i):u=h.createCanvas(i,n,a);var f=u.getSourceImage();f.width!==n&&(f.width=n),f.height!==a&&(f.height=a);var d=f.getContext("2d");d.clearRect(0,0,n,a),d.drawImage(t,r,s,n,a),o.gl&&u&&o.canvasToTexture(f,u.source[0].glTexture,!0,0)},Lie=WUe;var HUe=Phaser.Utils.Objects.IsPlainObject,KUe=Phaser.DOM.AddToDOM,Oie=Phaser.Display.Canvas.CanvasPool,Fie=Phaser.GameObjects.GameObject,pr=Phaser.Utils.Objects.GetValue,ZUe=Phaser.DOM.RemoveFromDOM,JUe=le.SPLITREGEXP,Hx={},Zf=class extends Fie{constructor(t,i,r,s,n,a,h){if(HUe(i)){var o=i;i=pr(o,"x",0),r=pr(o,"y",0),s=pr(o,"text",""),n=pr(o,"style","")}if(i===void 0&&(i=0),r===void 0&&(r=0),super(t,a),this.renderer=t.sys.game.renderer,this.setPosition(i,r),this.setOrigin(0,0),this.initPipeline(),this.canvas=Oie.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var u=n.align;delete n.align,n.halign=u}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new Bf(this,n),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),Hx.hasOwnProperty(a)||(Hx[a]=new Br),this.canvasText=new Pie({parent:this,context:this.context,parser:h,style:this.style,pensPool:Hx[a]}),this.parser=h,this.initRTL(),n&&n.padding&&this.setPadding(n.padding),this.setText(s),t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&ZUe(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),Oie.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",KUe(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,i){return this.style.setFixedSize(t,i)}setBackgroundColor(t,i,r){return this.style.setBackgroundColor(t,i,r)}setBackgroundStrokeColor(t,i){return this.style.setBackgroundStrokeColor(t,i)}setBackgroundCornerRadius(t,i){return this.style.setBackgroundCornerRadius(t,i)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,i){return this.style.setStroke(t,i)}setShadow(t,i,r,s,n,a){return this.style.setShadow(t,i,r,s,n,a)}setShadowOffset(t,i){return this.style.setShadowOffset(t,i)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}setXOffset(t){return this.style.setXOffset(t)}setPadding(t,i,r,s){if(typeof t=="object"){var n=t,a=pr(n,"x",null);a!==null?(t=a,r=a):(t=pr(n,"left",0),r=pr(n,"right",t));var h=pr(n,"y",null);h!==null?(i=h,s=h):(i=pr(n,"top",0),s=pr(n,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),r===void 0&&(r=t),s===void 0&&(s=i);return this.padding.left=t,this.padding.top=i,this.padding.right=r,this.padding.bottom=s,this.updateText(!1)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}updateText(t){t===void 0&&(t=!0);var i=this.canvasText,r=this.style;t&&i.updatePenManager(this._text,r.wrapMode,r.wrapWidth,r.lineHeight);var s=this.padding,n,a,h=Math.ceil(i.linesWidth);r.fixedWidth===0?(this.width=h+s.left+s.right,n=h):(this.width=r.fixedWidth,n=this.width-s.left-s.right,n<h&&(n=h)),r.fixedHeight===0?(this.height=i.linesHeight+s.top+s.bottom,a=i.linesHeight):(this.height=r.fixedHeight,a=this.height-s.top-s.bottom,a<i.linesHeight&&(a=i.linesHeight));var o=this.width,u=this.height;this.updateDisplayOrigin();var f=r.resolution;o*=f,u*=f,o=Math.max(Math.ceil(o),1),u=Math.max(Math.ceil(u),1);var d=this.canvas,v=this.context;d.width!==o||d.height!==u?(d.width=o,d.height=u,this.frame.setSize(o,u)):v.clearRect(0,0,o,u),v.save(),v.scale(f,f);var c=this.style.rtl?s.right:s.left,p=s.top;i.draw(c,p,n,a),v.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(d,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var m=this.input;return m&&!m.customHitArea&&(m.hitArea.width=this.width,m.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,i){return this.style.setTextMetrics(t,i)}toJSON(){var t=Bt.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t}setInteractive(t,i,r){var s=!!this.input;return Fie.prototype.setInteractive.call(this,t,i,r),s||this.canvasText.setInteractive(),this}getWrappedText(t,i,r){return t=this.canvasText.getText(t,i,r,!0),t.split(JUe)}getPlainText(t,i,r){return this.canvasText.getPlainText(t,i,r)}getText(t,i,r,s){return s===void 0&&(s=!1),this.canvasText.getText(t,i,r,s)}getSubString(t,i,r){return this.getText(t,i,r)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,i){return this.canvasText.getPenManager(t,i)}setSize(t,i){return this.setFixedSize(t,i)}resize(t,i){return this.setFixedSize(t,i)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return this._imageManager||(this._imageManager=new bie(this.scene)),this._imageManager}addImage(t,i){return this.imageManager.add(t,i),this}drawAreaBounds(t,i){return this.canvasText.hitAreaManager.drawBounds(t,i,this),this}measureTextMargins(t,i){return sie(this.style,t,i)}generateTexture(t,i,r,s,n){var a=this.canvas;return s===void 0?s=a.width:s*=this.resolution,n===void 0?n=a.height:n*=this.resolution,Lie(this.scene,a,t,i,r,s,n),this}},Bt=Phaser.GameObjects.Components;Phaser.Class.mixin(Zf,[Bt.Alpha,Bt.BlendMode,Bt.ComputedSize,Bt.Crop,Bt.Depth,Bt.Flip,Bt.GetBounds,Bt.Mask,Bt.Origin,Bt.Pipeline,Bt.ScrollFactor,Bt.Tint,Bt.Transform,Bt.Visible,iie]);var Die=Zf;var Ut=function(e,t){return t===void 0?`\\[${e}\\]`:`\\[${e}=(${t})\\]`},ui=function(e){return`\\[/${e}\\]`},Iie="[-.0-9]+",Kx="[a-z]+|#[0-9abcdef]+",Zx="[^\\]]+",Nie="esc",Gie=Ut(Nie),Bie=ui(Nie),Uie="raw",kie=Ut(Uie),zie=ui(Uie),Yie="b",Xie=Ut(Yie),Vie=ui(Yie),Wie="i",Hie=Ut(Wie),Kie=ui(Wie),Zie="size",Jie=Ut(Zie,Iie),Qie=ui(Zie),$ie="color",jie=Ut($ie,Kx),ere=ui($ie),Jx="u",tre=Ut(Jx),ire=Ut(Jx,Kx),rre=ui(Jx),sre="shadow",nre=Ut(sre),are=ui(sre),Qx="stroke",hre=Ut(Qx),ore=Ut(Qx,Kx),ure=ui(Qx),lre="y",fre=Ut(lre,Iie),dre=ui(lre),vre="img",cre=Ut(vre,Zx),pre=ui(vre),mre="area",gre=Ut(mre,Zx),xre=ui(mre),yre="align",Tre=Ut(yre,Zx),Ere=ui(yre),Jf=new RegExp(Gie,"i"),oo=new RegExp(Bie,"i"),Qf=new RegExp(kie,"i"),uo=new RegExp(zie,"i"),Sre=new RegExp(Xie,"i"),_re=new RegExp(Vie,"i"),wre=new RegExp(Hie,"i"),Cre=new RegExp(Kie,"i"),$x=new RegExp(Jie,"i"),Rre=new RegExp(Qie,"i"),jx=new RegExp(jie,"i"),qre=new RegExp(ere,"i"),Are=new RegExp(tre,"i"),ey=new RegExp(ire,"i"),Pre=new RegExp(rre,"i"),Mre=new RegExp(nre,"i"),bre=new RegExp(are,"i"),Lre=new RegExp(hre,"i"),ty=new RegExp(ore,"i"),Ore=new RegExp(ure,"i"),iy=new RegExp(fre,"i"),Fre=new RegExp(dre,"i"),ry=new RegExp(cre,"i"),Dre=new RegExp(pre,"i"),sy=new RegExp(gre,"i"),Ire=new RegExp(xre,"i"),ny=new RegExp(Tre,"i"),Nre=new RegExp(Ere,"i"),$f=new RegExp([kie,zie,Gie,Bie,Xie,Vie,Hie,Kie,Jie,Qie,jie,ere,tre,ire,rre,nre,are,hre,ore,ure,fre,dre,cre,pre,gre,xre,Tre,Ere].join("|"),"ig");var QUe=function(e,t){for(var i=[],r=0,s=!1,n=!1;;){var a=$f.exec(e);if(!a)break;var h=a[0];if(n)if(oo.test(h))n=!1;else continue;else if(s)if(uo.test(h))s=!1;else continue;else Jf.test(h)?n=!0:Qf.test(h)&&(s=!0);var o=$f.lastIndex-h.length;if(r<o){var u=e.substring(r,o);i.push(u)}t===void 0&&i.push(h),r=$f.lastIndex}var f=e.length;return r<f&&i.push(e.substring(r,f)),i},Gre=QUe;var qt=!1,At=!0,$Ue={plainText:null,prevProp:null},jUe=function(e,t){t==null&&(t={});var i="";if(t.img&&fe(t,qt,"img"),t.esc)oo.test(e)?fe(t,qt,"esc"):i=e;else if(t.raw)uo.test(e)?fe(t,qt,"raw"):i=e;else if(Jf.test(e))fe(t,At,"esc",!0);else if(oo.test(e))fe(t,qt,"esc");else if(Qf.test(e))fe(t,At,"raw",!0);else if(uo.test(e))fe(t,qt,"raw");else if(Sre.test(e))fe(t,At,"b",!0);else if(_re.test(e))fe(t,qt,"b");else if(wre.test(e))fe(t,At,"i",!0);else if(Cre.test(e))fe(t,qt,"i");else if($x.test(e)){var r=e.match($x);fe(t,At,"size",`${r[1]}px`)}else if(Rre.test(e))fe(t,qt,"size");else if(jx.test(e)){var r=e.match(jx);fe(t,At,"color",r[1])}else if(qre.test(e))fe(t,qt,"color");else if(Are.test(e))fe(t,At,"u",!0);else if(ey.test(e)){var r=e.match(ey);fe(t,At,"u",r[1])}else if(Pre.test(e))fe(t,qt,"u");else if(Mre.test(e))fe(t,At,"shadow",!0);else if(bre.test(e))fe(t,qt,"shadow");else if(Lre.test(e))fe(t,At,"stroke",!0);else if(ty.test(e)){var r=e.match(ty);fe(t,At,"stroke",r[1])}else if(Ore.test(e))fe(t,qt,"stroke");else if(iy.test(e)){var r=e.match(iy);fe(t,At,"y",parseFloat(r[1]))}else if(Fre.test(e))fe(t,qt,"y");else if(ry.test(e)){var r=e.match(ry);fe(t,At,"img",r[1])}else if(Dre.test(e))fe(t,qt,"img");else if(sy.test(e)){var r=e.match(sy);fe(t,At,"area",r[1])}else if(Ire.test(e))fe(t,qt,"area");else if(ny.test(e)){var r=e.match(ny);fe(t,At,"align",r[1])}else Nre.test(e)?fe(t,qt,"align"):i=e;var s=$Ue;return s.plainText=i,s.prop=t,s},fe=function(e,t,i,r){return t===At?e[i]=r:e.hasOwnProperty(i)&&delete e[i],e},Bre=jUe;var eke=function(e,t){var i=ike;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")?i.fontFamily=t.family:i.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var r=t.size;typeof r=="number"&&(r=`${r}px`),i.fontSize=r}else i.fontSize=e.fontSize;i.fontStyle=tke(t.b,t.i),t.hasOwnProperty("color")?i.color=t.color:i.color=e.color,t.hasOwnProperty("stroke")?t.stroke===!0?(i.stroke=e.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=e.stroke,i.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(i.shadowColor=e.shadowColor,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=t.shadow,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(i.underlineColor=e.underlineColor,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor=t.u,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),i},tke=function(e,t){return e&&t?"bold italic":e?"bold":t?"italic":""},ike=new Bf,Ure=eke;var rke=function(e,t,i){i==null&&(i=ske);var r=[];for(var s in i)t.hasOwnProperty(s)||r.push(`[/${s}]`);for(var s in t){var n=t[s];if(i[s]!==n)switch(s){case"size":r.push(`[size=${n.replace("px","")}]`);break;case"color":case"stroke":case"y":case"img":case"area":case"align":r.push(`[${s}=${n}]`);break;case"u":n===!0?r.push("[u]"):r.push(`[u=${n}]`);break;default:r.push(`[${s}]`);break}}return r.push(e),r.join("")},ske={},kre=rke;var jf=class{getStrokeThinkness(t,i){var r;return i.hasOwnProperty("stroke")?r=t.strokeThickness:r=0,r}},nke={splitText:Gre,tagTextToProp:Bre,propToContextStyle:Ure,propToTagText:kre};Object.assign(jf.prototype,nke);var zre=jf;var ay=class extends Die{constructor(t,i,r,s,n){var a=new zre(n);super(t,i,r,s,n,"rexBBCodeText",a)}},ba=ay;function Yre(e,t,i,r){var s=new ba(this.scene,e,t,i,r);return this.scene.add.existing(s),s}var ed=Phaser.Utils.Objects.GetAdvancedValue,ake=Phaser.GameObjects.BuildGameObject;function Xre(e,t){e===void 0&&(e={}),t!==void 0&&(e.add=t);var i=ed(e,"text",""),r=ed(e,"style",null),s=ed(e,"padding",null);s!==null&&(r.padding=s);var n=new ba(this.scene,0,0,i,r);return ake(this.scene,n,e),n.autoRound=ed(e,"autoRound",!0),n}var Vre=function(e){return e==null||e===""||e.length===0},hke=function(e,t,i){var r=e;if(!Vre(t)){typeof t=="string"&&(t=t.split("."));for(var s,n=0,a=t.length;n<a;n++){if(s=t[n],r[s]==null||typeof r[s]!="object"){var h;n===a-1?i===void 0?h={}:h=i:h={},r[s]=h}r=r[s]}}return r},oke=function(e,t,i){if(typeof e=="object"){if(Vre(t)){if(i==null)return;typeof i=="object"&&(e=i)}else{typeof t=="string"&&(t=t.split("."));var r=t.pop(),s=hke(e,t);s[r]=i}return e}},Wre=oke;var hy=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t),t.registerGameObject("rexBBCodeText",Yre,Xre)}start(){var t=this.game.events;t.on("destroy",this.destroy,this)}};Wre(window,"RexPlugins.GameObjects.BBCodeText",ba);var Hre=hy;var Kre={setEventEmitter(e,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var uke=Phaser.Scene,lke=function(e){return e instanceof uke},td=lke;var fke=function(e){if(e==null||typeof e!="object")return null;if(td(e))return e;if(e.scene&&td(e.scene))return e.scene;if(e.parent&&e.parent.scene&&td(e.parent.scene))return e.parent.scene},Zre=fke;var dke=Phaser.Utils.Objects.GetValue,id=class{constructor(t,i){this.parent=t,this.scene=Zre(t),this.isShutdown=!1,this.setEventEmitter(dke(i,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,i){this.destroy(i)}};Object.assign(id.prototype,Kre);var Jre=id;var vke=Phaser.GameObjects.Text,cke=function(e){return e instanceof vke},Qre=cke;var pke=Phaser.GameObjects.BitmapText,mke=function(e){return e instanceof pke},$re=mke;var lo=0,fo=1,vo=2;var gke=function(e){var t;return $re(e)?t=vo:Qre(e)?t=lo:t=fo,t},rd=gke;var xke=function(e,t){var i=rd(e);switch(i){case lo:e.style.syncFont(e.canvas,e.context),t=e.runWordWrap(t);break;case fo:t=e.getText(t,void 0,void 0,!0);break;case vo:t=e.setText(t).getTextBounds().wrappedText;break}return t},jre=xke;var yke=function(e,t){var i=rd(e);switch(i){case lo:var n=e.style,r=n.wordWrapWidth,s=n.wordWrapCallback;n.wordWrapWidth=0,n.wordWrapCallback=void 0,e.setText(t),n.wordWrapWidth=r,n.wordWrapCallback=s;break;case fo:var n=e.style,a=n.wrapMode;n.wrapMode=0,e.setText(t),n.wrapMode=a;break;case vo:var h=e._maxWidth;e._maxWidth=0,e.setText(t),e._maxWidth=h;break}},ese=yke;var La=Phaser.Utils.Objects.GetFastValue,oy=Phaser.Utils.Objects.GetValue,uy=class extends Jre{constructor(t,i){super(t,i),this.timer=null,this.resetFromJSON(i)}resetFromJSON(t){this.setTextWrapEnable(oy(t,"wrap",!1)),this.setTypeMode(oy(t,"typeMode",0)),this.setTypeSpeed(oy(t,"speed",333)),this.setTextCallback=La(t,"setTextCallback",null),this.setTextCallbackScope=La(t,"setTextCallbackScope",null),this.setTypingContent(La(t,"text","")),this.typingIdx=La(t,"typingIdx",0),this.insertIdx=La(t,"insertIdx",null);var i=La(t,"elapsed",null);return i!==null&&this.start(void 0,void 0,this.typingIdx,i),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=Tke[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var i=tse(t);this.textWrapEnable&&(i=jre(this.parent,i)),this._text=i}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,i,r,s){return t!==void 0&&this.setTypingContent(t),i!==void 0&&(this.speed=i),r===void 0&&(r=0),this.typingIdx=r+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(s)),this}appendText(t){var i=this.text.concat(tse(t));return this.isTyping?this.setTypingContent(i):this.start(i,void 0,this.textLen),this}stop(t){var i=this.getTimer();return i&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,i,r,s){var n;if(s===0){var a=0,h=i;this.insertIdx=h,n=this.getSubString(t,a,h)}else if(s===1){var h=r,a=h-i;this.insertIdx=0,n=this.getSubString(t,a,h)}else if(s===2){var o=r/2,a=Math.floor(o-i/2),h=a+i;this.insertIdx=i%2?i:0,n=this.getSubString(t,a,h)}else if(s===3){var u=Math.floor(i/2),f;if(u>0){var h=r,a=h-u;f=this.getSubString(t,a,h)}else f="";var d=i-u,v;if(d>0){var a=0,h=a+d;this.insertIdx=h,v=this.getSubString(t,a,h)}else v="",this.insertIdx=0;n=v+f}return n}startTimer(t){this.timer&&this.freeTimer();var i,r;return t===void 0?(i=0,r=0):(i=this.speed,r=t),this.timer=this.scene.time.addEvent({delay:0,startAt:r,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?ese(this.parent,t):this.parent.setText(t)}getTextLength(t){var i=this.parent,r;return i.getPlainText?r=i.getPlainText(t).length:r=t.length,r}getSubString(t,i,r){var s=this.parent,n;return s.getSubString?n=s.getSubString(t,i,r):n=t.slice(i,r),n}},tse=function(e){return Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e},Tke={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},ise=uy;var rse=ise;var ly=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){var t=this.game.events;t.on("destroy",this.destroy,this)}add(t,i){return new rse(t,i)}},sse=ly;var nse=1e3,Eke={type:Aa.AUTO,backgroundColor:"#000000",scale:{parent:"phaser-game",mode:Aa.Scale.FIT,autoCenter:Aa.Scale.CENTER_BOTH,width:nse,height:nse},audio:{noAudio:!0},scene:[eo,ro,so],plugins:{global:[{key:"rexBBCodeTextPlugin",plugin:Hre,start:!0},{key:"rexTextTypingPlugin",plugin:sse,start:!0}]}};window.addEventListener("load",()=>cy(void 0,null,function*(){let e=new Aa.Game(Eke),t=new URL(window.location.href).searchParams,i=h=>[...Array(h)].map(()=>(~~(Math.random()*36)).toString(36)).join(""),r=t.get("SONA_ID")||t.get("PROLIFIC_PID")||t.get("id")||i(8),s=270,n=new ase.default().getResult(),a={id:r.slice(0,8),is_prolific:t.get("PROLIFIC_PID")!==null,is_sona:t.get("SONA_ID")!==null,institution:"yale",description:"TARGET ONSET v1",datetime:new Date,already_visited:localStorage.getItem("target-onset")!==null,width:e.config.width,height:e.config.height,clamp_size:2.25,renderer:e.config.renderType===Aa.CANVAS?"canvas":"webgl",user_agent:{browser:n.browser,os:n.os},fullscreen_supported:document.fullscreenEnabled,debug:t.get("debug")!==null,version:6,reference_angle:s};e.user_config=a,localStorage.setItem("target-onset",1)}));function If(e){return e.preventDefault(),e.returnValue="","experiment not done yet."}window.addEventListener("beforeunload",If);})();
/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/
