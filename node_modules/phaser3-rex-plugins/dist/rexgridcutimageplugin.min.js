!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).rexgridcutimageplugin=t()}(this,function(){"use strict";function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=i(r);if(o){var n=i(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)}}function B(e,t,n,r,o,c){var i,u,a;null==n&&(n="__BASE"),(a=c)&&"function"==typeof a||(void 0===(u=c)&&(u=","),c="__BASE"===(i=n)?function(e,t){return"".concat(e).concat(u).concat(t)}:function(e,t){return"".concat(i,"_").concat(e).concat(u).concat(t)});for(var f,s=e.sys.textures.get(t),l=s.frames[n],p=l.width/r,h=l.height/o,d=0,y=0,g=0;g<o;g++){for(var b=d=0;b<r;b++)f=c(b,g),s.add(f,0,d+l.cutX,y+l.cutY,p,h),d+=p;y+=h}return{getFrameNameCallback:c,cellWidth:p,cellHeight:h,columns:r,rows:o}}var C=Phaser.Utils.Objects.GetValue,S=Phaser.GameObjects.Image,A=Phaser.Utils.Objects.IsPlainObject,I=Phaser.Math.RotateAround;return function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,Phaser.Plugins.BasePlugin);var e,t,n,r=f(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,e)}return e=o,(t=[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"gridCut",value:function(e,t,n,r){return function(e,t,n,r){A(t)&&(t=C(r=t,"columns",1),n=C(r,"rows",1));for(var o=C(r,"ImageClass",S),c=C(r,"originX",.5),i=C(r,"originY",.5),u=C(r,"add",!0),a=C(r,"align",u),f=C(r,"objectPool",void 0),s=e.scene,l=e.texture.key,p=e.frame.name,h=B(s,l,p,t,n),d=h.getFrameNameCallback,y=e.scaleX,g=e.scaleY,b=e.rotation,v=e.getTopLeft(),m=v.x,O=v.y,P=[],j=h.cellWidth*y,w=h.cellHeight*g,_=0;_<n;_++)for(var x=0;x<t;x++){var R,T=d(x,_);R=f&&0<f.length?f.pop().setTexture(l,T):new o(s,0,0,l,T),u&&s.add.existing(R);var k=m+j*x+c*j,E=O+w*_+i*w;a&&(R.setOrigin(c,i).setPosition(k,E).setScale(y,g).setRotation(b),I(R,m,O,b)),P.push(R)}return P}(e,t,n,r)}}])&&c(e.prototype,t),n&&c(e,n),o}()});
